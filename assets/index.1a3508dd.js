var u4=Object.defineProperty;var c4=(t,e,r)=>e in t?u4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var d4=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cT=(t,e,r)=>(c4(t,typeof e!="symbol"?e+"":e,r),r);var pie=d4((Fo,Bo)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerpolicy&&(d.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?d.credentials="include":u.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();function p1(t,e){const r=Object.create(null),i=t.split(",");for(let u=0;u<i.length;u++)r[i[u]]=!0;return e?u=>!!r[u.toLowerCase()]:u=>!!r[u]}const f4="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",h4=p1(f4);function CM(t){return!!t||t===""}function m1(t){if(Wn(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],u=Ci(i)?v4(i):m1(i);if(u)for(const d in u)e[d]=u[d]}return e}else{if(Ci(t))return t;if(ri(t))return t}}const p4=/;(?![^(]*\))/g,m4=/:(.+)/;function v4(t){const e={};return t.split(p4).forEach(r=>{if(r){const i=r.split(m4);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function v1(t){let e="";if(Ci(t))e=t;else if(Wn(t))for(let r=0;r<t.length;r++){const i=v1(t[r]);i&&(e+=i+" ")}else if(ri(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}const Zv=t=>Ci(t)?t:t==null?"":Wn(t)||ri(t)&&(t.toString===IM||!ar(t.toString))?JSON.stringify(t,SM,2):String(t),SM=(t,e)=>e&&e.__v_isRef?SM(t,e.value):wd(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,u])=>(r[`${i} =>`]=u,r),{})}:TM(e)?{[`Set(${e.size})`]:[...e.values()]}:ri(e)&&!Wn(e)&&!PM(e)?String(e):e,Yr={},bd=[],xa=()=>{},g4=()=>!1,y4=/^on[^a-z]/,Gg=t=>y4.test(t),g1=t=>t.startsWith("onUpdate:"),Oi=Object.assign,y1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},_4=Object.prototype.hasOwnProperty,Tr=(t,e)=>_4.call(t,e),Wn=Array.isArray,wd=t=>Hg(t)==="[object Map]",TM=t=>Hg(t)==="[object Set]",ar=t=>typeof t=="function",Ci=t=>typeof t=="string",_1=t=>typeof t=="symbol",ri=t=>t!==null&&typeof t=="object",EM=t=>ri(t)&&ar(t.then)&&ar(t.catch),IM=Object.prototype.toString,Hg=t=>IM.call(t),x4=t=>Hg(t).slice(8,-1),PM=t=>Hg(t)==="[object Object]",x1=t=>Ci(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Xv=p1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qg=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},b4=/-(\w)/g,ra=qg(t=>t.replace(b4,(e,r)=>r?r.toUpperCase():"")),w4=/\B([A-Z])/g,qd=qg(t=>t.replace(w4,"-$1").toLowerCase()),Wg=qg(t=>t.charAt(0).toUpperCase()+t.slice(1)),f0=qg(t=>t?`on${Wg(t)}`:""),sp=(t,e)=>!Object.is(t,e),h0=(t,e)=>{for(let r=0;r<t.length;r++)t[r](e)},_g=(t,e,r)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:r})},AM=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let dT;const C4=()=>dT||(dT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ga;class MM{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ga,!e&&Ga&&(this.index=(Ga.scopes||(Ga.scopes=[])).push(this)-1)}run(e){if(this.active){const r=Ga;try{return Ga=this,e()}finally{Ga=r}}}on(){Ga=this}off(){Ga=this.parent}stop(e){if(this.active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!e){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0,this.active=!1}}}function kM(t){return new MM(t)}function S4(t,e=Ga){e&&e.active&&e.effects.push(t)}const b1=t=>{const e=new Set(t);return e.w=0,e.n=0,e},OM=t=>(t.w&Bl)>0,DM=t=>(t.n&Bl)>0,T4=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Bl},E4=t=>{const{deps:e}=t;if(e.length){let r=0;for(let i=0;i<e.length;i++){const u=e[i];OM(u)&&!DM(u)?u.delete(t):e[r++]=u,u.w&=~Bl,u.n&=~Bl}e.length=r}},Cx=new WeakMap;let jh=0,Bl=1;const Sx=30;let ya;const qu=Symbol(""),Tx=Symbol("");class w1{constructor(e,r=null,i){this.fn=e,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,S4(this,i)}run(){if(!this.active)return this.fn();let e=ya,r=Dl;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=ya,ya=this,Dl=!0,Bl=1<<++jh,jh<=Sx?T4(this):fT(this),this.fn()}finally{jh<=Sx&&E4(this),Bl=1<<--jh,ya=this.parent,Dl=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ya===this?this.deferStop=!0:this.active&&(fT(this),this.onStop&&this.onStop(),this.active=!1)}}function fT(t){const{deps:e}=t;if(e.length){for(let r=0;r<e.length;r++)e[r].delete(t);e.length=0}}let Dl=!0;const RM=[];function Wd(){RM.push(Dl),Dl=!1}function Zd(){const t=RM.pop();Dl=t===void 0?!0:t}function Uo(t,e,r){if(Dl&&ya){let i=Cx.get(t);i||Cx.set(t,i=new Map);let u=i.get(r);u||i.set(r,u=b1()),zM(u)}}function zM(t,e){let r=!1;jh<=Sx?DM(t)||(t.n|=Bl,r=!OM(t)):r=!t.has(ya),r&&(t.add(ya),ya.deps.push(t))}function Ns(t,e,r,i,u,d){const m=Cx.get(t);if(!m)return;let o=[];if(e==="clear")o=[...m.values()];else if(r==="length"&&Wn(t))m.forEach((_,C)=>{(C==="length"||C>=i)&&o.push(_)});else switch(r!==void 0&&o.push(m.get(r)),e){case"add":Wn(t)?x1(r)&&o.push(m.get("length")):(o.push(m.get(qu)),wd(t)&&o.push(m.get(Tx)));break;case"delete":Wn(t)||(o.push(m.get(qu)),wd(t)&&o.push(m.get(Tx)));break;case"set":wd(t)&&o.push(m.get(qu));break}if(o.length===1)o[0]&&Ex(o[0]);else{const _=[];for(const C of o)C&&_.push(...C);Ex(b1(_))}}function Ex(t,e){const r=Wn(t)?t:[...t];for(const i of r)i.computed&&hT(i);for(const i of r)i.computed||hT(i)}function hT(t,e){(t!==ya||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const I4=p1("__proto__,__v_isRef,__isVue"),LM=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_1)),P4=C1(),A4=C1(!1,!0),M4=C1(!0),pT=k4();function k4(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...r){const i=Yn(this);for(let d=0,m=this.length;d<m;d++)Uo(i,"get",d+"");const u=i[e](...r);return u===-1||u===!1?i[e](...r.map(Yn)):u}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...r){Wd();const i=Yn(this)[e].apply(this,r);return Zd(),i}}),t}function C1(t=!1,e=!1){return function(i,u,d){if(u==="__v_isReactive")return!t;if(u==="__v_isReadonly")return t;if(u==="__v_isShallow")return e;if(u==="__v_raw"&&d===(t?e?q4:jM:e?$M:NM).get(i))return i;const m=Wn(i);if(!t&&m&&Tr(pT,u))return Reflect.get(pT,u,d);const o=Reflect.get(i,u,d);return(_1(u)?LM.has(u):I4(u))||(t||Uo(i,"get",u),e)?o:di(o)?m&&x1(u)?o:o.value:ri(o)?t?VM(o):Or(o):o}}const O4=FM(),D4=FM(!0);function FM(t=!1){return function(r,i,u,d){let m=r[i];if(Od(m)&&di(m)&&!di(u))return!1;if(!t&&(!xg(u)&&!Od(u)&&(m=Yn(m),u=Yn(u)),!Wn(r)&&di(m)&&!di(u)))return m.value=u,!0;const o=Wn(r)&&x1(i)?Number(i)<r.length:Tr(r,i),_=Reflect.set(r,i,u,d);return r===Yn(d)&&(o?sp(u,m)&&Ns(r,"set",i,u):Ns(r,"add",i,u)),_}}function R4(t,e){const r=Tr(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&r&&Ns(t,"delete",e,void 0),i}function z4(t,e){const r=Reflect.has(t,e);return(!_1(e)||!LM.has(e))&&Uo(t,"has",e),r}function L4(t){return Uo(t,"iterate",Wn(t)?"length":qu),Reflect.ownKeys(t)}const BM={get:P4,set:O4,deleteProperty:R4,has:z4,ownKeys:L4},F4={get:M4,set(t,e){return!0},deleteProperty(t,e){return!0}},B4=Oi({},BM,{get:A4,set:D4}),S1=t=>t,Zg=t=>Reflect.getPrototypeOf(t);function wv(t,e,r=!1,i=!1){t=t.__v_raw;const u=Yn(t),d=Yn(e);r||(e!==d&&Uo(u,"get",e),Uo(u,"get",d));const{has:m}=Zg(u),o=i?S1:r?I1:lp;if(m.call(u,e))return o(t.get(e));if(m.call(u,d))return o(t.get(d));t!==u&&t.get(e)}function Cv(t,e=!1){const r=this.__v_raw,i=Yn(r),u=Yn(t);return e||(t!==u&&Uo(i,"has",t),Uo(i,"has",u)),t===u?r.has(t):r.has(t)||r.has(u)}function Sv(t,e=!1){return t=t.__v_raw,!e&&Uo(Yn(t),"iterate",qu),Reflect.get(t,"size",t)}function mT(t){t=Yn(t);const e=Yn(this);return Zg(e).has.call(e,t)||(e.add(t),Ns(e,"add",t,t)),this}function vT(t,e){e=Yn(e);const r=Yn(this),{has:i,get:u}=Zg(r);let d=i.call(r,t);d||(t=Yn(t),d=i.call(r,t));const m=u.call(r,t);return r.set(t,e),d?sp(e,m)&&Ns(r,"set",t,e):Ns(r,"add",t,e),this}function gT(t){const e=Yn(this),{has:r,get:i}=Zg(e);let u=r.call(e,t);u||(t=Yn(t),u=r.call(e,t)),i&&i.call(e,t);const d=e.delete(t);return u&&Ns(e,"delete",t,void 0),d}function yT(){const t=Yn(this),e=t.size!==0,r=t.clear();return e&&Ns(t,"clear",void 0,void 0),r}function Tv(t,e){return function(i,u){const d=this,m=d.__v_raw,o=Yn(m),_=e?S1:t?I1:lp;return!t&&Uo(o,"iterate",qu),m.forEach((C,T)=>i.call(u,_(C),_(T),d))}}function Ev(t,e,r){return function(...i){const u=this.__v_raw,d=Yn(u),m=wd(d),o=t==="entries"||t===Symbol.iterator&&m,_=t==="keys"&&m,C=u[t](...i),T=r?S1:e?I1:lp;return!e&&Uo(d,"iterate",_?Tx:qu),{next(){const{value:S,done:P}=C.next();return P?{value:S,done:P}:{value:o?[T(S[0]),T(S[1])]:T(S),done:P}},[Symbol.iterator](){return this}}}}function xl(t){return function(...e){return t==="delete"?!1:this}}function N4(){const t={get(d){return wv(this,d)},get size(){return Sv(this)},has:Cv,add:mT,set:vT,delete:gT,clear:yT,forEach:Tv(!1,!1)},e={get(d){return wv(this,d,!1,!0)},get size(){return Sv(this)},has:Cv,add:mT,set:vT,delete:gT,clear:yT,forEach:Tv(!1,!0)},r={get(d){return wv(this,d,!0)},get size(){return Sv(this,!0)},has(d){return Cv.call(this,d,!0)},add:xl("add"),set:xl("set"),delete:xl("delete"),clear:xl("clear"),forEach:Tv(!0,!1)},i={get(d){return wv(this,d,!0,!0)},get size(){return Sv(this,!0)},has(d){return Cv.call(this,d,!0)},add:xl("add"),set:xl("set"),delete:xl("delete"),clear:xl("clear"),forEach:Tv(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{t[d]=Ev(d,!1,!1),r[d]=Ev(d,!0,!1),e[d]=Ev(d,!1,!0),i[d]=Ev(d,!0,!0)}),[t,r,e,i]}const[$4,j4,V4,U4]=N4();function T1(t,e){const r=e?t?U4:V4:t?j4:$4;return(i,u,d)=>u==="__v_isReactive"?!t:u==="__v_isReadonly"?t:u==="__v_raw"?i:Reflect.get(Tr(r,u)&&u in i?r:i,u,d)}const K4={get:T1(!1,!1)},G4={get:T1(!1,!0)},H4={get:T1(!0,!1)},NM=new WeakMap,$M=new WeakMap,jM=new WeakMap,q4=new WeakMap;function W4(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Z4(t){return t.__v_skip||!Object.isExtensible(t)?0:W4(x4(t))}function Or(t){return Od(t)?t:E1(t,!1,BM,K4,NM)}function X4(t){return E1(t,!1,B4,G4,$M)}function VM(t){return E1(t,!0,F4,H4,jM)}function E1(t,e,r,i,u){if(!ri(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const d=u.get(t);if(d)return d;const m=Z4(t);if(m===0)return t;const o=new Proxy(t,m===2?i:r);return u.set(t,o),o}function Rl(t){return Od(t)?Rl(t.__v_raw):!!(t&&t.__v_isReactive)}function Od(t){return!!(t&&t.__v_isReadonly)}function xg(t){return!!(t&&t.__v_isShallow)}function UM(t){return Rl(t)||Od(t)}function Yn(t){const e=t&&t.__v_raw;return e?Yn(e):t}function Dd(t){return _g(t,"__v_skip",!0),t}const lp=t=>ri(t)?Or(t):t,I1=t=>ri(t)?VM(t):t;function KM(t){Dl&&ya&&(t=Yn(t),zM(t.dep||(t.dep=b1())))}function GM(t,e){t=Yn(t),t.dep&&Ex(t.dep)}function di(t){return!!(t&&t.__v_isRef===!0)}function qe(t){return HM(t,!1)}function mr(t){return HM(t,!0)}function HM(t,e){return di(t)?t:new Y4(t,e)}class Y4{constructor(e,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?e:Yn(e),this._value=r?e:lp(e)}get value(){return KM(this),this._value}set value(e){const r=this.__v_isShallow||xg(e)||Od(e);e=r?e:Yn(e),sp(e,this._rawValue)&&(this._rawValue=e,this._value=r?e:lp(e),GM(this))}}function gi(t){return di(t)?t.value:t}const J4={get:(t,e,r)=>gi(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const u=t[e];return di(u)&&!di(r)?(u.value=r,!0):Reflect.set(t,e,r,i)}};function qM(t){return Rl(t)?t:new Proxy(t,J4)}function Wu(t){const e=Wn(t)?new Array(t.length):{};for(const r in t)e[r]=Nr(t,r);return e}class Q4{constructor(e,r,i){this._object=e,this._key=r,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Nr(t,e,r){const i=t[e];return di(i)?i:new Q4(t,e,r)}var WM;class eB{constructor(e,r,i,u){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this[WM]=!1,this._dirty=!0,this.effect=new w1(e,()=>{this._dirty||(this._dirty=!0,GM(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!u,this.__v_isReadonly=i}get value(){const e=Yn(this);return KM(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}WM="__v_isReadonly";function tB(t,e,r=!1){let i,u;const d=ar(t);return d?(i=t,u=xa):(i=t.get,u=t.set),new eB(i,u,d||!u,r)}function zl(t,e,r,i){let u;try{u=i?t(...i):t()}catch(d){Xg(d,e,r)}return u}function na(t,e,r,i){if(ar(t)){const d=zl(t,e,r,i);return d&&EM(d)&&d.catch(m=>{Xg(m,e,r)}),d}const u=[];for(let d=0;d<t.length;d++)u.push(na(t[d],e,r,i));return u}function Xg(t,e,r,i=!0){const u=e?e.vnode:null;if(e){let d=e.parent;const m=e.proxy,o=r;for(;d;){const C=d.ec;if(C){for(let T=0;T<C.length;T++)if(C[T](t,m,o)===!1)return}d=d.parent}const _=e.appContext.config.errorHandler;if(_){zl(_,null,10,[t,m,o]);return}}nB(t,r,u,i)}function nB(t,e,r,i=!0){console.error(t)}let up=!1,Ix=!1;const qi=[];let Xa=0;const Cd=[];let Os=null,Fu=0;const ZM=Promise.resolve();let P1=null;function gr(t){const e=P1||ZM;return t?e.then(this?t.bind(this):t):e}function rB(t){let e=Xa+1,r=qi.length;for(;e<r;){const i=e+r>>>1;cp(qi[i])<t?e=i+1:r=i}return e}function A1(t){(!qi.length||!qi.includes(t,up&&t.allowRecurse?Xa+1:Xa))&&(t.id==null?qi.push(t):qi.splice(rB(t.id),0,t),XM())}function XM(){!up&&!Ix&&(Ix=!0,P1=ZM.then(JM))}function iB(t){const e=qi.indexOf(t);e>Xa&&qi.splice(e,1)}function oB(t){Wn(t)?Cd.push(...t):(!Os||!Os.includes(t,t.allowRecurse?Fu+1:Fu))&&Cd.push(t),XM()}function _T(t,e=up?Xa+1:0){for(;e<qi.length;e++){const r=qi[e];r&&r.pre&&(qi.splice(e,1),e--,r())}}function YM(t){if(Cd.length){const e=[...new Set(Cd)];if(Cd.length=0,Os){Os.push(...e);return}for(Os=e,Os.sort((r,i)=>cp(r)-cp(i)),Fu=0;Fu<Os.length;Fu++)Os[Fu]();Os=null,Fu=0}}const cp=t=>t.id==null?1/0:t.id,aB=(t,e)=>{const r=cp(t)-cp(e);if(r===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return r};function JM(t){Ix=!1,up=!0,qi.sort(aB);const e=xa;try{for(Xa=0;Xa<qi.length;Xa++){const r=qi[Xa];r&&r.active!==!1&&zl(r,null,14)}}finally{Xa=0,qi.length=0,YM(),up=!1,P1=null,(qi.length||Cd.length)&&JM()}}function sB(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||Yr;let u=r;const d=e.startsWith("update:"),m=d&&e.slice(7);if(m&&m in i){const T=`${m==="modelValue"?"model":m}Modifiers`,{number:S,trim:P}=i[T]||Yr;P&&(u=r.map(A=>A.trim())),S&&(u=r.map(AM))}let o,_=i[o=f0(e)]||i[o=f0(ra(e))];!_&&d&&(_=i[o=f0(qd(e))]),_&&na(_,t,6,u);const C=i[o+"Once"];if(C){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,na(C,t,6,u)}}function QM(t,e,r=!1){const i=e.emitsCache,u=i.get(t);if(u!==void 0)return u;const d=t.emits;let m={},o=!1;if(!ar(t)){const _=C=>{const T=QM(C,e,!0);T&&(o=!0,Oi(m,T))};!r&&e.mixins.length&&e.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}return!d&&!o?(ri(t)&&i.set(t,null),null):(Wn(d)?d.forEach(_=>m[_]=null):Oi(m,d),ri(t)&&i.set(t,m),m)}function Yg(t,e){return!t||!Gg(e)?!1:(e=e.slice(2).replace(/Once$/,""),Tr(t,e[0].toLowerCase()+e.slice(1))||Tr(t,qd(e))||Tr(t,e))}let Wi=null,ek=null;function bg(t){const e=Wi;return Wi=t,ek=t&&t.type.__scopeId||null,e}function pr(t,e=Wi,r){if(!e||t._n)return t;const i=(...u)=>{i._d&&OT(-1);const d=bg(e);let m;try{m=t(...u)}finally{bg(d),i._d&&OT(1)}return m};return i._n=!0,i._c=!0,i._d=!0,i}function p0(t){const{type:e,vnode:r,proxy:i,withProxy:u,props:d,propsOptions:[m],slots:o,attrs:_,emit:C,render:T,renderCache:S,data:P,setupState:A,ctx:O,inheritAttrs:R}=t;let z,F;const N=bg(t);try{if(r.shapeFlag&4){const G=u||i;z=Za(T.call(G,G,S,d,A,P,O)),F=_}else{const G=e;z=Za(G.length>1?G(d,{attrs:_,slots:o,emit:C}):G(d,null)),F=e.props?_:lB(_)}}catch(G){Zh.length=0,Xg(G,t,1),z=j(No)}let U=z;if(F&&R!==!1){const G=Object.keys(F),{shapeFlag:q}=U;G.length&&q&7&&(m&&G.some(g1)&&(F=uB(F,m)),U=wo(U,F))}return r.dirs&&(U=wo(U),U.dirs=U.dirs?U.dirs.concat(r.dirs):r.dirs),r.transition&&(U.transition=r.transition),z=U,bg(N),z}const lB=t=>{let e;for(const r in t)(r==="class"||r==="style"||Gg(r))&&((e||(e={}))[r]=t[r]);return e},uB=(t,e)=>{const r={};for(const i in t)(!g1(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function cB(t,e,r){const{props:i,children:u,component:d}=t,{props:m,children:o,patchFlag:_}=e,C=d.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&_>=0){if(_&1024)return!0;if(_&16)return i?xT(i,m,C):!!m;if(_&8){const T=e.dynamicProps;for(let S=0;S<T.length;S++){const P=T[S];if(m[P]!==i[P]&&!Yg(C,P))return!0}}}else return(u||o)&&(!o||!o.$stable)?!0:i===m?!1:i?m?xT(i,m,C):!0:!!m;return!1}function xT(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let u=0;u<i.length;u++){const d=i[u];if(e[d]!==t[d]&&!Yg(r,d))return!0}return!1}function dB({vnode:t,parent:e},r){for(;e&&e.subTree===t;)(t=e.vnode).el=r,e=e.parent}const fB=t=>t.__isSuspense;function hB(t,e){e&&e.pendingBranch?Wn(t)?e.effects.push(...t):e.effects.push(t):oB(t)}function sr(t,e){if(ki){let r=ki.provides;const i=ki.parent&&ki.parent.provides;i===r&&(r=ki.provides=Object.create(i)),r[t]=e}}function Kn(t,e,r=!1){const i=ki||Wi;if(i){const u=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(u&&t in u)return u[t];if(arguments.length>1)return r&&ar(e)?e.call(i.proxy):e}}function vr(t,e){return M1(t,null,e)}const bT={};function an(t,e,r){return M1(t,e,r)}function M1(t,e,{immediate:r,deep:i,flush:u,onTrack:d,onTrigger:m}=Yr){const o=ki;let _,C=!1,T=!1;if(di(t)?(_=()=>t.value,C=xg(t)):Rl(t)?(_=()=>t,i=!0):Wn(t)?(T=!0,C=t.some(F=>Rl(F)||xg(F)),_=()=>t.map(F=>{if(di(F))return F.value;if(Rl(F))return Uu(F);if(ar(F))return zl(F,o,2)})):ar(t)?e?_=()=>zl(t,o,2):_=()=>{if(!(o&&o.isUnmounted))return S&&S(),na(t,o,3,[P])}:_=xa,e&&i){const F=_;_=()=>Uu(F())}let S,P=F=>{S=z.onStop=()=>{zl(F,o,4)}};if(pp)return P=xa,e?r&&na(e,o,3,[_(),T?[]:void 0,P]):_(),xa;let A=T?[]:bT;const O=()=>{if(!!z.active)if(e){const F=z.run();(i||C||(T?F.some((N,U)=>sp(N,A[U])):sp(F,A)))&&(S&&S(),na(e,o,3,[F,A===bT?void 0:A,P]),A=F)}else z.run()};O.allowRecurse=!!e;let R;u==="sync"?R=O:u==="post"?R=()=>xo(O,o&&o.suspense):(O.pre=!0,o&&(O.id=o.uid),R=()=>A1(O));const z=new w1(_,R);return e?r?O():A=z.run():u==="post"?xo(z.run.bind(z),o&&o.suspense):z.run(),()=>{z.stop(),o&&o.scope&&y1(o.scope.effects,z)}}function pB(t,e,r){const i=this.proxy,u=Ci(t)?t.includes(".")?tk(i,t):()=>i[t]:t.bind(i,i);let d;ar(e)?d=e:(d=e.handler,r=e);const m=ki;Rd(this);const o=M1(u,d.bind(i),r);return m?Rd(m):Zu(),o}function tk(t,e){const r=e.split(".");return()=>{let i=t;for(let u=0;u<r.length&&i;u++)i=i[r[u]];return i}}function Uu(t,e){if(!ri(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),di(t))Uu(t.value,e);else if(Wn(t))for(let r=0;r<t.length;r++)Uu(t[r],e);else if(TM(t)||wd(t))t.forEach(r=>{Uu(r,e)});else if(PM(t))for(const r in t)Uu(t[r],e);return t}function nk(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return wr(()=>{t.isMounted=!0}),Er(()=>{t.isUnmounting=!0}),t}const Yo=[Function,Array],mB={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yo,onEnter:Yo,onAfterEnter:Yo,onEnterCancelled:Yo,onBeforeLeave:Yo,onLeave:Yo,onAfterLeave:Yo,onLeaveCancelled:Yo,onBeforeAppear:Yo,onAppear:Yo,onAfterAppear:Yo,onAppearCancelled:Yo},setup(t,{slots:e}){const r=Ji(),i=nk();let u;return()=>{const d=e.default&&k1(e.default(),!0);if(!d||!d.length)return;let m=d[0];if(d.length>1){for(const R of d)if(R.type!==No){m=R;break}}const o=Yn(t),{mode:_}=o;if(i.isLeaving)return m0(m);const C=wT(m);if(!C)return m0(m);const T=dp(C,o,i,r);fp(C,T);const S=r.subTree,P=S&&wT(S);let A=!1;const{getTransitionKey:O}=C.type;if(O){const R=O();u===void 0?u=R:R!==u&&(u=R,A=!0)}if(P&&P.type!==No&&(!Bu(C,P)||A)){const R=dp(P,o,i,r);if(fp(P,R),_==="out-in")return i.isLeaving=!0,R.afterLeave=()=>{i.isLeaving=!1,r.update()},m0(m);_==="in-out"&&C.type!==No&&(R.delayLeave=(z,F,N)=>{const U=ik(i,P);U[String(P.key)]=P,z._leaveCb=()=>{F(),z._leaveCb=void 0,delete T.delayedLeave},T.delayedLeave=N})}return m}}},rk=mB;function ik(t,e){const{leavingVNodes:r}=t;let i=r.get(e.type);return i||(i=Object.create(null),r.set(e.type,i)),i}function dp(t,e,r,i){const{appear:u,mode:d,persisted:m=!1,onBeforeEnter:o,onEnter:_,onAfterEnter:C,onEnterCancelled:T,onBeforeLeave:S,onLeave:P,onAfterLeave:A,onLeaveCancelled:O,onBeforeAppear:R,onAppear:z,onAfterAppear:F,onAppearCancelled:N}=e,U=String(t.key),G=ik(r,t),q=(Q,te)=>{Q&&na(Q,i,9,te)},V=(Q,te)=>{const ie=te[1];q(Q,te),Wn(Q)?Q.every(ve=>ve.length<=1)&&ie():Q.length<=1&&ie()},Z={mode:d,persisted:m,beforeEnter(Q){let te=o;if(!r.isMounted)if(u)te=R||o;else return;Q._leaveCb&&Q._leaveCb(!0);const ie=G[U];ie&&Bu(t,ie)&&ie.el._leaveCb&&ie.el._leaveCb(),q(te,[Q])},enter(Q){let te=_,ie=C,ve=T;if(!r.isMounted)if(u)te=z||_,ie=F||C,ve=N||T;else return;let ce=!1;const de=Q._enterCb=xe=>{ce||(ce=!0,xe?q(ve,[Q]):q(ie,[Q]),Z.delayedLeave&&Z.delayedLeave(),Q._enterCb=void 0)};te?V(te,[Q,de]):de()},leave(Q,te){const ie=String(t.key);if(Q._enterCb&&Q._enterCb(!0),r.isUnmounting)return te();q(S,[Q]);let ve=!1;const ce=Q._leaveCb=de=>{ve||(ve=!0,te(),de?q(O,[Q]):q(A,[Q]),Q._leaveCb=void 0,G[ie]===t&&delete G[ie])};G[ie]=t,P?V(P,[Q,ce]):ce()},clone(Q){return dp(Q,e,r,i)}};return Z}function m0(t){if(Jg(t))return t=wo(t),t.children=null,t}function wT(t){return Jg(t)?t.children?t.children[0]:void 0:t}function fp(t,e){t.shapeFlag&6&&t.component?fp(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function k1(t,e=!1,r){let i=[],u=0;for(let d=0;d<t.length;d++){let m=t[d];const o=r==null?m.key:String(r)+String(m.key!=null?m.key:d);m.type===Hn?(m.patchFlag&128&&u++,i=i.concat(k1(m.children,e,o))):(e||m.type!==No)&&i.push(o!=null?wo(m,{key:o}):m)}if(u>1)for(let d=0;d<i.length;d++)i[d].patchFlag=-2;return i}function jt(t){return ar(t)?{setup:t,name:t.name}:t}const Hh=t=>!!t.type.__asyncLoader,Jg=t=>t.type.__isKeepAlive;function ok(t,e){ak(t,"a",e)}function vB(t,e){ak(t,"da",e)}function ak(t,e,r=ki){const i=t.__wdc||(t.__wdc=()=>{let u=r;for(;u;){if(u.isDeactivated)return;u=u.parent}return t()});if(Qg(e,i,r),r){let u=r.parent;for(;u&&u.parent;)Jg(u.parent.vnode)&&gB(i,e,r,u),u=u.parent}}function gB(t,e,r,i){const u=Qg(e,t,i,!0);is(()=>{y1(i[e],u)},r)}function Qg(t,e,r=ki,i=!1){if(r){const u=r[t]||(r[t]=[]),d=e.__weh||(e.__weh=(...m)=>{if(r.isUnmounted)return;Wd(),Rd(r);const o=na(e,r,t,m);return Zu(),Zd(),o});return i?u.unshift(d):u.push(d),d}}const js=t=>(e,r=ki)=>(!pp||t==="sp")&&Qg(t,(...i)=>e(...i),r),sk=js("bm"),wr=js("m"),yB=js("bu"),Ca=js("u"),Er=js("bum"),is=js("um"),_B=js("sp"),xB=js("rtg"),bB=js("rtc");function wB(t,e=ki){Qg("ec",t,e)}function uo(t,e){const r=Wi;if(r===null)return t;const i=ty(r)||r.proxy,u=t.dirs||(t.dirs=[]);for(let d=0;d<e.length;d++){let[m,o,_,C=Yr]=e[d];ar(m)&&(m={mounted:m,updated:m}),m.deep&&Uu(o),u.push({dir:m,instance:i,value:o,oldValue:void 0,arg:_,modifiers:C})}return t}function Pu(t,e,r,i){const u=t.dirs,d=e&&e.dirs;for(let m=0;m<u.length;m++){const o=u[m];d&&(o.oldValue=d[m].value);let _=o.dir[i];_&&(Wd(),na(_,r,8,[t.el,o,t,e]),Zd())}}const lk="components",CB="directives";function qh(t,e){return uk(lk,t,!0,e)||t}const SB=Symbol();function O1(t){return uk(CB,t)}function uk(t,e,r=!0,i=!1){const u=Wi||ki;if(u){const d=u.type;if(t===lk){const o=e5(d,!1);if(o&&(o===e||o===ra(e)||o===Wg(ra(e))))return d}const m=CT(u[t]||d[t],e)||CT(u.appContext[t],e);return!m&&i?d:m}}function CT(t,e){return t&&(t[e]||t[ra(e)]||t[Wg(ra(e))])}function ST(t,e,r,i){let u;const d=r&&r[i];if(Wn(t)||Ci(t)){u=new Array(t.length);for(let m=0,o=t.length;m<o;m++)u[m]=e(t[m],m,void 0,d&&d[m])}else if(typeof t=="number"){u=new Array(t);for(let m=0;m<t;m++)u[m]=e(m+1,m,void 0,d&&d[m])}else if(ri(t))if(t[Symbol.iterator])u=Array.from(t,(m,o)=>e(m,o,void 0,d&&d[o]));else{const m=Object.keys(t);u=new Array(m.length);for(let o=0,_=m.length;o<_;o++){const C=m[o];u[o]=e(t[C],C,o,d&&d[o])}}else u=[];return r&&(r[i]=u),u}function ck(t,e,r={},i,u){if(Wi.isCE||Wi.parent&&Hh(Wi.parent)&&Wi.parent.isCE)return j("slot",e==="default"?null:{name:e},i&&i());let d=t[e];d&&d._c&&(d._d=!1),li();const m=d&&dk(d(r)),o=Ya(Hn,{key:r.key||m&&m.key||`_${e}`},m||(i?i():[]),m&&t._===1?64:-2);return!u&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),d&&d._c&&(d._d=!0),o}function dk(t){return t.some(e=>co(e)?!(e.type===No||e.type===Hn&&!dk(e.children)):!0)?t:null}const Px=t=>t?Ck(t)?ty(t)||t.proxy:Px(t.parent):null,wg=Oi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Px(t.parent),$root:t=>Px(t.root),$emit:t=>t.emit,$options:t=>D1(t),$forceUpdate:t=>t.f||(t.f=()=>A1(t.update)),$nextTick:t=>t.n||(t.n=gr.bind(t.proxy)),$watch:t=>pB.bind(t)}),TB={get({_:t},e){const{ctx:r,setupState:i,data:u,props:d,accessCache:m,type:o,appContext:_}=t;let C;if(e[0]!=="$"){const A=m[e];if(A!==void 0)switch(A){case 1:return i[e];case 2:return u[e];case 4:return r[e];case 3:return d[e]}else{if(i!==Yr&&Tr(i,e))return m[e]=1,i[e];if(u!==Yr&&Tr(u,e))return m[e]=2,u[e];if((C=t.propsOptions[0])&&Tr(C,e))return m[e]=3,d[e];if(r!==Yr&&Tr(r,e))return m[e]=4,r[e];Ax&&(m[e]=0)}}const T=wg[e];let S,P;if(T)return e==="$attrs"&&Uo(t,"get",e),T(t);if((S=o.__cssModules)&&(S=S[e]))return S;if(r!==Yr&&Tr(r,e))return m[e]=4,r[e];if(P=_.config.globalProperties,Tr(P,e))return P[e]},set({_:t},e,r){const{data:i,setupState:u,ctx:d}=t;return u!==Yr&&Tr(u,e)?(u[e]=r,!0):i!==Yr&&Tr(i,e)?(i[e]=r,!0):Tr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(d[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:u,propsOptions:d}},m){let o;return!!r[m]||t!==Yr&&Tr(t,m)||e!==Yr&&Tr(e,m)||(o=d[0])&&Tr(o,m)||Tr(i,m)||Tr(wg,m)||Tr(u.config.globalProperties,m)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:Tr(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};let Ax=!0;function EB(t){const e=D1(t),r=t.proxy,i=t.ctx;Ax=!1,e.beforeCreate&&TT(e.beforeCreate,t,"bc");const{data:u,computed:d,methods:m,watch:o,provide:_,inject:C,created:T,beforeMount:S,mounted:P,beforeUpdate:A,updated:O,activated:R,deactivated:z,beforeDestroy:F,beforeUnmount:N,destroyed:U,unmounted:G,render:q,renderTracked:V,renderTriggered:Z,errorCaptured:Q,serverPrefetch:te,expose:ie,inheritAttrs:ve,components:ce,directives:de,filters:xe}=e;if(C&&IB(C,i,null,t.appContext.config.unwrapInjectedRef),m)for(const he in m){const me=m[he];ar(me)&&(i[he]=me.bind(r))}if(u){const he=u.call(r,r);ri(he)&&(t.data=Or(he))}if(Ax=!0,d)for(const he in d){const me=d[he],Pe=ar(me)?me.bind(r,r):ar(me.get)?me.get.bind(r,r):xa,He=!ar(me)&&ar(me.set)?me.set.bind(r):xa,Ke=ue({get:Pe,set:He});Object.defineProperty(i,he,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:Re=>Ke.value=Re})}if(o)for(const he in o)fk(o[he],i,r,he);if(_){const he=ar(_)?_.call(r):_;Reflect.ownKeys(he).forEach(me=>{sr(me,he[me])})}T&&TT(T,t,"c");function ge(he,me){Wn(me)?me.forEach(Pe=>he(Pe.bind(r))):me&&he(me.bind(r))}if(ge(sk,S),ge(wr,P),ge(yB,A),ge(Ca,O),ge(ok,R),ge(vB,z),ge(wB,Q),ge(bB,V),ge(xB,Z),ge(Er,N),ge(is,G),ge(_B,te),Wn(ie))if(ie.length){const he=t.exposed||(t.exposed={});ie.forEach(me=>{Object.defineProperty(he,me,{get:()=>r[me],set:Pe=>r[me]=Pe})})}else t.exposed||(t.exposed={});q&&t.render===xa&&(t.render=q),ve!=null&&(t.inheritAttrs=ve),ce&&(t.components=ce),de&&(t.directives=de)}function IB(t,e,r=xa,i=!1){Wn(t)&&(t=Mx(t));for(const u in t){const d=t[u];let m;ri(d)?"default"in d?m=Kn(d.from||u,d.default,!0):m=Kn(d.from||u):m=Kn(d),di(m)&&i?Object.defineProperty(e,u,{enumerable:!0,configurable:!0,get:()=>m.value,set:o=>m.value=o}):e[u]=m}}function TT(t,e,r){na(Wn(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function fk(t,e,r,i){const u=i.includes(".")?tk(r,i):()=>r[i];if(Ci(t)){const d=e[t];ar(d)&&an(u,d)}else if(ar(t))an(u,t.bind(r));else if(ri(t))if(Wn(t))t.forEach(d=>fk(d,e,r,i));else{const d=ar(t.handler)?t.handler.bind(r):e[t.handler];ar(d)&&an(u,d,t)}}function D1(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:u,optionsCache:d,config:{optionMergeStrategies:m}}=t.appContext,o=d.get(e);let _;return o?_=o:!u.length&&!r&&!i?_=e:(_={},u.length&&u.forEach(C=>Cg(_,C,m,!0)),Cg(_,e,m)),ri(e)&&d.set(e,_),_}function Cg(t,e,r,i=!1){const{mixins:u,extends:d}=e;d&&Cg(t,d,r,!0),u&&u.forEach(m=>Cg(t,m,r,!0));for(const m in e)if(!(i&&m==="expose")){const o=PB[m]||r&&r[m];t[m]=o?o(t[m],e[m]):e[m]}return t}const PB={data:ET,props:Ru,emits:Ru,methods:Ru,computed:Ru,beforeCreate:io,created:io,beforeMount:io,mounted:io,beforeUpdate:io,updated:io,beforeDestroy:io,beforeUnmount:io,destroyed:io,unmounted:io,activated:io,deactivated:io,errorCaptured:io,serverPrefetch:io,components:Ru,directives:Ru,watch:MB,provide:ET,inject:AB};function ET(t,e){return e?t?function(){return Oi(ar(t)?t.call(this,this):t,ar(e)?e.call(this,this):e)}:e:t}function AB(t,e){return Ru(Mx(t),Mx(e))}function Mx(t){if(Wn(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function io(t,e){return t?[...new Set([].concat(t,e))]:e}function Ru(t,e){return t?Oi(Oi(Object.create(null),t),e):e}function MB(t,e){if(!t)return e;if(!e)return t;const r=Oi(Object.create(null),t);for(const i in e)r[i]=io(t[i],e[i]);return r}function kB(t,e,r,i=!1){const u={},d={};_g(d,ey,1),t.propsDefaults=Object.create(null),hk(t,e,u,d);for(const m in t.propsOptions[0])m in u||(u[m]=void 0);r?t.props=i?u:X4(u):t.type.props?t.props=u:t.props=d,t.attrs=d}function OB(t,e,r,i){const{props:u,attrs:d,vnode:{patchFlag:m}}=t,o=Yn(u),[_]=t.propsOptions;let C=!1;if((i||m>0)&&!(m&16)){if(m&8){const T=t.vnode.dynamicProps;for(let S=0;S<T.length;S++){let P=T[S];if(Yg(t.emitsOptions,P))continue;const A=e[P];if(_)if(Tr(d,P))A!==d[P]&&(d[P]=A,C=!0);else{const O=ra(P);u[O]=kx(_,o,O,A,t,!1)}else A!==d[P]&&(d[P]=A,C=!0)}}}else{hk(t,e,u,d)&&(C=!0);let T;for(const S in o)(!e||!Tr(e,S)&&((T=qd(S))===S||!Tr(e,T)))&&(_?r&&(r[S]!==void 0||r[T]!==void 0)&&(u[S]=kx(_,o,S,void 0,t,!0)):delete u[S]);if(d!==o)for(const S in d)(!e||!Tr(e,S)&&!0)&&(delete d[S],C=!0)}C&&Ns(t,"set","$attrs")}function hk(t,e,r,i){const[u,d]=t.propsOptions;let m=!1,o;if(e)for(let _ in e){if(Xv(_))continue;const C=e[_];let T;u&&Tr(u,T=ra(_))?!d||!d.includes(T)?r[T]=C:(o||(o={}))[T]=C:Yg(t.emitsOptions,_)||(!(_ in i)||C!==i[_])&&(i[_]=C,m=!0)}if(d){const _=Yn(r),C=o||Yr;for(let T=0;T<d.length;T++){const S=d[T];r[S]=kx(u,_,S,C[S],t,!Tr(C,S))}}return m}function kx(t,e,r,i,u,d){const m=t[r];if(m!=null){const o=Tr(m,"default");if(o&&i===void 0){const _=m.default;if(m.type!==Function&&ar(_)){const{propsDefaults:C}=u;r in C?i=C[r]:(Rd(u),i=C[r]=_.call(null,e),Zu())}else i=_}m[0]&&(d&&!o?i=!1:m[1]&&(i===""||i===qd(r))&&(i=!0))}return i}function pk(t,e,r=!1){const i=e.propsCache,u=i.get(t);if(u)return u;const d=t.props,m={},o=[];let _=!1;if(!ar(t)){const T=S=>{_=!0;const[P,A]=pk(S,e,!0);Oi(m,P),A&&o.push(...A)};!r&&e.mixins.length&&e.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!d&&!_)return ri(t)&&i.set(t,bd),bd;if(Wn(d))for(let T=0;T<d.length;T++){const S=ra(d[T]);IT(S)&&(m[S]=Yr)}else if(d)for(const T in d){const S=ra(T);if(IT(S)){const P=d[T],A=m[S]=Wn(P)||ar(P)?{type:P}:P;if(A){const O=MT(Boolean,A.type),R=MT(String,A.type);A[0]=O>-1,A[1]=R<0||O<R,(O>-1||Tr(A,"default"))&&o.push(S)}}}const C=[m,o];return ri(t)&&i.set(t,C),C}function IT(t){return t[0]!=="$"}function PT(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function AT(t,e){return PT(t)===PT(e)}function MT(t,e){return Wn(e)?e.findIndex(r=>AT(r,t)):ar(e)&&AT(e,t)?0:-1}const mk=t=>t[0]==="_"||t==="$stable",R1=t=>Wn(t)?t.map(Za):[Za(t)],DB=(t,e,r)=>{if(e._n)return e;const i=pr((...u)=>R1(e(...u)),r);return i._c=!1,i},vk=(t,e,r)=>{const i=t._ctx;for(const u in t){if(mk(u))continue;const d=t[u];if(ar(d))e[u]=DB(u,d,i);else if(d!=null){const m=R1(d);e[u]=()=>m}}},gk=(t,e)=>{const r=R1(e);t.slots.default=()=>r},RB=(t,e)=>{if(t.vnode.shapeFlag&32){const r=e._;r?(t.slots=Yn(e),_g(e,"_",r)):vk(e,t.slots={})}else t.slots={},e&&gk(t,e);_g(t.slots,ey,1)},zB=(t,e,r)=>{const{vnode:i,slots:u}=t;let d=!0,m=Yr;if(i.shapeFlag&32){const o=e._;o?r&&o===1?d=!1:(Oi(u,e),!r&&o===1&&delete u._):(d=!e.$stable,vk(e,u)),m=e}else e&&(gk(t,e),m={default:1});if(d)for(const o in u)!mk(o)&&!(o in m)&&delete u[o]};function yk(){return{app:null,config:{isNativeTag:g4,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let LB=0;function FB(t,e){return function(i,u=null){ar(i)||(i=Object.assign({},i)),u!=null&&!ri(u)&&(u=null);const d=yk(),m=new Set;let o=!1;const _=d.app={_uid:LB++,_component:i,_props:u,_container:null,_context:d,_instance:null,version:n5,get config(){return d.config},set config(C){},use(C,...T){return m.has(C)||(C&&ar(C.install)?(m.add(C),C.install(_,...T)):ar(C)&&(m.add(C),C(_,...T))),_},mixin(C){return d.mixins.includes(C)||d.mixins.push(C),_},component(C,T){return T?(d.components[C]=T,_):d.components[C]},directive(C,T){return T?(d.directives[C]=T,_):d.directives[C]},mount(C,T,S){if(!o){const P=j(i,u);return P.appContext=d,T&&e?e(P,C):t(P,C,S),o=!0,_._container=C,C.__vue_app__=_,ty(P.component)||P.component.proxy}},unmount(){o&&(t(null,_._container),delete _._container.__vue_app__)},provide(C,T){return d.provides[C]=T,_}};return _}}function Ox(t,e,r,i,u=!1){if(Wn(t)){t.forEach((P,A)=>Ox(P,e&&(Wn(e)?e[A]:e),r,i,u));return}if(Hh(i)&&!u)return;const d=i.shapeFlag&4?ty(i.component)||i.component.proxy:i.el,m=u?null:d,{i:o,r:_}=t,C=e&&e.r,T=o.refs===Yr?o.refs={}:o.refs,S=o.setupState;if(C!=null&&C!==_&&(Ci(C)?(T[C]=null,Tr(S,C)&&(S[C]=null)):di(C)&&(C.value=null)),ar(_))zl(_,o,12,[m,T]);else{const P=Ci(_),A=di(_);if(P||A){const O=()=>{if(t.f){const R=P?Tr(S,_)?S[_]:T[_]:_.value;u?Wn(R)&&y1(R,d):Wn(R)?R.includes(d)||R.push(d):P?(T[_]=[d],Tr(S,_)&&(S[_]=T[_])):(_.value=[d],t.k&&(T[t.k]=_.value))}else P?(T[_]=m,Tr(S,_)&&(S[_]=m)):A&&(_.value=m,t.k&&(T[t.k]=m))};m?(O.id=-1,xo(O,r)):O()}}}const xo=hB;function BB(t){return NB(t)}function NB(t,e){const r=C4();r.__VUE__=!0;const{insert:i,remove:u,patchProp:d,createElement:m,createText:o,createComment:_,setText:C,setElementText:T,parentNode:S,nextSibling:P,setScopeId:A=xa,insertStaticContent:O}=t,R=(se,ae,Be,st=null,ut=null,bt=null,At=!1,_t=null,nt=!!ae.dynamicChildren)=>{if(se===ae)return;se&&!Bu(se,ae)&&(st=Fe(se),Re(se,ut,bt,!0),se=null),ae.patchFlag===-2&&(nt=!1,ae.dynamicChildren=null);const{type:tt,ref:pt,shapeFlag:dt}=ae;switch(tt){case Xd:z(se,ae,Be,st);break;case No:F(se,ae,Be,st);break;case v0:se==null&&N(ae,Be,st,At);break;case Hn:ce(se,ae,Be,st,ut,bt,At,_t,nt);break;default:dt&1?q(se,ae,Be,st,ut,bt,At,_t,nt):dt&6?de(se,ae,Be,st,ut,bt,At,_t,nt):(dt&64||dt&128)&&tt.process(se,ae,Be,st,ut,bt,At,_t,nt,vt)}pt!=null&&ut&&Ox(pt,se&&se.ref,bt,ae||se,!ae)},z=(se,ae,Be,st)=>{if(se==null)i(ae.el=o(ae.children),Be,st);else{const ut=ae.el=se.el;ae.children!==se.children&&C(ut,ae.children)}},F=(se,ae,Be,st)=>{se==null?i(ae.el=_(ae.children||""),Be,st):ae.el=se.el},N=(se,ae,Be,st)=>{[se.el,se.anchor]=O(se.children,ae,Be,st,se.el,se.anchor)},U=({el:se,anchor:ae},Be,st)=>{let ut;for(;se&&se!==ae;)ut=P(se),i(se,Be,st),se=ut;i(ae,Be,st)},G=({el:se,anchor:ae})=>{let Be;for(;se&&se!==ae;)Be=P(se),u(se),se=Be;u(ae)},q=(se,ae,Be,st,ut,bt,At,_t,nt)=>{At=At||ae.type==="svg",se==null?V(ae,Be,st,ut,bt,At,_t,nt):te(se,ae,ut,bt,At,_t,nt)},V=(se,ae,Be,st,ut,bt,At,_t)=>{let nt,tt;const{type:pt,props:dt,shapeFlag:Ot,transition:Kt,dirs:cn}=se;if(nt=se.el=m(se.type,bt,dt&&dt.is,dt),Ot&8?T(nt,se.children):Ot&16&&Q(se.children,nt,null,st,ut,bt&&pt!=="foreignObject",At,_t),cn&&Pu(se,null,st,"created"),dt){for(const Rt in dt)Rt!=="value"&&!Xv(Rt)&&d(nt,Rt,null,dt[Rt],bt,se.children,st,ut,ze);"value"in dt&&d(nt,"value",null,dt.value),(tt=dt.onVnodeBeforeMount)&&Ua(tt,st,se)}Z(nt,se,se.scopeId,At,st),cn&&Pu(se,null,st,"beforeMount");const Cn=(!ut||ut&&!ut.pendingBranch)&&Kt&&!Kt.persisted;Cn&&Kt.beforeEnter(nt),i(nt,ae,Be),((tt=dt&&dt.onVnodeMounted)||Cn||cn)&&xo(()=>{tt&&Ua(tt,st,se),Cn&&Kt.enter(nt),cn&&Pu(se,null,st,"mounted")},ut)},Z=(se,ae,Be,st,ut)=>{if(Be&&A(se,Be),st)for(let bt=0;bt<st.length;bt++)A(se,st[bt]);if(ut){let bt=ut.subTree;if(ae===bt){const At=ut.vnode;Z(se,At,At.scopeId,At.slotScopeIds,ut.parent)}}},Q=(se,ae,Be,st,ut,bt,At,_t,nt=0)=>{for(let tt=nt;tt<se.length;tt++){const pt=se[tt]=_t?Il(se[tt]):Za(se[tt]);R(null,pt,ae,Be,st,ut,bt,At,_t)}},te=(se,ae,Be,st,ut,bt,At)=>{const _t=ae.el=se.el;let{patchFlag:nt,dynamicChildren:tt,dirs:pt}=ae;nt|=se.patchFlag&16;const dt=se.props||Yr,Ot=ae.props||Yr;let Kt;Be&&Au(Be,!1),(Kt=Ot.onVnodeBeforeUpdate)&&Ua(Kt,Be,ae,se),pt&&Pu(ae,se,Be,"beforeUpdate"),Be&&Au(Be,!0);const cn=ut&&ae.type!=="foreignObject";if(tt?ie(se.dynamicChildren,tt,_t,Be,st,cn,bt):At||me(se,ae,_t,null,Be,st,cn,bt,!1),nt>0){if(nt&16)ve(_t,ae,dt,Ot,Be,st,ut);else if(nt&2&&dt.class!==Ot.class&&d(_t,"class",null,Ot.class,ut),nt&4&&d(_t,"style",dt.style,Ot.style,ut),nt&8){const Cn=ae.dynamicProps;for(let Rt=0;Rt<Cn.length;Rt++){const ht=Cn[Rt],Ht=dt[ht],wn=Ot[ht];(wn!==Ht||ht==="value")&&d(_t,ht,Ht,wn,ut,se.children,Be,st,ze)}}nt&1&&se.children!==ae.children&&T(_t,ae.children)}else!At&&tt==null&&ve(_t,ae,dt,Ot,Be,st,ut);((Kt=Ot.onVnodeUpdated)||pt)&&xo(()=>{Kt&&Ua(Kt,Be,ae,se),pt&&Pu(ae,se,Be,"updated")},st)},ie=(se,ae,Be,st,ut,bt,At)=>{for(let _t=0;_t<ae.length;_t++){const nt=se[_t],tt=ae[_t],pt=nt.el&&(nt.type===Hn||!Bu(nt,tt)||nt.shapeFlag&70)?S(nt.el):Be;R(nt,tt,pt,null,st,ut,bt,At,!0)}},ve=(se,ae,Be,st,ut,bt,At)=>{if(Be!==st){if(Be!==Yr)for(const _t in Be)!Xv(_t)&&!(_t in st)&&d(se,_t,Be[_t],null,At,ae.children,ut,bt,ze);for(const _t in st){if(Xv(_t))continue;const nt=st[_t],tt=Be[_t];nt!==tt&&_t!=="value"&&d(se,_t,tt,nt,At,ae.children,ut,bt,ze)}"value"in st&&d(se,"value",Be.value,st.value)}},ce=(se,ae,Be,st,ut,bt,At,_t,nt)=>{const tt=ae.el=se?se.el:o(""),pt=ae.anchor=se?se.anchor:o("");let{patchFlag:dt,dynamicChildren:Ot,slotScopeIds:Kt}=ae;Kt&&(_t=_t?_t.concat(Kt):Kt),se==null?(i(tt,Be,st),i(pt,Be,st),Q(ae.children,Be,pt,ut,bt,At,_t,nt)):dt>0&&dt&64&&Ot&&se.dynamicChildren?(ie(se.dynamicChildren,Ot,Be,ut,bt,At,_t),(ae.key!=null||ut&&ae===ut.subTree)&&z1(se,ae,!0)):me(se,ae,Be,pt,ut,bt,At,_t,nt)},de=(se,ae,Be,st,ut,bt,At,_t,nt)=>{ae.slotScopeIds=_t,se==null?ae.shapeFlag&512?ut.ctx.activate(ae,Be,st,At,nt):xe(ae,Be,st,ut,bt,At,nt):De(se,ae,nt)},xe=(se,ae,Be,st,ut,bt,At)=>{const _t=se.component=ZB(se,st,ut);if(Jg(se)&&(_t.ctx.renderer=vt),XB(_t),_t.asyncDep){if(ut&&ut.registerDep(_t,ge),!se.el){const nt=_t.subTree=j(No);F(null,nt,ae,Be)}return}ge(_t,se,ae,Be,ut,bt,At)},De=(se,ae,Be)=>{const st=ae.component=se.component;if(cB(se,ae,Be))if(st.asyncDep&&!st.asyncResolved){he(st,ae,Be);return}else st.next=ae,iB(st.update),st.update();else ae.el=se.el,st.vnode=ae},ge=(se,ae,Be,st,ut,bt,At)=>{const _t=()=>{if(se.isMounted){let{next:pt,bu:dt,u:Ot,parent:Kt,vnode:cn}=se,Cn=pt,Rt;Au(se,!1),pt?(pt.el=cn.el,he(se,pt,At)):pt=cn,dt&&h0(dt),(Rt=pt.props&&pt.props.onVnodeBeforeUpdate)&&Ua(Rt,Kt,pt,cn),Au(se,!0);const ht=p0(se),Ht=se.subTree;se.subTree=ht,R(Ht,ht,S(Ht.el),Fe(Ht),se,ut,bt),pt.el=ht.el,Cn===null&&dB(se,ht.el),Ot&&xo(Ot,ut),(Rt=pt.props&&pt.props.onVnodeUpdated)&&xo(()=>Ua(Rt,Kt,pt,cn),ut)}else{let pt;const{el:dt,props:Ot}=ae,{bm:Kt,m:cn,parent:Cn}=se,Rt=Hh(ae);if(Au(se,!1),Kt&&h0(Kt),!Rt&&(pt=Ot&&Ot.onVnodeBeforeMount)&&Ua(pt,Cn,ae),Au(se,!0),dt&&It){const ht=()=>{se.subTree=p0(se),It(dt,se.subTree,se,ut,null)};Rt?ae.type.__asyncLoader().then(()=>!se.isUnmounted&&ht()):ht()}else{const ht=se.subTree=p0(se);R(null,ht,Be,st,se,ut,bt),ae.el=ht.el}if(cn&&xo(cn,ut),!Rt&&(pt=Ot&&Ot.onVnodeMounted)){const ht=ae;xo(()=>Ua(pt,Cn,ht),ut)}(ae.shapeFlag&256||Cn&&Hh(Cn.vnode)&&Cn.vnode.shapeFlag&256)&&se.a&&xo(se.a,ut),se.isMounted=!0,ae=Be=st=null}},nt=se.effect=new w1(_t,()=>A1(tt),se.scope),tt=se.update=()=>nt.run();tt.id=se.uid,Au(se,!0),tt()},he=(se,ae,Be)=>{ae.component=se;const st=se.vnode.props;se.vnode=ae,se.next=null,OB(se,ae.props,st,Be),zB(se,ae.children,Be),Wd(),_T(),Zd()},me=(se,ae,Be,st,ut,bt,At,_t,nt=!1)=>{const tt=se&&se.children,pt=se?se.shapeFlag:0,dt=ae.children,{patchFlag:Ot,shapeFlag:Kt}=ae;if(Ot>0){if(Ot&128){He(tt,dt,Be,st,ut,bt,At,_t,nt);return}else if(Ot&256){Pe(tt,dt,Be,st,ut,bt,At,_t,nt);return}}Kt&8?(pt&16&&ze(tt,ut,bt),dt!==tt&&T(Be,dt)):pt&16?Kt&16?He(tt,dt,Be,st,ut,bt,At,_t,nt):ze(tt,ut,bt,!0):(pt&8&&T(Be,""),Kt&16&&Q(dt,Be,st,ut,bt,At,_t,nt))},Pe=(se,ae,Be,st,ut,bt,At,_t,nt)=>{se=se||bd,ae=ae||bd;const tt=se.length,pt=ae.length,dt=Math.min(tt,pt);let Ot;for(Ot=0;Ot<dt;Ot++){const Kt=ae[Ot]=nt?Il(ae[Ot]):Za(ae[Ot]);R(se[Ot],Kt,Be,null,ut,bt,At,_t,nt)}tt>pt?ze(se,ut,bt,!0,!1,dt):Q(ae,Be,st,ut,bt,At,_t,nt,dt)},He=(se,ae,Be,st,ut,bt,At,_t,nt)=>{let tt=0;const pt=ae.length;let dt=se.length-1,Ot=pt-1;for(;tt<=dt&&tt<=Ot;){const Kt=se[tt],cn=ae[tt]=nt?Il(ae[tt]):Za(ae[tt]);if(Bu(Kt,cn))R(Kt,cn,Be,null,ut,bt,At,_t,nt);else break;tt++}for(;tt<=dt&&tt<=Ot;){const Kt=se[dt],cn=ae[Ot]=nt?Il(ae[Ot]):Za(ae[Ot]);if(Bu(Kt,cn))R(Kt,cn,Be,null,ut,bt,At,_t,nt);else break;dt--,Ot--}if(tt>dt){if(tt<=Ot){const Kt=Ot+1,cn=Kt<pt?ae[Kt].el:st;for(;tt<=Ot;)R(null,ae[tt]=nt?Il(ae[tt]):Za(ae[tt]),Be,cn,ut,bt,At,_t,nt),tt++}}else if(tt>Ot)for(;tt<=dt;)Re(se[tt],ut,bt,!0),tt++;else{const Kt=tt,cn=tt,Cn=new Map;for(tt=cn;tt<=Ot;tt++){const yt=ae[tt]=nt?Il(ae[tt]):Za(ae[tt]);yt.key!=null&&Cn.set(yt.key,tt)}let Rt,ht=0;const Ht=Ot-cn+1;let wn=!1,zt=0;const mt=new Array(Ht);for(tt=0;tt<Ht;tt++)mt[tt]=0;for(tt=Kt;tt<=dt;tt++){const yt=se[tt];if(ht>=Ht){Re(yt,ut,bt,!0);continue}let Wt;if(yt.key!=null)Wt=Cn.get(yt.key);else for(Rt=cn;Rt<=Ot;Rt++)if(mt[Rt-cn]===0&&Bu(yt,ae[Rt])){Wt=Rt;break}Wt===void 0?Re(yt,ut,bt,!0):(mt[Wt-cn]=tt+1,Wt>=zt?zt=Wt:wn=!0,R(yt,ae[Wt],Be,null,ut,bt,At,_t,nt),ht++)}const St=wn?$B(mt):bd;for(Rt=St.length-1,tt=Ht-1;tt>=0;tt--){const yt=cn+tt,Wt=ae[yt],tn=yt+1<pt?ae[yt+1].el:st;mt[tt]===0?R(null,Wt,Be,tn,ut,bt,At,_t,nt):wn&&(Rt<0||tt!==St[Rt]?Ke(Wt,Be,tn,2):Rt--)}}},Ke=(se,ae,Be,st,ut=null)=>{const{el:bt,type:At,transition:_t,children:nt,shapeFlag:tt}=se;if(tt&6){Ke(se.component.subTree,ae,Be,st);return}if(tt&128){se.suspense.move(ae,Be,st);return}if(tt&64){At.move(se,ae,Be,vt);return}if(At===Hn){i(bt,ae,Be);for(let dt=0;dt<nt.length;dt++)Ke(nt[dt],ae,Be,st);i(se.anchor,ae,Be);return}if(At===v0){U(se,ae,Be);return}if(st!==2&&tt&1&&_t)if(st===0)_t.beforeEnter(bt),i(bt,ae,Be),xo(()=>_t.enter(bt),ut);else{const{leave:dt,delayLeave:Ot,afterLeave:Kt}=_t,cn=()=>i(bt,ae,Be),Cn=()=>{dt(bt,()=>{cn(),Kt&&Kt()})};Ot?Ot(bt,cn,Cn):Cn()}else i(bt,ae,Be)},Re=(se,ae,Be,st=!1,ut=!1)=>{const{type:bt,props:At,ref:_t,children:nt,dynamicChildren:tt,shapeFlag:pt,patchFlag:dt,dirs:Ot}=se;if(_t!=null&&Ox(_t,null,Be,se,!0),pt&256){ae.ctx.deactivate(se);return}const Kt=pt&1&&Ot,cn=!Hh(se);let Cn;if(cn&&(Cn=At&&At.onVnodeBeforeUnmount)&&Ua(Cn,ae,se),pt&6)oe(se.component,Be,st);else{if(pt&128){se.suspense.unmount(Be,st);return}Kt&&Pu(se,null,ae,"beforeUnmount"),pt&64?se.type.remove(se,ae,Be,ut,vt,st):tt&&(bt!==Hn||dt>0&&dt&64)?ze(tt,ae,Be,!1,!0):(bt===Hn&&dt&384||!ut&&pt&16)&&ze(nt,ae,Be),st&&Le(se)}(cn&&(Cn=At&&At.onVnodeUnmounted)||Kt)&&xo(()=>{Cn&&Ua(Cn,ae,se),Kt&&Pu(se,null,ae,"unmounted")},Be)},Le=se=>{const{type:ae,el:Be,anchor:st,transition:ut}=se;if(ae===Hn){Te(Be,st);return}if(ae===v0){G(se);return}const bt=()=>{u(Be),ut&&!ut.persisted&&ut.afterLeave&&ut.afterLeave()};if(se.shapeFlag&1&&ut&&!ut.persisted){const{leave:At,delayLeave:_t}=ut,nt=()=>At(Be,bt);_t?_t(se.el,bt,nt):nt()}else bt()},Te=(se,ae)=>{let Be;for(;se!==ae;)Be=P(se),u(se),se=Be;u(ae)},oe=(se,ae,Be)=>{const{bum:st,scope:ut,update:bt,subTree:At,um:_t}=se;st&&h0(st),ut.stop(),bt&&(bt.active=!1,Re(At,se,ae,Be)),_t&&xo(_t,ae),xo(()=>{se.isUnmounted=!0},ae),ae&&ae.pendingBranch&&!ae.isUnmounted&&se.asyncDep&&!se.asyncResolved&&se.suspenseId===ae.pendingId&&(ae.deps--,ae.deps===0&&ae.resolve())},ze=(se,ae,Be,st=!1,ut=!1,bt=0)=>{for(let At=bt;At<se.length;At++)Re(se[At],ae,Be,st,ut)},Fe=se=>se.shapeFlag&6?Fe(se.component.subTree):se.shapeFlag&128?se.suspense.next():P(se.anchor||se.el),lt=(se,ae,Be)=>{se==null?ae._vnode&&Re(ae._vnode,null,null,!0):R(ae._vnode||null,se,ae,null,null,null,Be),_T(),YM(),ae._vnode=se},vt={p:R,um:Re,m:Ke,r:Le,mt:xe,mc:Q,pc:me,pbc:ie,n:Fe,o:t};let kt,It;return e&&([kt,It]=e(vt)),{render:lt,hydrate:kt,createApp:FB(lt,kt)}}function Au({effect:t,update:e},r){t.allowRecurse=e.allowRecurse=r}function z1(t,e,r=!1){const i=t.children,u=e.children;if(Wn(i)&&Wn(u))for(let d=0;d<i.length;d++){const m=i[d];let o=u[d];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=u[d]=Il(u[d]),o.el=m.el),r||z1(m,o))}}function $B(t){const e=t.slice(),r=[0];let i,u,d,m,o;const _=t.length;for(i=0;i<_;i++){const C=t[i];if(C!==0){if(u=r[r.length-1],t[u]<C){e[i]=u,r.push(i);continue}for(d=0,m=r.length-1;d<m;)o=d+m>>1,t[r[o]]<C?d=o+1:m=o;C<t[r[d]]&&(d>0&&(e[i]=r[d-1]),r[d]=i)}}for(d=r.length,m=r[d-1];d-- >0;)r[d]=m,m=e[m];return r}const jB=t=>t.__isTeleport,Wh=t=>t&&(t.disabled||t.disabled===""),kT=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Dx=(t,e)=>{const r=t&&t.to;return Ci(r)?e?e(r):null:r},VB={__isTeleport:!0,process(t,e,r,i,u,d,m,o,_,C){const{mc:T,pc:S,pbc:P,o:{insert:A,querySelector:O,createText:R,createComment:z}}=C,F=Wh(e.props);let{shapeFlag:N,children:U,dynamicChildren:G}=e;if(t==null){const q=e.el=R(""),V=e.anchor=R("");A(q,r,i),A(V,r,i);const Z=e.target=Dx(e.props,O),Q=e.targetAnchor=R("");Z&&(A(Q,Z),m=m||kT(Z));const te=(ie,ve)=>{N&16&&T(U,ie,ve,u,d,m,o,_)};F?te(r,V):Z&&te(Z,Q)}else{e.el=t.el;const q=e.anchor=t.anchor,V=e.target=t.target,Z=e.targetAnchor=t.targetAnchor,Q=Wh(t.props),te=Q?r:V,ie=Q?q:Z;if(m=m||kT(V),G?(P(t.dynamicChildren,G,te,u,d,m,o),z1(t,e,!0)):_||S(t,e,te,ie,u,d,m,o,!1),F)Q||Iv(e,r,q,C,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const ve=e.target=Dx(e.props,O);ve&&Iv(e,ve,null,C,0)}else Q&&Iv(e,V,Z,C,1)}},remove(t,e,r,i,{um:u,o:{remove:d}},m){const{shapeFlag:o,children:_,anchor:C,targetAnchor:T,target:S,props:P}=t;if(S&&d(T),(m||!Wh(P))&&(d(C),o&16))for(let A=0;A<_.length;A++){const O=_[A];u(O,e,r,!0,!!O.dynamicChildren)}},move:Iv,hydrate:UB};function Iv(t,e,r,{o:{insert:i},m:u},d=2){d===0&&i(t.targetAnchor,e,r);const{el:m,anchor:o,shapeFlag:_,children:C,props:T}=t,S=d===2;if(S&&i(m,e,r),(!S||Wh(T))&&_&16)for(let P=0;P<C.length;P++)u(C[P],e,r,2);S&&i(o,e,r)}function UB(t,e,r,i,u,d,{o:{nextSibling:m,parentNode:o,querySelector:_}},C){const T=e.target=Dx(e.props,_);if(T){const S=T._lpa||T.firstChild;if(e.shapeFlag&16)if(Wh(e.props))e.anchor=C(m(t),e,o(t),r,i,u,d),e.targetAnchor=S;else{e.anchor=m(t);let P=S;for(;P;)if(P=m(P),P&&P.nodeType===8&&P.data==="teleport anchor"){e.targetAnchor=P,T._lpa=e.targetAnchor&&m(e.targetAnchor);break}C(S,e,T,r,i,u,d)}}return e.anchor&&m(e.anchor)}const L1=VB,Hn=Symbol(void 0),Xd=Symbol(void 0),No=Symbol(void 0),v0=Symbol(void 0),Zh=[];let _a=null;function li(t=!1){Zh.push(_a=t?null:[])}function KB(){Zh.pop(),_a=Zh[Zh.length-1]||null}let hp=1;function OT(t){hp+=t}function _k(t){return t.dynamicChildren=hp>0?_a||bd:null,KB(),hp>0&&_a&&_a.push(t),t}function $o(t,e,r,i,u,d){return _k(oo(t,e,r,i,u,d,!0))}function Ya(t,e,r,i,u){return _k(j(t,e,r,i,u,!0))}function co(t){return t?t.__v_isVNode===!0:!1}function Bu(t,e){return t.type===e.type&&t.key===e.key}const ey="__vInternal",xk=({key:t})=>t!=null?t:null,Yv=({ref:t,ref_key:e,ref_for:r})=>t!=null?Ci(t)||di(t)||ar(t)?{i:Wi,r:t,k:e,f:!!r}:t:null;function oo(t,e=null,r=null,i=0,u=null,d=t===Hn?0:1,m=!1,o=!1){const _={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&xk(e),ref:e&&Yv(e),scopeId:ek,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:i,dynamicProps:u,dynamicChildren:null,appContext:null};return o?(F1(_,r),d&128&&t.normalize(_)):r&&(_.shapeFlag|=Ci(r)?8:16),hp>0&&!m&&_a&&(_.patchFlag>0||d&6)&&_.patchFlag!==32&&_a.push(_),_}const j=GB;function GB(t,e=null,r=null,i=0,u=null,d=!1){if((!t||t===SB)&&(t=No),co(t)){const o=wo(t,e,!0);return r&&F1(o,r),hp>0&&!d&&_a&&(o.shapeFlag&6?_a[_a.indexOf(t)]=o:_a.push(o)),o.patchFlag|=-2,o}if(t5(t)&&(t=t.__vccOpts),e){e=HB(e);let{class:o,style:_}=e;o&&!Ci(o)&&(e.class=v1(o)),ri(_)&&(UM(_)&&!Wn(_)&&(_=Oi({},_)),e.style=m1(_))}const m=Ci(t)?1:fB(t)?128:jB(t)?64:ri(t)?4:ar(t)?2:0;return oo(t,e,r,i,u,m,d,!0)}function HB(t){return t?UM(t)||ey in t?Oi({},t):t:null}function wo(t,e,r=!1){const{props:i,ref:u,patchFlag:d,children:m}=t,o=e?wk(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&xk(o),ref:e&&e.ref?r&&u?Wn(u)?u.concat(Yv(e)):[u,Yv(e)]:Yv(e):u,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:m,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Hn?d===-1?16:d|16:d,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wo(t.ssContent),ssFallback:t.ssFallback&&wo(t.ssFallback),el:t.el,anchor:t.anchor}}function Zi(t=" ",e=0){return j(Xd,null,t,e)}function bk(t="",e=!1){return e?(li(),Ya(No,null,t)):j(No,null,t)}function Za(t){return t==null||typeof t=="boolean"?j(No):Wn(t)?j(Hn,null,t.slice()):typeof t=="object"?Il(t):j(Xd,null,String(t))}function Il(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wo(t)}function F1(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Wn(e))r=16;else if(typeof e=="object")if(i&65){const u=e.default;u&&(u._c&&(u._d=!1),F1(t,u()),u._c&&(u._d=!0));return}else{r=32;const u=e._;!u&&!(ey in e)?e._ctx=Wi:u===3&&Wi&&(Wi.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ar(e)?(e={default:e,_ctx:Wi},r=32):(e=String(e),i&64?(r=16,e=[Zi(e)]):r=8);t.children=e,t.shapeFlag|=r}function wk(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const u in i)if(u==="class")e.class!==i.class&&(e.class=v1([e.class,i.class]));else if(u==="style")e.style=m1([e.style,i.style]);else if(Gg(u)){const d=e[u],m=i[u];m&&d!==m&&!(Wn(d)&&d.includes(m))&&(e[u]=d?[].concat(d,m):m)}else u!==""&&(e[u]=i[u])}return e}function Ua(t,e,r,i=null){na(t,e,7,[r,i])}const qB=yk();let WB=0;function ZB(t,e,r){const i=t.type,u=(e?e.appContext:t.appContext)||qB,d={uid:WB++,vnode:t,type:i,parent:e,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,scope:new MM(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(u.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pk(i,u),emitsOptions:QM(i,u),emit:null,emitted:null,propsDefaults:Yr,inheritAttrs:i.inheritAttrs,ctx:Yr,data:Yr,props:Yr,attrs:Yr,slots:Yr,refs:Yr,setupState:Yr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=e?e.root:d,d.emit=sB.bind(null,d),t.ce&&t.ce(d),d}let ki=null;const Ji=()=>ki||Wi,Rd=t=>{ki=t,t.scope.on()},Zu=()=>{ki&&ki.scope.off(),ki=null};function Ck(t){return t.vnode.shapeFlag&4}let pp=!1;function XB(t,e=!1){pp=e;const{props:r,children:i}=t.vnode,u=Ck(t);kB(t,r,u,e),RB(t,i);const d=u?YB(t,e):void 0;return pp=!1,d}function YB(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=Dd(new Proxy(t.ctx,TB));const{setup:i}=r;if(i){const u=t.setupContext=i.length>1?QB(t):null;Rd(t),Wd();const d=zl(i,t,0,[t.props,u]);if(Zd(),Zu(),EM(d)){if(d.then(Zu,Zu),e)return d.then(m=>{DT(t,m,e)}).catch(m=>{Xg(m,t,0)});t.asyncDep=d}else DT(t,d,e)}else Sk(t,e)}function DT(t,e,r){ar(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ri(e)&&(t.setupState=qM(e)),Sk(t,r)}let RT;function Sk(t,e,r){const i=t.type;if(!t.render){if(!e&&RT&&!i.render){const u=i.template||D1(t).template;if(u){const{isCustomElement:d,compilerOptions:m}=t.appContext.config,{delimiters:o,compilerOptions:_}=i,C=Oi(Oi({isCustomElement:d,delimiters:o},m),_);i.render=RT(u,C)}}t.render=i.render||xa}Rd(t),Wd(),EB(t),Zd(),Zu()}function JB(t){return new Proxy(t.attrs,{get(e,r){return Uo(t,"get","$attrs"),e[r]}})}function QB(t){const e=i=>{t.exposed=i||{}};let r;return{get attrs(){return r||(r=JB(t))},slots:t.slots,emit:t.emit,expose:e}}function ty(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(qM(Dd(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in wg)return wg[r](t)}}))}function e5(t,e=!0){return ar(t)?t.displayName||t.name:t.name||e&&t.__name}function t5(t){return ar(t)&&"__vccOpts"in t}const ue=(t,e)=>tB(t,e,pp);function Yu(t,e,r){const i=arguments.length;return i===2?ri(e)&&!Wn(e)?co(e)?j(t,null,[e]):j(t,e):j(t,null,e):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&co(r)&&(r=[r]),j(t,e,r))}const n5="3.2.41",r5="http://www.w3.org/2000/svg",Nu=typeof document<"u"?document:null,zT=Nu&&Nu.createElement("template"),i5={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const u=e?Nu.createElementNS(r5,t):Nu.createElement(t,r?{is:r}:void 0);return t==="select"&&i&&i.multiple!=null&&u.setAttribute("multiple",i.multiple),u},createText:t=>Nu.createTextNode(t),createComment:t=>Nu.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Nu.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,u,d){const m=r?r.previousSibling:e.lastChild;if(u&&(u===d||u.nextSibling))for(;e.insertBefore(u.cloneNode(!0),r),!(u===d||!(u=u.nextSibling)););else{zT.innerHTML=i?`<svg>${t}</svg>`:t;const o=zT.content;if(i){const _=o.firstChild;for(;_.firstChild;)o.appendChild(_.firstChild);o.removeChild(_)}e.insertBefore(o,r)}return[m?m.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}};function o5(t,e,r){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}function a5(t,e,r){const i=t.style,u=Ci(r);if(r&&!u){for(const d in r)Rx(i,d,r[d]);if(e&&!Ci(e))for(const d in e)r[d]==null&&Rx(i,d,"")}else{const d=i.display;u?e!==r&&(i.cssText=r):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=d)}}const LT=/\s*!important$/;function Rx(t,e,r){if(Wn(r))r.forEach(i=>Rx(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=s5(t,e);LT.test(r)?t.setProperty(qd(i),r.replace(LT,""),"important"):t[i]=r}}const FT=["Webkit","Moz","ms"],g0={};function s5(t,e){const r=g0[e];if(r)return r;let i=ra(e);if(i!=="filter"&&i in t)return g0[e]=i;i=Wg(i);for(let u=0;u<FT.length;u++){const d=FT[u]+i;if(d in t)return g0[e]=d}return e}const BT="http://www.w3.org/1999/xlink";function l5(t,e,r,i,u){if(i&&e.startsWith("xlink:"))r==null?t.removeAttributeNS(BT,e.slice(6,e.length)):t.setAttributeNS(BT,e,r);else{const d=h4(e);r==null||d&&!CM(r)?t.removeAttribute(e):t.setAttribute(e,d?"":r)}}function u5(t,e,r,i,u,d,m){if(e==="innerHTML"||e==="textContent"){i&&m(i,u,d),t[e]=r==null?"":r;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=r;const _=r==null?"":r;(t.value!==_||t.tagName==="OPTION")&&(t.value=_),r==null&&t.removeAttribute(e);return}let o=!1;if(r===""||r==null){const _=typeof t[e];_==="boolean"?r=CM(r):r==null&&_==="string"?(r="",o=!0):_==="number"&&(r=0,o=!0)}try{t[e]=r}catch{}o&&t.removeAttribute(e)}function c5(t,e,r,i){t.addEventListener(e,r,i)}function d5(t,e,r,i){t.removeEventListener(e,r,i)}function f5(t,e,r,i,u=null){const d=t._vei||(t._vei={}),m=d[e];if(i&&m)m.value=i;else{const[o,_]=h5(e);if(i){const C=d[e]=v5(i,u);c5(t,o,C,_)}else m&&(d5(t,o,m,_),d[e]=void 0)}}const NT=/(?:Once|Passive|Capture)$/;function h5(t){let e;if(NT.test(t)){e={};let i;for(;i=t.match(NT);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qd(t.slice(2)),e]}let y0=0;const p5=Promise.resolve(),m5=()=>y0||(p5.then(()=>y0=0),y0=Date.now());function v5(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;na(g5(i,r.value),e,5,[i])};return r.value=t,r.attached=m5(),r}function g5(t,e){if(Wn(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>u=>!u._stopped&&i&&i(u))}else return e}const $T=/^on[a-z]/,y5=(t,e,r,i,u=!1,d,m,o,_)=>{e==="class"?o5(t,i,u):e==="style"?a5(t,r,i):Gg(e)?g1(e)||f5(t,e,r,i,m):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):_5(t,e,i,u))?u5(t,e,i,d,m,o,_):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),l5(t,e,i,u))};function _5(t,e,r,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&$T.test(e)&&ar(r)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||$T.test(e)&&Ci(r)?!1:e in t}const bl="transition",kh="animation",os=(t,{slots:e})=>Yu(rk,Ek(t),e);os.displayName="Transition";const Tk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},x5=os.props=Oi({},rk.props,Tk),Mu=(t,e=[])=>{Wn(t)?t.forEach(r=>r(...e)):t&&t(...e)},jT=t=>t?Wn(t)?t.some(e=>e.length>1):t.length>1:!1;function Ek(t){const e={};for(const ce in t)ce in Tk||(e[ce]=t[ce]);if(t.css===!1)return e;const{name:r="v",type:i,duration:u,enterFromClass:d=`${r}-enter-from`,enterActiveClass:m=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:_=d,appearActiveClass:C=m,appearToClass:T=o,leaveFromClass:S=`${r}-leave-from`,leaveActiveClass:P=`${r}-leave-active`,leaveToClass:A=`${r}-leave-to`}=t,O=b5(u),R=O&&O[0],z=O&&O[1],{onBeforeEnter:F,onEnter:N,onEnterCancelled:U,onLeave:G,onLeaveCancelled:q,onBeforeAppear:V=F,onAppear:Z=N,onAppearCancelled:Q=U}=e,te=(ce,de,xe)=>{Tl(ce,de?T:o),Tl(ce,de?C:m),xe&&xe()},ie=(ce,de)=>{ce._isLeaving=!1,Tl(ce,S),Tl(ce,A),Tl(ce,P),de&&de()},ve=ce=>(de,xe)=>{const De=ce?Z:N,ge=()=>te(de,ce,xe);Mu(De,[de,ge]),VT(()=>{Tl(de,ce?_:d),Ms(de,ce?T:o),jT(De)||UT(de,i,R,ge)})};return Oi(e,{onBeforeEnter(ce){Mu(F,[ce]),Ms(ce,d),Ms(ce,m)},onBeforeAppear(ce){Mu(V,[ce]),Ms(ce,_),Ms(ce,C)},onEnter:ve(!1),onAppear:ve(!0),onLeave(ce,de){ce._isLeaving=!0;const xe=()=>ie(ce,de);Ms(ce,S),Pk(),Ms(ce,P),VT(()=>{!ce._isLeaving||(Tl(ce,S),Ms(ce,A),jT(G)||UT(ce,i,z,xe))}),Mu(G,[ce,xe])},onEnterCancelled(ce){te(ce,!1),Mu(U,[ce])},onAppearCancelled(ce){te(ce,!0),Mu(Q,[ce])},onLeaveCancelled(ce){ie(ce),Mu(q,[ce])}})}function b5(t){if(t==null)return null;if(ri(t))return[_0(t.enter),_0(t.leave)];{const e=_0(t);return[e,e]}}function _0(t){return AM(t)}function Ms(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t._vtc||(t._vtc=new Set)).add(e)}function Tl(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const{_vtc:r}=t;r&&(r.delete(e),r.size||(t._vtc=void 0))}function VT(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let w5=0;function UT(t,e,r,i){const u=t._endId=++w5,d=()=>{u===t._endId&&i()};if(r)return setTimeout(d,r);const{type:m,timeout:o,propCount:_}=Ik(t,e);if(!m)return i();const C=m+"end";let T=0;const S=()=>{t.removeEventListener(C,P),d()},P=A=>{A.target===t&&++T>=_&&S()};setTimeout(()=>{T<_&&S()},o+1),t.addEventListener(C,P)}function Ik(t,e){const r=window.getComputedStyle(t),i=O=>(r[O]||"").split(", "),u=i(bl+"Delay"),d=i(bl+"Duration"),m=KT(u,d),o=i(kh+"Delay"),_=i(kh+"Duration"),C=KT(o,_);let T=null,S=0,P=0;e===bl?m>0&&(T=bl,S=m,P=d.length):e===kh?C>0&&(T=kh,S=C,P=_.length):(S=Math.max(m,C),T=S>0?m>C?bl:kh:null,P=T?T===bl?d.length:_.length:0);const A=T===bl&&/\b(transform|all)(,|$)/.test(r[bl+"Property"]);return{type:T,timeout:S,propCount:P,hasTransform:A}}function KT(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,i)=>GT(r)+GT(t[i])))}function GT(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function Pk(){return document.body.offsetHeight}const Ak=new WeakMap,Mk=new WeakMap,C5={name:"TransitionGroup",props:Oi({},x5,{tag:String,moveClass:String}),setup(t,{slots:e}){const r=Ji(),i=nk();let u,d;return Ca(()=>{if(!u.length)return;const m=t.moveClass||`${t.name||"v"}-move`;if(!I5(u[0].el,r.vnode.el,m))return;u.forEach(S5),u.forEach(T5);const o=u.filter(E5);Pk(),o.forEach(_=>{const C=_.el,T=C.style;Ms(C,m),T.transform=T.webkitTransform=T.transitionDuration="";const S=C._moveCb=P=>{P&&P.target!==C||(!P||/transform$/.test(P.propertyName))&&(C.removeEventListener("transitionend",S),C._moveCb=null,Tl(C,m))};C.addEventListener("transitionend",S)})}),()=>{const m=Yn(t),o=Ek(m);let _=m.tag||Hn;u=d,d=e.default?k1(e.default()):[];for(let C=0;C<d.length;C++){const T=d[C];T.key!=null&&fp(T,dp(T,o,i,r))}if(u)for(let C=0;C<u.length;C++){const T=u[C];fp(T,dp(T,o,i,r)),Ak.set(T,T.el.getBoundingClientRect())}return j(_,null,d)}}},kk=C5;function S5(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function T5(t){Mk.set(t,t.el.getBoundingClientRect())}function E5(t){const e=Ak.get(t),r=Mk.get(t),i=e.left-r.left,u=e.top-r.top;if(i||u){const d=t.el.style;return d.transform=d.webkitTransform=`translate(${i}px,${u}px)`,d.transitionDuration="0s",t}}function I5(t,e,r){const i=t.cloneNode();t._vtc&&t._vtc.forEach(m=>{m.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),r.split(/\s+/).forEach(m=>m&&i.classList.add(m)),i.style.display="none";const u=e.nodeType===1?e:e.parentNode;u.appendChild(i);const{hasTransform:d}=Ik(i);return u.removeChild(i),d}const P5=["ctrl","shift","alt","meta"],A5={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>P5.some(r=>t[`${r}Key`]&&!e.includes(r))},HT=(t,e)=>(r,...i)=>{for(let u=0;u<e.length;u++){const d=A5[e[u]];if(d&&d(r,e))return}return t(r,...i)},Rp={beforeMount(t,{value:e},{transition:r}){t._vod=t.style.display==="none"?"":t.style.display,r&&e?r.beforeEnter(t):Oh(t,e)},mounted(t,{value:e},{transition:r}){r&&e&&r.enter(t)},updated(t,{value:e,oldValue:r},{transition:i}){!e!=!r&&(i?e?(i.beforeEnter(t),Oh(t,!0),i.enter(t)):i.leave(t,()=>{Oh(t,!1)}):Oh(t,e))},beforeUnmount(t,{value:e}){Oh(t,e)}};function Oh(t,e){t.style.display=e?t._vod:"none"}const M5=Oi({patchProp:y5},i5);let qT;function Ok(){return qT||(qT=BB(M5))}const Sg=(...t)=>{Ok().render(...t)},k5=(...t)=>{const e=Ok().createApp(...t),{mount:r}=e;return e.mount=i=>{const u=O5(i);if(!u)return;const d=e._component;!ar(d)&&!d.render&&!d.template&&(d.template=u.innerHTML),u.innerHTML="";const m=r(u,!1,u instanceof SVGElement);return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),m},e};function O5(t){return Ci(t)?document.querySelector(t):t}function Ie(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WT(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,i)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WT(Object(r),!0).forEach(function(i){Ie(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WT(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function kr(){return kr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},kr.apply(this,arguments)}function On(t){return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(t)}var D5=function(e){return typeof e=="function"},R5=Array.isArray,z5=function(e){return typeof e=="string"},L5=function(e){return e!==null&&On(e)==="object"},F5=/^on[^a-z]/,B5=function(e){return F5.test(e)},Dk=function(e){var r=Object.create(null);return function(i){var u=r[i];return u||(r[i]=e(i))}},N5=/-(\w)/g,B1=Dk(function(t){return t.replace(N5,function(e,r){return r?r.toUpperCase():""})}),$5=/\B([A-Z])/g,j5=Dk(function(t){return t.replace($5,"-$1").toLowerCase()}),V5=Object.prototype.hasOwnProperty,ZT=function(e,r){return V5.call(e,r)};function U5(t,e,r,i){var u=t[r];if(u!=null){var d=ZT(u,"default");if(d&&i===void 0){var m=u.default;i=u.type!==Function&&D5(m)?m():m}u.type===Boolean&&(!ZT(e,r)&&!d?i=!1:i===""&&(i=!0))}return i}function XT(t){return typeof t=="number"?"".concat(t,"px"):t}function Vh(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return typeof t=="function"?t(e):t!=null?t:r}function qt(){for(var t=[],e=0;e<arguments.length;e++){var r=e<0||arguments.length<=e?void 0:arguments[e];if(!!r){if(z5(r))t.push(r);else if(R5(r))for(var i=0;i<r.length;i++){var u=qt(r[i]);u&&t.push(u)}else if(L5(r))for(var d in r)r[d]&&t.push(d)}}return t.join(" ")}var Rk=function(){if(typeof Map<"u")return Map;function t(e,r){var i=-1;return e.some(function(u,d){return u[0]===r?(i=d,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var i=t(this.__entries__,r),u=this.__entries__[i];return u&&u[1]},e.prototype.set=function(r,i){var u=t(this.__entries__,r);~u?this.__entries__[u][1]=i:this.__entries__.push([r,i])},e.prototype.delete=function(r){var i=this.__entries__,u=t(i,r);~u&&i.splice(u,1)},e.prototype.has=function(r){return!!~t(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,i){i===void 0&&(i=null);for(var u=0,d=this.__entries__;u<d.length;u++){var m=d[u];r.call(i,m[1],m[0])}},e}()}(),zx=typeof window<"u"&&typeof document<"u"&&window.document===document,Tg=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),K5=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Tg):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),G5=2;function H5(t,e){var r=!1,i=!1,u=0;function d(){r&&(r=!1,t()),i&&o()}function m(){K5(d)}function o(){var _=Date.now();if(r){if(_-u<G5)return;i=!0}else r=!0,i=!1,setTimeout(m,e);u=_}return o}var q5=20,W5=["top","right","bottom","left","width","height","size","weight"],Z5=typeof MutationObserver<"u",X5=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=H5(this.refresh.bind(this),q5)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var r=this.observers_,i=r.indexOf(e);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!zx||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Z5?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!zx||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var r=e.propertyName,i=r===void 0?"":r,u=W5.some(function(d){return!!~i.indexOf(d)});u&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),zk=function(t,e){for(var r=0,i=Object.keys(e);r<i.length;r++){var u=i[r];Object.defineProperty(t,u,{value:e[u],enumerable:!1,writable:!1,configurable:!0})}return t},zd=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||Tg},Lk=ny(0,0,0,0);function Eg(t){return parseFloat(t)||0}function YT(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(i,u){var d=t["border-"+u+"-width"];return i+Eg(d)},0)}function Y5(t){for(var e=["top","right","bottom","left"],r={},i=0,u=e;i<u.length;i++){var d=u[i],m=t["padding-"+d];r[d]=Eg(m)}return r}function J5(t){var e=t.getBBox();return ny(0,0,e.width,e.height)}function Q5(t){var e=t.clientWidth,r=t.clientHeight;if(!e&&!r)return Lk;var i=zd(t).getComputedStyle(t),u=Y5(i),d=u.left+u.right,m=u.top+u.bottom,o=Eg(i.width),_=Eg(i.height);if(i.boxSizing==="border-box"&&(Math.round(o+d)!==e&&(o-=YT(i,"left","right")+d),Math.round(_+m)!==r&&(_-=YT(i,"top","bottom")+m)),!tN(t)){var C=Math.round(o+d)-e,T=Math.round(_+m)-r;Math.abs(C)!==1&&(o-=C),Math.abs(T)!==1&&(_-=T)}return ny(u.left,u.top,o,_)}var eN=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof zd(t).SVGGraphicsElement}:function(t){return t instanceof zd(t).SVGElement&&typeof t.getBBox=="function"}}();function tN(t){return t===zd(t).document.documentElement}function nN(t){return zx?eN(t)?J5(t):Q5(t):Lk}function rN(t){var e=t.x,r=t.y,i=t.width,u=t.height,d=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,m=Object.create(d.prototype);return zk(m,{x:e,y:r,width:i,height:u,top:r,right:e+i,bottom:u+r,left:e}),m}function ny(t,e,r,i){return{x:t,y:e,width:r,height:i}}var iN=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ny(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=nN(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),oN=function(){function t(e,r){var i=rN(r);zk(this,{target:e,contentRect:i})}return t}(),aN=function(){function t(e,r,i){if(this.activeObservations_=[],this.observations_=new Rk,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=i}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof zd(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new iN(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof zd(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;!r.has(e)||(r.delete(e),r.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},t.prototype.broadcastActive=function(){if(!!this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(i){return new oN(i.target,i.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Fk=typeof WeakMap<"u"?new WeakMap:new Rk,Bk=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=X5.getInstance(),i=new aN(e,r,this);Fk.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Bk.prototype[t]=function(){var e;return(e=Fk.get(this))[t].apply(e,arguments)}});var Nk=function(){return typeof Tg.ResizeObserver<"u"?Tg.ResizeObserver:Bk}();function $k(t){if(Array.isArray(t))return t}function sN(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],u=!0,d=!1,m,o;try{for(r=r.call(t);!(u=(m=r.next()).done)&&(i.push(m.value),!(e&&i.length===e));u=!0);}catch(_){d=!0,o=_}finally{try{!u&&r.return!=null&&r.return()}finally{if(d)throw o}}return i}}function Lx(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function ry(t,e){if(!!t){if(typeof t=="string")return Lx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lx(t,e)}}function jk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zn(t,e){return $k(t)||sN(t,e)||ry(t,e)||jk()}function lN(t){if(Array.isArray(t))return Lx(t)}function Vk(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bn(t){return lN(t)||Vk(t)||ry(t)||uN()}var cN=typeof global=="object"&&global&&global.Object===Object&&global;const Uk=cN;var dN=typeof self=="object"&&self&&self.Object===Object&&self,fN=Uk||dN||Function("return this")();const Sa=fN;var hN=Sa.Symbol;const ia=hN;var Kk=Object.prototype,pN=Kk.hasOwnProperty,mN=Kk.toString,Dh=ia?ia.toStringTag:void 0;function vN(t){var e=pN.call(t,Dh),r=t[Dh];try{t[Dh]=void 0;var i=!0}catch{}var u=mN.call(t);return i&&(e?t[Dh]=r:delete t[Dh]),u}var gN=Object.prototype,yN=gN.toString;function _N(t){return yN.call(t)}var xN="[object Null]",bN="[object Undefined]",JT=ia?ia.toStringTag:void 0;function rc(t){return t==null?t===void 0?bN:xN:JT&&JT in Object(t)?vN(t):_N(t)}function Gk(t,e){return function(r){return t(e(r))}}var wN=Gk(Object.getPrototypeOf,Object);const N1=wN;function ts(t){return t!=null&&typeof t=="object"}var CN="[object Object]",SN=Function.prototype,TN=Object.prototype,Hk=SN.toString,EN=TN.hasOwnProperty,IN=Hk.call(Object);function qk(t){if(!ts(t)||rc(t)!=CN)return!1;var e=N1(t);if(e===null)return!0;var r=EN.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Hk.call(r)==IN}var PN=function(e){return e!=null&&e!==""};const Fx=PN;var AN=function(e,r){var i=H({},e);return Object.keys(r).forEach(function(u){var d=i[u];if(d)d.type||d.default?d.default=r[u]:d.def?d.def(r[u]):i[u]={type:d,default:r[u]};else throw new Error("not have ".concat(u," prop"))}),i};const Di=AN;var Wk=function(e){for(var r=Object.keys(e),i={},u={},d={},m=0,o=r.length;m<o;m++){var _=r[m];B5(_)?(i[_[2].toLowerCase()+_.slice(3)]=e[_],u[_]=e[_]):d[_]=e[_]}return{onEvents:u,events:i,extraAttrs:d}},$1=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i={},u=/;(?![^(]*\))/g,d=/:(.+)/;return On(e)==="object"?e:(e.split(u).forEach(function(m){if(m){var o=m.split(d);if(o.length>1){var _=r?B1(o[0].trim()):o[0].trim();i[_]=o[1].trim()}}}),i)},md=function(e,r){return e[r]!==void 0},fo=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=Array.isArray(e)?e:[e],u=[];return i.forEach(function(d){Array.isArray(d)?u.push.apply(u,bn(t(d,r))):d&&d.type===Hn?u.push.apply(u,bn(t(d.children,r))):d&&co(d)?r&&!Xk(d)?u.push(d):r||u.push(d):Fx(d)&&u.push(d)}),u},Zk=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(co(e))return e.type===Hn?r==="default"?fo(e.children):[]:e.children&&e.children[r]?fo(e.children[r](i)):[];var u=e.$slots[r]&&e.$slots[r](i);return fo(u)},Ku=function(e){for(var r,i=(e==null||(r=e.vnode)===null||r===void 0?void 0:r.el)||e&&(e.$el||e);i&&!i.tagName;)i=i.nextSibling;return i},MN=function(e){var r={};if(e.$&&e.$.vnode){var i=e.$.vnode.props||{};Object.keys(e.$props).forEach(function(o){var _=e.$props[o],C=j5(o);(_!==void 0||C in i)&&(r[o]=_)})}else if(co(e)&&On(e.type)==="object"){var u=e.props||{},d={};Object.keys(u).forEach(function(o){d[B1(o)]=u[o]});var m=e.type.props||{};Object.keys(m).forEach(function(o){var _=U5(m,d,o,d[o]);(_!==void 0||o in d)&&(r[o]=_)})}return r},j1=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,d=void 0;if(e.$){var m=e[r];if(m!==void 0)return typeof m=="function"&&u?m(i):m;d=e.$slots[r],d=u&&d?d(i):d}else if(co(e)){var o=e.props&&e.props[r];if(o!==void 0&&e.props!==null)return typeof o=="function"&&u?o(i):o;e.type===Hn?d=e.children:e.children&&e.children[r]&&(d=e.children[r],d=u&&d?d(i):d)}return Array.isArray(d)&&(d=fo(d),d=d.length===1?d[0]:d,d=d.length===0?void 0:d),d};function QT(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r={};return t.$?r=H(H({},r),t.$attrs):r=H(H({},r),t.props),Wk(r)[e?"onEvents":"events"]}function kN(t,e){var r=(co(t)?t.props:t.$attrs)||{},i=r.style||{};if(typeof i=="string")i=$1(i,e);else if(e&&i){var u={};return Object.keys(i).forEach(function(d){return u[B1(d)]=i[d]}),u}return i}function Xk(t){return t&&(t.type===No||t.type===Hn&&t.children.length===0||t.type===Xd&&t.children.trim()==="")}function Ko(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];return t.forEach(function(r){Array.isArray(r)?e.push.apply(e,bn(r)):(r==null?void 0:r.type)===Hn?e.push.apply(e,bn(Ko(r.children))):e.push(r)}),e.filter(function(r){return!Xk(r)})}function Co(t){return Array.isArray(t)&&t.length===1&&(t=t[0]),t&&t.__v_isVNode&&On(t.type)!=="symbol"}function mp(t,e){var r,i,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"default";return(r=e[u])!==null&&r!==void 0?r:(i=t[u])===null||i===void 0?void 0:i.call(t)}const Yd=jt({compatConfig:{MODE:3},name:"ResizeObserver",props:{disabled:Boolean,onResize:Function},emits:["resize"],setup:function(e,r){var i=r.slots,u=Or({width:0,height:0,offsetHeight:0,offsetWidth:0}),d=null,m=null,o=function(){m&&(m.disconnect(),m=null)},_=function(P){var A=e.onResize,O=P[0].target,R=O.getBoundingClientRect(),z=R.width,F=R.height,N=O.offsetWidth,U=O.offsetHeight,G=Math.floor(z),q=Math.floor(F);if(u.width!==G||u.height!==q||u.offsetWidth!==N||u.offsetHeight!==U){var V={width:G,height:q,offsetWidth:N,offsetHeight:U};kr(u,V),A&&Promise.resolve().then(function(){A(H(H({},V),{},{offsetWidth:N,offsetHeight:U}),O)})}},C=Ji(),T=function(){var P=e.disabled;if(P){o();return}var A=Ku(C),O=A!==d;O&&(o(),d=A),!m&&A&&(m=new Nk(_),m.observe(A))};return wr(function(){T()}),Ca(function(){T()}),is(function(){o()}),an(function(){return e.disabled},function(){T()},{flush:"post"}),function(){var S;return(S=i.default)===null||S===void 0?void 0:S.call(i)[0]}}});var Yk=function(e){return setTimeout(e,16)},Jk=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(Yk=function(e){return window.requestAnimationFrame(e)},Jk=function(e){return window.cancelAnimationFrame(e)});var eE=0,V1=new Map;function Qk(t){V1.delete(t)}function fr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;eE+=1;var r=eE;function i(u){if(u===0)Qk(r),t();else{var d=Yk(function(){i(u-1)});V1.set(r,d)}}return i(e),r}fr.cancel=function(t){var e=V1.get(t);return Qk(e),Jk(e)};var Yi=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r},zp=function(e){var r=e;return r.install=function(i){i.component(r.displayName||r.name,e)},e},eO=!1;try{var tE=Object.defineProperty({},"passive",{get:function(){eO=!0}});window.addEventListener("testPassive",null,tE),window.removeEventListener("testPassive",null,tE)}catch{}const ao=eO;function zo(t,e,r,i){if(t&&t.addEventListener){var u=i;u===void 0&&ao&&(e==="touchstart"||e==="touchmove"||e==="wheel")&&(u={passive:!1}),t.addEventListener(e,r,u)}return{remove:function(){t&&t.removeEventListener&&t.removeEventListener(e,r)}}}function ON(t,e){if(t==null)return{};var r={},i=Object.keys(t),u,d;for(d=0;d<i.length;d++)u=i[d],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function Cr(t,e){if(t==null)return{};var r=ON(t,e),i,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(u=0;u<d.length;u++)i=d[u],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(r[i]=t[i]))}return r}const tO={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages"};var DN={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const RN=DN;var zN={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};const nO=zN;var LN={lang:H({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},RN),timePickerLocale:H({},nO)};const nE=LN;var ko="${label} is not a valid ${type}",FN={locale:"en",Pagination:tO,DatePicker:nE,TimePicker:nO,Calendar:nE,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ko,method:ko,array:ko,object:ko,number:ko,date:ko,boolean:ko,integer:ko,float:ko,regexp:ko,email:ko,url:ko,hex:ko},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}};const Ld=FN,rO=jt({compatConfig:{MODE:3},name:"LocaleReceiver",props:{componentName:String,defaultLocale:{type:[Object,Function]},children:{type:Function}},setup:function(e,r){var i=r.slots,u=Kn("localeData",{}),d=ue(function(){var o=e.componentName,_=o===void 0?"global":o,C=e.defaultLocale,T=C||Ld[_||"global"],S=u.antLocale,P=_&&S?S[_]:{};return H(H({},typeof T=="function"?T():T),P||{})}),m=ue(function(){var o=u.antLocale,_=o&&o.locale;return o&&o.exist&&!_?Ld.locale:_});return function(){var o=e.children||i.default,_=u.antLocale;return o==null?void 0:o(d.value,m.value,_)}}});function Lp(t,e,r){var i=Kn("localeData",{}),u=ue(function(){var d=i.antLocale,m=gi(e)||Ld[t||"global"],o=t&&d?d[t]:{};return H(H(H({},typeof m=="function"?m():m),o||{}),gi(r)||{})});return[u]}var iO=function(){var e=hr("empty",{}),r=e.getPrefixCls,i=r("empty-img-default");return j("svg",{class:i,width:"184",height:"152",viewBox:"0 0 184 152"},[j("g",{fill:"none","fill-rule":"evenodd"},[j("g",{transform:"translate(24 31.67)"},[j("ellipse",{class:"".concat(i,"-ellipse"),cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"},null),j("path",{class:"".concat(i,"-path-1"),d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"},null),j("path",{class:"".concat(i,"-path-2"),d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",transform:"translate(13.56)"},null),j("path",{class:"".concat(i,"-path-3"),d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"},null),j("path",{class:"".concat(i,"-path-4"),d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"},null)]),j("path",{class:"".concat(i,"-path-5"),d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"},null),j("g",{class:"".concat(i,"-g"),transform:"translate(149.65 15.383)"},[j("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"},null),j("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"},null)])])])};iO.PRESENTED_IMAGE_DEFAULT=!0;const BN=iO;var oO=function(){var e=hr("empty",{}),r=e.getPrefixCls,i=r("empty-img-simple");return j("svg",{class:i,width:"64",height:"41",viewBox:"0 0 64 41"},[j("g",{transform:"translate(0 1)",fill:"none","fill-rule":"evenodd"},[j("ellipse",{class:"".concat(i,"-ellipse"),fill:"#F5F5F5",cx:"32",cy:"33",rx:"32",ry:"7"},null),j("g",{class:"".concat(i,"-g"),"fill-rule":"nonzero",stroke:"#D9D9D9"},[j("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"},null),j("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:"#FAFAFA",class:"".concat(i,"-path")},null)])])])};oO.PRESENTED_IMAGE_SIMPLE=!0;const NN=oO;function rE(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function aO(t,e,r){return e&&rE(t.prototype,e),r&&rE(t,r),t}function Jv(){return(Jv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}function sO(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function lO(t,e){if(t==null)return{};var r,i,u={},d=Object.keys(t);for(i=0;i<d.length;i++)e.indexOf(r=d[i])>=0||(u[r]=t[r]);return u}function iE(t){return((e=t)!=null&&typeof e=="object"&&Array.isArray(e)===!1)==1&&Object.prototype.toString.call(t)==="[object Object]";var e}var uO=Object.prototype,cO=uO.toString,$N=uO.hasOwnProperty,dO=/^\s*function (\w+)/;function oE(t){var e,r=(e=t==null?void 0:t.type)!==null&&e!==void 0?e:t;if(r){var i=r.toString().match(dO);return i?i[1]:""}return""}var Ju=function(t){var e,r;return iE(t)!==!1&&typeof(e=t.constructor)=="function"&&iE(r=e.prototype)!==!1&&r.hasOwnProperty("isPrototypeOf")!==!1},jN=function(t){return t},so=jN,vp=function(t,e){return $N.call(t,e)},VN=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Fd=Array.isArray||function(t){return cO.call(t)==="[object Array]"},Bd=function(t){return cO.call(t)==="[object Function]"},Ig=function(t){return Ju(t)&&vp(t,"_vueTypes_name")},fO=function(t){return Ju(t)&&(vp(t,"type")||["_vueTypes_name","validator","default","required"].some(function(e){return vp(t,e)}))};function U1(t,e){return Object.defineProperty(t.bind(e),"__original",{value:t})}function ic(t,e,r){var i;r===void 0&&(r=!1);var u=!0,d="";i=Ju(t)?t:{type:t};var m=Ig(i)?i._vueTypes_name+" - ":"";if(fO(i)&&i.type!==null){if(i.type===void 0||i.type===!0||!i.required&&e===void 0)return u;Fd(i.type)?(u=i.type.some(function(S){return ic(S,e,!0)===!0}),d=i.type.map(function(S){return oE(S)}).join(" or ")):u=(d=oE(i))==="Array"?Fd(e):d==="Object"?Ju(e):d==="String"||d==="Number"||d==="Boolean"||d==="Function"?function(S){if(S==null)return"";var P=S.constructor.toString().match(dO);return P?P[1]:""}(e)===d:e instanceof i.type}if(!u){var o=m+'value "'+e+'" should be of type "'+d+'"';return r===!1?(so(o),!1):o}if(vp(i,"validator")&&Bd(i.validator)){var _=so,C=[];if(so=function(S){C.push(S)},u=i.validator(e),so=_,!u){var T=(C.length>1?"* ":"")+C.join(`
* `);return C.length=0,r===!1?(so(T),u):T}}return u}function Go(t,e){var r=Object.defineProperties(e,{_vueTypes_name:{value:t,writable:!0},isRequired:{get:function(){return this.required=!0,this}},def:{value:function(u){return u!==void 0||this.default?Bd(u)||ic(this,u,!0)===!0?(this.default=Fd(u)?function(){return[].concat(u)}:Ju(u)?function(){return Object.assign({},u)}:u,this):(so(this._vueTypes_name+' - invalid default value: "'+u+'"'),this):this}}}),i=r.validator;return Bd(i)&&(r.validator=U1(i,r)),r}function ns(t,e){var r=Go(t,e);return Object.defineProperty(r,"validate",{value:function(i){return Bd(this.validator)&&so(this._vueTypes_name+` - calling .validate() will overwrite the current custom validator function. Validator info:
`+JSON.stringify(this)),this.validator=U1(i,this),this}})}function aE(t,e,r){var i,u,d=(i=e,u={},Object.getOwnPropertyNames(i).forEach(function(S){u[S]=Object.getOwnPropertyDescriptor(i,S)}),Object.defineProperties({},u));if(d._vueTypes_name=t,!Ju(r))return d;var m,o,_=r.validator,C=lO(r,["validator"]);if(Bd(_)){var T=d.validator;T&&(T=(o=(m=T).__original)!==null&&o!==void 0?o:m),d.validator=U1(T?function(S){return T.call(this,S)&&_.call(this,S)}:_,d)}return Object.assign(d,C)}function iy(t){return t.replace(/^(?!\s*$)/gm,"  ")}var UN=function(){return ns("any",{})},KN=function(){return ns("function",{type:Function})},GN=function(){return ns("boolean",{type:Boolean})},HN=function(){return ns("string",{type:String})},qN=function(){return ns("number",{type:Number})},WN=function(){return ns("array",{type:Array})},ZN=function(){return ns("object",{type:Object})},XN=function(){return Go("integer",{type:Number,validator:function(t){return VN(t)}})},YN=function(){return Go("symbol",{validator:function(t){return typeof t=="symbol"}})};function JN(t,e){if(e===void 0&&(e="custom validation failed"),typeof t!="function")throw new TypeError("[VueTypes error]: You must provide a function as argument");return Go(t.name||"<<anonymous function>>",{validator:function(r){var i=t(r);return i||so(this._vueTypes_name+" - "+e),i}})}function QN(t){if(!Fd(t))throw new TypeError("[VueTypes error]: You must provide an array as argument.");var e='oneOf - value should be one of "'+t.join('", "')+'".',r=t.reduce(function(i,u){if(u!=null){var d=u.constructor;i.indexOf(d)===-1&&i.push(d)}return i},[]);return Go("oneOf",{type:r.length>0?r:void 0,validator:function(i){var u=t.indexOf(i)!==-1;return u||so(e),u}})}function e6(t){if(!Fd(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");for(var e=!1,r=[],i=0;i<t.length;i+=1){var u=t[i];if(fO(u)){if(Ig(u)&&u._vueTypes_name==="oneOf"){r=r.concat(u.type);continue}if(Bd(u.validator)&&(e=!0),u.type!==!0&&u.type){r=r.concat(u.type);continue}}r.push(u)}return r=r.filter(function(d,m){return r.indexOf(d)===m}),Go("oneOfType",e?{type:r,validator:function(d){var m=[],o=t.some(function(_){var C=ic(Ig(_)&&_._vueTypes_name==="oneOf"?_.type||null:_,d,!0);return typeof C=="string"&&m.push(C),C===!0});return o||so("oneOfType - provided value does not match any of the "+m.length+` passed-in validators:
`+iy(m.join(`
`))),o}}:{type:r})}function t6(t){return Go("arrayOf",{type:Array,validator:function(e){var r,i=e.every(function(u){return(r=ic(t,u,!0))===!0});return i||so(`arrayOf - value validation error:
`+iy(r)),i}})}function n6(t){return Go("instanceOf",{type:t})}function r6(t){return Go("objectOf",{type:Object,validator:function(e){var r,i=Object.keys(e).every(function(u){return(r=ic(t,e[u],!0))===!0});return i||so(`objectOf - value validation error:
`+iy(r)),i}})}function i6(t){var e=Object.keys(t),r=e.filter(function(u){var d;return!!(!((d=t[u])===null||d===void 0)&&d.required)}),i=Go("shape",{type:Object,validator:function(u){var d=this;if(!Ju(u))return!1;var m=Object.keys(u);if(r.length>0&&r.some(function(_){return m.indexOf(_)===-1})){var o=r.filter(function(_){return m.indexOf(_)===-1});return so(o.length===1?'shape - required property "'+o[0]+'" is not defined.':'shape - required properties "'+o.join('", "')+'" are not defined.'),!1}return m.every(function(_){if(e.indexOf(_)===-1)return d._vueTypes_isLoose===!0||(so('shape - shape definition does not include a "'+_+'" property. Allowed keys: "'+e.join('", "')+'".'),!1);var C=ic(t[_],u[_],!0);return typeof C=="string"&&so('shape - "'+_+`" property validation error:
 `+iy(C)),C===!0})}});return Object.defineProperty(i,"_vueTypes_isLoose",{writable:!0,value:!1}),Object.defineProperty(i,"loose",{get:function(){return this._vueTypes_isLoose=!0,this}}),i}var Ha=function(){function t(){}return t.extend=function(e){var r=this;if(Fd(e))return e.forEach(function(S){return r.extend(S)}),this;var i=e.name,u=e.validate,d=u!==void 0&&u,m=e.getter,o=m!==void 0&&m,_=lO(e,["name","validate","getter"]);if(vp(this,i))throw new TypeError('[VueTypes error]: Type "'+i+'" already defined');var C,T=_.type;return Ig(T)?(delete _.type,Object.defineProperty(this,i,o?{get:function(){return aE(i,T,_)}}:{value:function(){var S,P=aE(i,T,_);return P.validator&&(P.validator=(S=P.validator).bind.apply(S,[P].concat([].slice.call(arguments)))),P}})):(C=o?{get:function(){var S=Object.assign({},_);return d?ns(i,S):Go(i,S)},enumerable:!0}:{value:function(){var S,P,A=Object.assign({},_);return S=d?ns(i,A):Go(i,A),A.validator&&(S.validator=(P=A.validator).bind.apply(P,[S].concat([].slice.call(arguments)))),S},enumerable:!0},Object.defineProperty(this,i,C))},aO(t,null,[{key:"any",get:function(){return UN()}},{key:"func",get:function(){return KN().def(this.defaults.func)}},{key:"bool",get:function(){return GN().def(this.defaults.bool)}},{key:"string",get:function(){return HN().def(this.defaults.string)}},{key:"number",get:function(){return qN().def(this.defaults.number)}},{key:"array",get:function(){return WN().def(this.defaults.array)}},{key:"object",get:function(){return ZN().def(this.defaults.object)}},{key:"integer",get:function(){return XN().def(this.defaults.integer)}},{key:"symbol",get:function(){return YN()}}]),t}();function hO(t){var e;return t===void 0&&(t={func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}),(e=function(r){function i(){return r.apply(this,arguments)||this}return sO(i,r),aO(i,null,[{key:"sensibleDefaults",get:function(){return Jv({},this.defaults)},set:function(u){this.defaults=u!==!1?Jv({},u!==!0?u:t):{}}}]),i}(Ha)).defaults=Jv({},t),e}Ha.defaults={},Ha.custom=JN,Ha.oneOf=QN,Ha.instanceOf=n6,Ha.oneOfType=e6,Ha.arrayOf=t6,Ha.objectOf=r6,Ha.shape=i6,Ha.utils={validate:function(t,e){return ic(e,t,!0)===!0},toType:function(t,e,r){return r===void 0&&(r=!1),r?ns(t,e):Go(t,e)}};(function(t){function e(){return t.apply(this,arguments)||this}return sO(e,t),e})(hO());var pO=hO({func:void 0,bool:void 0,string:void 0,number:void 0,array:void 0,object:void 0,integer:void 0});pO.extend([{name:"looseBool",getter:!0,type:Boolean,default:void 0},{name:"style",getter:!0,type:[String,Object],default:void 0},{name:"VueNode",getter:!0,type:null}]);const et=pO;var o6=["image","description","imageStyle","class"],mO=j(BN,null,null),vO=j(NN,null,null),Jd=function(e,r){var i,u=r.slots,d=u===void 0?{}:u,m=r.attrs,o=hr("empty",e),_=o.direction,C=o.prefixCls,T=C.value,S=H(H({},e),m),P=S.image,A=P===void 0?mO:P,O=S.description,R=O===void 0?((i=d.description)===null||i===void 0?void 0:i.call(d))||void 0:O,z=S.imageStyle,F=S.class,N=F===void 0?"":F,U=Cr(S,o6);return j(rO,{componentName:"Empty",children:function(q){var V,Z=typeof R<"u"?R:q.description,Q=typeof Z=="string"?Z:"empty",te=null;return typeof A=="string"?te=j("img",{alt:Q,src:A},null):te=A,j("div",H({class:qt(T,N,(V={},Ie(V,"".concat(T,"-normal"),A===vO),Ie(V,"".concat(T,"-rtl"),_.value==="rtl"),V))},U),[j("div",{class:"".concat(T,"-image"),style:z},[te]),Z&&j("p",{class:"".concat(T,"-description")},[Z]),d.default&&j("div",{class:"".concat(T,"-footer")},[Ko(d.default())])])}},null)};Jd.displayName="AEmpty";Jd.PRESENTED_IMAGE_DEFAULT=mO;Jd.PRESENTED_IMAGE_SIMPLE=vO;Jd.inheritAttrs=!1;Jd.props={prefixCls:String,image:et.any,description:et.any,imageStyle:{type:Object,default:void 0}};const $u=zp(Jd);var a6=function(e){var r=hr("empty",e),i=r.prefixCls,u=function(m){switch(m){case"Table":case"List":return j($u,{image:$u.PRESENTED_IMAGE_SIMPLE},null);case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return j($u,{image:$u.PRESENTED_IMAGE_SIMPLE,class:"".concat(i.value,"-small")},null);default:return j($u,null,null)}};return u(e.componentName)};function gO(t){return j(a6,{componentName:t},null)}var sE={};function s6(t,e){}function l6(t,e,r){!e&&!sE[r]&&(t(!1,r),sE[r]=!0)}function yO(t,e){l6(s6,t,e)}const Ll=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";yO(t,"[antdv: ".concat(e,"] ").concat(r))};var Bx="internalMark",Qv=jt({compatConfig:{MODE:3},name:"ALocaleProvider",props:{locale:{type:Object},ANT_MARK__:String},setup:function(e,r){var i=r.slots;Ll(e.ANT_MARK__===Bx,"LocaleProvider","`LocaleProvider` is deprecated. Please use `locale` with `ConfigProvider` instead");var u=Or({antLocale:H(H({},e.locale),{},{exist:!0}),ANT_MARK__:Bx});return sr("localeData",u),an(function(){return e.locale},function(){u.antLocale=H(H({},e.locale),{},{exist:!0})},{immediate:!0}),function(){var d;return(d=i.default)===null||d===void 0?void 0:d.call(i)}}});Qv.install=function(t){return t.component(Qv.name,Qv),t};const u6=zp(Qv);Yi("bottomLeft","bottomRight","topLeft","topRight");var oy=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=H(e?{name:e,appear:!0,enterFromClass:"".concat(e,"-enter ").concat(e,"-enter-prepare"),enterActiveClass:"".concat(e,"-enter ").concat(e,"-enter-prepare"),enterToClass:"".concat(e,"-enter ").concat(e,"-enter-active"),leaveFromClass:" ".concat(e,"-leave"),leaveActiveClass:"".concat(e,"-leave ").concat(e,"-leave-active"),leaveToClass:"".concat(e,"-leave ").concat(e,"-leave-active")}:{css:!1},r);return i},_O=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=H(e?{name:e,appear:!0,appearActiveClass:"".concat(e),appearToClass:"".concat(e,"-appear ").concat(e,"-appear-active"),enterFromClass:"".concat(e,"-appear ").concat(e,"-enter ").concat(e,"-appear-prepare ").concat(e,"-enter-prepare"),enterActiveClass:"".concat(e),enterToClass:"".concat(e,"-enter ").concat(e,"-appear ").concat(e,"-appear-active ").concat(e,"-enter-active"),leaveActiveClass:"".concat(e," ").concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-active")}:{css:!1},r);return i},gp=function(e,r,i){return i!==void 0?i:"".concat(e,"-").concat(r)};const c6=jt({name:"Notice",inheritAttrs:!1,props:["prefixCls","duration","updateMark","noticeKey","closeIcon","closable","props","onClick","onClose","holder","visible"],setup:function(e,r){var i=r.attrs,u=r.slots,d,m=ue(function(){return e.duration===void 0?1.5:e.duration}),o=function(){m.value&&(d=setTimeout(function(){C()},m.value*1e3))},_=function(){d&&(clearTimeout(d),d=null)},C=function(P){P&&P.stopPropagation(),_();var A=e.onClose,O=e.noticeKey;A&&A(O)},T=function(){_(),o()};return wr(function(){o()}),is(function(){_()}),an([m,function(){return e.updateMark},function(){return e.visible}],function(S,P){var A=zn(S,3),O=A[0],R=A[1],z=A[2],F=zn(P,3),N=F[0],U=F[1],G=F[2];(O!==N||R!==U||z!==G&&G)&&T()},{flush:"post"}),function(){var S,P,A=e.prefixCls,O=e.closable,R=e.closeIcon,z=R===void 0?(S=u.closeIcon)===null||S===void 0?void 0:S.call(u):R,F=e.onClick,N=e.holder,U=i.class,G=i.style,q="".concat(A,"-notice"),V=Object.keys(i).reduce(function(Q,te){return(te.substr(0,5)==="data-"||te.substr(0,5)==="aria-"||te==="role")&&(Q[te]=i[te]),Q},{}),Z=j("div",H({class:qt(q,U,Ie({},"".concat(q,"-closable"),O)),style:G,onMouseenter:_,onMouseleave:o,onClick:F},V),[j("div",{class:"".concat(q,"-content")},[(P=u.default)===null||P===void 0?void 0:P.call(u)]),O?j("a",{tabindex:0,onClick:C,class:"".concat(q,"-close")},[z||j("span",{class:"".concat(q,"-close-x")},null)]):null]);return N?j(L1,{to:N},{default:function(){return Z}}):Z}}});var d6=["name","getContainer","appContext","prefixCls","rootPrefixCls","transitionName","hasTransitionName"],lE=0,f6=Date.now();function uE(){var t=lE;return lE+=1,"rcNotification_".concat(f6,"_").concat(t)}var Nx=jt({name:"Notification",inheritAttrs:!1,props:["prefixCls","transitionName","animation","maxCount","closeIcon"],setup:function(e,r){var i=r.attrs,u=r.expose,d=r.slots,m=new Map,o=qe([]),_=ue(function(){var S=e.prefixCls,P=e.animation,A=P===void 0?"fade":P,O=e.transitionName;return!O&&A&&(O="".concat(S,"-").concat(A)),_O(O)}),C=function(P,A){var O=P.key||uE(),R=H(H({},P),{},{key:O}),z=e.maxCount,F=o.value.map(function(U){return U.notice.key}).indexOf(O),N=o.value.concat();F!==-1?N.splice(F,1,{notice:R,holderCallback:A}):(z&&o.value.length>=z&&(R.key=N[0].notice.key,R.updateMark=uE(),R.userPassKey=O,N.shift()),N.push({notice:R,holderCallback:A})),o.value=N},T=function(P){o.value=o.value.filter(function(A){var O=A.notice,R=O.key,z=O.userPassKey,F=z||R;return F!==P})};return u({add:C,remove:T,notices:o}),function(){var S,P,A=e.prefixCls,O=e.closeIcon,R=O===void 0?(S=d.closeIcon)===null||S===void 0?void 0:S.call(d,{prefixCls:A}):O,z=o.value.map(function(N,U){var G=N.notice,q=N.holderCallback,V=U===o.value.length-1?G.updateMark:void 0,Z=G.key,Q=G.userPassKey,te=G.content,ie=H(H(H({prefixCls:A,closeIcon:typeof R=="function"?R({prefixCls:A}):R},G),G.props),{},{key:Z,noticeKey:Q||Z,updateMark:V,onClose:function(ce){var de;T(ce),(de=G.onClose)===null||de===void 0||de.call(G)},onClick:G.onClick});return q?j("div",{key:Z,class:"".concat(A,"-hook-holder"),ref:function(ce){typeof Z>"u"||(ce?(m.set(Z,ce),q(ce,ie)):m.delete(Z))}},null):j(c6,ie,{default:function(){return[typeof te=="function"?te({prefixCls:A}):te]}})}),F=(P={},Ie(P,A,1),Ie(P,i.class,!!i.class),P);return j("div",{class:F,style:i.style||{top:"65px",left:"50%"}},[j(kk,H({tag:"div"},_.value),{default:function(){return[z]}})])}}});Nx.newInstance=function(e,r){var i=e||{},u=i.name,d=u===void 0?"notification":u,m=i.getContainer,o=i.appContext,_=i.prefixCls,C=i.rootPrefixCls,T=i.transitionName,S=i.hasTransitionName,P=Cr(i,d6),A=document.createElement("div");if(m){var O=m();O.appendChild(A)}else document.body.appendChild(A);var R=jt({compatConfig:{MODE:3},name:"NotificationWrapper",setup:function(N,U){var G=U.attrs,q=qe();return wr(function(){r({notice:function(Z){var Q;(Q=q.value)===null||Q===void 0||Q.add(Z)},removeNotice:function(Z){var Q;(Q=q.value)===null||Q===void 0||Q.remove(Z)},destroy:function(){Sg(null,A),A.parentNode&&A.parentNode.removeChild(A)},component:q})}),function(){var V=Ro,Z=V.getPrefixCls(d,_),Q=V.getRootPrefixCls(C,Z),te=S?T:"".concat(Q,"-").concat(T);return j(Td,H(H({},V),{},{notUpdateGlobalConfig:!0,prefixCls:Q}),{default:function(){return[j(Nx,H(H({ref:q},G),{},{prefixCls:Z,transitionName:te}),null)]}})}}}),z=j(R,P);z.appContext=o||z.appContext,Sg(z,A)};const xO=Nx;var h6={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const p6=h6;function Bi(t,e){m6(t)&&(t="100%");var r=v6(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function Pv(t){return Math.min(1,Math.max(0,t))}function m6(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function v6(t){return typeof t=="string"&&t.indexOf("%")!==-1}function bO(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Av(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Gu(t){return t.length===1?"0"+t:String(t)}function g6(t,e,r){return{r:Bi(t,255)*255,g:Bi(e,255)*255,b:Bi(r,255)*255}}function cE(t,e,r){t=Bi(t,255),e=Bi(e,255),r=Bi(r,255);var i=Math.max(t,e,r),u=Math.min(t,e,r),d=0,m=0,o=(i+u)/2;if(i===u)m=0,d=0;else{var _=i-u;switch(m=o>.5?_/(2-i-u):_/(i+u),i){case t:d=(e-r)/_+(e<r?6:0);break;case e:d=(r-t)/_+2;break;case r:d=(t-e)/_+4;break}d/=6}return{h:d,s:m,l:o}}function x0(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*(6*r):r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function y6(t,e,r){var i,u,d;if(t=Bi(t,360),e=Bi(e,100),r=Bi(r,100),e===0)u=r,d=r,i=r;else{var m=r<.5?r*(1+e):r+e-r*e,o=2*r-m;i=x0(o,m,t+1/3),u=x0(o,m,t),d=x0(o,m,t-1/3)}return{r:i*255,g:u*255,b:d*255}}function $x(t,e,r){t=Bi(t,255),e=Bi(e,255),r=Bi(r,255);var i=Math.max(t,e,r),u=Math.min(t,e,r),d=0,m=i,o=i-u,_=i===0?0:o/i;if(i===u)d=0;else{switch(i){case t:d=(e-r)/o+(e<r?6:0);break;case e:d=(r-t)/o+2;break;case r:d=(t-e)/o+4;break}d/=6}return{h:d,s:_,v:m}}function _6(t,e,r){t=Bi(t,360)*6,e=Bi(e,100),r=Bi(r,100);var i=Math.floor(t),u=t-i,d=r*(1-e),m=r*(1-u*e),o=r*(1-(1-u)*e),_=i%6,C=[r,m,d,d,o,r][_],T=[o,r,r,m,d,d][_],S=[d,d,o,r,r,m][_];return{r:C*255,g:T*255,b:S*255}}function jx(t,e,r,i){var u=[Gu(Math.round(t).toString(16)),Gu(Math.round(e).toString(16)),Gu(Math.round(r).toString(16))];return i&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0):u.join("")}function x6(t,e,r,i,u){var d=[Gu(Math.round(t).toString(16)),Gu(Math.round(e).toString(16)),Gu(Math.round(r).toString(16)),Gu(b6(i))];return u&&d[0].startsWith(d[0].charAt(1))&&d[1].startsWith(d[1].charAt(1))&&d[2].startsWith(d[2].charAt(1))&&d[3].startsWith(d[3].charAt(1))?d[0].charAt(0)+d[1].charAt(0)+d[2].charAt(0)+d[3].charAt(0):d.join("")}function b6(t){return Math.round(parseFloat(t)*255).toString(16)}function dE(t){return Do(t)/255}function Do(t){return parseInt(t,16)}function w6(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var Vx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function vd(t){var e={r:0,g:0,b:0},r=1,i=null,u=null,d=null,m=!1,o=!1;return typeof t=="string"&&(t=T6(t)),typeof t=="object"&&(Ts(t.r)&&Ts(t.g)&&Ts(t.b)?(e=g6(t.r,t.g,t.b),m=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):Ts(t.h)&&Ts(t.s)&&Ts(t.v)?(i=Av(t.s),u=Av(t.v),e=_6(t.h,i,u),m=!0,o="hsv"):Ts(t.h)&&Ts(t.s)&&Ts(t.l)&&(i=Av(t.s),d=Av(t.l),e=y6(t.h,i,d),m=!0,o="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(r=t.a)),r=bO(r),{ok:m,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}var C6="[-\\+]?\\d+%?",S6="[-\\+]?\\d*\\.\\d+%?",kl="(?:".concat(S6,")|(?:").concat(C6,")"),b0="[\\s|\\(]+(".concat(kl,")[,|\\s]+(").concat(kl,")[,|\\s]+(").concat(kl,")\\s*\\)?"),w0="[\\s|\\(]+(".concat(kl,")[,|\\s]+(").concat(kl,")[,|\\s]+(").concat(kl,")[,|\\s]+(").concat(kl,")\\s*\\)?"),va={CSS_UNIT:new RegExp(kl),rgb:new RegExp("rgb"+b0),rgba:new RegExp("rgba"+w0),hsl:new RegExp("hsl"+b0),hsla:new RegExp("hsla"+w0),hsv:new RegExp("hsv"+b0),hsva:new RegExp("hsva"+w0),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function T6(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(Vx[t])t=Vx[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=va.rgb.exec(t);return r?{r:r[1],g:r[2],b:r[3]}:(r=va.rgba.exec(t),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=va.hsl.exec(t),r?{h:r[1],s:r[2],l:r[3]}:(r=va.hsla.exec(t),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=va.hsv.exec(t),r?{h:r[1],s:r[2],v:r[3]}:(r=va.hsva.exec(t),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=va.hex8.exec(t),r?{r:Do(r[1]),g:Do(r[2]),b:Do(r[3]),a:dE(r[4]),format:e?"name":"hex8"}:(r=va.hex6.exec(t),r?{r:Do(r[1]),g:Do(r[2]),b:Do(r[3]),format:e?"name":"hex"}:(r=va.hex4.exec(t),r?{r:Do(r[1]+r[1]),g:Do(r[2]+r[2]),b:Do(r[3]+r[3]),a:dE(r[4]+r[4]),format:e?"name":"hex8"}:(r=va.hex3.exec(t),r?{r:Do(r[1]+r[1]),g:Do(r[2]+r[2]),b:Do(r[3]+r[3]),format:e?"name":"hex"}:!1)))))))))}function Ts(t){return Boolean(va.CSS_UNIT.exec(String(t)))}var C0=function(){function t(e,r){e===void 0&&(e=""),r===void 0&&(r={});var i;if(e instanceof t)return e;typeof e=="number"&&(e=w6(e)),this.originalInput=e;var u=vd(e);this.originalInput=e,this.r=u.r,this.g=u.g,this.b=u.b,this.a=u.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=r.format)!==null&&i!==void 0?i:u.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=u.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),r,i,u,d=e.r/255,m=e.g/255,o=e.b/255;return d<=.03928?r=d/12.92:r=Math.pow((d+.055)/1.055,2.4),m<=.03928?i=m/12.92:i=Math.pow((m+.055)/1.055,2.4),o<=.03928?u=o/12.92:u=Math.pow((o+.055)/1.055,2.4),.2126*r+.7152*i+.0722*u},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=bO(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.toHsv=function(){var e=$x(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=$x(this.r,this.g,this.b),r=Math.round(e.h*360),i=Math.round(e.s*100),u=Math.round(e.v*100);return this.a===1?"hsv(".concat(r,", ").concat(i,"%, ").concat(u,"%)"):"hsva(".concat(r,", ").concat(i,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=cE(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=cE(this.r,this.g,this.b),r=Math.round(e.h*360),i=Math.round(e.s*100),u=Math.round(e.l*100);return this.a===1?"hsl(".concat(r,", ").concat(i,"%, ").concat(u,"%)"):"hsla(".concat(r,", ").concat(i,"%, ").concat(u,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),jx(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),x6(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),r=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(r,", ").concat(i,")"):"rgba(".concat(e,", ").concat(r,", ").concat(i,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(r){return"".concat(Math.round(Bi(r,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(r){return Math.round(Bi(r,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+jx(this.r,this.g,this.b,!1),r=0,i=Object.entries(Vx);r<i.length;r++){var u=i[r],d=u[0],m=u[1];if(e===m)return d}return!1},t.prototype.toString=function(e){var r=Boolean(e);e=e!=null?e:this.format;var i=!1,u=this.a<1&&this.a>=0,d=!r&&u&&(e.startsWith("hex")||e==="name");return d?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.l+=e/100,r.l=Pv(r.l),new t(r)},t.prototype.brighten=function(e){e===void 0&&(e=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),new t(r)},t.prototype.darken=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.l-=e/100,r.l=Pv(r.l),new t(r)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.s-=e/100,r.s=Pv(r.s),new t(r)},t.prototype.saturate=function(e){e===void 0&&(e=10);var r=this.toHsl();return r.s+=e/100,r.s=Pv(r.s),new t(r)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var r=this.toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,new t(r)},t.prototype.mix=function(e,r){r===void 0&&(r=50);var i=this.toRgb(),u=new t(e).toRgb(),d=r/100,m={r:(u.r-i.r)*d+i.r,g:(u.g-i.g)*d+i.g,b:(u.b-i.b)*d+i.b,a:(u.a-i.a)*d+i.a};return new t(m)},t.prototype.analogous=function(e,r){e===void 0&&(e=6),r===void 0&&(r=30);var i=this.toHsl(),u=360/r,d=[this];for(i.h=(i.h-(u*e>>1)+720)%360;--e;)i.h=(i.h+u)%360,d.push(new t(i));return d},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var r=this.toHsv(),i=r.h,u=r.s,d=r.v,m=[],o=1/e;e--;)m.push(new t({h:i,s:u,v:d})),d=(d+o)%1;return m},t.prototype.splitcomplement=function(){var e=this.toHsl(),r=e.h;return[this,new t({h:(r+72)%360,s:e.s,l:e.l}),new t({h:(r+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var r=this.toRgb(),i=new t(e).toRgb();return new t({r:i.r+(r.r-i.r)*r.a,g:i.g+(r.g-i.g)*r.a,b:i.b+(r.b-i.b)*r.a})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var r=this.toHsl(),i=r.h,u=[this],d=360/e,m=1;m<e;m++)u.push(new t({h:(i+m*d)%360,s:r.s,l:r.l}));return u},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}(),Mv=2,fE=.16,E6=.05,I6=.05,P6=.15,wO=5,CO=4,A6=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function hE(t){var e=t.r,r=t.g,i=t.b,u=$x(e,r,i);return{h:u.h*360,s:u.s,v:u.v}}function kv(t){var e=t.r,r=t.g,i=t.b;return"#".concat(jx(e,r,i,!1))}function M6(t,e,r){var i=r/100,u={r:(e.r-t.r)*i+t.r,g:(e.g-t.g)*i+t.g,b:(e.b-t.b)*i+t.b};return u}function pE(t,e,r){var i;return Math.round(t.h)>=60&&Math.round(t.h)<=240?i=r?Math.round(t.h)-Mv*e:Math.round(t.h)+Mv*e:i=r?Math.round(t.h)+Mv*e:Math.round(t.h)-Mv*e,i<0?i+=360:i>=360&&(i-=360),i}function mE(t,e,r){if(t.h===0&&t.s===0)return t.s;var i;return r?i=t.s-fE*e:e===CO?i=t.s+fE:i=t.s+E6*e,i>1&&(i=1),r&&e===wO&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2))}function vE(t,e,r){var i;return r?i=t.v+I6*e:i=t.v-P6*e,i>1&&(i=1),Number(i.toFixed(2))}function yp(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],i=vd(t),u=wO;u>0;u-=1){var d=hE(i),m=kv(vd({h:pE(d,u,!0),s:mE(d,u,!0),v:vE(d,u,!0)}));r.push(m)}r.push(kv(i));for(var o=1;o<=CO;o+=1){var _=hE(i),C=kv(vd({h:pE(_,o),s:mE(_,o),v:vE(_,o)}));r.push(C)}return e.theme==="dark"?A6.map(function(T){var S=T.index,P=T.opacity,A=kv(M6(vd(e.backgroundColor||"#141414"),vd(r[S]),P*100));return A}):r}var S0={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},T0={},E0={};Object.keys(S0).forEach(function(t){T0[t]=yp(S0[t]),T0[t].primary=T0[t][5],E0[t]=yp(S0[t],{theme:"dark",backgroundColor:"#141414"}),E0[t].primary=E0[t][5]});var gE=[],Rh=[],k6="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function O6(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}function D6(t,e){if(e=e||{},t===void 0)throw new Error(k6);var r=e.prepend===!0?"prepend":"append",i=e.container!==void 0?e.container:document.querySelector("head"),u=gE.indexOf(i);u===-1&&(u=gE.push(i)-1,Rh[u]={});var d;return Rh[u]!==void 0&&Rh[u][r]!==void 0?d=Rh[u][r]:(d=Rh[u][r]=O6(),r==="prepend"?i.insertBefore(d,i.childNodes[0]):i.appendChild(d)),t.charCodeAt(0)===65279&&(t=t.substr(1,t.length)),d.styleSheet?d.styleSheet.cssText+=t:d.textContent+=t,d}function yE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){R6(t,u,r[u])})}return t}function R6(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _E(t){return typeof t=="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(typeof t.icon=="object"||typeof t.icon=="function")}function Ux(t,e,r){return r?Yu(t.tag,yE({key:e},r,t.attrs),(t.children||[]).map(function(i,u){return Ux(i,"".concat(e,"-").concat(t.tag,"-").concat(u))})):Yu(t.tag,yE({key:e},t.attrs),(t.children||[]).map(function(i,u){return Ux(i,"".concat(e,"-").concat(t.tag,"-").concat(u))}))}function SO(t){return yp(t)[0]}function TO(t){return t?Array.isArray(t)?t:[t]:[]}var z6=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,xE=!1,L6=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z6;gr(function(){xE||(typeof window<"u"&&window.document&&window.document.documentElement&&D6(e,{prepend:!0}),xE=!0)})},F6=["icon","primaryColor","secondaryColor"];function B6(t,e){if(t==null)return{};var r=N6(t,e),i,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(u=0;u<d.length;u++)i=d[u],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(r[i]=t[i]))}return r}function N6(t,e){if(t==null)return{};var r={},i=Object.keys(t),u,d;for(d=0;d<i.length;d++)u=i[d],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}function eg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){$6(t,u,r[u])})}return t}function $6(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Xh={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function j6(t){var e=t.primaryColor,r=t.secondaryColor;Xh.primaryColor=e,Xh.secondaryColor=r||SO(e),Xh.calculated=!!r}function V6(){return eg({},Xh)}var Qd=function(e,r){var i=eg({},e,r.attrs),u=i.icon,d=i.primaryColor,m=i.secondaryColor,o=B6(i,F6),_=Xh;if(d&&(_={primaryColor:d,secondaryColor:m||SO(d)}),L6(),_E(u),!_E(u))return null;var C=u;return C&&typeof C.icon=="function"&&(C=eg({},C,{icon:C.icon(_.primaryColor,_.secondaryColor)})),Ux(C.icon,"svg-".concat(C.name),eg({},o,{"data-icon":C.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};Qd.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};Qd.inheritAttrs=!1;Qd.displayName="IconBase";Qd.getTwoToneColors=V6;Qd.setTwoToneColors=j6;const K1=Qd;function U6(t,e){return q6(t)||H6(t,e)||G6(t,e)||K6()}function K6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G6(t,e){if(!!t){if(typeof t=="string")return bE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bE(t,e)}}function bE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function H6(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],u=!0,d=!1,m,o;try{for(r=r.call(t);!(u=(m=r.next()).done)&&(i.push(m.value),!(e&&i.length===e));u=!0);}catch(_){d=!0,o=_}finally{try{!u&&r.return!=null&&r.return()}finally{if(d)throw o}}return i}}function q6(t){if(Array.isArray(t))return t}function EO(t){var e=TO(t),r=U6(e,2),i=r[0],u=r[1];return K1.setTwoToneColors({primaryColor:i,secondaryColor:u})}function W6(){var t=K1.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var Z6=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function X6(t,e){return e$(t)||Q6(t,e)||J6(t,e)||Y6()}function Y6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J6(t,e){if(!!t){if(typeof t=="string")return wE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wE(t,e)}}function wE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function Q6(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i=[],u=!0,d=!1,m,o;try{for(r=r.call(t);!(u=(m=r.next()).done)&&(i.push(m.value),!(e&&i.length===e));u=!0);}catch(_){d=!0,o=_}finally{try{!u&&r.return!=null&&r.return()}finally{if(d)throw o}}return i}}function e$(t){if(Array.isArray(t))return t}function CE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){Kx(t,u,r[u])})}return t}function Kx(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t$(t,e){if(t==null)return{};var r=n$(t,e),i,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(u=0;u<d.length;u++)i=d[u],!(e.indexOf(i)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,i)||(r[i]=t[i]))}return r}function n$(t,e){if(t==null)return{};var r={},i=Object.keys(t),u,d;for(d=0;d<i.length;d++)u=i[d],!(e.indexOf(u)>=0)&&(r[u]=t[u]);return r}EO("#1890ff");var ef=function(e,r){var i,u=CE({},e,r.attrs),d=u.class,m=u.icon,o=u.spin,_=u.rotate,C=u.tabindex,T=u.twoToneColor,S=u.onClick,P=t$(u,Z6),A=(i={anticon:!0},Kx(i,"anticon-".concat(m.name),Boolean(m.name)),Kx(i,d,d),i),O=o===""||!!o||m.name==="loading"?"anticon-spin":"",R=C;R===void 0&&S&&(R=-1,P.tabindex=R);var z=_?{msTransform:"rotate(".concat(_,"deg)"),transform:"rotate(".concat(_,"deg)")}:void 0,F=TO(T),N=X6(F,2),U=N[0],G=N[1];return j("span",CE({role:"img","aria-label":m.name},P,{onClick:S,class:A}),[j(K1,{class:O,icon:m,primaryColor:U,secondaryColor:G,style:z},null)])};ef.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:String};ef.displayName="AntdIcon";ef.inheritAttrs=!1;ef.getTwoToneColor=W6;ef.setTwoToneColor=EO;const $r=ef;function SE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){r$(t,u,r[u])})}return t}function r$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var G1=function(e,r){var i=SE({},e,r.attrs);return j($r,SE({},i,{icon:p6}),null)};G1.displayName="LoadingOutlined";G1.inheritAttrs=!1;const Nd=G1;var i$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const o$=i$;function TE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){a$(t,u,r[u])})}return t}function a$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var H1=function(e,r){var i=TE({},e,r.attrs);return j($r,TE({},i,{icon:o$}),null)};H1.displayName="ExclamationCircleFilled";H1.inheritAttrs=!1;const IO=H1;var s$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"};const l$=s$;function EE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){u$(t,u,r[u])})}return t}function u$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var q1=function(e,r){var i=EE({},e,r.attrs);return j($r,EE({},i,{icon:l$}),null)};q1.displayName="CloseCircleFilled";q1.inheritAttrs=!1;const ay=q1;var c$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const d$=c$;function IE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){f$(t,u,r[u])})}return t}function f$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var W1=function(e,r){var i=IE({},e,r.attrs);return j($r,IE({},i,{icon:d$}),null)};W1.displayName="CheckCircleFilled";W1.inheritAttrs=!1;const PO=W1;var h$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const p$=h$;function PE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){m$(t,u,r[u])})}return t}function m$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Z1=function(e,r){var i=PE({},e,r.attrs);return j($r,PE({},i,{icon:p$}),null)};Z1.displayName="InfoCircleFilled";Z1.inheritAttrs=!1;const v$=Z1;var AO=3,MO,lo,g$=1,kO="",OO="move-up",DO=!1,RO=function(){return document.body},zO,LO=!1;function y$(){return g$++}function _$(t){t.top!==void 0&&(MO=t.top,lo=null),t.duration!==void 0&&(AO=t.duration),t.prefixCls!==void 0&&(kO=t.prefixCls),t.getContainer!==void 0&&(RO=t.getContainer,lo=null),t.transitionName!==void 0&&(OO=t.transitionName,lo=null,DO=!0),t.maxCount!==void 0&&(zO=t.maxCount,lo=null),t.rtl!==void 0&&(LO=t.rtl)}function x$(t,e){if(lo){e(lo);return}xO.newInstance({appContext:t.appContext,prefixCls:t.prefixCls||kO,rootPrefixCls:t.rootPrefixCls,transitionName:OO,hasTransitionName:DO,style:{top:MO},getContainer:RO||t.getPopupContainer,maxCount:zO,name:"message"},function(r){if(lo){e(lo);return}lo=r,e(r)})}var b$={info:v$,success:PO,error:ay,warning:IO,loading:Nd};function w$(t){var e=t.duration!==void 0?t.duration:AO,r=t.key||y$(),i=new Promise(function(d){var m=function(){return typeof t.onClose=="function"&&t.onClose(),d(!0)};x$(t,function(o){o.notice({key:r,duration:e,style:t.style||{},class:t.class,content:function(C){var T,S=C.prefixCls,P=b$[t.type],A=P?j(P,null,null):"",O=qt("".concat(S,"-custom-content"),(T={},Ie(T,"".concat(S,"-").concat(t.type),t.type),Ie(T,"".concat(S,"-rtl"),LO===!0),T));return j("div",{class:O},[typeof t.icon=="function"?t.icon():t.icon||A,j("span",null,[typeof t.content=="function"?t.content():t.content])])},onClose:m,onClick:t.onClick})})}),u=function(){lo&&lo.removeNotice(r)};return u.then=function(d,m){return i.then(d,m)},u.promise=i,u}function C$(t){return Object.prototype.toString.call(t)==="[object Object]"&&!!t.content}var Pg={open:w$,config:_$,destroy:function(e){if(lo)if(e){var r=lo,i=r.removeNotice;i(e)}else{var u=lo,d=u.destroy;d(),lo=null}}};function S$(t,e){t[e]=function(r,i,u){return C$(r)?t.open(H(H({},r),{},{type:e})):(typeof i=="function"&&(u=i,i=void 0),t.open({content:r,duration:i,type:e,onClose:u}))}}["success","info","warning","error","loading"].forEach(function(t){return S$(Pg,t)});Pg.warn=Pg.warning;const T$=Pg;function AE(t,e,r,i,u,d,m){try{var o=t[d](m),_=o.value}catch(C){r(C);return}o.done?e(_):Promise.resolve(_).then(i,u)}function Fp(t){return function(){var e=this,r=arguments;return new Promise(function(i,u){var d=t.apply(e,r);function m(_){AE(d,i,u,m,o,"next",_)}function o(_){AE(d,i,u,m,o,"throw",_)}m(void 0)})}}var E$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FO={exports:{}},BO={exports:{}};(function(t){function e(r){return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(BO);(function(t){var e=BO.exports.default;function r(){t.exports=r=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var i={},u=Object.prototype,d=u.hasOwnProperty,m=typeof Symbol=="function"?Symbol:{},o=m.iterator||"@@iterator",_=m.asyncIterator||"@@asyncIterator",C=m.toStringTag||"@@toStringTag";function T(de,xe,De){return Object.defineProperty(de,xe,{value:De,enumerable:!0,configurable:!0,writable:!0}),de[xe]}try{T({},"")}catch{T=function(De,ge,he){return De[ge]=he}}function S(de,xe,De,ge){var he=xe&&xe.prototype instanceof O?xe:O,me=Object.create(he.prototype),Pe=new ie(ge||[]);return me._invoke=function(He,Ke,Re){var Le="suspendedStart";return function(Te,oe){if(Le==="executing")throw new Error("Generator is already running");if(Le==="completed"){if(Te==="throw")throw oe;return ce()}for(Re.method=Te,Re.arg=oe;;){var ze=Re.delegate;if(ze){var Fe=Z(ze,Re);if(Fe){if(Fe===A)continue;return Fe}}if(Re.method==="next")Re.sent=Re._sent=Re.arg;else if(Re.method==="throw"){if(Le==="suspendedStart")throw Le="completed",Re.arg;Re.dispatchException(Re.arg)}else Re.method==="return"&&Re.abrupt("return",Re.arg);Le="executing";var lt=P(He,Ke,Re);if(lt.type==="normal"){if(Le=Re.done?"completed":"suspendedYield",lt.arg===A)continue;return{value:lt.arg,done:Re.done}}lt.type==="throw"&&(Le="completed",Re.method="throw",Re.arg=lt.arg)}}}(de,De,Pe),me}function P(de,xe,De){try{return{type:"normal",arg:de.call(xe,De)}}catch(ge){return{type:"throw",arg:ge}}}i.wrap=S;var A={};function O(){}function R(){}function z(){}var F={};T(F,o,function(){return this});var N=Object.getPrototypeOf,U=N&&N(N(ve([])));U&&U!==u&&d.call(U,o)&&(F=U);var G=z.prototype=O.prototype=Object.create(F);function q(de){["next","throw","return"].forEach(function(xe){T(de,xe,function(De){return this._invoke(xe,De)})})}function V(de,xe){function De(he,me,Pe,He){var Ke=P(de[he],de,me);if(Ke.type!=="throw"){var Re=Ke.arg,Le=Re.value;return Le&&e(Le)=="object"&&d.call(Le,"__await")?xe.resolve(Le.__await).then(function(Te){De("next",Te,Pe,He)},function(Te){De("throw",Te,Pe,He)}):xe.resolve(Le).then(function(Te){Re.value=Te,Pe(Re)},function(Te){return De("throw",Te,Pe,He)})}He(Ke.arg)}var ge;this._invoke=function(he,me){function Pe(){return new xe(function(He,Ke){De(he,me,He,Ke)})}return ge=ge?ge.then(Pe,Pe):Pe()}}function Z(de,xe){var De=de.iterator[xe.method];if(De===void 0){if(xe.delegate=null,xe.method==="throw"){if(de.iterator.return&&(xe.method="return",xe.arg=void 0,Z(de,xe),xe.method==="throw"))return A;xe.method="throw",xe.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var ge=P(De,de.iterator,xe.arg);if(ge.type==="throw")return xe.method="throw",xe.arg=ge.arg,xe.delegate=null,A;var he=ge.arg;return he?he.done?(xe[de.resultName]=he.value,xe.next=de.nextLoc,xe.method!=="return"&&(xe.method="next",xe.arg=void 0),xe.delegate=null,A):he:(xe.method="throw",xe.arg=new TypeError("iterator result is not an object"),xe.delegate=null,A)}function Q(de){var xe={tryLoc:de[0]};1 in de&&(xe.catchLoc=de[1]),2 in de&&(xe.finallyLoc=de[2],xe.afterLoc=de[3]),this.tryEntries.push(xe)}function te(de){var xe=de.completion||{};xe.type="normal",delete xe.arg,de.completion=xe}function ie(de){this.tryEntries=[{tryLoc:"root"}],de.forEach(Q,this),this.reset(!0)}function ve(de){if(de){var xe=de[o];if(xe)return xe.call(de);if(typeof de.next=="function")return de;if(!isNaN(de.length)){var De=-1,ge=function he(){for(;++De<de.length;)if(d.call(de,De))return he.value=de[De],he.done=!1,he;return he.value=void 0,he.done=!0,he};return ge.next=ge}}return{next:ce}}function ce(){return{value:void 0,done:!0}}return R.prototype=z,T(G,"constructor",z),T(z,"constructor",R),R.displayName=T(z,C,"GeneratorFunction"),i.isGeneratorFunction=function(de){var xe=typeof de=="function"&&de.constructor;return!!xe&&(xe===R||(xe.displayName||xe.name)==="GeneratorFunction")},i.mark=function(de){return Object.setPrototypeOf?Object.setPrototypeOf(de,z):(de.__proto__=z,T(de,C,"GeneratorFunction")),de.prototype=Object.create(G),de},i.awrap=function(de){return{__await:de}},q(V.prototype),T(V.prototype,_,function(){return this}),i.AsyncIterator=V,i.async=function(de,xe,De,ge,he){he===void 0&&(he=Promise);var me=new V(S(de,xe,De,ge),he);return i.isGeneratorFunction(xe)?me:me.next().then(function(Pe){return Pe.done?Pe.value:me.next()})},q(G),T(G,C,"Generator"),T(G,o,function(){return this}),T(G,"toString",function(){return"[object Generator]"}),i.keys=function(de){var xe=[];for(var De in de)xe.push(De);return xe.reverse(),function ge(){for(;xe.length;){var he=xe.pop();if(he in de)return ge.value=he,ge.done=!1,ge}return ge.done=!0,ge}},i.values=ve,ie.prototype={constructor:ie,reset:function(xe){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(te),!xe)for(var De in this)De.charAt(0)==="t"&&d.call(this,De)&&!isNaN(+De.slice(1))&&(this[De]=void 0)},stop:function(){this.done=!0;var xe=this.tryEntries[0].completion;if(xe.type==="throw")throw xe.arg;return this.rval},dispatchException:function(xe){if(this.done)throw xe;var De=this;function ge(Re,Le){return Pe.type="throw",Pe.arg=xe,De.next=Re,Le&&(De.method="next",De.arg=void 0),!!Le}for(var he=this.tryEntries.length-1;he>=0;--he){var me=this.tryEntries[he],Pe=me.completion;if(me.tryLoc==="root")return ge("end");if(me.tryLoc<=this.prev){var He=d.call(me,"catchLoc"),Ke=d.call(me,"finallyLoc");if(He&&Ke){if(this.prev<me.catchLoc)return ge(me.catchLoc,!0);if(this.prev<me.finallyLoc)return ge(me.finallyLoc)}else if(He){if(this.prev<me.catchLoc)return ge(me.catchLoc,!0)}else{if(!Ke)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return ge(me.finallyLoc)}}}},abrupt:function(xe,De){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var he=this.tryEntries[ge];if(he.tryLoc<=this.prev&&d.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var me=he;break}}me&&(xe==="break"||xe==="continue")&&me.tryLoc<=De&&De<=me.finallyLoc&&(me=null);var Pe=me?me.completion:{};return Pe.type=xe,Pe.arg=De,me?(this.method="next",this.next=me.finallyLoc,A):this.complete(Pe)},complete:function(xe,De){if(xe.type==="throw")throw xe.arg;return xe.type==="break"||xe.type==="continue"?this.next=xe.arg:xe.type==="return"?(this.rval=this.arg=xe.arg,this.method="return",this.next="end"):xe.type==="normal"&&De&&(this.next=De),A},finish:function(xe){for(var De=this.tryEntries.length-1;De>=0;--De){var ge=this.tryEntries[De];if(ge.finallyLoc===xe)return this.complete(ge.completion,ge.afterLoc),te(ge),A}},catch:function(xe){for(var De=this.tryEntries.length-1;De>=0;--De){var ge=this.tryEntries[De];if(ge.tryLoc===xe){var he=ge.completion;if(he.type==="throw"){var me=he.arg;te(ge)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(xe,De,ge){return this.delegate={iterator:ve(xe),resultName:De,nextLoc:ge},this.method==="next"&&(this.arg=void 0),A}},i}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(FO);var tg=FO.exports(),I$=tg;try{regeneratorRuntime=tg}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=tg:Function("r","regeneratorRuntime = r")(tg)}const rs=I$;var P$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};const A$=P$;function ME(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){M$(t,u,r[u])})}return t}function M$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var X1=function(e,r){var i=ME({},e,r.attrs);return j($r,ME({},i,{icon:A$}),null)};X1.displayName="CheckCircleOutlined";X1.inheritAttrs=!1;const NO=X1;var k$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};const O$=k$;function kE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){D$(t,u,r[u])})}return t}function D$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Y1=function(e,r){var i=kE({},e,r.attrs);return j($r,kE({},i,{icon:O$}),null)};Y1.displayName="InfoCircleOutlined";Y1.inheritAttrs=!1;const $O=Y1;var R$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"};const z$=R$;function OE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){L$(t,u,r[u])})}return t}function L$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var J1=function(e,r){var i=OE({},e,r.attrs);return j($r,OE({},i,{icon:z$}),null)};J1.displayName="CloseCircleOutlined";J1.inheritAttrs=!1;const jO=J1;var F$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};const B$=F$;function DE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){N$(t,u,r[u])})}return t}function N$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Q1=function(e,r){var i=DE({},e,r.attrs);return j($r,DE({},i,{icon:B$}),null)};Q1.displayName="ExclamationCircleOutlined";Q1.inheritAttrs=!1;const ew=Q1;var $$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"};const j$=$$;function RE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){V$(t,u,r[u])})}return t}function V$(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var tw=function(e,r){var i=RE({},e,r.attrs);return j($r,RE({},i,{icon:j$}),null)};tw.displayName="CloseOutlined";tw.inheritAttrs=!1;const nw=tw;var ju={},VO=4.5,UO="24px",KO="24px",Gx="",GO="topRight",HO=function(){return document.body},qO=null,Hx=!1,WO;function U$(t){var e=t.duration,r=t.placement,i=t.bottom,u=t.top,d=t.getContainer,m=t.closeIcon,o=t.prefixCls;o!==void 0&&(Gx=o),e!==void 0&&(VO=e),r!==void 0&&(GO=r),i!==void 0&&(KO=typeof i=="number"?"".concat(i,"px"):i),u!==void 0&&(UO=typeof u=="number"?"".concat(u,"px"):u),d!==void 0&&(HO=d),m!==void 0&&(qO=m),t.rtl!==void 0&&(Hx=t.rtl),t.maxCount!==void 0&&(WO=t.maxCount)}function K$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:UO,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:KO,i;switch(t){case"topLeft":i={left:"0px",top:e,bottom:"auto"};break;case"topRight":i={right:"0px",top:e,bottom:"auto"};break;case"bottomLeft":i={left:"0px",top:"auto",bottom:r};break;default:i={right:"0px",top:"auto",bottom:r};break}return i}function G$(t,e){var r=t.prefixCls,i=t.placement,u=i===void 0?GO:i,d=t.getContainer,m=d===void 0?HO:d,o=t.top,_=t.bottom,C=t.closeIcon,T=C===void 0?qO:C,S=t.appContext,P=aj(),A=P.getPrefixCls,O=A("notification",r||Gx),R="".concat(O,"-").concat(u,"-").concat(Hx),z=ju[R];if(z){Promise.resolve(z).then(function(N){e(N)});return}var F=qt("".concat(O,"-").concat(u),Ie({},"".concat(O,"-rtl"),Hx===!0));xO.newInstance({name:"notification",prefixCls:r||Gx,class:F,style:K$(u,o,_),appContext:S,getContainer:m,closeIcon:function(U){var G=U.prefixCls,q=j("span",{class:"".concat(G,"-close-x")},[Vh(T,{},j(nw,{class:"".concat(G,"-close-icon")},null))]);return q},maxCount:WO,hasTransitionName:!0},function(N){ju[R]=N,e(N)})}var H$={success:NO,info:$O,error:jO,warning:ew};function q$(t){var e=t.icon,r=t.type,i=t.description,u=t.message,d=t.btn,m=t.duration===void 0?VO:t.duration;G$(t,function(o){o.notice({content:function(C){var T=C.prefixCls,S="".concat(T,"-notice"),P=null;if(e)P=function(){return j("span",{class:"".concat(S,"-icon")},[Vh(e)])};else if(r){var A=H$[r];P=function(){return j(A,{class:"".concat(S,"-icon ").concat(S,"-icon-").concat(r)},null)}}return j("div",{class:P?"".concat(S,"-with-icon"):""},[P&&P(),j("div",{class:"".concat(S,"-message")},[!i&&P?j("span",{class:"".concat(S,"-message-single-line-auto-margin")},null):null,Vh(u)]),j("div",{class:"".concat(S,"-description")},[Vh(i)]),d?j("span",{class:"".concat(S,"-btn")},[Vh(d)]):null])},duration:m,closable:!0,onClose:t.onClose,onClick:t.onClick,key:t.key,style:t.style||{},class:t.class})})}var _p={open:q$,close:function(e){Object.keys(ju).forEach(function(r){return Promise.resolve(ju[r]).then(function(i){i.removeNotice(e)})})},config:U$,destroy:function(){Object.keys(ju).forEach(function(e){Promise.resolve(ju[e]).then(function(r){r.destroy()}),delete ju[e]})}},W$=["success","info","warning","error"];W$.forEach(function(t){_p[t]=function(e){return _p.open(H(H({},e),{},{type:t}))}});_p.warn=_p.warning;const Z$=_p;function oc(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var X$="vc-util-key";function ZO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):X$}function rw(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function zE(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!oc())return null;var i=document.createElement("style");if((e=r.csp)!==null&&e!==void 0&&e.nonce){var u;i.nonce=(u=r.csp)===null||u===void 0?void 0:u.nonce}i.innerHTML=t;var d=rw(r),m=d.firstChild;return r.prepend&&d.prepend?d.prepend(i):r.prepend&&m?d.insertBefore(i,m):d.appendChild(i),i}var qx=new Map;function Y$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=rw(e);return Array.from(qx.get(r).children).find(function(i){return i.tagName==="STYLE"&&i.getAttribute(ZO(e))===t})}function J$(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=rw(r);if(!qx.has(i)){var u=zE("",r),d=u.parentNode;qx.set(i,d),d.removeChild(u)}var m=Y$(e,r);if(m){var o,_;if((o=r.csp)!==null&&o!==void 0&&o.nonce&&m.nonce!==((_=r.csp)===null||_===void 0?void 0:_.nonce)){var C;m.nonce=(C=r.csp)===null||C===void 0?void 0:C.nonce}return m.innerHTML!==t&&(m.innerHTML=t),m}var T=zE(t,r);return T.setAttribute(ZO(r),e),T}const Ni=function(t,e,r){yO(t,"[ant-design-vue: ".concat(e,"] ").concat(r))};var Q$="-ant-".concat(Date.now(),"-").concat(Math.random());function ej(t,e){var r={},i=function(T,S){var P=T.clone();return P=(S==null?void 0:S(P))||P,P.toRgbString()},u=function(T,S){var P=new C0(T),A=yp(P.toRgbString());r["".concat(S,"-color")]=i(P),r["".concat(S,"-color-disabled")]=A[1],r["".concat(S,"-color-hover")]=A[4],r["".concat(S,"-color-active")]=A[6],r["".concat(S,"-color-outline")]=P.clone().setAlpha(.2).toRgbString(),r["".concat(S,"-color-deprecated-bg")]=A[1],r["".concat(S,"-color-deprecated-border")]=A[3]};if(e.primaryColor){u(e.primaryColor,"primary");var d=new C0(e.primaryColor),m=yp(d.toRgbString());m.forEach(function(C,T){r["primary-".concat(T+1)]=C}),r["primary-color-deprecated-l-35"]=i(d,function(C){return C.lighten(35)}),r["primary-color-deprecated-l-20"]=i(d,function(C){return C.lighten(20)}),r["primary-color-deprecated-t-20"]=i(d,function(C){return C.tint(20)}),r["primary-color-deprecated-t-50"]=i(d,function(C){return C.tint(50)}),r["primary-color-deprecated-f-12"]=i(d,function(C){return C.setAlpha(C.getAlpha()*.12)});var o=new C0(m[0]);r["primary-color-active-deprecated-f-30"]=i(o,function(C){return C.setAlpha(C.getAlpha()*.3)}),r["primary-color-active-deprecated-d-02"]=i(o,function(C){return C.darken(2)})}e.successColor&&u(e.successColor,"success"),e.warningColor&&u(e.warningColor,"warning"),e.errorColor&&u(e.errorColor,"error"),e.infoColor&&u(e.infoColor,"info");var _=Object.keys(r).map(function(C){return"--".concat(t,"-").concat(C,": ").concat(r[C],";")});oc()?J$(`
  :root {
    `.concat(_.join(`
`),`
  }
  `),"".concat(Q$,"-dynamic-theme")):Ni(!1,"ConfigProvider","SSR do not support dynamic theme with css variables.")}var XO=Symbol("GlobalFormContextKey"),tj=function(e){sr(XO,e)},nj=function(){return Kn(XO,{validateMessages:ue(function(){})})},rj=function(){return{getTargetContainer:{type:Function},getPopupContainer:{type:Function},prefixCls:String,getPrefixCls:{type:Function},renderEmpty:{type:Function},transformCellText:{type:Function},csp:{type:Object,default:void 0},input:{type:Object},autoInsertSpaceInButton:{type:Boolean,default:void 0},locale:{type:Object,default:void 0},pageHeader:{type:Object},componentSize:{type:String},direction:{type:String},space:{type:Object},virtual:{type:Boolean,default:void 0},dropdownMatchSelectWidth:{type:[Number,Boolean],default:!0},form:{type:Object,default:void 0},notUpdateGlobalConfig:Boolean}},ij="ant";function Sd(){return Ro.prefixCls||ij}var Wx=Or({}),YO=Or({}),Ro=Or({});vr(function(){kr(Ro,Wx,YO),Ro.prefixCls=Sd(),Ro.getPrefixCls=function(t,e){return e||(t?"".concat(Ro.prefixCls,"-").concat(t):Ro.prefixCls)},Ro.getRootPrefixCls=function(t,e){return t||(Ro.prefixCls?Ro.prefixCls:e&&e.includes("-")?e.replace(/^(.*)-[^-]*$/,"$1"):Sd())}});var I0,oj=function(e){I0&&I0(),I0=vr(function(){kr(YO,Or(e))}),e.theme&&ej(Sd(),e.theme)},aj=function(){return{getPrefixCls:function(r,i){return i||(r?"".concat(Sd(),"-").concat(r):Sd())},getRootPrefixCls:function(r,i){return r||(Ro.prefixCls?Ro.prefixCls:i&&i.includes("-")?i.replace(/^(.*)-[^-]*$/,"$1"):Sd())}}},Td=jt({compatConfig:{MODE:3},name:"AConfigProvider",inheritAttrs:!1,props:rj(),setup:function(e,r){var i=r.slots,u=function(S,P){var A=e.prefixCls,O=A===void 0?"ant":A;return P||(S?"".concat(O,"-").concat(S):O)},d=function(S){var P=e.renderEmpty||i.renderEmpty||gO;return P(S)},m=function(S,P){var A=e.prefixCls;if(P)return P;var O=A||u("");return S?"".concat(O,"-").concat(S):O},o=Or(H(H({},e),{},{getPrefixCls:m,renderEmpty:d}));Object.keys(e).forEach(function(T){an(function(){return e[T]},function(){o[T]=e[T]})}),e.notUpdateGlobalConfig||(kr(Wx,o),an(o,function(){kr(Wx,o)}));var _=ue(function(){var T={};if(e.locale){var S,P;T=((S=e.locale.Form)===null||S===void 0?void 0:S.defaultValidateMessages)||((P=Ld.Form)===null||P===void 0?void 0:P.defaultValidateMessages)||{}}return e.form&&e.form.validateMessages&&(T=H(H({},T),e.form.validateMessages)),T});tj({validateMessages:_}),sr("configProvider",o);var C=function(S){var P;return j(u6,{locale:e.locale||S,ANT_MARK__:Bx},{default:function(){return[(P=i.default)===null||P===void 0?void 0:P.call(i)]}})};return vr(function(){e.direction&&(T$.config({rtl:e.direction==="rtl"}),Z$.config({rtl:e.direction==="rtl"}))}),function(){return j(rO,{children:function(S,P,A){return C(A)}},null)}}}),JO=Or({getPrefixCls:function(e,r){return r||(e?"ant-".concat(e):"ant")},renderEmpty:gO,direction:"ltr"});Td.config=oj;Td.install=function(t){t.component(Td.name,Td)};const hr=function(t,e){var r=Kn("configProvider",JO),i=ue(function(){return r.getPrefixCls(t,e.prefixCls)}),u=ue(function(){var N;return(N=e.direction)!==null&&N!==void 0?N:r.direction}),d=ue(function(){return r.getPrefixCls()}),m=ue(function(){return r.autoInsertSpaceInButton}),o=ue(function(){return r.renderEmpty}),_=ue(function(){return r.space}),C=ue(function(){return r.pageHeader}),T=ue(function(){return r.form}),S=ue(function(){return e.getTargetContainer||r.getTargetContainer}),P=ue(function(){return e.getPopupContainer||r.getPopupContainer}),A=ue(function(){var N;return(N=e.dropdownMatchSelectWidth)!==null&&N!==void 0?N:r.dropdownMatchSelectWidth}),O=ue(function(){return(e.virtual===void 0?r.virtual!==!1:e.virtual!==!1)&&A.value!==!1}),R=ue(function(){return e.size||r.componentSize}),z=ue(function(){var N;return e.autocomplete||((N=r.input)===null||N===void 0?void 0:N.autocomplete)}),F=ue(function(){return r.csp});return{configProvider:r,prefixCls:i,direction:u,size:R,getTargetContainer:S,getPopupContainer:P,space:_,pageHeader:C,form:T,autoInsertSpaceInButton:m,renderEmpty:o,virtual:O,dropdownMatchSelectWidth:A,rootPrefixCls:d,getPrefixCls:r.getPrefixCls,autocomplete:z,csp:F}};function hi(t,e){for(var r=kr({},t),i=0;i<e.length;i+=1){var u=e[i];delete r[u]}return r}function Zx(t){return t!=null&&t===t.window}function sj(t,e){if(typeof window>"u")return 0;var r=e?"scrollTop":"scrollLeft",i=0;if(Zx(t)?i=t[e?"pageYOffset":"pageXOffset"]:t instanceof Document?i=t.documentElement[r]:t&&(i=t[r]),t&&!Zx(t)&&typeof i!="number"){var u;i=(u=(t.ownerDocument||t).documentElement)===null||u===void 0?void 0:u[r]}return i}function lj(t,e,r,i){var u=r-e;return t/=i/2,t<1?u/2*t*t*t+e:u/2*((t-=2)*t*t+2)+e}function uj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.getContainer,i=r===void 0?function(){return window}:r,u=e.callback,d=e.duration,m=d===void 0?450:d,o=i(),_=sj(o,!0),C=Date.now(),T=function S(){var P=Date.now(),A=P-C,O=lj(A>m?m:A,_,t,m);Zx(o)?o.scrollTo(window.pageXOffset,O):o instanceof HTMLDocument||o.constructor.name==="HTMLDocument"?o.documentElement.scrollTop=O:o.scrollTop=O,A<m?fr(S):typeof u=="function"&&u()};fr(T)}function iw(t){return $k(t)||Vk(t)||ry(t)||jk()}function LE(t,e){var r=t.key,i;return"value"in t&&(i=t.value),r!=null?r:i!==void 0?i:"rc-index-key-".concat(e)}function QO(t,e){var r=t||{},i=r.label,u=r.value,d=r.options;return{label:i||(e?"children":"label"),value:u||"value",options:d||"options"}}function cj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.fieldNames,i=e.childrenAsData,u=[],d=QO(r,!1),m=d.label,o=d.value,_=d.options;function C(T,S){T.forEach(function(P){var A=P[m];if(S||!(_ in P)){var O=P[o];u.push({key:LE(P,u.length),groupOption:S,data:P,label:A,value:O})}else{var R=A;R===void 0&&i&&(R=P.label),u.push({key:LE(P,u.length),group:!0,data:P,label:R}),C(P[_],!0)}})}return C(t,!1),u}function Xx(t){var e=H({},t);return"props"in e||Object.defineProperty(e,"props",{get:function(){return e}}),e}function dj(t,e){if(!e||!e.length)return null;var r=!1;function i(d,m){var o=iw(m),_=o[0],C=o.slice(1);if(!_)return[d];var T=d.split(_);return r=r||T.length>1,T.reduce(function(S,P){return[].concat(bn(S),bn(i(P,C)))},[]).filter(function(S){return S})}var u=i(t,e);return r?u:null}function Vu(t,e){return t?t.contains(e):!1}var e3=["moz","ms","webkit"];function fj(){var t=0;return function(e){var r=new Date().getTime(),i=Math.max(0,16-(r-t)),u=window.setTimeout(function(){e(r+i)},i);return t=r+i,u}}function hj(){if(typeof window>"u")return function(){};if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);var t=e3.filter(function(e){return"".concat(e,"RequestAnimationFrame")in window})[0];return t?window["".concat(t,"RequestAnimationFrame")]:fj()}function pj(t){if(typeof window>"u")return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(t);var e=e3.filter(function(r){return"".concat(r,"CancelAnimationFrame")in window||"".concat(r,"CancelRequestAnimationFrame")in window})[0];return e?(window["".concat(e,"CancelAnimationFrame")]||window["".concat(e,"CancelRequestAnimationFrame")]).call(this,t):clearTimeout(t)}var FE=hj(),mj=function(e){return pj(e.id)},vj=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Date.now();function u(){Date.now()-i>=r?e.call():d.id=FE(u)}var d={id:FE(u)};return d},ow={visible:Boolean,prefixCls:String,zIndex:Number,destroyPopupOnHide:Boolean,forceRender:Boolean,animation:[String,Object],transitionName:String,stretch:{type:String},align:{type:Object},point:{type:Object},getRootDomNode:{type:Function},getClassNameFromAlign:{type:Function},onMouseenter:{type:Function},onMouseleave:{type:Function},onMousedown:{type:Function},onTouchstart:{type:Function}},gj=H(H({},ow),{},{mobile:{type:Object}}),yj=H(H({},ow),{},{mask:Boolean,mobile:{type:Object},maskAnimation:String,maskTransitionName:String});function t3(t){var e=t.prefixCls,r=t.animation,i=t.transitionName;return r?{name:"".concat(e,"-").concat(r)}:i?{name:i}:{}}function n3(t){var e=t.prefixCls,r=t.visible,i=t.zIndex,u=t.mask,d=t.maskAnimation,m=t.maskTransitionName;if(!u)return null;var o={};return(m||d)&&(o=t3({prefixCls:e,transitionName:m,animation:d})),j(os,H({appear:!0},o),{default:function(){return[uo(j("div",{style:{zIndex:i},class:"".concat(e,"-mask")},null),[[O1("if"),r]])]}})}n3.displayName="Mask";const _j=jt({compatConfig:{MODE:3},name:"MobilePopupInner",inheritAttrs:!1,props:gj,emits:["mouseenter","mouseleave","mousedown","touchstart","align"],setup:function(e,r){var i=r.expose,u=r.slots,d=qe();return i({forceAlign:function(){},getElement:function(){return d.value}}),function(){var m,o=e.zIndex,_=e.visible,C=e.prefixCls,T=e.mobile;T=T===void 0?{}:T;var S=T.popupClassName,P=T.popupStyle,A=T.popupMotion,O=A===void 0?{}:A,R=T.popupRender,z=H({zIndex:o},P),F=fo((m=u.default)===null||m===void 0?void 0:m.call(u));F.length>1&&(F=j("div",{class:"".concat(C,"-content")},[F])),R&&(F=R(F));var N=qt(C,S);return j(os,H({ref:d},O),{default:function(){return[_?j("div",{class:N,style:z},[F]):null]}})}}});var BE=["measure","align",null,"motion"];const xj=function(t,e){var r=qe(null),i=qe(),u=qe(!1);function d(_){u.value||(r.value=_)}function m(){fr.cancel(i.value)}function o(_){m(),i.value=fr(function(){var C=r.value;switch(r.value){case"align":C="motion";break;case"motion":C="stable";break}d(C),_==null||_()})}return an(t,function(){d("measure")},{immediate:!0,flush:"post"}),wr(function(){an(r,function(){switch(r.value){case"measure":e();break}r.value&&(i.value=fr(Fp(rs.mark(function _(){var C,T;return rs.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:C=BE.indexOf(r.value),T=BE[C+1],T&&C!==-1&&d(T);case 3:case"end":return P.stop()}},_)}))))},{immediate:!0,flush:"post"})}),Er(function(){u.value=!0,m()}),[r,o]},bj=function(t){var e=qe({width:0,height:0});function r(u){e.value={width:u.offsetWidth,height:u.offsetHeight}}var i=ue(function(){var u={};if(t.value){var d=e.value,m=d.width,o=d.height;t.value.indexOf("height")!==-1&&o?u.height="".concat(o,"px"):t.value.indexOf("minHeight")!==-1&&o&&(u.minHeight="".concat(o,"px")),t.value.indexOf("width")!==-1&&m?u.width="".concat(m,"px"):t.value.indexOf("minWidth")!==-1&&m&&(u.minWidth="".concat(m,"px"))}return u});return[i,r]};function NE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable})),r.push.apply(r,i)}return r}function $E(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NE(Object(r),!0).forEach(function(i){wj(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NE(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function ng(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ng=function(e){return typeof e}:ng=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function wj(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var zh,Cj={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Ag(){if(zh!==void 0)return zh;zh="";var t=document.createElement("p").style,e="Transform";for(var r in Cj)r+e in t&&(zh=r);return zh}function r3(){return Ag()?"".concat(Ag(),"TransitionProperty"):"transitionProperty"}function sy(){return Ag()?"".concat(Ag(),"Transform"):"transform"}function jE(t,e){var r=r3();r&&(t.style[r]=e,r!=="transitionProperty"&&(t.style.transitionProperty=e))}function P0(t,e){var r=sy();r&&(t.style[r]=e,r!=="transform"&&(t.style.transform=e))}function Sj(t){return t.style.transitionProperty||t.style[r3()]}function Tj(t){var e=window.getComputedStyle(t,null),r=e.getPropertyValue("transform")||e.getPropertyValue(sy());if(r&&r!=="none"){var i=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(i[12]||i[4],0),y:parseFloat(i[13]||i[5],0)}}return{x:0,y:0}}var Ej=/matrix\((.*)\)/,Ij=/matrix3d\((.*)\)/;function Pj(t,e){var r=window.getComputedStyle(t,null),i=r.getPropertyValue("transform")||r.getPropertyValue(sy());if(i&&i!=="none"){var u,d=i.match(Ej);if(d)d=d[1],u=d.split(",").map(function(o){return parseFloat(o,10)}),u[4]=e.x,u[5]=e.y,P0(t,"matrix(".concat(u.join(","),")"));else{var m=i.match(Ij)[1];u=m.split(",").map(function(o){return parseFloat(o,10)}),u[12]=e.x,u[13]=e.y,P0(t,"matrix3d(".concat(u.join(","),")"))}}else P0(t,"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px) translateZ(0)"))}var Aj=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Bp;function VE(t){var e=t.style.display;t.style.display="none",t.offsetHeight,t.style.display=e}function Ed(t,e,r){var i=r;if(ng(e)==="object"){for(var u in e)e.hasOwnProperty(u)&&Ed(t,u,e[u]);return}if(typeof i<"u"){typeof i=="number"&&(i="".concat(i,"px")),t.style[e]=i;return}return Bp(t,e)}function Mj(t){var e,r,i,u=t.ownerDocument,d=u.body,m=u&&u.documentElement;return e=t.getBoundingClientRect(),r=Math.floor(e.left),i=Math.floor(e.top),r-=m.clientLeft||d.clientLeft||0,i-=m.clientTop||d.clientTop||0,{left:r,top:i}}function i3(t,e){var r=t["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var u=t.document;r=u.documentElement[i],typeof r!="number"&&(r=u.body[i])}return r}function o3(t){return i3(t)}function a3(t){return i3(t,!0)}function xp(t){var e=Mj(t),r=t.ownerDocument,i=r.defaultView||r.parentWindow;return e.left+=o3(i),e.top+=a3(i),e}function aw(t){return t!=null&&t==t.window}function s3(t){return aw(t)?t.document:t.nodeType===9?t:t.ownerDocument}function kj(t,e,r){var i=r,u="",d=s3(t);return i=i||d.defaultView.getComputedStyle(t,null),i&&(u=i.getPropertyValue(e)||i[e]),u}var Oj=new RegExp("^(".concat(Aj,")(?!px)[a-z%]+$"),"i"),Dj=/^(top|right|bottom|left)$/,A0="currentStyle",M0="runtimeStyle",ku="left",Rj="px";function zj(t,e){var r=t[A0]&&t[A0][e];if(Oj.test(r)&&!Dj.test(e)){var i=t.style,u=i[ku],d=t[M0][ku];t[M0][ku]=t[A0][ku],i[ku]=e==="fontSize"?"1em":r||0,r=i.pixelLeft+Rj,i[ku]=u,t[M0][ku]=d}return r===""?"auto":r}typeof window<"u"&&(Bp=window.getComputedStyle?kj:zj);function Ov(t,e){return t==="left"?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function UE(t){if(t==="left")return"right";if(t==="right")return"left";if(t==="top")return"bottom";if(t==="bottom")return"top"}function KE(t,e,r){Ed(t,"position")==="static"&&(t.style.position="relative");var i=-999,u=-999,d=Ov("left",r),m=Ov("top",r),o=UE(d),_=UE(m);d!=="left"&&(i=999),m!=="top"&&(u=999);var C="",T=xp(t);("left"in e||"top"in e)&&(C=Sj(t)||"",jE(t,"none")),"left"in e&&(t.style[o]="",t.style[d]="".concat(i,"px")),"top"in e&&(t.style[_]="",t.style[m]="".concat(u,"px")),VE(t);var S=xp(t),P={};for(var A in e)if(e.hasOwnProperty(A)){var O=Ov(A,r),R=A==="left"?i:u,z=T[A]-S[A];O===A?P[O]=R+z:P[O]=R-z}Ed(t,P),VE(t),("left"in e||"top"in e)&&jE(t,C);var F={};for(var N in e)if(e.hasOwnProperty(N)){var U=Ov(N,r),G=e[N]-T[N];N===U?F[U]=P[U]+G:F[U]=P[U]-G}Ed(t,F)}function Lj(t,e){var r=xp(t),i=Tj(t),u={x:i.x,y:i.y};"left"in e&&(u.x=i.x+e.left-r.left),"top"in e&&(u.y=i.y+e.top-r.top),Pj(t,u)}function Fj(t,e,r){if(r.ignoreShake){var i=xp(t),u=i.left.toFixed(0),d=i.top.toFixed(0),m=e.left.toFixed(0),o=e.top.toFixed(0);if(u===m&&d===o)return}r.useCssRight||r.useCssBottom?KE(t,e,r):r.useCssTransform&&sy()in document.body.style?Lj(t,e):KE(t,e,r)}function sw(t,e){for(var r=0;r<t.length;r++)e(t[r])}function l3(t){return Bp(t,"boxSizing")==="border-box"}var Bj=["margin","border","padding"],Yx=-1,Nj=2,Jx=1,$j=0;function jj(t,e,r){var i={},u=t.style,d;for(d in e)e.hasOwnProperty(d)&&(i[d]=u[d],u[d]=e[d]);r.call(t);for(d in e)e.hasOwnProperty(d)&&(u[d]=i[d])}function Uh(t,e,r){var i=0,u,d,m;for(d=0;d<e.length;d++)if(u=e[d],u)for(m=0;m<r.length;m++){var o=void 0;u==="border"?o="".concat(u).concat(r[m],"Width"):o=u+r[m],i+=parseFloat(Bp(t,o))||0}return i}var Ja={getParent:function(e){var r=e;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};sw(["Width","Height"],function(t){Ja["doc".concat(t)]=function(e){var r=e.document;return Math.max(r.documentElement["scroll".concat(t)],r.body["scroll".concat(t)],Ja["viewport".concat(t)](r))},Ja["viewport".concat(t)]=function(e){var r="client".concat(t),i=e.document,u=i.body,d=i.documentElement,m=d[r];return i.compatMode==="CSS1Compat"&&m||u&&u[r]||m}});function GE(t,e,r){var i=r;if(aw(t))return e==="width"?Ja.viewportWidth(t):Ja.viewportHeight(t);if(t.nodeType===9)return e==="width"?Ja.docWidth(t):Ja.docHeight(t);var u=e==="width"?["Left","Right"]:["Top","Bottom"],d=Math.floor(e==="width"?t.getBoundingClientRect().width:t.getBoundingClientRect().height),m=l3(t),o=0;(d==null||d<=0)&&(d=void 0,o=Bp(t,e),(o==null||Number(o)<0)&&(o=t.style[e]||0),o=parseFloat(o)||0),i===void 0&&(i=m?Jx:Yx);var _=d!==void 0||m,C=d||o;return i===Yx?_?C-Uh(t,["border","padding"],u):o:_?i===Jx?C:C+(i===Nj?-Uh(t,["border"],u):Uh(t,["margin"],u)):o+Uh(t,Bj.slice(i),u)}var Vj={position:"absolute",visibility:"hidden",display:"block"};function HE(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i,u=e[0];return u.offsetWidth!==0?i=GE.apply(void 0,e):jj(u,Vj,function(){i=GE.apply(void 0,e)}),i}sw(["width","height"],function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);Ja["outer".concat(e)]=function(i,u){return i&&HE(i,t,u?$j:Jx)};var r=t==="width"?["Left","Right"]:["Top","Bottom"];Ja[t]=function(i,u){var d=u;if(d!==void 0){if(i){var m=l3(i);return m&&(d+=Uh(i,["padding","border"],r)),Ed(i,t,d)}return}return i&&HE(i,t,Yx)}});function u3(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var tr={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var r=e.ownerDocument||e;return r.defaultView||r.parentWindow},getDocument:s3,offset:function(e,r,i){if(typeof r<"u")Fj(e,r,i||{});else return xp(e)},isWindow:aw,each:sw,css:Ed,clone:function(e){var r,i={};for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);var u=e.overflow;if(u)for(r in e)e.hasOwnProperty(r)&&(i.overflow[r]=e.overflow[r]);return i},mix:u3,getWindowScrollLeft:function(e){return o3(e)},getWindowScrollTop:function(e){return a3(e)},merge:function(){for(var e={},r=0;r<arguments.length;r++)tr.mix(e,r<0||arguments.length<=r?void 0:arguments[r]);return e},viewportWidth:0,viewportHeight:0};u3(tr,Ja);var k0=tr.getParent;function Qx(t){if(tr.isWindow(t)||t.nodeType===9)return null;var e=tr.getDocument(t),r=e.body,i,u=tr.css(t,"position"),d=u==="fixed"||u==="absolute";if(!d)return t.nodeName.toLowerCase()==="html"?null:k0(t);for(i=k0(t);i&&i!==r&&i.nodeType!==9;i=k0(i))if(u=tr.css(i,"position"),u!=="static")return i;return null}var qE=tr.getParent;function Uj(t){if(tr.isWindow(t)||t.nodeType===9)return!1;var e=tr.getDocument(t),r=e.body,i=null;for(i=qE(t);i&&i!==r&&i!==e;i=qE(i)){var u=tr.css(i,"position");if(u==="fixed")return!0}return!1}function lw(t,e){for(var r={left:0,right:1/0,top:0,bottom:1/0},i=Qx(t),u=tr.getDocument(t),d=u.defaultView||u.parentWindow,m=u.body,o=u.documentElement;i;){if((navigator.userAgent.indexOf("MSIE")===-1||i.clientWidth!==0)&&i!==m&&i!==o&&tr.css(i,"overflow")!=="visible"){var _=tr.offset(i);_.left+=i.clientLeft,_.top+=i.clientTop,r.top=Math.max(r.top,_.top),r.right=Math.min(r.right,_.left+i.clientWidth),r.bottom=Math.min(r.bottom,_.top+i.clientHeight),r.left=Math.max(r.left,_.left)}else if(i===m||i===o)break;i=Qx(i)}var C=null;if(!tr.isWindow(t)&&t.nodeType!==9){C=t.style.position;var T=tr.css(t,"position");T==="absolute"&&(t.style.position="fixed")}var S=tr.getWindowScrollLeft(d),P=tr.getWindowScrollTop(d),A=tr.viewportWidth(d),O=tr.viewportHeight(d),R=o.scrollWidth,z=o.scrollHeight,F=window.getComputedStyle(m);if(F.overflowX==="hidden"&&(R=d.innerWidth),F.overflowY==="hidden"&&(z=d.innerHeight),t.style&&(t.style.position=C),e||Uj(t))r.left=Math.max(r.left,S),r.top=Math.max(r.top,P),r.right=Math.min(r.right,S+A),r.bottom=Math.min(r.bottom,P+O);else{var N=Math.max(R,S+A);r.right=Math.min(r.right,N);var U=Math.max(z,P+O);r.bottom=Math.min(r.bottom,U)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function Kj(t,e,r,i){var u=tr.clone(t),d={width:e.width,height:e.height};return i.adjustX&&u.left<r.left&&(u.left=r.left),i.resizeWidth&&u.left>=r.left&&u.left+d.width>r.right&&(d.width-=u.left+d.width-r.right),i.adjustX&&u.left+d.width>r.right&&(u.left=Math.max(r.right-d.width,r.left)),i.adjustY&&u.top<r.top&&(u.top=r.top),i.resizeHeight&&u.top>=r.top&&u.top+d.height>r.bottom&&(d.height-=u.top+d.height-r.bottom),i.adjustY&&u.top+d.height>r.bottom&&(u.top=Math.max(r.bottom-d.height,r.top)),tr.mix(u,d)}function uw(t){var e,r,i;if(!tr.isWindow(t)&&t.nodeType!==9)e=tr.offset(t),r=tr.outerWidth(t),i=tr.outerHeight(t);else{var u=tr.getWindow(t);e={left:tr.getWindowScrollLeft(u),top:tr.getWindowScrollTop(u)},r=tr.viewportWidth(u),i=tr.viewportHeight(u)}return e.width=r,e.height=i,e}function WE(t,e){var r=e.charAt(0),i=e.charAt(1),u=t.width,d=t.height,m=t.left,o=t.top;return r==="c"?o+=d/2:r==="b"&&(o+=d),i==="c"?m+=u/2:i==="r"&&(m+=u),{left:m,top:o}}function Dv(t,e,r,i,u){var d=WE(e,r[1]),m=WE(t,r[0]),o=[m.left-d.left,m.top-d.top];return{left:Math.round(t.left-o[0]+i[0]-u[0]),top:Math.round(t.top-o[1]+i[1]-u[1])}}function ZE(t,e,r){return t.left<r.left||t.left+e.width>r.right}function XE(t,e,r){return t.top<r.top||t.top+e.height>r.bottom}function Gj(t,e,r){return t.left>r.right||t.left+e.width<r.left}function Hj(t,e,r){return t.top>r.bottom||t.top+e.height<r.top}function Rv(t,e,r){var i=[];return tr.each(t,function(u){i.push(u.replace(e,function(d){return r[d]}))}),i}function zv(t,e){return t[e]=-t[e],t}function YE(t,e){var r;return/%$/.test(t)?r=parseInt(t.substring(0,t.length-1),10)/100*e:r=parseInt(t,10),r||0}function JE(t,e){t[0]=YE(t[0],e.width),t[1]=YE(t[1],e.height)}function c3(t,e,r,i){var u=r.points,d=r.offset||[0,0],m=r.targetOffset||[0,0],o=r.overflow,_=r.source||t;d=[].concat(d),m=[].concat(m),o=o||{};var C={},T=0,S=!!(o&&o.alwaysByViewport),P=lw(_,S),A=uw(_);JE(d,A),JE(m,e);var O=Dv(A,e,u,d,m),R=tr.merge(A,O);if(P&&(o.adjustX||o.adjustY)&&i){if(o.adjustX&&ZE(O,A,P)){var z=Rv(u,/[lr]/gi,{l:"r",r:"l"}),F=zv(d,0),N=zv(m,0),U=Dv(A,e,z,F,N);Gj(U,A,P)||(T=1,u=z,d=F,m=N)}if(o.adjustY&&XE(O,A,P)){var G=Rv(u,/[tb]/gi,{t:"b",b:"t"}),q=zv(d,1),V=zv(m,1),Z=Dv(A,e,G,q,V);Hj(Z,A,P)||(T=1,u=G,d=q,m=V)}T&&(O=Dv(A,e,u,d,m),tr.mix(R,O));var Q=ZE(O,A,P),te=XE(O,A,P);if(Q||te){var ie=u;Q&&(ie=Rv(u,/[lr]/gi,{l:"r",r:"l"})),te&&(ie=Rv(u,/[tb]/gi,{t:"b",b:"t"})),u=ie,d=r.offset||[0,0],m=r.targetOffset||[0,0]}C.adjustX=o.adjustX&&Q,C.adjustY=o.adjustY&&te,(C.adjustX||C.adjustY)&&(R=Kj(O,A,P,C))}return R.width!==A.width&&tr.css(_,"width",tr.width(_)+R.width-A.width),R.height!==A.height&&tr.css(_,"height",tr.height(_)+R.height-A.height),tr.offset(_,{left:R.left,top:R.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:u,offset:d,targetOffset:m,overflow:C}}function qj(t,e){var r=lw(t,e),i=uw(t);return!r||i.left+i.width<=r.left||i.top+i.height<=r.top||i.left>=r.right||i.top>=r.bottom}function cw(t,e,r){var i=r.target||e,u=uw(i),d=!qj(i,r.overflow&&r.overflow.alwaysByViewport);return c3(t,u,r,d)}cw.__getOffsetParent=Qx;cw.__getVisibleRectForElement=lw;function Wj(t,e,r){var i,u,d=tr.getDocument(t),m=d.defaultView||d.parentWindow,o=tr.getWindowScrollLeft(m),_=tr.getWindowScrollTop(m),C=tr.viewportWidth(m),T=tr.viewportHeight(m);"pageX"in e?i=e.pageX:i=o+e.clientX,"pageY"in e?u=e.pageY:u=_+e.clientY;var S={left:i,top:u,width:0,height:0},P=i>=0&&i<=o+C&&u>=0&&u<=_+T,A=[r.points[0],"cc"];return c3(t,S,$E($E({},r),{},{points:A}),P)}function ui(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=t;if(Array.isArray(t)&&(u=Ko(t)[0]),!u)return null;var d=wo(u,e,i);return d.props=r?H(H({},d.props),e):d.props,Ll(On(d.props.class)!=="object","class must be string"),d}const d3=function(t){if(!t)return!1;if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox();if(e.width||e.height)return!0}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();if(r.width||r.height)return!0}return!1};function Zj(t,e){return t===e?!0:!t||!e?!1:"pageX"in e&&"pageY"in e?t.pageX===e.pageX&&t.pageY===e.pageY:"clientX"in e&&"clientY"in e?t.clientX===e.clientX&&t.clientY===e.clientY:!1}function Xj(t,e){t!==document.activeElement&&Vu(e,t)&&typeof t.focus=="function"&&t.focus()}function QE(t,e){var r=null,i=null;function u(m){var o=zn(m,1),_=o[0].target;if(!!document.documentElement.contains(_)){var C=_.getBoundingClientRect(),T=C.width,S=C.height,P=Math.floor(T),A=Math.floor(S);(r!==P||i!==A)&&Promise.resolve().then(function(){e({width:P,height:A})}),r=P,i=A}}var d=new Nk(u);return t&&d.observe(t),function(){d.disconnect()}}const Yj=function(t,e){var r=!1,i=null;function u(){clearTimeout(i)}function d(m){if(!r||m===!0){if(t()===!1)return;r=!0,u(),i=setTimeout(function(){r=!1},e.value)}else u(),i=setTimeout(function(){r=!1,d()},e.value)}return[d,function(){r=!1,u()}]};function Jj(){this.__data__=[],this.size=0}function dw(t,e){return t===e||t!==t&&e!==e}function ly(t,e){for(var r=t.length;r--;)if(dw(t[r][0],e))return r;return-1}var Qj=Array.prototype,e8=Qj.splice;function t8(t){var e=this.__data__,r=ly(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():e8.call(e,r,1),--this.size,!0}function n8(t){var e=this.__data__,r=ly(e,t);return r<0?void 0:e[r][1]}function r8(t){return ly(this.__data__,t)>-1}function i8(t,e){var r=this.__data__,i=ly(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}function Vs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Vs.prototype.clear=Jj;Vs.prototype.delete=t8;Vs.prototype.get=n8;Vs.prototype.has=r8;Vs.prototype.set=i8;function o8(){this.__data__=new Vs,this.size=0}function a8(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function s8(t){return this.__data__.get(t)}function l8(t){return this.__data__.has(t)}function $s(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var u8="[object AsyncFunction]",c8="[object Function]",d8="[object GeneratorFunction]",f8="[object Proxy]";function f3(t){if(!$s(t))return!1;var e=rc(t);return e==c8||e==d8||e==u8||e==f8}var h8=Sa["__core-js_shared__"];const O0=h8;var eI=function(){var t=/[^.]+$/.exec(O0&&O0.keys&&O0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function p8(t){return!!eI&&eI in t}var m8=Function.prototype,v8=m8.toString;function ac(t){if(t!=null){try{return v8.call(t)}catch{}try{return t+""}catch{}}return""}var g8=/[\\^$.*+?()[\]{}|]/g,y8=/^\[object .+?Constructor\]$/,_8=Function.prototype,x8=Object.prototype,b8=_8.toString,w8=x8.hasOwnProperty,C8=RegExp("^"+b8.call(w8).replace(g8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function S8(t){if(!$s(t)||p8(t))return!1;var e=f3(t)?C8:y8;return e.test(ac(t))}function T8(t,e){return t==null?void 0:t[e]}function sc(t,e){var r=T8(t,e);return S8(r)?r:void 0}var E8=sc(Sa,"Map");const bp=E8;var I8=sc(Object,"create");const wp=I8;function P8(){this.__data__=wp?wp(null):{},this.size=0}function A8(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var M8="__lodash_hash_undefined__",k8=Object.prototype,O8=k8.hasOwnProperty;function D8(t){var e=this.__data__;if(wp){var r=e[t];return r===M8?void 0:r}return O8.call(e,t)?e[t]:void 0}var R8=Object.prototype,z8=R8.hasOwnProperty;function L8(t){var e=this.__data__;return wp?e[t]!==void 0:z8.call(e,t)}var F8="__lodash_hash_undefined__";function B8(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=wp&&e===void 0?F8:e,this}function Qu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Qu.prototype.clear=P8;Qu.prototype.delete=A8;Qu.prototype.get=D8;Qu.prototype.has=L8;Qu.prototype.set=B8;function N8(){this.size=0,this.__data__={hash:new Qu,map:new(bp||Vs),string:new Qu}}function $8(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function uy(t,e){var r=t.__data__;return $8(e)?r[typeof e=="string"?"string":"hash"]:r.map}function j8(t){var e=uy(this,t).delete(t);return this.size-=e?1:0,e}function V8(t){return uy(this,t).get(t)}function U8(t){return uy(this,t).has(t)}function K8(t,e){var r=uy(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}function Us(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Us.prototype.clear=N8;Us.prototype.delete=j8;Us.prototype.get=V8;Us.prototype.has=U8;Us.prototype.set=K8;var G8=200;function H8(t,e){var r=this.__data__;if(r instanceof Vs){var i=r.__data__;if(!bp||i.length<G8-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Us(i)}return r.set(t,e),this.size=r.size,this}function Qa(t){var e=this.__data__=new Vs(t);this.size=e.size}Qa.prototype.clear=o8;Qa.prototype.delete=a8;Qa.prototype.get=s8;Qa.prototype.has=l8;Qa.prototype.set=H8;var q8="__lodash_hash_undefined__";function W8(t){return this.__data__.set(t,q8),this}function Z8(t){return this.__data__.has(t)}function $d(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Us;++e<r;)this.add(t[e])}$d.prototype.add=$d.prototype.push=W8;$d.prototype.has=Z8;function X8(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}function Mg(t,e){return t.has(e)}var Y8=1,J8=2;function h3(t,e,r,i,u,d){var m=r&Y8,o=t.length,_=e.length;if(o!=_&&!(m&&_>o))return!1;var C=d.get(t),T=d.get(e);if(C&&T)return C==e&&T==t;var S=-1,P=!0,A=r&J8?new $d:void 0;for(d.set(t,e),d.set(e,t);++S<o;){var O=t[S],R=e[S];if(i)var z=m?i(R,O,S,e,t,d):i(O,R,S,t,e,d);if(z!==void 0){if(z)continue;P=!1;break}if(A){if(!X8(e,function(F,N){if(!Mg(A,N)&&(O===F||u(O,F,r,i,d)))return A.push(N)})){P=!1;break}}else if(!(O===R||u(O,R,r,i,d))){P=!1;break}}return d.delete(t),d.delete(e),P}var Q8=Sa.Uint8Array;const kg=Q8;function eV(t){var e=-1,r=Array(t.size);return t.forEach(function(i,u){r[++e]=[u,i]}),r}function fw(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var tV=1,nV=2,rV="[object Boolean]",iV="[object Date]",oV="[object Error]",aV="[object Map]",sV="[object Number]",lV="[object RegExp]",uV="[object Set]",cV="[object String]",dV="[object Symbol]",fV="[object ArrayBuffer]",hV="[object DataView]",tI=ia?ia.prototype:void 0,D0=tI?tI.valueOf:void 0;function pV(t,e,r,i,u,d,m){switch(r){case hV:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case fV:return!(t.byteLength!=e.byteLength||!d(new kg(t),new kg(e)));case rV:case iV:case sV:return dw(+t,+e);case oV:return t.name==e.name&&t.message==e.message;case lV:case cV:return t==e+"";case aV:var o=eV;case uV:var _=i&tV;if(o||(o=fw),t.size!=e.size&&!_)return!1;var C=m.get(t);if(C)return C==e;i|=nV,m.set(t,e);var T=h3(o(t),o(e),i,u,d,m);return m.delete(t),T;case dV:if(D0)return D0.call(t)==D0.call(e)}return!1}function hw(t,e){for(var r=-1,i=e.length,u=t.length;++r<i;)t[u+r]=e[r];return t}var mV=Array.isArray;const ba=mV;function p3(t,e,r){var i=e(t);return ba(t)?i:hw(i,r(t))}function vV(t,e){for(var r=-1,i=t==null?0:t.length,u=0,d=[];++r<i;){var m=t[r];e(m,r,t)&&(d[u++]=m)}return d}function m3(){return[]}var gV=Object.prototype,yV=gV.propertyIsEnumerable,nI=Object.getOwnPropertySymbols,_V=nI?function(t){return t==null?[]:(t=Object(t),vV(nI(t),function(e){return yV.call(t,e)}))}:m3;const pw=_V;function xV(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var bV="[object Arguments]";function rI(t){return ts(t)&&rc(t)==bV}var v3=Object.prototype,wV=v3.hasOwnProperty,CV=v3.propertyIsEnumerable,SV=rI(function(){return arguments}())?rI:function(t){return ts(t)&&wV.call(t,"callee")&&!CV.call(t,"callee")};const mw=SV;function TV(){return!1}var g3=typeof Fo=="object"&&Fo&&!Fo.nodeType&&Fo,iI=g3&&typeof Bo=="object"&&Bo&&!Bo.nodeType&&Bo,EV=iI&&iI.exports===g3,oI=EV?Sa.Buffer:void 0,IV=oI?oI.isBuffer:void 0,PV=IV||TV;const Og=PV;var AV=9007199254740991,MV=/^(?:0|[1-9]\d*)$/;function y3(t,e){var r=typeof t;return e=e==null?AV:e,!!e&&(r=="number"||r!="symbol"&&MV.test(t))&&t>-1&&t%1==0&&t<e}var kV=9007199254740991;function vw(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=kV}var OV="[object Arguments]",DV="[object Array]",RV="[object Boolean]",zV="[object Date]",LV="[object Error]",FV="[object Function]",BV="[object Map]",NV="[object Number]",$V="[object Object]",jV="[object RegExp]",VV="[object Set]",UV="[object String]",KV="[object WeakMap]",GV="[object ArrayBuffer]",HV="[object DataView]",qV="[object Float32Array]",WV="[object Float64Array]",ZV="[object Int8Array]",XV="[object Int16Array]",YV="[object Int32Array]",JV="[object Uint8Array]",QV="[object Uint8ClampedArray]",eU="[object Uint16Array]",tU="[object Uint32Array]",ni={};ni[qV]=ni[WV]=ni[ZV]=ni[XV]=ni[YV]=ni[JV]=ni[QV]=ni[eU]=ni[tU]=!0;ni[OV]=ni[DV]=ni[GV]=ni[RV]=ni[HV]=ni[zV]=ni[LV]=ni[FV]=ni[BV]=ni[NV]=ni[$V]=ni[jV]=ni[VV]=ni[UV]=ni[KV]=!1;function nU(t){return ts(t)&&vw(t.length)&&!!ni[rc(t)]}function cy(t){return function(e){return t(e)}}var _3=typeof Fo=="object"&&Fo&&!Fo.nodeType&&Fo,Yh=_3&&typeof Bo=="object"&&Bo&&!Bo.nodeType&&Bo,rU=Yh&&Yh.exports===_3,R0=rU&&Uk.process,iU=function(){try{var t=Yh&&Yh.require&&Yh.require("util").types;return t||R0&&R0.binding&&R0.binding("util")}catch{}}();const jd=iU;var aI=jd&&jd.isTypedArray,oU=aI?cy(aI):nU;const x3=oU;var aU=Object.prototype,sU=aU.hasOwnProperty;function b3(t,e){var r=ba(t),i=!r&&mw(t),u=!r&&!i&&Og(t),d=!r&&!i&&!u&&x3(t),m=r||i||u||d,o=m?xV(t.length,String):[],_=o.length;for(var C in t)(e||sU.call(t,C))&&!(m&&(C=="length"||u&&(C=="offset"||C=="parent")||d&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||y3(C,_)))&&o.push(C);return o}var lU=Object.prototype;function gw(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||lU;return t===r}var uU=Gk(Object.keys,Object);const cU=uU;var dU=Object.prototype,fU=dU.hasOwnProperty;function hU(t){if(!gw(t))return cU(t);var e=[];for(var r in Object(t))fU.call(t,r)&&r!="constructor"&&e.push(r);return e}function dy(t){return t!=null&&vw(t.length)&&!f3(t)}function Np(t){return dy(t)?b3(t):hU(t)}function eb(t){return p3(t,Np,pw)}var pU=1,mU=Object.prototype,vU=mU.hasOwnProperty;function gU(t,e,r,i,u,d){var m=r&pU,o=eb(t),_=o.length,C=eb(e),T=C.length;if(_!=T&&!m)return!1;for(var S=_;S--;){var P=o[S];if(!(m?P in e:vU.call(e,P)))return!1}var A=d.get(t),O=d.get(e);if(A&&O)return A==e&&O==t;var R=!0;d.set(t,e),d.set(e,t);for(var z=m;++S<_;){P=o[S];var F=t[P],N=e[P];if(i)var U=m?i(N,F,P,e,t,d):i(F,N,P,t,e,d);if(!(U===void 0?F===N||u(F,N,r,i,d):U)){R=!1;break}z||(z=P=="constructor")}if(R&&!z){var G=t.constructor,q=e.constructor;G!=q&&"constructor"in t&&"constructor"in e&&!(typeof G=="function"&&G instanceof G&&typeof q=="function"&&q instanceof q)&&(R=!1)}return d.delete(t),d.delete(e),R}var yU=sc(Sa,"DataView");const tb=yU;var _U=sc(Sa,"Promise");const nb=_U;var xU=sc(Sa,"Set");const Id=xU;var bU=sc(Sa,"WeakMap");const rb=bU;var sI="[object Map]",wU="[object Object]",lI="[object Promise]",uI="[object Set]",cI="[object WeakMap]",dI="[object DataView]",CU=ac(tb),SU=ac(bp),TU=ac(nb),EU=ac(Id),IU=ac(rb),zu=rc;(tb&&zu(new tb(new ArrayBuffer(1)))!=dI||bp&&zu(new bp)!=sI||nb&&zu(nb.resolve())!=lI||Id&&zu(new Id)!=uI||rb&&zu(new rb)!=cI)&&(zu=function(t){var e=rc(t),r=e==wU?t.constructor:void 0,i=r?ac(r):"";if(i)switch(i){case CU:return dI;case SU:return sI;case TU:return lI;case EU:return uI;case IU:return cI}return e});const Cp=zu;var PU=1,fI="[object Arguments]",hI="[object Array]",Lv="[object Object]",AU=Object.prototype,pI=AU.hasOwnProperty;function MU(t,e,r,i,u,d){var m=ba(t),o=ba(e),_=m?hI:Cp(t),C=o?hI:Cp(e);_=_==fI?Lv:_,C=C==fI?Lv:C;var T=_==Lv,S=C==Lv,P=_==C;if(P&&Og(t)){if(!Og(e))return!1;m=!0,T=!1}if(P&&!T)return d||(d=new Qa),m||x3(t)?h3(t,e,r,i,u,d):pV(t,e,_,r,i,u,d);if(!(r&PU)){var A=T&&pI.call(t,"__wrapped__"),O=S&&pI.call(e,"__wrapped__");if(A||O){var R=A?t.value():t,z=O?e.value():e;return d||(d=new Qa),u(R,z,r,i,d)}}return P?(d||(d=new Qa),gU(t,e,r,i,u,d)):!1}function fy(t,e,r,i,u){return t===e?!0:t==null||e==null||!ts(t)&&!ts(e)?t!==t&&e!==e:MU(t,e,r,i,fy,u)}function hy(t,e){return fy(t,e)}var kU={align:Object,target:[Object,Function],onAlign:Function,monitorBufferTime:Number,monitorWindowResize:Boolean,disabled:Boolean};function mI(t){return typeof t!="function"?null:t()}function vI(t){return On(t)!=="object"||!t?null:t}const OU=jt({compatConfig:{MODE:3},name:"Align",props:kU,emits:["align"],setup:function(e,r){var i=r.expose,u=r.slots,d=qe({}),m=qe(),o=Yj(function(){var R=e.disabled,z=e.target,F=e.align,N=e.onAlign;if(!R&&z&&m.value){var U=m.value,G,q=mI(z),V=vI(z);d.value.element=q,d.value.point=V,d.value.align=F;var Z=document,Q=Z.activeElement;return q&&d3(q)?G=cw(U,q,F):V&&(G=Wj(U,V,F)),Xj(Q,U),N&&G&&N(U,G),!0}return!1},ue(function(){return e.monitorBufferTime})),_=zn(o,2),C=_[0],T=_[1],S=qe({cancel:function(){}}),P=qe({cancel:function(){}}),A=function(){var z=e.target,F=mI(z),N=vI(z);m.value!==P.value.element&&(P.value.cancel(),P.value.element=m.value,P.value.cancel=QE(m.value,C)),(d.value.element!==F||!Zj(d.value.point,N)||!hy(d.value.align,e.align))&&(C(),S.value.element!==F&&(S.value.cancel(),S.value.element=F,S.value.cancel=QE(F,C)))};wr(function(){gr(function(){A()})}),Ca(function(){gr(function(){A()})}),an(function(){return e.disabled},function(R){R?T():C()},{immediate:!0,flush:"post"});var O=qe(null);return an(function(){return e.monitorWindowResize},function(R){R?O.value||(O.value=zo(window,"resize",C)):O.value&&(O.value.remove(),O.value=null)},{flush:"post"}),is(function(){S.value.cancel(),P.value.cancel(),O.value&&O.value.remove(),T()}),i({forceAlign:function(){return C(!0)}}),function(){var R=u==null?void 0:u.default();return R?ui(R[0],{ref:m},!0,!0):null}}}),DU=jt({compatConfig:{MODE:3},name:"PopupInner",inheritAttrs:!1,props:ow,emits:["mouseenter","mouseleave","mousedown","touchstart","align"],setup:function(e,r){var i=r.expose,u=r.attrs,d=r.slots,m=qe(),o=qe(),_=qe(),C=bj(Nr(e,"stretch")),T=zn(C,2),S=T[0],P=T[1],A=function(){e.stretch&&P(e.getRootDomNode())},O=qe(!1),R;an(function(){return e.visible},function(ve){clearTimeout(R),ve?R=setTimeout(function(){O.value=e.visible}):O.value=!1},{immediate:!0});var z=xj(O,A),F=zn(z,2),N=F[0],U=F[1],G=qe(),q=function(){return e.point?e.point:e.getRootDomNode},V=function(){var ce;(ce=m.value)===null||ce===void 0||ce.forceAlign()},Z=function(ce,de){var xe=e.getClassNameFromAlign(de),De=_.value;if(_.value!==xe&&(_.value=xe),N.value==="align"){var ge;De!==xe?Promise.resolve().then(function(){V()}):U(function(){var he;(he=G.value)===null||he===void 0||he.call(G)}),(ge=e.onAlign)===null||ge===void 0||ge.call(e,ce,de)}},Q=ue(function(){var ve=On(e.animation)==="object"?e.animation:t3(e);return["onAfterEnter","onAfterLeave"].forEach(function(ce){var de=ve[ce];ve[ce]=function(xe){U(),N.value="stable",de==null||de(xe)}}),ve}),te=function(){return new Promise(function(ce){G.value=ce})};an([Q,N],function(){!Q.value&&N.value==="motion"&&U()},{immediate:!0}),i({forceAlign:V,getElement:function(){return o.value.$el||o.value}});var ie=ue(function(){var ve;return!((ve=e.align)!==null&&ve!==void 0&&ve.points&&(N.value==="align"||N.value==="stable"))});return function(){var ve,ce=e.zIndex,de=e.align,xe=e.prefixCls,De=e.destroyPopupOnHide,ge=e.onMouseenter,he=e.onMouseleave,me=e.onTouchstart,Pe=me===void 0?function(){}:me,He=e.onMousedown,Ke=N.value,Re=[H(H({},S.value),{},{zIndex:ce,opacity:Ke==="motion"||Ke==="stable"||!O.value?null:0,pointerEvents:!O.value&&Ke!=="stable"?"none":null}),u.style],Le=fo((ve=d.default)===null||ve===void 0?void 0:ve.call(d,{visible:e.visible}));Le.length>1&&(Le=j("div",{class:"".concat(xe,"-content")},[Le]));var Te=qt(xe,u.class,_.value),oe=O.value||!e.visible,ze=oe?oy(Q.value.name,Q.value):{};return j(os,H(H({ref:o},ze),{},{onBeforeEnter:te}),{default:function(){return!De||e.visible?uo(j(OU,{target:q(),key:"popup",ref:m,monitorWindowResize:!0,disabled:ie.value,align:de,onAlign:Z},{default:function(){return j("div",H(H({class:Te,onMouseenter:ge,onMouseleave:he,onMousedown:HT(He,["capture"])},Ie({},ao?"onTouchstartPassive":"onTouchstart",HT(Pe,["capture"]))),{},{style:Re}),[Le])}}),[[Rp,O.value]]):null}})}}}),RU=jt({compatConfig:{MODE:3},name:"Popup",inheritAttrs:!1,props:yj,setup:function(e,r){var i=r.attrs,u=r.slots,d=r.expose,m=qe(!1),o=qe(!1),_=qe();return an([function(){return e.visible},function(){return e.mobile}],function(){m.value=e.visible,e.visible&&e.mobile&&(o.value=!0)},{immediate:!0,flush:"post"}),d({forceAlign:function(){var T;(T=_.value)===null||T===void 0||T.forceAlign()},getElement:function(){var T;return(T=_.value)===null||T===void 0?void 0:T.getElement()}}),function(){var C=H(H(H({},e),i),{},{visible:m.value}),T=o.value?j(_j,H(H({},C),{},{mobile:e.mobile,ref:_}),{default:u.default}):j(DU,H(H({},C),{},{ref:_}),{default:u.default});return j("div",null,[j(n3,C,null),T])}}});function zU(t,e,r){return r?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function gI(t,e,r){var i=t[e]||{};return H(H({},i),r)}function LU(t,e,r,i){for(var u=r.points,d=Object.keys(t),m=0;m<d.length;m+=1){var o=d[m];if(zU(t[o].points,u,i))return"".concat(e,"-placement-").concat(o)}return""}const w3={methods:{setState:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,i=typeof e=="function"?e(this.$data,this.$props):e;if(this.getDerivedStateFromProps){var u=this.getDerivedStateFromProps(MN(this),H(H({},this.$data),i));if(u===null)return;i=H(H({},i),u||{})}kr(this.$data,i),this._.isMounted&&this.$forceUpdate(),gr(function(){r&&r()})},__emit:function(){var e=[].slice.call(arguments,0),r=e[0];r="on".concat(r[0].toUpperCase()).concat(r.substring(1));var i=this.$props[r]||this.$attrs[r];if(e.length&&i)if(Array.isArray(i))for(var u=0,d=i.length;u<d;u++)i[u].apply(i,bn(e.slice(1)));else i.apply(void 0,bn(e.slice(1)))}}};var FU=Symbol("TriggerContextKey"),BU=function(){return Kn(FU,{setPortal:function(){},popPortal:!1})},C3=Symbol("PortalContextKey"),yw=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inTriggerContext:!0};sr(C3,{inTriggerContext:r.inTriggerContext,shouldRender:ue(function(){var i=e||{},u=i.sPopupVisible,d=i.popupRef,m=i.forceRender,o=i.autoDestroy,_=!1;return(u||d||m)&&(_=!0),!u&&o&&(_=!1),_})})},NU=function(){yw({},{inTriggerContext:!1});var e=Kn(C3,{shouldRender:ue(function(){return!1}),inTriggerContext:!1});return{shouldRender:ue(function(){return e.shouldRender.value||e.inTriggerContext===!1})}};const ib=jt({compatConfig:{MODE:3},name:"Portal",inheritAttrs:!1,props:{getContainer:et.func.isRequired,didUpdate:Function},setup:function(e,r){var i=r.slots,u=!0,d,m=NU(),o=m.shouldRender;sk(function(){u=!1,o.value&&(d=e.getContainer())});var _=an(o,function(){o.value&&!d&&(d=e.getContainer()),d&&_()});return Ca(function(){gr(function(){if(o.value){var C;(C=e.didUpdate)===null||C===void 0||C.call(e,e)}})}),Er(function(){d&&d.parentNode&&d.parentNode.removeChild(d)}),function(){if(!o.value)return null;if(u){var C;return(C=i.default)===null||C===void 0?void 0:C.call(i)}return d?j(L1,{to:d},i):null}}});function yI(){}function $U(){return""}function jU(t){return t?t.ownerDocument:window.document}var VU=["onClick","onMousedown","onTouchstart","onMouseenter","onMouseleave","onFocus","onBlur","onContextmenu"];const py=jt({compatConfig:{MODE:3},name:"Trigger",mixins:[w3],inheritAttrs:!1,props:{action:et.oneOfType([et.string,et.arrayOf(et.string)]).def([]),showAction:et.any.def([]),hideAction:et.any.def([]),getPopupClassNameFromAlign:et.any.def($U),onPopupVisibleChange:Function,afterPopupVisibleChange:et.func.def(yI),popup:et.any,popupStyle:{type:Object,default:void 0},prefixCls:et.string.def("rc-trigger-popup"),popupClassName:et.string.def(""),popupPlacement:String,builtinPlacements:et.object,popupTransitionName:String,popupAnimation:et.any,mouseEnterDelay:et.number.def(0),mouseLeaveDelay:et.number.def(.1),zIndex:Number,focusDelay:et.number.def(0),blurDelay:et.number.def(.15),getPopupContainer:Function,getDocument:et.func.def(jU),forceRender:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},popupAlign:et.object.def(function(){return{}}),popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},maskTransitionName:String,maskAnimation:String,stretch:String,alignPoint:{type:Boolean,default:void 0},autoDestroy:{type:Boolean,default:!1},mobile:Object,getTriggerDOMNode:Function},setup:function(e){var r=ue(function(){var _=e.popupPlacement,C=e.popupAlign,T=e.builtinPlacements;return _&&T?gI(T,_,C):C}),i=BU(),u=i.setPortal,d=i.popPortal,m=qe(null),o=function(C){m.value=C};return{popPortal:d,setPortal:u,vcTriggerContext:Kn("vcTriggerContext",{}),popupRef:m,setPopupRef:o,triggerRef:qe(null),align:r,focusTime:null,clickOutsideHandler:null,contextmenuOutsideHandler1:null,contextmenuOutsideHandler2:null,touchOutsideHandler:null,attachId:null,delayTimer:null,hasPopupMouseDown:!1,preClickTime:null,preTouchTime:null,mouseDownTimeout:null,childOriginEvents:{}}},data:function(){var e=this,r,i=this.$props,u;return this.popupVisible!==void 0?u=!!i.popupVisible:u=!!i.defaultPopupVisible,VU.forEach(function(d){e["fire".concat(d)]=function(m){e.fireEvents(d,m)}}),(r=this.setPortal)===null||r===void 0||r.call(this,j(ib,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},{default:this.getComponent})),{prevPopupVisible:u,sPopupVisible:u,point:null}},watch:{popupVisible:function(e){e!==void 0&&(this.prevPopupVisible=this.sPopupVisible,this.sPopupVisible=e)}},created:function(){sr("vcTriggerContext",{onPopupMouseDown:this.onPopupMouseDown}),yw(this)},deactivated:function(){this.setPopupVisible(!1)},mounted:function(){var e=this;this.$nextTick(function(){e.updatedCal()})},updated:function(){var e=this;this.$nextTick(function(){e.updatedCal()})},beforeUnmount:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),fr.cancel(this.attachId)},methods:{updatedCal:function(){var e=this.$props,r=this.$data;if(r.sPopupVisible){var i;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextmenuToShow())&&(i=e.getDocument(this.getRootDomNode()),this.clickOutsideHandler=zo(i,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(i=i||e.getDocument(this.getRootDomNode()),this.touchOutsideHandler=zo(i,"touchstart",this.onDocumentClick,ao?{passive:!1}:!1)),!this.contextmenuOutsideHandler1&&this.isContextmenuToShow()&&(i=i||e.getDocument(this.getRootDomNode()),this.contextmenuOutsideHandler1=zo(i,"scroll",this.onContextmenuClose)),!this.contextmenuOutsideHandler2&&this.isContextmenuToShow()&&(this.contextmenuOutsideHandler2=zo(window,"blur",this.onContextmenuClose))}else this.clearOutsideHandler()},onMouseenter:function(e){var r=this.$props.mouseEnterDelay;this.fireEvents("onMouseenter",e),this.delaySetPopupVisible(!0,r,r?null:e)},onMouseMove:function(e){this.fireEvents("onMousemove",e),this.setPoint(e)},onMouseleave:function(e){this.fireEvents("onMouseleave",e),this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay)},onPopupMouseenter:function(){this.clearDelayTimer()},onPopupMouseleave:function(e){var r;e&&e.relatedTarget&&!e.relatedTarget.setTimeout&&Vu((r=this.popupRef)===null||r===void 0?void 0:r.getElement(),e.relatedTarget)||this.delaySetPopupVisible(!1,this.$props.mouseLeaveDelay)},onFocus:function(e){this.fireEvents("onFocus",e),this.clearDelayTimer(),this.isFocusToShow()&&(this.focusTime=Date.now(),this.delaySetPopupVisible(!0,this.$props.focusDelay))},onMousedown:function(e){this.fireEvents("onMousedown",e),this.preClickTime=Date.now()},onTouchstart:function(e){this.fireEvents("onTouchstart",e),this.preTouchTime=Date.now()},onBlur:function(e){Vu(e.target,e.relatedTarget||document.activeElement)||(this.fireEvents("onBlur",e),this.clearDelayTimer(),this.isBlurToHide()&&this.delaySetPopupVisible(!1,this.$props.blurDelay))},onContextmenu:function(e){e.preventDefault(),this.fireEvents("onContextmenu",e),this.setPopupVisible(!0,e)},onContextmenuClose:function(){this.isContextmenuToShow()&&this.close()},onClick:function(e){if(this.fireEvents("onClick",e),this.focusTime){var r;if(this.preClickTime&&this.preTouchTime?r=Math.min(this.preClickTime,this.preTouchTime):this.preClickTime?r=this.preClickTime:this.preTouchTime&&(r=this.preTouchTime),Math.abs(r-this.focusTime)<20)return;this.focusTime=0}this.preClickTime=0,this.preTouchTime=0,this.isClickToShow()&&(this.isClickToHide()||this.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault(),e&&e.domEvent&&e.domEvent.preventDefault();var i=!this.$data.sPopupVisible;(this.isClickToHide()&&!i||i&&this.isClickToShow())&&this.setPopupVisible(!this.$data.sPopupVisible,e)},onPopupMouseDown:function(){var e=this,r=this.vcTriggerContext,i=r===void 0?{}:r;this.hasPopupMouseDown=!0,clearTimeout(this.mouseDownTimeout),this.mouseDownTimeout=setTimeout(function(){e.hasPopupMouseDown=!1},0),i.onPopupMouseDown&&i.onPopupMouseDown.apply(i,arguments)},onDocumentClick:function(e){if(!(this.$props.mask&&!this.$props.maskClosable)){var r=e.target,i=this.getRootDomNode(),u=this.getPopupDomNode();(!Vu(i,r)||this.isContextMenuOnly())&&!Vu(u,r)&&!this.hasPopupMouseDown&&this.delaySetPopupVisible(!1,.1)}},getPopupDomNode:function(){var e;return((e=this.popupRef)===null||e===void 0?void 0:e.getElement())||null},getRootDomNode:function(){var e=this.$props.getTriggerDOMNode;if(e){var r=Ku(this.triggerRef);return Ku(e(r))}try{var i=Ku(this.triggerRef);if(i)return i}catch{}return Ku(this)},handleGetPopupClassFromAlign:function(e){var r=[],i=this.$props,u=i.popupPlacement,d=i.builtinPlacements,m=i.prefixCls,o=i.alignPoint,_=i.getPopupClassNameFromAlign;return u&&d&&r.push(LU(d,m,e,o)),_&&r.push(_(e)),r.join(" ")},getPopupAlign:function(){var e=this.$props,r=e.popupPlacement,i=e.popupAlign,u=e.builtinPlacements;return r&&u?gI(u,r,i):i},getComponent:function(){var e=this,r={};this.isMouseEnterToShow()&&(r.onMouseenter=this.onPopupMouseenter),this.isMouseLeaveToHide()&&(r.onMouseleave=this.onPopupMouseleave),r.onMousedown=this.onPopupMouseDown,r[ao?"onTouchstartPassive":"onTouchstart"]=this.onPopupMouseDown;var i=this.handleGetPopupClassFromAlign,u=this.getRootDomNode,d=this.getContainer,m=this.$attrs,o=this.$props,_=o.prefixCls,C=o.destroyPopupOnHide,T=o.popupClassName,S=o.popupAnimation,P=o.popupTransitionName,A=o.popupStyle,O=o.mask,R=o.maskAnimation,z=o.maskTransitionName,F=o.zIndex,N=o.stretch,U=o.alignPoint,G=o.mobile,q=o.forceRender,V=this.$data,Z=V.sPopupVisible,Q=V.point,te=H(H({prefixCls:_,destroyPopupOnHide:C,visible:Z,point:U?Q:null,align:this.align,animation:S,getClassNameFromAlign:i,stretch:N,getRootDomNode:u,mask:O,zIndex:F,transitionName:P,maskAnimation:R,maskTransitionName:z,getContainer:d,class:T,style:A,onAlign:m.onPopupAlign||yI},r),{},{ref:this.setPopupRef,mobile:G,forceRender:q});return j(RU,te,{default:this.$slots.popup||function(){return j1(e,"popup")}})},attachParent:function(e){var r=this;fr.cancel(this.attachId);var i=this.$props,u=i.getPopupContainer,d=i.getDocument,m=this.getRootDomNode(),o;u?(m||u.length===0)&&(o=u(m)):o=d(this.getRootDomNode()).body,o?o.appendChild(e):this.attachId=fr(function(){r.attachParent(e)})},getContainer:function(){var e=this.$props,r=e.getDocument,i=r(this.getRootDomNode()).createElement("div");return i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",this.attachParent(i),i},setPopupVisible:function(e,r){var i=this.alignPoint,u=this.sPopupVisible,d=this.onPopupVisibleChange;this.clearDelayTimer(),u!==e&&(md(this,"popupVisible")||this.setState({sPopupVisible:e,prevPopupVisible:u}),d&&d(e)),i&&r&&e&&this.setPoint(r)},setPoint:function(e){var r=this.$props.alignPoint;!r||!e||this.setState({point:{pageX:e.pageX,pageY:e.pageY}})},handlePortalUpdate:function(){this.prevPopupVisible!==this.sPopupVisible&&this.afterPopupVisibleChange(this.sPopupVisible)},delaySetPopupVisible:function(e,r,i){var u=this,d=r*1e3;if(this.clearDelayTimer(),d){var m=i?{pageX:i.pageX,pageY:i.pageY}:null;this.delayTimer=vj(function(){u.setPopupVisible(e,m),u.clearDelayTimer()},d)}else this.setPopupVisible(e,i)},clearDelayTimer:function(){this.delayTimer&&(mj(this.delayTimer),this.delayTimer=null)},clearOutsideHandler:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextmenuOutsideHandler1&&(this.contextmenuOutsideHandler1.remove(),this.contextmenuOutsideHandler1=null),this.contextmenuOutsideHandler2&&(this.contextmenuOutsideHandler2.remove(),this.contextmenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},createTwoChains:function(e){var r=function(){},i=QT(this);return this.childOriginEvents[e]&&i[e]?this["fire".concat(e)]:(r=this.childOriginEvents[e]||i[e]||r,r)},isClickToShow:function(){var e=this.$props,r=e.action,i=e.showAction;return r.indexOf("click")!==-1||i.indexOf("click")!==-1},isContextMenuOnly:function(){var e=this.$props.action;return e==="contextmenu"||e.length===1&&e[0]==="contextmenu"},isContextmenuToShow:function(){var e=this.$props,r=e.action,i=e.showAction;return r.indexOf("contextmenu")!==-1||i.indexOf("contextmenu")!==-1},isClickToHide:function(){var e=this.$props,r=e.action,i=e.hideAction;return r.indexOf("click")!==-1||i.indexOf("click")!==-1},isMouseEnterToShow:function(){var e=this.$props,r=e.action,i=e.showAction;return r.indexOf("hover")!==-1||i.indexOf("mouseenter")!==-1},isMouseLeaveToHide:function(){var e=this.$props,r=e.action,i=e.hideAction;return r.indexOf("hover")!==-1||i.indexOf("mouseleave")!==-1},isFocusToShow:function(){var e=this.$props,r=e.action,i=e.showAction;return r.indexOf("focus")!==-1||i.indexOf("focus")!==-1},isBlurToHide:function(){var e=this.$props,r=e.action,i=e.hideAction;return r.indexOf("focus")!==-1||i.indexOf("blur")!==-1},forcePopupAlign:function(){if(this.$data.sPopupVisible){var e;(e=this.popupRef)===null||e===void 0||e.forceAlign()}},fireEvents:function(e,r){this.childOriginEvents[e]&&this.childOriginEvents[e](r);var i=this.$props[e]||this.$attrs[e];i&&i(r)},close:function(){this.setPopupVisible(!1)}},render:function(){var e=this,r=this.$attrs,i=Ko(Zk(this)),u=this.$props.alignPoint,d=i[0];this.childOriginEvents=QT(d);var m={key:"trigger"};this.isContextmenuToShow()?m.onContextmenu=this.onContextmenu:m.onContextmenu=this.createTwoChains("onContextmenu"),this.isClickToHide()||this.isClickToShow()?(m.onClick=this.onClick,m.onMousedown=this.onMousedown,m[ao?"onTouchstartPassive":"onTouchstart"]=this.onTouchstart):(m.onClick=this.createTwoChains("onClick"),m.onMousedown=this.createTwoChains("onMousedown"),m[ao?"onTouchstartPassive":"onTouchstart"]=this.createTwoChains("onTouchstart")),this.isMouseEnterToShow()?(m.onMouseenter=this.onMouseenter,u&&(m.onMousemove=this.onMouseMove)):m.onMouseenter=this.createTwoChains("onMouseenter"),this.isMouseLeaveToHide()?m.onMouseleave=this.onMouseleave:m.onMouseleave=this.createTwoChains("onMouseleave"),this.isFocusToShow()||this.isBlurToHide()?(m.onFocus=this.onFocus,m.onBlur=this.onBlur):(m.onFocus=this.createTwoChains("onFocus"),m.onBlur=function(T){T&&(!T.relatedTarget||!Vu(T.target,T.relatedTarget))&&e.createTwoChains("onBlur")(T)});var o=qt(d&&d.props&&d.props.class,r.class);o&&(m.class=o);var _=ui(d,H(H({},m),{},{ref:"triggerRef"}),!0,!0);if(this.popPortal)return _;var C=j(ib,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},{default:this.getComponent});return j(Hn,null,[C,_])}});var UU=["empty"],KU=function(e){var r=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1}}}},GU=jt({name:"SelectTrigger",inheritAttrs:!1,props:{dropdownAlign:Object,visible:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},dropdownClassName:String,dropdownStyle:et.object,placement:String,empty:{type:Boolean,default:void 0},prefixCls:String,popupClassName:String,animation:String,transitionName:String,getPopupContainer:Function,dropdownRender:Function,containerWidth:Number,dropdownMatchSelectWidth:et.oneOfType([Number,Boolean]).def(!0),popupElement:et.any,direction:String,getTriggerDOMNode:Function,onPopupVisibleChange:Function,onPopupMouseEnter:Function},setup:function(e,r){var i=r.slots,u=r.attrs,d=r.expose,m=ue(function(){var _=e.dropdownMatchSelectWidth;return KU(_)}),o=qe();return d({getPopupElement:function(){return o.value}}),function(){var _=H(H({},e),u),C=_.empty,T=C===void 0?!1:C,S=Cr(_,UU),P=S.visible,A=S.dropdownAlign,O=S.prefixCls,R=S.popupElement,z=S.dropdownClassName,F=S.dropdownStyle,N=S.direction,U=N===void 0?"ltr":N,G=S.placement,q=S.dropdownMatchSelectWidth,V=S.containerWidth,Z=S.dropdownRender,Q=S.animation,te=S.transitionName,ie=S.getPopupContainer,ve=S.getTriggerDOMNode,ce=S.onPopupVisibleChange,de=S.onPopupMouseEnter,xe="".concat(O,"-dropdown"),De=R;Z&&(De=Z({menuNode:R,props:e}));var ge=Q?"".concat(xe,"-").concat(Q):te,he=H({minWidth:"".concat(V,"px")},F);return typeof q=="number"?he.width="".concat(q,"px"):q&&(he.width="".concat(V,"px")),j(py,H(H({},e),{},{showAction:ce?["click"]:[],hideAction:ce?["click"]:[],popupPlacement:G||(U==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:m.value,prefixCls:xe,popupTransitionName:ge,popupAlign:A,popupVisible:P,getPopupContainer:ie,popupClassName:qt(z,Ie({},"".concat(xe,"-empty"),T)),popupStyle:he,getTriggerDOMNode:ve,onPopupVisibleChange:ce}),{default:i.default,popup:function(){return j("div",{ref:o,onMouseenter:de},[De])}})}}});const HU=GU;var Un={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var r=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||r>=Un.F1&&r<=Un.F12)return!1;switch(r){case Un.ALT:case Un.CAPS_LOCK:case Un.CONTEXT_MENU:case Un.CTRL:case Un.DOWN:case Un.END:case Un.ESC:case Un.HOME:case Un.INSERT:case Un.LEFT:case Un.MAC_FF_META:case Un.META:case Un.NUMLOCK:case Un.NUM_CENTER:case Un.PAGE_DOWN:case Un.PAGE_UP:case Un.PAUSE:case Un.PRINT_SCREEN:case Un.RIGHT:case Un.SHIFT:case Un.UP:case Un.WIN_KEY:case Un.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Un.ZERO&&e<=Un.NINE||e>=Un.NUM_ZERO&&e<=Un.NUM_MULTIPLY||e>=Un.A&&e<=Un.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&e===0)return!0;switch(e){case Un.SPACE:case Un.QUESTION_MARK:case Un.NUM_PLUS:case Un.NUM_MINUS:case Un.NUM_PERIOD:case Un.NUM_DIVISION:case Un.SEMICOLON:case Un.DASH:case Un.EQUALS:case Un.COMMA:case Un.PERIOD:case Un.SLASH:case Un.APOSTROPHE:case Un.SINGLE_QUOTE:case Un.OPEN_SQUARE_BRACKET:case Un.BACKSLASH:case Un.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};const Fn=Un;var my=function(e,r){var i,u=r.slots,d=e.class,m=e.customizeIcon,o=e.customizeIconProps,_=e.onMousedown,C=e.onClick,T;return typeof m=="function"?T=m(o):T=m,j("span",{class:d,onMousedown:function(P){P.preventDefault(),_&&_(P)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:C,"aria-hidden":!0},[T!==void 0?T:j("span",{class:d.split(/\s+/).map(function(S){return"".concat(S,"-icon")})},[(i=u.default)===null||i===void 0?void 0:i.call(u)])])};my.inheritAttrs=!1;my.displayName="TransBtn";my.props={class:String,customizeIcon:et.any,customizeIconProps:et.any,onMousedown:Function,onClick:Function};const Dg=my;function qU(t){t.target.composing=!0}function _I(t){!t.target.composing||(t.target.composing=!1,WU(t.target,"input"))}function WU(t,e){var r=document.createEvent("HTMLEvents");r.initEvent(e,!0,!0),t.dispatchEvent(r)}function z0(t,e,r,i){t.addEventListener(e,r,i)}var ZU={created:function(e,r){(!r.modifiers||!r.modifiers.lazy)&&(z0(e,"compositionstart",qU),z0(e,"compositionend",_I),z0(e,"change",_I))}};const $p=ZU;var XU={inputRef:et.any,prefixCls:String,id:String,inputElement:et.VueNode,disabled:{type:Boolean,default:void 0},autofocus:{type:Boolean,default:void 0},autocomplete:String,editable:{type:Boolean,default:void 0},activeDescendantId:String,value:String,open:{type:Boolean,default:void 0},tabindex:et.oneOfType([et.number,et.string]),attrs:et.object,onKeydown:{type:Function},onMousedown:{type:Function},onChange:{type:Function},onPaste:{type:Function},onCompositionstart:{type:Function},onCompositionend:{type:Function},onFocus:{type:Function},onBlur:{type:Function}},YU=jt({compatConfig:{MODE:3},name:"Input",inheritAttrs:!1,props:XU,setup:function(e){var r=null,i=Kn("VCSelectContainerEvent");return function(){var u,d,m=e.prefixCls,o=e.id,_=e.inputElement,C=e.disabled,T=e.tabindex,S=e.autofocus,P=e.autocomplete,A=e.editable,O=e.activeDescendantId,R=e.value,z=e.onKeydown,F=e.onMousedown,N=e.onChange,U=e.onPaste,G=e.onCompositionstart,q=e.onCompositionend,V=e.onFocus,Z=e.onBlur,Q=e.open,te=e.inputRef,ie=e.attrs,ve=_||uo(j("input",null,null),[[$p]]),ce=ve.props||{},de=ce.onKeydown,xe=ce.onInput,De=ce.onFocus,ge=ce.onBlur,he=ce.onMousedown,me=ce.onCompositionstart,Pe=ce.onCompositionend,He=ce.style;return ve=ui(ve,kr(H(H(H({type:"search"},ce),{},{id:o,ref:te,disabled:C,tabindex:T,autocomplete:P||"off",autofocus:S,class:qt("".concat(m,"-selection-search-input"),(u=ve)===null||u===void 0||(d=u.props)===null||d===void 0?void 0:d.class),role:"combobox","aria-expanded":Q,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":O},ie),{},{value:A?R:"",readonly:!A,unselectable:A?null:"on",style:H(H({},He),{},{opacity:A?null:0}),onKeydown:function(Re){z(Re),de&&de(Re)},onMousedown:function(Re){F(Re),he&&he(Re)},onInput:function(Re){N(Re),xe&&xe(Re)},onCompositionstart:function(Re){G(Re),me&&me(Re)},onCompositionend:function(Re){q(Re),Pe&&Pe(Re)},onPaste:U,onFocus:function(){clearTimeout(r),De&&De(arguments.length<=0?void 0:arguments[0]),V&&V(arguments.length<=0?void 0:arguments[0]),i==null||i.focus(arguments.length<=0?void 0:arguments[0])},onBlur:function(){for(var Re=arguments.length,Le=new Array(Re),Te=0;Te<Re;Te++)Le[Te]=arguments[Te];r=setTimeout(function(){ge&&ge(Le[0]),Z&&Z(Le[0]),i==null||i.blur(Le[0])},100)}}),ve.type==="textarea"?{}:{type:"search"}),!0,!0),ve}}});const S3=YU;var JU=`accept acceptcharset accesskey action allowfullscreen allowtransparency
alt async autocomplete autofocus autoplay capture cellpadding cellspacing challenge
charset checked classid classname colspan cols content contenteditable contextmenu
controls coords crossorigin data datetime default defer dir disabled download draggable
enctype form formaction formenctype formmethod formnovalidate formtarget frameborder
headers height hidden high href hreflang htmlfor for httpequiv icon id inputmode integrity
is keyparams keytype kind label lang list loop low manifest marginheight marginwidth max maxlength media
mediagroup method min minlength multiple muted name novalidate nonce open
optimum pattern placeholder poster preload radiogroup readonly rel required
reversed role rowspan rows sandbox scope scoped scrolling seamless selected
shape size sizes span spellcheck src srcdoc srclang srcset start step style
summary tabindex target title type usemap value width wmode wrap`,QU=`onCopy onCut onPaste onCompositionend onCompositionstart onCompositionupdate onKeydown
    onKeypress onKeyup onFocus onBlur onChange onInput onSubmit onClick onContextmenu onDoubleclick onDblclick
    onDrag onDragend onDragenter onDragexit onDragleave onDragover onDragstart onDrop onMousedown
    onMouseenter onMouseleave onMousemove onMouseout onMouseover onMouseup onSelect onTouchcancel
    onTouchend onTouchmove onTouchstart onTouchstartPassive onTouchmovePassive onScroll onWheel onAbort onCanplay onCanplaythrough
    onDurationchange onEmptied onEncrypted onEnded onError onLoadeddata onLoadedmetadata
    onLoadstart onPause onPlay onPlaying onProgress onRatechange onSeeked onSeeking onStalled onSuspend onTimeupdate onVolumechange onWaiting onLoad onError`,xI="".concat(JU," ").concat(QU).split(/[\s\n]+/),e9="aria-",t9="data-";function bI(t,e){return t.indexOf(e)===0}function lc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;e===!1?r={aria:!0,data:!0,attr:!0}:e===!0?r={aria:!0}:r=H({},e);var i={};return Object.keys(t).forEach(function(u){(r.aria&&(u==="role"||bI(u,e9))||r.data&&bI(u,t9)||r.attr&&(xI.includes(u)||xI.includes(u.toLowerCase())))&&(i[u]=t[u])}),i}var T3=Symbol("OverflowContextProviderKey"),ob=jt({compatConfig:{MODE:3},name:"OverflowContextProvider",inheritAttrs:!1,props:{value:{type:Object}},setup:function(e,r){var i=r.slots;return sr(T3,ue(function(){return e.value})),function(){var u;return(u=i.default)===null||u===void 0?void 0:u.call(i)}}}),n9=function(){return Kn(T3,ue(function(){return null}))},r9=["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","display","order","component"],sd=void 0;const rg=jt({compatConfig:{MODE:3},name:"Item",props:{prefixCls:String,item:et.any,renderItem:Function,responsive:Boolean,itemKey:{type:[String,Number]},registerSize:Function,display:Boolean,order:Number,component:et.any,invalidate:Boolean},setup:function(e,r){var i=r.slots,u=r.expose,d=ue(function(){return e.responsive&&!e.display}),m=qe();u({itemNodeRef:m});function o(_){e.registerSize(e.itemKey,_)}return is(function(){o(null)}),function(){var _,C=e.prefixCls,T=e.invalidate,S=e.item,P=e.renderItem,A=e.responsive;e.registerSize,e.itemKey,e.display;var O=e.order,R=e.component,z=R===void 0?"div":R,F=Cr(e,r9),N=(_=i.default)===null||_===void 0?void 0:_.call(i),U=P&&S!==sd?P(S):N,G;T||(G={opacity:d.value?0:1,height:d.value?0:sd,overflowY:d.value?"hidden":sd,order:A?O:sd,pointerEvents:d.value?"none":sd,position:d.value?"absolute":sd});var q={};return d.value&&(q["aria-hidden"]=!0),j(Yd,{disabled:!A,onResize:function(Z){var Q=Z.offsetWidth;o(Q)}},{default:function(){return j(z,H(H(H({class:qt(!T&&C),style:G},q),F),{},{ref:m}),{default:function(){return[U]}})}})}}});var i9=["component"],o9=["className"],a9=["class"];const s9=jt({compatConfig:{MODE:3},name:"RawItem",inheritAttrs:!1,props:{component:et.any,title:et.any,id:String,onMouseenter:{type:Function},onMouseleave:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onFocus:{type:Function}},setup:function(e,r){var i=r.slots,u=r.attrs,d=n9();return function(){if(!d.value){var m,o=e.component,_=o===void 0?"div":o,C=Cr(e,i9);return j(_,H(H({},C),u),{default:function(){return[(m=i.default)===null||m===void 0?void 0:m.call(i)]}})}var T=d.value,S=T.className,P=Cr(T,o9),A=u.class,O=Cr(u,a9);return j(ob,{value:null},{default:function(){return[j(rg,H(H(H({class:qt(S,A)},P),O),e),i)]}})}}});var l9=["class","style"],E3="responsive",I3="invalidate";function u9(t){return"+ ".concat(t.length," ...")}var c9=function(){return{id:String,prefixCls:String,data:Array,itemKey:[String,Number,Function],itemWidth:{type:Number,default:10},renderItem:Function,renderRawItem:Function,maxCount:[Number,String],renderRest:Function,renderRawRest:Function,suffix:et.any,component:String,itemComponent:et.any,onVisibleChange:Function,ssr:String,onMousedown:Function}},vy=jt({name:"Overflow",inheritAttrs:!1,props:c9(),emits:["visibleChange"],setup:function(e,r){var i=r.attrs,u=r.emit,d=r.slots,m=ue(function(){return e.ssr==="full"}),o=qe(null),_=ue(function(){return o.value||0}),C=qe(new Map),T=qe(0),S=qe(0),P=qe(0),A=qe(null),O=qe(null),R=ue(function(){return O.value===null&&m.value?Number.MAX_SAFE_INTEGER:O.value||0}),z=qe(!1),F=ue(function(){return"".concat(e.prefixCls,"-item")}),N=ue(function(){return Math.max(T.value,S.value)}),U=ue(function(){return!!(e.data.length&&e.maxCount===E3)}),G=ue(function(){return e.maxCount===I3}),q=ue(function(){return U.value||typeof e.maxCount=="number"&&e.data.length>e.maxCount}),V=ue(function(){var ge=e.data;return U.value?o.value===null&&m.value?ge=e.data:ge=e.data.slice(0,Math.min(e.data.length,_.value/e.itemWidth)):typeof e.maxCount=="number"&&(ge=e.data.slice(0,e.maxCount)),ge}),Z=ue(function(){return U.value?e.data.slice(R.value+1):e.data.slice(V.value.length)}),Q=function(he,me){var Pe;return typeof e.itemKey=="function"?e.itemKey(he):(Pe=e.itemKey&&(he==null?void 0:he[e.itemKey]))!==null&&Pe!==void 0?Pe:me},te=ue(function(){return e.renderItem||function(ge){return ge}}),ie=function(he,me){O.value=he,me||(z.value=he<e.data.length-1,u("visibleChange",he))},ve=function(he,me){o.value=me.clientWidth},ce=function(he,me){var Pe=new Map(C.value);me===null?Pe.delete(he):Pe.set(he,me),C.value=Pe},de=function(he,me){T.value=S.value,S.value=me},xe=function(he,me){P.value=me},De=function(he){return C.value.get(Q(V.value[he],he))};return an([_,C,S,P,function(){return e.itemKey},V],function(){if(_.value&&N.value&&V.value){var ge=P.value,he=V.value.length,me=he-1;if(!he){ie(0),A.value=null;return}for(var Pe=0;Pe<he;Pe+=1){var He=De(Pe);if(He===void 0){ie(Pe-1,!0);break}if(ge+=He,me===0&&ge<=_.value||Pe===me-1&&ge+De(me)<=_.value){ie(me),A.value=null;break}else if(ge+N.value>_.value){ie(Pe-1),A.value=ge-He-P.value+S.value;break}}e.suffix&&De(0)+P.value>_.value&&(A.value=null)}}),function(){var ge=z.value&&!!Z.value.length,he=e.itemComponent,me=e.renderRawItem,Pe=e.renderRawRest,He=e.renderRest,Ke=e.prefixCls,Re=Ke===void 0?"rc-overflow":Ke,Le=e.suffix,Te=e.component,oe=Te===void 0?"div":Te,ze=e.id,Fe=e.onMousedown,lt=i.class,vt=i.style,kt=Cr(i,l9),It={};A.value!==null&&U.value&&(It={position:"absolute",left:"".concat(A.value,"px"),top:0});var se={prefixCls:F.value,responsive:U.value,component:he,invalidate:G.value},ae=me?function(At,_t){var nt=Q(At,_t);return j(ob,{key:nt,value:H(H({},se),{},{order:_t,item:At,itemKey:nt,registerSize:ce,display:_t<=R.value})},{default:function(){return[me(At,_t)]}})}:function(At,_t){var nt=Q(At,_t);return j(rg,H(H({},se),{},{order:_t,key:nt,item:At,renderItem:te.value,itemKey:nt,registerSize:ce,display:_t<=R.value}),null)},Be=function(){return null},st={order:ge?R.value:Number.MAX_SAFE_INTEGER,className:"".concat(F.value," ").concat(F.value,"-rest"),registerSize:de,display:ge};if(Pe)Pe&&(Be=function(){return j(ob,{value:H(H({},se),st)},{default:function(){return[Pe(Z.value)]}})});else{var ut=He||u9;Be=function(){return j(rg,H(H({},se),st),{default:function(){return typeof ut=="function"?ut(Z.value):ut}})}}var bt=function(){var _t;return j(oe,H({id:ze,class:qt(!G.value&&Re,lt),style:vt,onMousedown:Fe},kt),{default:function(){return[V.value.map(ae),q.value?Be():null,Le&&j(rg,H(H({},se),{},{order:R.value,class:"".concat(F.value,"-suffix"),registerSize:xe,display:!0,style:It}),{default:function(){return Le}}),(_t=d.default)===null||_t===void 0?void 0:_t.call(d)]}})};return j(Yd,{disabled:!U.value,onResize:ve},{default:bt})}}});vy.Item=s9;vy.RESPONSIVE=E3;vy.INVALIDATE=I3;const Pd=vy;var d9=Symbol("TreeSelectLegacyContextPropsKey");function _w(){return Kn(d9,{})}var f9={id:String,prefixCls:String,values:et.array,open:{type:Boolean,default:void 0},searchValue:String,inputRef:et.any,placeholder:et.any,disabled:{type:Boolean,default:void 0},mode:String,showSearch:{type:Boolean,default:void 0},autofocus:{type:Boolean,default:void 0},autocomplete:String,activeDescendantId:String,tabindex:et.oneOfType([et.number,et.string]),removeIcon:et.any,choiceTransitionName:String,maxTagCount:et.oneOfType([et.number,et.string]),maxTagTextLength:Number,maxTagPlaceholder:et.any.def(function(){return function(t){return"+ ".concat(t.length," ...")}}),tagRender:Function,onToggleOpen:{type:Function},onRemove:Function,onInputChange:Function,onInputPaste:Function,onInputKeyDown:Function,onInputMouseDown:Function,onInputCompositionStart:Function,onInputCompositionEnd:Function},wI=function(e){e.preventDefault(),e.stopPropagation()},h9=jt({name:"MultipleSelectSelector",inheritAttrs:!1,props:f9,setup:function(e){var r=qe(),i=qe(0),u=qe(!1),d=_w(),m=ue(function(){return"".concat(e.prefixCls,"-selection")}),o=ue(function(){return e.open||e.mode==="tags"?e.searchValue:""}),_=ue(function(){return e.mode==="tags"||e.showSearch&&(e.open||u.value)});wr(function(){an(o,function(){i.value=r.value.scrollWidth},{flush:"post",immediate:!0})});function C(A,O,R,z,F){return j("span",{class:qt("".concat(m.value,"-item"),Ie({},"".concat(m.value,"-item-disabled"),R)),title:typeof A=="string"||typeof A=="number"?A.toString():void 0},[j("span",{class:"".concat(m.value,"-item-content")},[O]),z&&j(Dg,{class:"".concat(m.value,"-item-remove"),onMousedown:wI,onClick:F,customizeIcon:e.removeIcon},{default:function(){return[Zi("\xD7")]}})])}function T(A,O,R,z,F,N){var U=function(Z){wI(Z),e.onToggleOpen(!open)},G=N;if(d.keyEntities){var q;G=((q=d.keyEntities[A])===null||q===void 0?void 0:q.node)||{}}return j("span",{key:A,onMousedown:U},[e.tagRender({label:O,value:A,disabled:R,closable:z,onClose:F,option:G})])}function S(A){var O=A.disabled,R=A.label,z=A.value,F=A.option,N=!e.disabled&&!O,U=R;if(typeof e.maxTagTextLength=="number"&&(typeof R=="string"||typeof R=="number")){var G=String(U);G.length>e.maxTagTextLength&&(U="".concat(G.slice(0,e.maxTagTextLength),"..."))}var q=function(Z){var Q;Z&&Z.stopPropagation(),(Q=e.onRemove)===null||Q===void 0||Q.call(e,A)};return typeof e.tagRender=="function"?T(z,U,O,N,q,F):C(R,U,O,N,q)}function P(A){var O=e.maxTagPlaceholder,R=O===void 0?function(F){return"+ ".concat(F.length," ...")}:O,z=typeof R=="function"?R(A):R;return C(z,z,!1)}return function(){var A=e.id,O=e.prefixCls,R=e.values,z=e.open,F=e.inputRef,N=e.placeholder,U=e.disabled,G=e.autofocus,q=e.autocomplete,V=e.activeDescendantId,Z=e.tabindex,Q=e.onInputChange,te=e.onInputPaste,ie=e.onInputKeyDown,ve=e.onInputMouseDown,ce=e.onInputCompositionStart,de=e.onInputCompositionEnd,xe=j("div",{class:"".concat(m.value,"-search"),style:{width:i.value+"px"},key:"input"},[j(S3,{inputRef:F,open:z,prefixCls:O,id:A,inputElement:null,disabled:U,autofocus:G,autocomplete:q,editable:_.value,activeDescendantId:V,value:o.value,onKeydown:ie,onMousedown:ve,onChange:Q,onPaste:te,onCompositionstart:ce,onCompositionend:de,tabindex:Z,attrs:lc(e,!0),onFocus:function(){return u.value=!0},onBlur:function(){return u.value=!1}},null),j("span",{ref:r,class:"".concat(m.value,"-search-mirror"),"aria-hidden":!0},[o.value,Zi("\xA0")])]),De=j(Pd,{prefixCls:"".concat(m.value,"-overflow"),data:R,renderItem:S,renderRest:P,suffix:xe,itemKey:"key",maxCount:e.maxTagCount,key:"overflow"},null);return j(Hn,null,[De,!R.length&&!o.value&&j("span",{class:"".concat(m.value,"-placeholder")},[N])])}}});const p9=h9;var m9={inputElement:et.any,id:String,prefixCls:String,values:et.array,open:{type:Boolean,default:void 0},searchValue:String,inputRef:et.any,placeholder:et.any,disabled:{type:Boolean,default:void 0},mode:String,showSearch:{type:Boolean,default:void 0},autofocus:{type:Boolean,default:void 0},autocomplete:String,activeDescendantId:String,tabindex:et.oneOfType([et.number,et.string]),activeValue:String,backfill:{type:Boolean,default:void 0},optionLabelRender:Function,onInputChange:Function,onInputPaste:Function,onInputKeyDown:Function,onInputMouseDown:Function,onInputCompositionStart:Function,onInputCompositionEnd:Function},xw=jt({name:"SingleSelector",setup:function(e){var r=qe(!1),i=ue(function(){return e.mode==="combobox"}),u=ue(function(){return i.value||e.showSearch}),d=ue(function(){var T=e.searchValue||"";return i.value&&e.activeValue&&!r.value&&(T=e.activeValue),T}),m=_w();an([i,function(){return e.activeValue}],function(){i.value&&(r.value=!1)},{immediate:!0});var o=ue(function(){return e.mode!=="combobox"&&!e.open&&!e.showSearch?!1:!!d.value}),_=ue(function(){var T=e.values[0];return T&&(typeof T.label=="string"||typeof T.label=="number")?T.label.toString():void 0}),C=function(){if(e.values[0])return null;var S=o.value?{visibility:"hidden"}:void 0;return j("span",{class:"".concat(e.prefixCls,"-selection-placeholder"),style:S},[e.placeholder])};return function(){var T,S=e.inputElement,P=e.prefixCls,A=e.id,O=e.values,R=e.inputRef,z=e.disabled,F=e.autofocus,N=e.autocomplete,U=e.activeDescendantId,G=e.open,q=e.tabindex,V=e.optionLabelRender,Z=e.onInputKeyDown,Q=e.onInputMouseDown,te=e.onInputChange,ie=e.onInputPaste,ve=e.onInputCompositionStart,ce=e.onInputCompositionEnd,de=O[0],xe=null;if(de&&m.customSlots){var De,ge,he,me=(De=de.key)!==null&&De!==void 0?De:de.value,Pe=((ge=m.keyEntities[me])===null||ge===void 0?void 0:ge.node)||{};xe=m.customSlots[(he=Pe.slots)===null||he===void 0?void 0:he.title]||m.customSlots.title||de.label,typeof xe=="function"&&(xe=xe(Pe))}else xe=V&&de?V(de.option):de==null?void 0:de.label;return j(Hn,null,[j("span",{class:"".concat(P,"-selection-search")},[j(S3,{inputRef:R,prefixCls:P,id:A,open:G,inputElement:S,disabled:z,autofocus:F,autocomplete:N,editable:u.value,activeDescendantId:U,value:d.value,onKeydown:Z,onMousedown:Q,onChange:function(Ke){r.value=!0,te(Ke)},onPaste:ie,onCompositionstart:ve,onCompositionend:ce,tabindex:q,attrs:lc(e,!0)},null)]),!i.value&&de&&!o.value&&j("span",{class:"".concat(P,"-selection-item"),title:_.value},[j(Hn,{key:(T=de.key)!==null&&T!==void 0?T:de.value},[xe])]),C()])}}});xw.props=m9;xw.inheritAttrs=!1;const v9=xw;function g9(t){return![Fn.ESC,Fn.SHIFT,Fn.BACKSPACE,Fn.TAB,Fn.WIN_KEY,Fn.ALT,Fn.META,Fn.WIN_KEY_RIGHT,Fn.CTRL,Fn.SEMICOLON,Fn.EQUALS,Fn.CAPS_LOCK,Fn.CONTEXT_MENU,Fn.F1,Fn.F2,Fn.F3,Fn.F4,Fn.F5,Fn.F6,Fn.F7,Fn.F8,Fn.F9,Fn.F10,Fn.F11,Fn.F12].includes(t)}function P3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=null,r;Er(function(){clearTimeout(r)});function i(u){(u||e===null)&&(e=u),clearTimeout(r),r=setTimeout(function(){e=null},t)}return[function(){return e},i]}function Sp(){var t=function e(r){e.current=r};return t}var y9=jt({name:"Selector",inheritAttrs:!1,props:{id:String,prefixCls:String,showSearch:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},values:et.array,multiple:{type:Boolean,default:void 0},mode:String,searchValue:String,activeValue:String,inputElement:et.any,autofocus:{type:Boolean,default:void 0},activeDescendantId:String,tabindex:et.oneOfType([et.number,et.string]),disabled:{type:Boolean,default:void 0},placeholder:et.any,removeIcon:et.any,maxTagCount:et.oneOfType([et.number,et.string]),maxTagTextLength:Number,maxTagPlaceholder:et.any,tagRender:Function,optionLabelRender:Function,tokenWithEnter:{type:Boolean,default:void 0},choiceTransitionName:String,onToggleOpen:{type:Function},onSearch:Function,onSearchSubmit:Function,onRemove:Function,onInputKeyDown:{type:Function},domRef:Function},setup:function(e,r){var i=r.expose,u=Sp(),d=!1,m=P3(0),o=zn(m,2),_=o[0],C=o[1],T=function(q){var V=q.which;(V===Fn.UP||V===Fn.DOWN)&&q.preventDefault(),e.onInputKeyDown&&e.onInputKeyDown(q),V===Fn.ENTER&&e.mode==="tags"&&!d&&!e.open&&e.onSearchSubmit(q.target.value),g9(V)&&e.onToggleOpen(!0)},S=function(){C(!0)},P=null,A=function(q){e.onSearch(q,!0,d)!==!1&&e.onToggleOpen(!0)},O=function(){d=!0},R=function(q){d=!1,e.mode!=="combobox"&&A(q.target.value)},z=function(q){var V=q.target.value;if(e.tokenWithEnter&&P&&/[\r\n]/.test(P)){var Z=P.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");V=V.replace(Z,P)}P=null,A(V)},F=function(q){var V=q.clipboardData,Z=V.getData("text");P=Z},N=function(q){var V=q.target;if(V!==u.current){var Z=document.body.style.msTouchAction!==void 0;Z?setTimeout(function(){u.current.focus()}):u.current.focus()}},U=function(q){var V=_();q.target!==u.current&&!V&&q.preventDefault(),(e.mode!=="combobox"&&(!e.showSearch||!V)||!e.open)&&(e.open&&e.onSearch("",!0,!1),e.onToggleOpen())};return i({focus:function(){u.current.focus()},blur:function(){u.current.blur()}}),function(){var G=e.prefixCls,q=e.domRef,V=e.mode,Z={inputRef:u,onInputKeyDown:T,onInputMouseDown:S,onInputChange:z,onInputPaste:F,onInputCompositionStart:O,onInputCompositionEnd:R},Q=V==="multiple"||V==="tags"?j(p9,H(H({},e),Z),null):j(v9,H(H({},e),Z),null);return j("div",{ref:q,class:"".concat(G,"-selector"),onClick:N,onMousedown:U},[Q])}}});const _9=y9;function x9(t,e,r){function i(u){var d,m,o,_=u.target;_.shadowRoot&&u.composed&&(_=u.composedPath()[0]||_);var C=[(d=t[0])===null||d===void 0?void 0:d.value,(m=t[1])===null||m===void 0||(o=m.value)===null||o===void 0?void 0:o.getPopupElement()];e.value&&C.every(function(T){return T&&!T.contains(_)&&T!==_})&&r(!1)}wr(function(){window.addEventListener("mousedown",i)}),Er(function(){window.removeEventListener("mousedown",i)})}function b9(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=qe(!1),r,i=function(){clearTimeout(r)};wr(function(){i()});var u=function(m,o){i(),r=setTimeout(function(){e.value=m,o&&o()},t)};return[e,u,i]}var A3=Symbol("BaseSelectContextKey");function w9(t){return sr(A3,t)}function C9(){return Kn(A3,{})}const M3=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4)))};function k3(t){if(!di(t))return Or(t);var e=new Proxy({},{get:function(i,u,d){return Reflect.get(t.value,u,d)},set:function(i,u,d){return t.value[u]=d,!0},deleteProperty:function(i,u){return Reflect.deleteProperty(t.value,u)},has:function(i,u){return Reflect.has(t.value,u)},ownKeys:function(){return Object.keys(t.value)},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0}}});return Or(e)}var S9=["prefixCls","id","open","defaultOpen","mode","showSearch","searchValue","onSearch","allowClear","clearIcon","showArrow","inputIcon","disabled","loading","getInputElement","getPopupContainer","placement","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","showAction","direction","tokenSeparators","tagRender","optionLabelRender","onPopupScroll","onDropdownVisibleChange","onFocus","onBlur","onKeyup","onKeydown","onMousedown","onClear","omitDomProps","getRawInputElement","displayValues","onDisplayValuesChange","emptyOptions","activeDescendantId","activeValue","OptionList"],T9=["value","onChange","removeIcon","placeholder","autofocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabindex","OptionList","notFoundContent"],E9=function(){return{prefixCls:String,id:String,omitDomProps:Array,displayValues:Array,onDisplayValuesChange:Function,activeValue:String,activeDescendantId:String,onActiveValueChange:Function,searchValue:String,onSearch:Function,onSearchSplit:Function,maxLength:Number,OptionList:et.any,emptyOptions:Boolean}},O3=function(){return{showSearch:{type:Boolean,default:void 0},tagRender:{type:Function},optionLabelRender:{type:Function},direction:{type:String},tabindex:Number,autofocus:Boolean,notFoundContent:et.any,placeholder:et.any,onClear:Function,choiceTransitionName:String,mode:String,disabled:{type:Boolean,default:void 0},loading:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:void 0},onDropdownVisibleChange:{type:Function},getInputElement:{type:Function},getRawInputElement:{type:Function},maxTagTextLength:Number,maxTagCount:{type:[String,Number]},maxTagPlaceholder:et.any,tokenSeparators:{type:Array},allowClear:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:void 0},inputIcon:et.any,clearIcon:et.any,removeIcon:et.any,animation:String,transitionName:String,dropdownStyle:{type:Object},dropdownClassName:String,dropdownMatchSelectWidth:{type:[Boolean,Number],default:void 0},dropdownRender:{type:Function},dropdownAlign:Object,placement:{type:String},getPopupContainer:{type:Function},showAction:{type:Array},onBlur:{type:Function},onFocus:{type:Function},onKeyup:Function,onKeydown:Function,onMousedown:Function,onPopupScroll:Function,onInputKeyDown:Function,onMouseenter:Function,onMouseleave:Function,onClick:Function}},I9=function(){return H(H({},E9()),O3())};function D3(t){return t==="tags"||t==="multiple"}const P9=jt({compatConfig:{MODE:3},name:"BaseSelect",inheritAttrs:!1,props:Di(I9(),{showAction:[],notFoundContent:"Not Found"}),setup:function(e,r){var i=r.attrs,u=r.expose,d=r.slots,m=ue(function(){return D3(e.mode)}),o=ue(function(){return e.showSearch!==void 0?e.showSearch:m.value||e.mode==="combobox"}),_=qe(!1);wr(function(){_.value=M3()});var C=_w(),T=qe(null),S=Sp(),P=qe(null),A=qe(null),O=qe(null),R=b9(),z=zn(R,3),F=z[0],N=z[1],U=z[2],G=function(){var ae;(ae=A.value)===null||ae===void 0||ae.focus()},q=function(){var ae;(ae=A.value)===null||ae===void 0||ae.blur()};u({focus:G,blur:q,scrollTo:function(ae){var Be;return(Be=O.value)===null||Be===void 0?void 0:Be.scrollTo(ae)}});var V=ue(function(){var se;if(e.mode!=="combobox")return e.searchValue;var ae=(se=e.displayValues[0])===null||se===void 0?void 0:se.value;return typeof ae=="string"||typeof ae=="number"?String(ae):""}),Z=e.open!==void 0?e.open:e.defaultOpen,Q=qe(Z),te=qe(Z),ie=function(ae){Q.value=e.open!==void 0?e.open:ae,te.value=Q.value};an(function(){return e.open},function(){ie(e.open)});var ve=ue(function(){return!e.notFoundContent&&e.emptyOptions});vr(function(){te.value=Q.value,(e.disabled||ve.value&&te.value&&e.mode==="combobox")&&(te.value=!1)});var ce=ue(function(){return ve.value?!1:te.value}),de=function(ae){var Be=ae!==void 0?ae:!te.value;Q.value!==Be&&!e.disabled&&(ie(Be),e.onDropdownVisibleChange&&e.onDropdownVisibleChange(Be))},xe=ue(function(){return(e.tokenSeparators||[]).some(function(se){return[`
`,`\r
`].includes(se)})}),De=function(ae,Be,st){var ut,bt=!0,At=ae;(ut=e.onActiveValueChange)===null||ut===void 0||ut.call(e,null);var _t=st?null:dj(ae,e.tokenSeparators);if(e.mode!=="combobox"&&_t){var nt;At="",(nt=e.onSearchSplit)===null||nt===void 0||nt.call(e,_t),de(!1),bt=!1}return e.onSearch&&V.value!==At&&e.onSearch(At,{source:Be?"typing":"effect"}),bt},ge=function(ae){var Be;!ae||!ae.trim()||(Be=e.onSearch)===null||Be===void 0||Be.call(e,ae,{source:"submit"})};an(te,function(){!te.value&&!m.value&&e.mode!=="combobox"&&De("",!1,!1)},{immediate:!0,flush:"post"}),an(function(){return e.disabled},function(){Q.value&&!!e.disabled&&ie(!1)},{immediate:!0});var he=P3(),me=zn(he,2),Pe=me[0],He=me[1],Ke=function(ae){var Be,st=Pe(),ut=ae.which;if(ut===Fn.ENTER&&(e.mode!=="combobox"&&ae.preventDefault(),te.value||de(!0)),He(!!V.value),ut===Fn.BACKSPACE&&!st&&m.value&&!V.value&&e.displayValues.length){for(var bt=bn(e.displayValues),At=null,_t=bt.length-1;_t>=0;_t-=1){var nt=bt[_t];if(!nt.disabled){bt.splice(_t,1),At=nt;break}}At&&e.onDisplayValuesChange(bt,{type:"remove",values:[At]})}for(var tt=arguments.length,pt=new Array(tt>1?tt-1:0),dt=1;dt<tt;dt++)pt[dt-1]=arguments[dt];if(te.value&&O.value){var Ot;(Ot=O.value).onKeydown.apply(Ot,[ae].concat(pt))}(Be=e.onKeydown)===null||Be===void 0||Be.call.apply(Be,[e,ae].concat(pt))},Re=function(ae){for(var Be=arguments.length,st=new Array(Be>1?Be-1:0),ut=1;ut<Be;ut++)st[ut-1]=arguments[ut];if(te.value&&O.value){var bt;(bt=O.value).onKeyup.apply(bt,[ae].concat(st))}e.onKeyup&&e.onKeyup.apply(e,[ae].concat(st))},Le=function(ae){var Be=e.displayValues.filter(function(st){return st!==ae});e.onDisplayValuesChange(Be,{type:"remove",values:[ae]})},Te=qe(!1),oe=function(){N(!0),e.disabled||(e.onFocus&&!Te.value&&e.onFocus.apply(e,arguments),e.showAction&&e.showAction.includes("focus")&&de(!0)),Te.value=!0},ze=function(){if(N(!1,function(){Te.value=!1,de(!1)}),!e.disabled){var ae=V.value;ae&&(e.mode==="tags"?e.onSearch(ae,{source:"submit"}):e.mode==="multiple"&&e.onSearch("",{source:"blur"})),e.onBlur&&e.onBlur.apply(e,arguments)}};sr("VCSelectContainerEvent",{focus:oe,blur:ze});var Fe=[];wr(function(){Fe.forEach(function(se){return clearTimeout(se)}),Fe.splice(0,Fe.length)}),Er(function(){Fe.forEach(function(se){return clearTimeout(se)}),Fe.splice(0,Fe.length)});var lt=function(ae){var Be,st,ut=ae.target,bt=(Be=P.value)===null||Be===void 0?void 0:Be.getPopupElement();if(bt&&bt.contains(ut)){var At=setTimeout(function(){var pt=Fe.indexOf(At);if(pt!==-1&&Fe.splice(pt,1),U(),!_.value&&!bt.contains(document.activeElement)){var dt;(dt=A.value)===null||dt===void 0||dt.focus()}});Fe.push(At)}for(var _t=arguments.length,nt=new Array(_t>1?_t-1:0),tt=1;tt<_t;tt++)nt[tt-1]=arguments[tt];(st=e.onMousedown)===null||st===void 0||st.call.apply(st,[e,ae].concat(nt))},vt=qe(null),kt=Ji(),It=function(){kt.update()};return wr(function(){an(ce,function(){if(ce.value){var se,ae=Math.ceil((se=T.value)===null||se===void 0?void 0:se.offsetWidth);vt.value!==ae&&!Number.isNaN(ae)&&(vt.value=ae)}},{immediate:!0,flush:"post"})}),x9([T,P],ce,de),w9(k3(H(H({},Wu(e)),{},{open:te,triggerOpen:ce,showSearch:o,multiple:m,toggleOpen:de}))),function(){var se,ae=H(H({},e),i),Be=ae.prefixCls,st=ae.id;ae.open,ae.defaultOpen;var ut=ae.mode;ae.showSearch,ae.searchValue,ae.onSearch;var bt=ae.allowClear,At=ae.clearIcon,_t=ae.showArrow,nt=ae.inputIcon,tt=ae.disabled,pt=ae.loading,dt=ae.getInputElement,Ot=ae.getPopupContainer,Kt=ae.placement,cn=ae.animation,Cn=ae.transitionName,Rt=ae.dropdownStyle,ht=ae.dropdownClassName,Ht=ae.dropdownMatchSelectWidth,wn=ae.dropdownRender,zt=ae.dropdownAlign;ae.showAction;var mt=ae.direction;ae.tokenSeparators;var St=ae.tagRender,yt=ae.optionLabelRender;ae.onPopupScroll,ae.onDropdownVisibleChange,ae.onFocus,ae.onBlur,ae.onKeyup,ae.onKeydown,ae.onMousedown;var Wt=ae.onClear,tn=ae.omitDomProps,on=ae.getRawInputElement,Tt=ae.displayValues,Et=ae.onDisplayValuesChange,sn=ae.emptyOptions,xn=ae.activeDescendantId,An=ae.activeValue,Mn=ae.OptionList,ir=Cr(ae,S9),Dn=ut==="combobox"&&dt&&dt()||null,lr=typeof on=="function"&&on(),Ce=H({},ir),Y;lr&&(Y=function(Qt){de(Qt)}),T9.forEach(function(Pt){delete Ce[Pt]}),tn==null||tn.forEach(function(Pt){delete Ce[Pt]});var ne=_t!==void 0?_t:pt||!m.value&&ut!=="combobox",be;ne&&(be=j(Dg,{class:qt("".concat(Be,"-arrow"),Ie({},"".concat(Be,"-arrow-loading"),pt)),customizeIcon:nt,customizeIconProps:{loading:pt,searchValue:V.value,open:te.value,focused:F.value,showSearch:o.value}},null));var Oe,Ve=function(){Wt==null||Wt(),Et([],{type:"clear",values:Tt}),De("",!1,!1)};!tt&&bt&&(Tt.length||V.value)&&(Oe=j(Dg,{class:"".concat(Be,"-clear"),onMousedown:Ve,customizeIcon:At},{default:function(){return[Zi("\xD7")]}}));var it=j(Mn,{ref:O},H(H({},C.customSlots),{},{option:d.option})),rt=qt(Be,i.class,(se={},Ie(se,"".concat(Be,"-focused"),F.value),Ie(se,"".concat(Be,"-multiple"),m.value),Ie(se,"".concat(Be,"-single"),!m.value),Ie(se,"".concat(Be,"-allow-clear"),bt),Ie(se,"".concat(Be,"-show-arrow"),ne),Ie(se,"".concat(Be,"-disabled"),tt),Ie(se,"".concat(Be,"-loading"),pt),Ie(se,"".concat(Be,"-open"),te.value),Ie(se,"".concat(Be,"-customize-input"),Dn),Ie(se,"".concat(Be,"-show-search"),o.value),se)),Xe=j(HU,{ref:P,disabled:tt,prefixCls:Be,visible:ce.value,popupElement:it,containerWidth:vt.value,animation:cn,transitionName:Cn,dropdownStyle:Rt,dropdownClassName:ht,direction:mt,dropdownMatchSelectWidth:Ht,dropdownRender:wn,dropdownAlign:zt,placement:Kt,getPopupContainer:Ot,empty:sn,getTriggerDOMNode:function(){return S.current},onPopupVisibleChange:Y,onPopupMouseEnter:It},{default:function(){return lr?Co(lr)&&ui(lr,{ref:S},!1,!0):j(_9,H(H({},e),{},{domRef:S,prefixCls:Be,inputElement:Dn,ref:A,id:st,showSearch:o.value,mode:ut,activeDescendantId:xn,tagRender:St,optionLabelRender:yt,values:Tt,open:te.value,onToggleOpen:de,activeValue:An,searchValue:V.value,onSearch:De,onSearchSubmit:ge,onRemove:Le,tokenWithEnter:xe.value}),null)}}),ot;return lr?ot=Xe:ot=j("div",H(H({},Ce),{},{class:rt,ref:T,onMousedown:lt,onKeydown:Ke,onKeyup:Re}),[F.value&&!te.value&&j("span",{style:{width:0,height:0,display:"flex",overflow:"hidden",opacity:0},"aria-live":"polite"},["".concat(Tt.map(function(Pt){var Qt=Pt.label,Bt=Pt.value;return["number","string"].includes(On(Qt))?Qt:Bt}).join(", "))]),Xe,be,Oe]),ot}}});var gy=function(e,r){var i,u=e.height,d=e.offset,m=e.prefixCls,o=e.onInnerResize,_=r.slots,C={},T={display:"flex",flexDirection:"column"};return d!==void 0&&(C={height:"".concat(u,"px"),position:"relative",overflow:"hidden"},T=H(H({},T),{},{transform:"translateY(".concat(d,"px)"),position:"absolute",left:0,right:0,top:0})),j("div",{style:C},[j(Yd,{onResize:function(P){var A=P.offsetHeight;A&&o&&o()}},{default:function(){return[j("div",{style:T,class:qt(Ie({},"".concat(m,"-holder-inner"),m))},[(i=_.default)===null||i===void 0?void 0:i.call(_)])]}})])};gy.displayName="Filter";gy.inheritAttrs=!1;gy.props={prefixCls:String,height:Number,offset:Number,onInnerResize:Function};const A9=gy;var R3=function(e,r){var i,u=e.setRef,d=r.slots,m=fo((i=d.default)===null||i===void 0?void 0:i.call(d));return m&&m.length?wo(m[0],{ref:u}):m};R3.props={setRef:{type:Function,default:function(){}}};const M9=R3;var k9=20;function CI(t){return"touches"in t?t.touches[0].pageY:t.pageY}const O9=jt({compatConfig:{MODE:3},name:"ScrollBar",inheritAttrs:!1,props:{prefixCls:String,scrollTop:Number,scrollHeight:Number,height:Number,count:Number,onScroll:{type:Function},onStartMove:{type:Function},onStopMove:{type:Function}},setup:function(){return{moveRaf:null,scrollbarRef:Sp(),thumbRef:Sp(),visibleTimeout:null,state:Or({dragging:!1,pageY:null,startTop:null,visible:!1})}},watch:{scrollTop:{handler:function(){this.delayHidden()},flush:"post"}},mounted:function(){var e,r;(e=this.scrollbarRef.current)===null||e===void 0||e.addEventListener("touchstart",this.onScrollbarTouchStart,ao?{passive:!1}:!1),(r=this.thumbRef.current)===null||r===void 0||r.addEventListener("touchstart",this.onMouseDown,ao?{passive:!1}:!1)},beforeUnmount:function(){this.removeEvents(),clearTimeout(this.visibleTimeout)},methods:{delayHidden:function(){var e=this;clearTimeout(this.visibleTimeout),this.state.visible=!0,this.visibleTimeout=setTimeout(function(){e.state.visible=!1},2e3)},onScrollbarTouchStart:function(e){e.preventDefault()},onContainerMouseDown:function(e){e.stopPropagation(),e.preventDefault()},patchEvents:function(){window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),this.thumbRef.current.addEventListener("touchmove",this.onMouseMove,ao?{passive:!1}:!1),this.thumbRef.current.addEventListener("touchend",this.onMouseUp)},removeEvents:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.scrollbarRef.current.removeEventListener("touchstart",this.onScrollbarTouchStart,ao?{passive:!1}:!1),this.thumbRef.current.removeEventListener("touchstart",this.onMouseDown,ao?{passive:!1}:!1),this.thumbRef.current.removeEventListener("touchmove",this.onMouseMove,ao?{passive:!1}:!1),this.thumbRef.current.removeEventListener("touchend",this.onMouseUp),fr.cancel(this.moveRaf)},onMouseDown:function(e){var r=this.$props.onStartMove;kr(this.state,{dragging:!0,pageY:CI(e),startTop:this.getTop()}),r(),this.patchEvents(),e.stopPropagation(),e.preventDefault()},onMouseMove:function(e){var r=this.state,i=r.dragging,u=r.pageY,d=r.startTop,m=this.$props.onScroll;if(fr.cancel(this.moveRaf),i){var o=CI(e)-u,_=d+o,C=this.getEnableScrollRange(),T=this.getEnableHeightRange(),S=T?_/T:0,P=Math.ceil(S*C);this.moveRaf=fr(function(){m(P)})}},onMouseUp:function(){var e=this.$props.onStopMove;this.state.dragging=!1,e(),this.removeEvents()},getSpinHeight:function(){var e=this.$props,r=e.height,i=e.count,u=r/i*10;return u=Math.max(u,k9),u=Math.min(u,r/2),Math.floor(u)},getEnableScrollRange:function(){var e=this.$props,r=e.scrollHeight,i=e.height;return r-i||0},getEnableHeightRange:function(){var e=this.$props.height,r=this.getSpinHeight();return e-r||0},getTop:function(){var e=this.$props.scrollTop,r=this.getEnableScrollRange(),i=this.getEnableHeightRange();if(e===0||r===0)return 0;var u=e/r;return u*i},showScroll:function(){var e=this.$props,r=e.height,i=e.scrollHeight;return i>r}},render:function(){var e=this.state,r=e.dragging,i=e.visible,u=this.$props.prefixCls,d=this.getSpinHeight()+"px",m=this.getTop()+"px",o=this.showScroll(),_=o&&i;return j("div",{ref:this.scrollbarRef,class:qt("".concat(u,"-scrollbar"),Ie({},"".concat(u,"-scrollbar-show"),o)),style:{width:"8px",top:0,bottom:0,right:0,position:"absolute",display:_?void 0:"none"},onMousedown:this.onContainerMouseDown,onMousemove:this.delayHidden},[j("div",{ref:this.thumbRef,class:qt("".concat(u,"-scrollbar-thumb"),Ie({},"".concat(u,"-scrollbar-thumb-moving"),r)),style:{width:"100%",height:d,top:m,left:0,position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:"99px",cursor:"pointer",userSelect:"none"},onMousedown:this.onMouseDown},null)])}});function D9(t,e,r,i){var u=new Map,d=new Map,m=qe(Symbol("update"));an(t,function(){m.value=Symbol("update")});var o=0;function _(){o+=1;var T=o;Promise.resolve().then(function(){T===o&&u.forEach(function(S,P){if(S&&S.offsetParent){var A=S.offsetHeight;d.get(P)!==A&&(m.value=Symbol("update"),d.set(P,S.offsetHeight))}})})}function C(T,S){var P=e(T),A=u.get(P);S?(u.set(P,S.$el||S),_()):u.delete(P),!A!=!S&&(S?r==null||r(T):i==null||i(T))}return[C,_,d,m]}function R9(t,e,r,i,u,d,m,o){var _;return function(C){if(C==null){o();return}fr.cancel(_);var T=e.value,S=i.itemHeight;if(typeof C=="number")m(C);else if(C&&On(C)==="object"){var P,A=C.align;"index"in C?P=C.index:P=T.findIndex(function(F){return u(F)===C.key});var O=C.offset,R=O===void 0?0:O,z=function F(N,U){if(!(N<0||!t.value)){var G=t.value.clientHeight,q=!1,V=U;if(G){for(var Z=U||A,Q=0,te=0,ie=0,ve=Math.min(T.length,P),ce=0;ce<=ve;ce+=1){var de=u(T[ce]);te=Q;var xe=r.get(de);ie=te+(xe===void 0?S:xe),Q=ie,ce===P&&xe===void 0&&(q=!0)}var De=t.value.scrollTop,ge=null;switch(Z){case"top":ge=te-R;break;case"bottom":ge=ie-G+R;break;default:{var he=De+G;te<De?V="top":ie>he&&(V="bottom")}}ge!==null&&ge!==De&&m(ge)}_=fr(function(){q&&d(),F(N-1,V)})}};z(5)}}}var z9=(typeof navigator>"u"?"undefined":On(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const L9=z9,z3=function(t,e){var r=!1,i=null;function u(){clearTimeout(i),r=!0,i=setTimeout(function(){r=!1},50)}return function(d){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=d<0&&t.value||d>0&&e.value;return m&&o?(clearTimeout(i),r=!1):(!o||r)&&u(),!r&&o}};function F9(t,e,r,i){var u=0,d=null,m=null,o=!1,_=z3(e,r);function C(S){if(!!t.value){fr.cancel(d);var P=S.deltaY;u+=P,m=P,!_(P)&&(L9||S.preventDefault(),d=fr(function(){var A=o?10:1;i(u*A),u=0}))}}function T(S){!t.value||(o=S.detail===m)}return[C,T]}var B9=14/15;function N9(t,e,r){var i=!1,u=0,d=null,m=null,o=function(){d&&(d.removeEventListener("touchmove",_),d.removeEventListener("touchend",C))},_=function(A){if(i){var O=Math.ceil(A.touches[0].pageY),R=u-O;u=O,r(R)&&A.preventDefault(),clearInterval(m),m=setInterval(function(){R*=B9,(!r(R,!0)||Math.abs(R)<=.1)&&clearInterval(m)},16)}},C=function(){i=!1,o()},T=function(A){o(),A.touches.length===1&&!i&&(i=!0,u=Math.ceil(A.touches[0].pageY),d=A.target,d.addEventListener("touchmove",_,{passive:!1}),d.addEventListener("touchend",C))},S=function(){};wr(function(){document.addEventListener("touchmove",S,{passive:!1}),an(t,function(P){e.value.removeEventListener("touchstart",T),o(),clearInterval(m),P&&e.value.addEventListener("touchstart",T,{passive:!1})},{immediate:!0})}),Er(function(){document.removeEventListener("touchmove",S)})}var $9=["prefixCls","height","itemHeight","fullHeight","data","itemKey","virtual","component","onScroll","children","style","class"],j9=[],V9={overflowY:"auto",overflowAnchor:"none"};function U9(t,e,r,i,u,d){var m=d.getKey;return t.slice(e,r+1).map(function(o,_){var C=e+_,T=u(o,C,{}),S=m(o);return j(M9,{key:S,setRef:function(A){return i(o,A)}},{default:function(){return[T]}})})}var K9=jt({compatConfig:{MODE:3},name:"List",inheritAttrs:!1,props:{prefixCls:String,data:et.array,height:Number,itemHeight:Number,fullHeight:{type:Boolean,default:void 0},itemKey:{type:[String,Number,Function],required:!0},component:{type:[String,Object]},virtual:{type:Boolean,default:void 0},children:Function,onScroll:Function,onMousedown:Function,onMouseenter:Function,onVisibleChange:Function},setup:function(e,r){var i=r.expose,u=ue(function(){var Le=e.height,Te=e.itemHeight,oe=e.virtual;return!!(oe!==!1&&Le&&Te)}),d=ue(function(){var Le=e.height,Te=e.itemHeight,oe=e.data;return u.value&&oe&&Te*oe.length>Le}),m=Or({scrollTop:0,scrollMoving:!1}),o=ue(function(){return e.data||j9}),_=mr([]);an(o,function(){_.value=Yn(o.value).slice()},{immediate:!0});var C=mr(function(Le){});an(function(){return e.itemKey},function(Le){typeof Le=="function"?C.value=Le:C.value=function(Te){return Te==null?void 0:Te[Le]}},{immediate:!0});var T=qe(),S=qe(),P=qe(),A=function(Te){return C.value(Te)},O={getKey:A};function R(Le){var Te;typeof Le=="function"?Te=Le(m.scrollTop):Te=Le;var oe=te(Te);T.value&&(T.value.scrollTop=oe),m.scrollTop=oe}var z=D9(_,A,null,null),F=zn(z,4),N=F[0],U=F[1],G=F[2],q=F[3],V=Or({scrollHeight:void 0,start:0,end:0,offset:void 0}),Z=qe(0);wr(function(){gr(function(){var Le;Z.value=((Le=S.value)===null||Le===void 0?void 0:Le.offsetHeight)||0})}),Ca(function(){gr(function(){var Le;Z.value=((Le=S.value)===null||Le===void 0?void 0:Le.offsetHeight)||0})}),an([u,_],function(){u.value||kr(V,{scrollHeight:void 0,start:0,end:_.value.length-1,offset:void 0})},{immediate:!0}),an([u,_,Z,d],function(){u.value&&!d.value&&kr(V,{scrollHeight:Z.value,start:0,end:_.value.length-1,offset:void 0})},{immediate:!0}),an([d,u,function(){return m.scrollTop},_,q,function(){return e.height},Z],function(){if(!(!u.value||!d.value)){for(var Le=0,Te,oe,ze,Fe=_.value.length,lt=_.value,vt=m.scrollTop,kt=e.itemHeight,It=e.height,se=vt+It,ae=0;ae<Fe;ae+=1){var Be=lt[ae],st=A(Be),ut=G.get(st);ut===void 0&&(ut=kt);var bt=Le+ut;Te===void 0&&bt>=vt&&(Te=ae,oe=Le),ze===void 0&&bt>se&&(ze=ae),Le=bt}Te===void 0&&(Te=0,oe=0),ze===void 0&&(ze=Fe-1),ze=Math.min(ze+1,Fe),kr(V,{scrollHeight:Le,start:Te,end:ze,offset:oe})}},{immediate:!0});var Q=ue(function(){return V.scrollHeight-e.height});function te(Le){var Te=Le;return Number.isNaN(Q.value)||(Te=Math.min(Te,Q.value)),Te=Math.max(Te,0),Te}var ie=ue(function(){return m.scrollTop<=0}),ve=ue(function(){return m.scrollTop>=Q.value}),ce=z3(ie,ve);function de(Le){var Te=Le;R(Te)}function xe(Le){var Te,oe=Le.currentTarget.scrollTop;Math.abs(oe-m.scrollTop)>=1&&R(oe),(Te=e.onScroll)===null||Te===void 0||Te.call(e,Le)}var De=F9(u,ie,ve,function(Le){R(function(Te){var oe=Te+Le;return oe})}),ge=zn(De,2),he=ge[0],me=ge[1];N9(u,T,function(Le,Te){return ce(Le,Te)?!1:(he({preventDefault:function(){},deltaY:Le}),!0)});function Pe(Le){u.value&&Le.preventDefault()}var He=function(){T.value&&(T.value.removeEventListener("wheel",he,ao?{passive:!1}:!1),T.value.removeEventListener("DOMMouseScroll",me),T.value.removeEventListener("MozMousePixelScroll",Pe))};vr(function(){gr(function(){T.value&&(He(),T.value.addEventListener("wheel",he,ao?{passive:!1}:!1),T.value.addEventListener("DOMMouseScroll",me),T.value.addEventListener("MozMousePixelScroll",Pe))})}),Er(function(){He()});var Ke=R9(T,_,G,e,A,U,R,function(){var Le;(Le=P.value)===null||Le===void 0||Le.delayHidden()});i({scrollTo:Ke});var Re=ue(function(){var Le=null;return e.height&&(Le=H(Ie({},e.fullHeight?"height":"maxHeight",e.height+"px"),V9),u.value&&(Le.overflowY="hidden",m.scrollMoving&&(Le.pointerEvents="none"))),Le});return an([function(){return V.start},function(){return V.end},_],function(){if(e.onVisibleChange){var Le=_.value.slice(V.start,V.end+1);e.onVisibleChange(Le,_.value)}},{flush:"post"}),{state:m,mergedData:_,componentStyle:Re,onFallbackScroll:xe,onScrollBar:de,componentRef:T,useVirtual:u,calRes:V,collectHeight:U,setInstance:N,sharedConfig:O,scrollBarRef:P,fillerInnerRef:S}},render:function(){var e=this,r=H(H({},this.$props),this.$attrs),i=r.prefixCls,u=i===void 0?"rc-virtual-list":i,d=r.height;r.itemHeight,r.fullHeight,r.data,r.itemKey,r.virtual;var m=r.component,o=m===void 0?"div":m;r.onScroll;var _=r.children,C=_===void 0?this.$slots.default:_,T=r.style,S=r.class,P=Cr(r,$9),A=qt(u,S),O=this.state.scrollTop,R=this.calRes,z=R.scrollHeight,F=R.offset,N=R.start,U=R.end,G=this.componentStyle,q=this.onFallbackScroll,V=this.onScrollBar,Z=this.useVirtual,Q=this.collectHeight,te=this.sharedConfig,ie=this.setInstance,ve=this.mergedData;return j("div",H({style:H(H({},T),{},{position:"relative"}),class:A},P),[j(o,{class:"".concat(u,"-holder"),style:G,ref:"componentRef",onScroll:q},{default:function(){return[j(A9,{prefixCls:u,height:z,offset:F,onInnerResize:Q,ref:"fillerInnerRef"},{default:function(){return U9(ve,N,U,ie,C,te)}})]}}),Z&&j(O9,{ref:"scrollBarRef",prefixCls:u,scrollTop:O,height:d,scrollHeight:z,count:ve.length,onScroll:V,onStartMove:function(){e.state.scrollMoving=!0},onStopMove:function(){e.state.scrollMoving=!1}},null)])}});const L3=K9;function G9(t,e,r){var i=qe(t());return an(e,function(u,d){r?r(u,d)&&(i.value=t()):i.value=t()}),i}function H9(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var F3=Symbol("SelectContextKey");function q9(t){return sr(F3,t)}function W9(){return Kn(F3,{})}var Z9=["disabled","title","children","style","class","className"];function SI(t){return typeof t=="string"||typeof t=="number"}var X9=jt({compatConfig:{MODE:3},name:"OptionList",inheritAttrs:!1,slots:["option"],setup:function(e,r){var i=r.expose,u=r.slots,d=C9(),m=W9(),o=ue(function(){return"".concat(d.prefixCls,"-item")}),_=G9(function(){return m.flattenOptions},[function(){return d.open},function(){return m.flattenOptions}],function(V){return V[0]}),C=Sp(),T=function(Z){Z.preventDefault()},S=function(Z){C.current&&C.current.scrollTo(typeof Z=="number"?{index:Z}:Z)},P=function(Z){for(var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,te=_.value.length,ie=0;ie<te;ie+=1){var ve=(Z+ie*Q+te)%te,ce=_.value[ve],de=ce.group,xe=ce.data;if(!de&&!xe.disabled)return ve}return-1},A=Or({activeIndex:P(0)}),O=function(Z){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;A.activeIndex=Z;var te={source:Q?"keyboard":"mouse"},ie=_.value[Z];if(!ie){m.onActiveValue(null,-1,te);return}m.onActiveValue(ie.value,Z,te)};an([function(){return _.value.length},function(){return d.searchValue}],function(){O(m.defaultActiveFirstOption!==!1?P(0):-1)},{immediate:!0});var R=function(Z){return m.rawValues.has(Z)&&d.mode!=="combobox"};an([function(){return d.open},function(){return d.searchValue}],function(){if(!d.multiple&&d.open&&m.rawValues.size===1){var V=Array.from(m.rawValues)[0],Z=Yn(_.value).findIndex(function(Q){var te=Q.data;return te[m.fieldNames.value]===V});Z!==-1&&(O(Z),gr(function(){S(Z)}))}d.open&&gr(function(){var Q;(Q=C.current)===null||Q===void 0||Q.scrollTo(void 0)})},{immediate:!0,flush:"post"});var z=function(Z){Z!==void 0&&m.onSelect(Z,{selected:!m.rawValues.has(Z)}),d.multiple||d.toggleOpen(!1)},F=function(Z){return typeof Z.label=="function"?Z.label():Z.label};function N(V){var Z=_.value[V];if(!Z)return null;var Q=Z.data||{},te=Q.value,ie=Z.group,ve=lc(Q,!0),ce=F(Z);return Z?j("div",H(H({"aria-label":typeof ce=="string"&&!ie?ce:null},ve),{},{key:V,role:ie?"presentation":"option",id:"".concat(d.id,"_list_").concat(V),"aria-selected":R(te)}),[te]):null}var U=function(Z){var Q=Z.which,te=Z.ctrlKey;switch(Q){case Fn.N:case Fn.P:case Fn.UP:case Fn.DOWN:{var ie=0;if(Q===Fn.UP?ie=-1:Q===Fn.DOWN?ie=1:H9()&&te&&(Q===Fn.N?ie=1:Q===Fn.P&&(ie=-1)),ie!==0){var ve=P(A.activeIndex+ie,ie);S(ve),O(ve,!0)}break}case Fn.ENTER:{var ce=_.value[A.activeIndex];ce&&!ce.data.disabled?z(ce.value):z(void 0),d.open&&Z.preventDefault();break}case Fn.ESC:d.toggleOpen(!1),d.open&&Z.stopPropagation()}},G=function(){},q=function(Z){S(Z)};return i({onKeydown:U,onKeyup:G,scrollTo:q}),function(){var V=d.id,Z=d.notFoundContent,Q=d.onPopupScroll,te=m.menuItemSelectedIcon,ie=m.fieldNames,ve=m.virtual,ce=m.listHeight,de=m.listItemHeight,xe=u.option,De=A.activeIndex,ge=Object.keys(ie).map(function(he){return ie[he]});return _.value.length===0?j("div",{role:"listbox",id:"".concat(V,"_list"),class:"".concat(o.value,"-empty"),onMousedown:T},[Z]):j(Hn,null,[j("div",{role:"listbox",id:"".concat(V,"_list"),style:{height:0,width:0,overflow:"hidden"}},[N(De-1),N(De),N(De+1)]),j(L3,{itemKey:"key",ref:C,data:_.value,height:ce,itemHeight:de,fullHeight:!1,onMousedown:T,onScroll:Q,virtual:ve},{default:function(me,Pe){var He,Ke=me.group,Re=me.groupOption,Le=me.data,Te=me.value,oe=Le.key,ze=typeof me.label=="function"?me.label():me.label;if(Ke){var Fe,lt=(Fe=Le.title)!==null&&Fe!==void 0?Fe:SI(ze)&&ze;return j("div",{class:qt(o.value,"".concat(o.value,"-group")),title:lt},[xe?xe(Le):ze!==void 0?ze:oe])}var vt=Le.disabled,kt=Le.title;Le.children;var It=Le.style,se=Le.class,ae=Le.className,Be=Cr(Le,Z9),st=hi(Be,ge),ut=R(Te),bt="".concat(o.value,"-option"),At=qt(o.value,bt,se,ae,(He={},Ie(He,"".concat(bt,"-grouped"),Re),Ie(He,"".concat(bt,"-active"),De===Pe&&!vt),Ie(He,"".concat(bt,"-disabled"),vt),Ie(He,"".concat(bt,"-selected"),ut),He)),_t=F(me),nt=!te||typeof te=="function"||ut,tt=typeof _t=="number"?_t:_t||Te,pt=SI(tt)?tt.toString():void 0;return kt!==void 0&&(pt=kt),j("div",H(H({},st),{},{"aria-selected":ut,class:At,title:pt,onMousemove:function(Ot){Be.onMousemove&&Be.onMousemove(Ot),!(De===Pe||vt)&&O(Pe)},onClick:function(Ot){vt||z(Te),Be.onClick&&Be.onClick(Ot)},style:It}),[j("div",{class:"".concat(bt,"-content")},[xe?xe(Le):tt]),Co(te)||ut,nt&&j(Dg,{class:"".concat(o.value,"-option-state"),customizeIcon:te,customizeIconProps:{isSelected:ut}},{default:function(){return[ut?"\u2713":null]}})])}})])}}});const Y9=X9;var J9=["value","disabled"];function Q9(t){var e=t.key,r=t.children,i=t.props,u=i.value,d=i.disabled,m=Cr(i,J9),o=r==null?void 0:r.default;return H({key:e,value:u!==void 0?u:e,children:o,disabled:d||d===""},m)}function B3(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=fo(t).map(function(i,u){var d;if(!Co(i)||!i.type)return null;var m=i.type.isSelectOptGroup,o=i.key,_=i.children,C=i.props;if(e||!m)return Q9(i);var T=_&&_.default?_.default():void 0,S=(C==null?void 0:C.label)||((d=_.label)===null||d===void 0?void 0:d.call(_))||o;return H(H({key:"__RC_SELECT_GRP__".concat(o===null?u:String(o),"__")},C),{},{label:S,options:B3(T||[])})}).filter(function(i){return i});return r}function e7(t,e,r){var i=mr(),u=mr(),d=mr(),m=mr([]);return an([t,e],function(){t.value?m.value=Yn(t.value).slice():m.value=B3(e.value)},{immediate:!0,deep:!0}),vr(function(){var o=m.value,_=new Map,C=new Map,T=r.value;function S(P){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=0;O<P.length;O+=1){var R=P[O];!R[T.options]||A?(_.set(R[T.value],R),C.set(R[T.label],R)):S(R[T.options],!0)}}S(o),i.value=o,u.value=_,d.value=C}),{options:i,valueOptions:u,labelOptions:d}}var TI=0,t7=oc();function n7(){var t;return t7?(t=TI,TI+=1):t="TEST_OR_SSR",t}function r7(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qe(""),e="rc_select_".concat(n7());return t.value||e}function N3(t){return Array.isArray(t)?t:t!==void 0?[t]:[]}function L0(t,e){return N3(t).join("").toUpperCase().includes(e)}const i7=function(t,e,r,i,u){return ue(function(){var d=r.value,m=u==null?void 0:u.value,o=i==null?void 0:i.value;if(!d||o===!1)return t.value;var _=e.value,C=_.options,T=_.label,S=_.value,P=[],A=typeof o=="function",O=d.toUpperCase(),R=A?o:function(F,N){return m?L0(N[m],O):N[C]?L0(N[T!=="children"?T:"label"],O):L0(N[S],O)},z=A?function(F){return Xx(F)}:function(F){return F};return t.value.forEach(function(F){if(F[C]){var N=R(d,z(F));if(N)P.push(F);else{var U=F[C].filter(function(G){return R(d,z(G))});U.length&&P.push(H(H({},F),{},Ie({},C,U)))}return}R(d,z(F))&&P.push(F)}),P})},o7=function(t,e){var r=mr({values:new Map,options:new Map}),i=ue(function(){var d=r.value,m=d.values,o=d.options,_=t.value.map(function(S){if(S.label===void 0){var P;return H(H({},S),{},{label:(P=m.get(S.value))===null||P===void 0?void 0:P.label})}return S}),C=new Map,T=new Map;return _.forEach(function(S){C.set(S.value,S),T.set(S.value,e.value.get(S.value)||o.get(S.value))}),r.value.values=C,r.value.options=T,_}),u=function(m){return e.value.get(m)||r.value.options.get(m)};return[i,u]};function ab(t,e){var r=e||{},i=r.defaultValue,u=r.value,d=u===void 0?qe():u,m=typeof t=="function"?t():t;d.value!==void 0&&(m=gi(d)),i!==void 0&&(m=typeof i=="function"?i():i);var o=qe(m),_=qe(m);vr(function(){var T=d.value!==void 0?d.value:o.value;e.postState&&(T=e.postState(T)),_.value=T});function C(T){var S=_.value;o.value=T,Yn(_.value)!==T&&e.onChange&&e.onChange(T,S)}return an(d,function(){o.value=d.value}),[_,C]}function Ls(t){var e=typeof t=="function"?t():t,r=qe(e);function i(u){r.value=u}return[r,i]}var a7=["inputValue"];function $3(){return H(H({},O3()),{},{prefixCls:String,id:String,backfill:{type:Boolean,default:void 0},fieldNames:Object,inputValue:String,searchValue:String,onSearch:Function,autoClearSearchValue:{type:Boolean,default:void 0},onSelect:Function,onDeselect:Function,filterOption:{type:[Boolean,Function],default:void 0},filterSort:Function,optionFilterProp:String,optionLabelProp:String,options:Array,defaultActiveFirstOption:{type:Boolean,default:void 0},virtual:{type:Boolean,default:void 0},listHeight:Number,listItemHeight:Number,menuItemSelectedIcon:et.any,mode:String,labelInValue:{type:Boolean,default:void 0},value:et.any,defaultValue:et.any,onChange:Function,children:Array})}function s7(t){return!t||On(t)!=="object"}const l7=jt({compatConfig:{MODE:3},name:"Select",inheritAttrs:!1,props:Di($3(),{prefixCls:"vc-select",autoClearSearchValue:!0,listHeight:200,listItemHeight:20,dropdownMatchSelectWidth:!0}),setup:function(e,r){var i=r.expose,u=r.attrs,d=r.slots,m=r7(Nr(e,"id")),o=ue(function(){return D3(e.mode)}),_=ue(function(){return!!(!e.options&&e.children)}),C=ue(function(){return e.filterOption===void 0&&e.mode==="combobox"?!1:e.filterOption}),T=ue(function(){return QO(e.fieldNames,_.value)}),S=ab("",{value:ue(function(){return e.searchValue!==void 0?e.searchValue:e.inputValue}),postState:function(tt){return tt||""}}),P=zn(S,2),A=P[0],O=P[1],R=e7(Nr(e,"options"),Nr(e,"children"),T),z=R.valueOptions,F=R.labelOptions,N=R.options,U=function(tt){var pt=N3(tt);return pt.map(function(dt){var Ot,Kt,cn,Cn;if(s7(dt))Ot=dt;else{var Rt;cn=dt.key,Kt=dt.label,Ot=(Rt=dt.value)!==null&&Rt!==void 0?Rt:cn}var ht=z.value.get(Ot);if(ht){var Ht;Kt===void 0&&(Kt=ht==null?void 0:ht[e.optionLabelProp||T.value.label]),cn===void 0&&(cn=(Ht=ht==null?void 0:ht.key)!==null&&Ht!==void 0?Ht:Ot),Cn=ht==null?void 0:ht.disabled}return{label:Kt,value:Ot,key:cn,disabled:Cn,option:ht}})},G=ab(e.defaultValue,{value:Nr(e,"value")}),q=zn(G,2),V=q[0],Z=q[1],Q=ue(function(){var nt,tt=U(V.value);return e.mode==="combobox"&&!((nt=tt[0])!==null&&nt!==void 0&&nt.value)?[]:tt}),te=o7(Q,z),ie=zn(te,2),ve=ie[0],ce=ie[1],de=ue(function(){if(!e.mode&&ve.value.length===1){var nt=ve.value[0];if(nt.value===null&&(nt.label===null||nt.label===void 0))return[]}return ve.value.map(function(tt){var pt;return H(H({},tt),{},{label:(pt=typeof tt.label=="function"?tt.label():tt.label)!==null&&pt!==void 0?pt:tt.value})})}),xe=ue(function(){return new Set(ve.value.map(function(nt){return nt.value}))});vr(function(){if(e.mode==="combobox"){var nt,tt=(nt=ve.value[0])===null||nt===void 0?void 0:nt.value;tt!=null&&O(String(tt))}},{flush:"post"});var De=function(tt,pt){var dt,Ot=pt!=null?pt:tt;return dt={},Ie(dt,T.value.value,tt),Ie(dt,T.value.label,Ot),dt},ge=mr();vr(function(){if(e.mode!=="tags"){ge.value=N.value;return}var nt=N.value.slice(),tt=function(dt){return z.value.has(dt)};bn(ve.value).sort(function(pt,dt){return pt.value<dt.value?-1:1}).forEach(function(pt){var dt=pt.value;tt(dt)||nt.push(De(dt,pt.label))}),ge.value=nt});var he=i7(ge,T,A,C,Nr(e,"optionFilterProp")),me=ue(function(){return e.mode!=="tags"||!A.value||he.value.some(function(nt){return nt[e.optionFilterProp||"value"]===A.value})?he.value:[De(A.value)].concat(bn(he.value))}),Pe=ue(function(){return e.filterSort?bn(me.value).sort(function(nt,tt){return e.filterSort(nt,tt)}):me.value}),He=ue(function(){return cj(Pe.value,{fieldNames:T.value,childrenAsData:_.value})}),Ke=function(tt){var pt=U(tt);if(Z(pt),e.onChange&&(pt.length!==ve.value.length||pt.some(function(Kt,cn){var Cn;return((Cn=ve.value[cn])===null||Cn===void 0?void 0:Cn.value)!==(Kt==null?void 0:Kt.value)}))){var dt=e.labelInValue?pt.map(function(Kt){return H(H({},Kt),{},{originLabel:Kt.label,label:typeof Kt.label=="function"?Kt.label():Kt.label})}):pt.map(function(Kt){return Kt.value}),Ot=pt.map(function(Kt){return Xx(ce(Kt.value))});e.onChange(o.value?dt:dt[0],o.value?Ot:Ot[0])}},Re=Ls(null),Le=zn(Re,2),Te=Le[0],oe=Le[1],ze=Ls(0),Fe=zn(ze,2),lt=Fe[0],vt=Fe[1],kt=ue(function(){return e.defaultActiveFirstOption!==void 0?e.defaultActiveFirstOption:e.mode!=="combobox"}),It=function(tt,pt){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ot=dt.source,Kt=Ot===void 0?"keyboard":Ot;vt(pt),e.backfill&&e.mode==="combobox"&&tt!==null&&Kt==="keyboard"&&oe(String(tt))},se=function(tt,pt){var dt=function(){var mt,St=ce(tt),yt=St==null?void 0:St[T.value.label];return[e.labelInValue?{label:typeof yt=="function"?yt():yt,originLabel:yt,value:tt,key:(mt=St==null?void 0:St.key)!==null&&mt!==void 0?mt:tt}:tt,Xx(St)]};if(pt&&e.onSelect){var Ot=dt(),Kt=zn(Ot,2),cn=Kt[0],Cn=Kt[1];e.onSelect(cn,Cn)}else if(!pt&&e.onDeselect){var Rt=dt(),ht=zn(Rt,2),Ht=ht[0],wn=ht[1];e.onDeselect(Ht,wn)}},ae=function(tt,pt){var dt,Ot=o.value?pt.selected:!0;Ot?dt=o.value?[].concat(bn(ve.value),[tt]):[tt]:dt=ve.value.filter(function(Kt){return Kt.value!==tt}),Ke(dt),se(tt,Ot),e.mode==="combobox"?oe(""):(!o.value||e.autoClearSearchValue)&&(O(""),oe(""))},Be=function(tt,pt){Ke(tt),(pt.type==="remove"||pt.type==="clear")&&pt.values.forEach(function(dt){se(dt.value,!1)})},st=function(tt,pt){if(O(tt),oe(null),pt.source==="submit"){var dt=(tt||"").trim();if(dt){var Ot=Array.from(new Set([].concat(bn(xe.value),[dt])));Ke(Ot),se(dt,!0),O("")}return}if(pt.source!=="blur"){var Kt;e.mode==="combobox"&&Ke(tt),(Kt=e.onSearch)===null||Kt===void 0||Kt.call(e,tt)}},ut=function(tt){var pt=tt;e.mode!=="tags"&&(pt=tt.map(function(Ot){var Kt=F.value.get(Ot);return Kt==null?void 0:Kt.value}).filter(function(Ot){return Ot!==void 0}));var dt=Array.from(new Set([].concat(bn(xe.value),bn(pt))));Ke(dt),dt.forEach(function(Ot){se(Ot,!0)})},bt=ue(function(){return e.virtual!==!1&&e.dropdownMatchSelectWidth!==!1});q9(k3(H(H({},R),{},{flattenOptions:He,onActiveValue:It,defaultActiveFirstOption:kt,onSelect:ae,menuItemSelectedIcon:Nr(e,"menuItemSelectedIcon"),rawValues:xe,fieldNames:T,virtual:bt,listHeight:Nr(e,"listHeight"),listItemHeight:Nr(e,"listItemHeight"),childrenAsData:_})));var At=qe();i({focus:function(){var tt;(tt=At.value)===null||tt===void 0||tt.focus()},blur:function(){var tt;(tt=At.value)===null||tt===void 0||tt.blur()},scrollTo:function(tt){var pt;(pt=At.value)===null||pt===void 0||pt.scrollTo(tt)}});var _t=ue(function(){return hi(e,["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"])});return function(){return j(P9,H(H(H({},_t.value),u),{},{id:m,prefixCls:e.prefixCls,ref:At,omitDomProps:a7,mode:e.mode,displayValues:de.value,onDisplayValuesChange:Be,searchValue:A.value,onSearch:st,onSearchSplit:ut,dropdownMatchSelectWidth:e.dropdownMatchSelectWidth,OptionList:Y9,emptyOptions:!He.value.length,activeValue:Te.value,activeDescendantId:"".concat(m,"_list_").concat(lt.value)}),d)}}});var bw=function(){return null};bw.isSelectOption=!0;bw.displayName="ASelectOption";const u7=bw;var ww=function(){return null};ww.isSelectOptGroup=!0;ww.displayName="ASelectOptGroup";const c7=ww;var d7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const f7=d7;function EI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){h7(t,u,r[u])})}return t}function h7(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Cw=function(e,r){var i=EI({},e,r.attrs);return j($r,EI({},i,{icon:f7}),null)};Cw.displayName="DownOutlined";Cw.inheritAttrs=!1;const Sw=Cw;var p7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const m7=p7;function II(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){v7(t,u,r[u])})}return t}function v7(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Tw=function(e,r){var i=II({},e,r.attrs);return j($r,II({},i,{icon:m7}),null)};Tw.displayName="CheckOutlined";Tw.inheritAttrs=!1;const g7=Tw;var y7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};const _7=y7;function PI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){x7(t,u,r[u])})}return t}function x7(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ew=function(e,r){var i=PI({},e,r.attrs);return j($r,PI({},i,{icon:_7}),null)};Ew.displayName="SearchOutlined";Ew.inheritAttrs=!1;const Iw=Ew;function b7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.loading,i=t.multiple,u=t.prefixCls,d=t.suffixIcon||e.suffixIcon&&e.suffixIcon(),m=t.clearIcon||e.clearIcon&&e.clearIcon(),o=t.menuItemSelectedIcon||e.menuItemSelectedIcon&&e.menuItemSelectedIcon(),_=t.removeIcon||e.removeIcon&&e.removeIcon(),C=m;m||(C=j(ay,null,null));var T=null;if(d!==void 0)T=d;else if(r)T=j(Nd,{spin:!0},null);else{var S="".concat(u,"-suffix");T=function(R){var z=R.open,F=R.showSearch;return z&&F?j(Iw,{class:S},null):j(Sw,{class:S},null)}}var P=null;o!==void 0?P=o:i?P=j(g7,null,null):P=null;var A=null;return _!==void 0?A=_:A=j(nw,null,null),{clearIcon:C,suffixIcon:T,itemIcon:P,removeIcon:A}}var Rg=Symbol("ContextProps"),zg=Symbol("InternalContextProps"),w7=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ue(function(){return!0}),i=qe(new Map),u=function(o,_){i.value.set(o,_),i.value=new Map(i.value)},d=function(o){i.value.delete(o),i.value=new Map(i.value)};an([r,i],function(){}),sr(Rg,e),sr(zg,{addFormItemField:u,removeFormItemField:d})},sb={id:ue(function(){}),onFieldBlur:function(){},onFieldChange:function(){},clearValidate:function(){}},lb={addFormItemField:function(){},removeFormItemField:function(){}},Ks=function(){var e=Kn(zg,lb),r=Symbol("FormItemFieldKey"),i=Ji();return e.addFormItemField(r,i.type),Er(function(){e.removeFormItemField(r)}),sr(zg,lb),sr(Rg,sb),Kn(Rg,sb)};const ub=jt({compatConfig:{MODE:3},name:"AFormItemRest",setup:function(e,r){var i=r.slots;return sr(zg,lb),sr(Rg,sb),function(){var u;return(u=i.default)===null||u===void 0?void 0:u.call(i)}}});var j3=function(){return H(H({},hi($3(),["inputIcon","mode","getInputElement","getRawInputElement","backfill"])),{},{value:{type:[Array,Object,String,Number]},defaultValue:{type:[Array,Object,String,Number]},notFoundContent:et.any,suffixIcon:et.any,itemIcon:et.any,size:String,mode:String,bordered:{type:Boolean,default:!0},transitionName:String,choiceTransitionName:{type:String,default:""},"onUpdate:value":Function})},AI="SECRET_COMBOBOX_MODE_DO_NOT_USE",Wa=jt({compatConfig:{MODE:3},name:"ASelect",Option:u7,OptGroup:c7,inheritAttrs:!1,props:Di(j3(),{listHeight:256,listItemHeight:24}),SECRET_COMBOBOX_MODE_DO_NOT_USE:AI,slots:["notFoundContent","suffixIcon","itemIcon","removeIcon","clearIcon","dropdownRender","option","placeholder","tagRender","maxTagPlaceholder","optionLabel"],setup:function(e,r){var i=r.attrs,u=r.emit,d=r.slots,m=r.expose,o=qe(),_=Ks(),C=function(){var ie;(ie=o.value)===null||ie===void 0||ie.focus()},T=function(){var ie;(ie=o.value)===null||ie===void 0||ie.blur()},S=function(ie){var ve;(ve=o.value)===null||ve===void 0||ve.scrollTo(ie)},P=ue(function(){var te=e.mode;if(te!=="combobox")return te===AI?"combobox":te}),A=hr("select",e),O=A.prefixCls,R=A.direction,z=A.configProvider,F=A.size,N=A.getPrefixCls,U=ue(function(){return N()}),G=ue(function(){return gp(U.value,"slide-up",e.transitionName)}),q=ue(function(){var te;return qt((te={},Ie(te,"".concat(O.value,"-lg"),F.value==="large"),Ie(te,"".concat(O.value,"-sm"),F.value==="small"),Ie(te,"".concat(O.value,"-rtl"),R.value==="rtl"),Ie(te,"".concat(O.value,"-borderless"),!e.bordered),te))}),V=function(){for(var ie=arguments.length,ve=new Array(ie),ce=0;ce<ie;ce++)ve[ce]=arguments[ce];u("update:value",ve[0]),u.apply(void 0,["change"].concat(ve)),_.onFieldChange()},Z=function(ie){u("blur",ie),_.onFieldBlur()};m({blur:T,focus:C,scrollTo:S});var Q=ue(function(){return P.value==="multiple"||P.value==="tags"});return function(){var te,ie,ve=e.notFoundContent,ce=e.listHeight,de=ce===void 0?256:ce,xe=e.listItemHeight,De=xe===void 0?24:xe,ge=e.getPopupContainer,he=e.dropdownClassName,me=e.virtual,Pe=e.dropdownMatchSelectWidth,He=e.id,Ke=He===void 0?_.id.value:He,Re=e.placeholder,Le=Re===void 0?(te=d.placeholder)===null||te===void 0?void 0:te.call(d):Re,Te=z.renderEmpty,oe=z.getPopupContainer,ze;ve!==void 0?ze=ve:d.notFoundContent?ze=d.notFoundContent():P.value==="combobox"?ze=null:ze=Te("Select");var Fe=b7(H(H({},e),{},{multiple:Q.value,prefixCls:O.value}),d),lt=Fe.suffixIcon,vt=Fe.itemIcon,kt=Fe.removeIcon,It=Fe.clearIcon,se=hi(e,["prefixCls","suffixIcon","itemIcon","removeIcon","clearIcon","size","bordered"]),ae=qt(he,Ie({},"".concat(O.value,"-dropdown-").concat(R.value),R.value==="rtl"));return j(l7,H(H(H({ref:o,virtual:me,dropdownMatchSelectWidth:Pe},se),i),{},{placeholder:Le,listHeight:de,listItemHeight:De,mode:P.value,prefixCls:O.value,direction:R.value,inputIcon:lt,menuItemSelectedIcon:vt,removeIcon:kt,clearIcon:It,notFoundContent:ze,class:[q.value,i.class],getPopupContainer:ge||oe,dropdownClassName:ae,onChange:V,onBlur:Z,id:Ke,dropdownRender:se.dropdownRender||d.dropdownRender,transitionName:G.value,children:(ie=d.default)===null||ie===void 0?void 0:ie.call(d),tagRender:e.tagRender||d.tagRender,optionLabelRender:d.optionLabel,maxTagPlaceholder:e.maxTagPlaceholder||d.maxTagPlaceholder}),{option:d.option})}}});Wa.install=function(t){return t.component(Wa.name,Wa),t.component(Wa.Option.displayName,Wa.Option),t.component(Wa.OptGroup.displayName,Wa.OptGroup),t};Wa.Option;Wa.OptGroup;const cb=Wa;var MI=["xxxl","xxl","xl","lg","md","sm","xs"],Fv={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)",xxxl:"(min-width: 2000px)"},Ou=new Map,F0=-1,Bv={},C7={matchHandlers:{},dispatch:function(e){return Bv=e,Ou.forEach(function(r){return r(Bv)}),Ou.size>=1},subscribe:function(e){return Ou.size||this.register(),F0+=1,Ou.set(F0,e),e(Bv),F0},unsubscribe:function(e){Ou.delete(e),Ou.size||this.unregister()},unregister:function(){var e=this;Object.keys(Fv).forEach(function(r){var i=Fv[r],u=e.matchHandlers[i];u==null||u.mql.removeListener(u==null?void 0:u.listener)}),Ou.clear()},register:function(){var e=this;Object.keys(Fv).forEach(function(r){var i=Fv[r],u=function(o){var _=o.matches;e.dispatch(H(H({},Bv),{},Ie({},r,_)))},d=window.matchMedia(i);d.addListener(u),e.matchHandlers[i]={mql:d,listener:u},u(d)})}};const Lg=C7;function V3(){var t=qe({}),e=null;return wr(function(){e=Lg.subscribe(function(r){t.value=r})}),is(function(){Lg.unsubscribe(e)}),t}var S7=Symbol("SizeProvider"),T7=function(e){var r=e?ue(function(){return e.size}):Kn(S7,ue(function(){return"default"}));return r};function ga(t){var e=mr();return vr(function(){e.value=t()},{flush:"sync"}),e}var Jo={adjustX:1,adjustY:1},Qo=[0,0],U3={left:{points:["cr","cl"],overflow:Jo,offset:[-4,0],targetOffset:Qo},right:{points:["cl","cr"],overflow:Jo,offset:[4,0],targetOffset:Qo},top:{points:["bc","tc"],overflow:Jo,offset:[0,-4],targetOffset:Qo},bottom:{points:["tc","bc"],overflow:Jo,offset:[0,4],targetOffset:Qo},topLeft:{points:["bl","tl"],overflow:Jo,offset:[0,-4],targetOffset:Qo},leftTop:{points:["tr","tl"],overflow:Jo,offset:[-4,0],targetOffset:Qo},topRight:{points:["br","tr"],overflow:Jo,offset:[0,-4],targetOffset:Qo},rightTop:{points:["tl","tr"],overflow:Jo,offset:[4,0],targetOffset:Qo},bottomRight:{points:["tr","br"],overflow:Jo,offset:[0,4],targetOffset:Qo},rightBottom:{points:["bl","br"],overflow:Jo,offset:[4,0],targetOffset:Qo},bottomLeft:{points:["tl","bl"],overflow:Jo,offset:[0,4],targetOffset:Qo},leftBottom:{points:["br","bl"],overflow:Jo,offset:[-4,0],targetOffset:Qo}},E7={prefixCls:String,id:String,overlayInnerStyle:et.any};const I7=jt({compatConfig:{MODE:3},name:"Content",props:E7,slots:["overlay"],setup:function(e,r){var i=r.slots;return function(){var u;return j("div",{class:"".concat(e.prefixCls,"-inner"),id:e.id,role:"tooltip",style:e.overlayInnerStyle},[(u=i.overlay)===null||u===void 0?void 0:u.call(i)])}}});var P7=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible"];function kI(){}const A7=jt({compatConfig:{MODE:3},name:"Tooltip",inheritAttrs:!1,props:{trigger:et.any.def(["hover"]),defaultVisible:{type:Boolean,default:void 0},visible:{type:Boolean,default:void 0},placement:et.string.def("right"),transitionName:String,animation:et.any,afterVisibleChange:et.func.def(function(){}),overlayStyle:{type:Object,default:void 0},overlayClassName:String,prefixCls:et.string.def("rc-tooltip"),mouseEnterDelay:et.number.def(.1),mouseLeaveDelay:et.number.def(.1),getPopupContainer:Function,destroyTooltipOnHide:{type:Boolean,default:!1},align:et.object.def(function(){return{}}),arrowContent:et.any.def(null),tipId:String,builtinPlacements:et.object,overlayInnerStyle:{type:Object,default:void 0},popupVisible:{type:Boolean,default:void 0},onVisibleChange:Function,onPopupAlign:Function},slots:["arrowContent","overlay"],setup:function(e,r){var i=r.slots,u=r.attrs,d=r.expose,m=qe(),o=function(){var P=e.prefixCls,A=e.tipId,O=e.overlayInnerStyle;return[j("div",{class:"".concat(P,"-arrow"),key:"arrow"},[mp(i,e,"arrowContent")]),j(I7,{key:"content",prefixCls:P,id:A,overlayInnerStyle:O},{overlay:i.overlay})]},_=function(){return m.value.getPopupDomNode()};d({getPopupDomNode:_,triggerDOM:m,forcePopupAlign:function(){var P;return(P=m.value)===null||P===void 0?void 0:P.forcePopupAlign()}});var C=qe(!1),T=qe(!1);return vr(function(){var S=e.destroyTooltipOnHide;if(typeof S=="boolean")C.value=S;else if(S&&On(S)==="object"){var P=S.keepParent;C.value=P===!0,T.value=P===!1}}),function(){var S=e.overlayClassName,P=e.trigger,A=e.mouseEnterDelay,O=e.mouseLeaveDelay,R=e.overlayStyle,z=e.prefixCls,F=e.afterVisibleChange,N=e.transitionName,U=e.animation,G=e.placement,q=e.align;e.destroyTooltipOnHide;var V=e.defaultVisible,Z=Cr(e,P7),Q=H({},Z);e.visible!==void 0&&(Q.popupVisible=e.visible);var te=H(H(H({popupClassName:S,prefixCls:z,action:P,builtinPlacements:U3,popupPlacement:G,popupAlign:q,afterPopupVisibleChange:F,popupTransitionName:N,popupAnimation:U,defaultPopupVisible:V,destroyPopupOnHide:C.value,autoDestroy:T.value,mouseLeaveDelay:O,popupStyle:R,mouseEnterDelay:A},Q),u),{},{onPopupVisibleChange:e.onVisibleChange||kI,onPopupAlign:e.onPopupAlign||kI,ref:m,popup:o()});return j(py,te,{default:i.default})}}});Yi("success","processing","error","default","warning");var M7=Yi("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime");const k7=function(){return{trigger:[String,Array],visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:void 0},placement:String,color:String,transitionName:String,overlayStyle:{type:Object,default:void 0},overlayClassName:String,openClassName:String,prefixCls:String,mouseEnterDelay:Number,mouseLeaveDelay:Number,getPopupContainer:Function,arrowPointAtCenter:{type:Boolean,default:void 0},autoAdjustOverflow:{type:[Boolean,Object],default:void 0},destroyTooltipOnHide:{type:Boolean,default:void 0},align:{type:Object,default:void 0},builtinPlacements:{type:Object,default:void 0},children:Array,onVisibleChange:Function,"onUpdate:visible":Function}};var O7={adjustX:1,adjustY:1},OI={adjustX:0,adjustY:0},D7=[0,0];function DI(t){return typeof t=="boolean"?t?O7:OI:H(H({},OI),t)}function K3(t){var e=t.arrowWidth,r=e===void 0?4:e,i=t.horizontalArrowShift,u=i===void 0?16:i,d=t.verticalArrowShift,m=d===void 0?8:d,o=t.autoAdjustOverflow,_=t.arrowPointAtCenter,C={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(u+r),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(m+r)]},topRight:{points:["br","tc"],offset:[u+r,-4]},rightTop:{points:["tl","cr"],offset:[4,-(m+r)]},bottomRight:{points:["tr","bc"],offset:[u+r,4]},rightBottom:{points:["bl","cr"],offset:[4,m+r]},bottomLeft:{points:["tl","bc"],offset:[-(u+r),4]},leftBottom:{points:["br","cl"],offset:[-4,m+r]}};return Object.keys(C).forEach(function(T){C[T]=_?H(H({},C[T]),{},{overflow:DI(o),targetOffset:D7}):H(H({},U3[T]),{},{overflow:DI(o)}),C[T].ignoreShake=!0}),C}function db(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=0,r=t.length;e<r;e++)if(t[e]!==void 0)return t[e]}var R7=function(e,r){var i={},u=H({},e);return r.forEach(function(d){e&&d in e&&(i[d]=e[d],delete u[d])}),{picked:i,omitted:u}},RI=new RegExp("^(".concat(M7.join("|"),")(-inverse)?$")),z7=function(){return H(H({},k7()),{},{title:et.any})};const L7=jt({compatConfig:{MODE:3},name:"ATooltip",inheritAttrs:!1,props:Di(z7(),{trigger:"hover",transitionName:"zoom-big-fast",align:{},placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0}),slots:["title"],setup:function(e,r){var i=r.slots,u=r.emit,d=r.attrs,m=r.expose,o=hr("tooltip",e),_=o.prefixCls,C=o.getPopupContainer,T=qe(db([e.visible,e.defaultVisible])),S=qe();wr(function(){Ll(e.defaultVisible===void 0,"Tooltip","'defaultVisible' is deprecated, please use 'v-model:visible'")});var P;an(function(){return e.visible},function(q){fr.cancel(P),P=fr(function(){T.value=!!q})});var A=function(){var V,Z=(V=e.title)!==null&&V!==void 0?V:i.title;return!Z&&Z!==0},O=function(V){var Z=A();e.visible===void 0&&(T.value=Z?!1:V),Z||(u("update:visible",V),u("visibleChange",V))},R=function(){return S.value.getPopupDomNode()};m({getPopupDomNode:R,visible:T,forcePopupAlign:function(){var V;return(V=S.value)===null||V===void 0?void 0:V.forcePopupAlign()}});var z=ue(function(){var q=e.builtinPlacements,V=e.arrowPointAtCenter,Z=e.autoAdjustOverflow;return q||K3({arrowPointAtCenter:V,autoAdjustOverflow:Z})}),F=function(V){return V||V===""},N=function(V){var Z=V.type;if(On(Z)==="object"&&V.props&&((Z.__ANT_BUTTON===!0||Z==="button")&&F(V.props.disabled)||Z.__ANT_SWITCH===!0&&(F(V.props.disabled)||F(V.props.loading)))){var Q=R7(kN(V),["position","left","right","top","bottom","float","display","zIndex"]),te=Q.picked,ie=Q.omitted,ve=H(H({display:"inline-block"},te),{},{cursor:"not-allowed",lineHeight:1,width:V.props&&V.props.block?"100%":null}),ce=H(H({},ie),{},{pointerEvents:"none"}),de=ui(V,{style:ce},!0);return j("span",{style:ve,class:"".concat(_.value,"-disabled-compatible-wrapper")},[de])}return V},U=function(){var V,Z;return(V=e.title)!==null&&V!==void 0?V:(Z=i.title)===null||Z===void 0?void 0:Z.call(i)},G=function(V,Z){var Q=z.value,te=Object.keys(Q).filter(function(ce){return Q[ce].points[0]===Z.points[0]&&Q[ce].points[1]===Z.points[1]})[0];if(!!te){var ie=V.getBoundingClientRect(),ve={top:"50%",left:"50%"};te.indexOf("top")>=0||te.indexOf("Bottom")>=0?ve.top="".concat(ie.height-Z.offset[1],"px"):(te.indexOf("Top")>=0||te.indexOf("bottom")>=0)&&(ve.top="".concat(-Z.offset[1],"px")),te.indexOf("left")>=0||te.indexOf("Right")>=0?ve.left="".concat(ie.width-Z.offset[0],"px"):(te.indexOf("right")>=0||te.indexOf("Left")>=0)&&(ve.left="".concat(-Z.offset[0],"px")),V.style.transformOrigin="".concat(ve.left," ").concat(ve.top)}};return function(){var q,V,Z,Q=e.openClassName,te=e.color,ie=e.overlayClassName,ve=(q=Ko((V=i.default)===null||V===void 0?void 0:V.call(i)))!==null&&q!==void 0?q:null;ve=ve.length===1?ve[0]:ve;var ce=T.value;if(e.visible===void 0&&A()&&(ce=!1),!ve)return null;var de=N(Co(ve)?ve:j("span",null,[ve])),xe=qt((Z={},Ie(Z,Q||"".concat(_.value,"-open"),!0),Ie(Z,de.props&&de.props.class,de.props&&de.props.class),Z)),De=qt(ie,Ie({},"".concat(_.value,"-").concat(te),te&&RI.test(te))),ge,he;te&&!RI.test(te)&&(ge={backgroundColor:te},he={backgroundColor:te});var me=H(H(H({},d),e),{},{prefixCls:_.value,getPopupContainer:C.value,builtinPlacements:z.value,visible:ce,ref:S,overlayClassName:De,overlayInnerStyle:ge,onVisibleChange:O,onPopupAlign:G});return j(A7,me,{default:function(){return[T.value?ui(de,{class:xe}):de]},arrowContent:function(){return j("span",{class:"".concat(_.value,"-arrow-content"),style:he},null)},overlay:U})}}}),G3=zp(L7);var F7=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};const B7=F7;var ld={adjustX:1,adjustY:1},ud=[0,0],N7={topLeft:{points:["bl","tl"],overflow:ld,offset:[0,-4],targetOffset:ud},topCenter:{points:["bc","tc"],overflow:ld,offset:[0,-4],targetOffset:ud},topRight:{points:["br","tr"],overflow:ld,offset:[0,-4],targetOffset:ud},bottomLeft:{points:["tl","bl"],overflow:ld,offset:[0,4],targetOffset:ud},bottomCenter:{points:["tc","bc"],overflow:ld,offset:[0,4],targetOffset:ud},bottomRight:{points:["tr","br"],overflow:ld,offset:[0,4],targetOffset:ud}};const $7=N7;var j7=["prefixCls","arrow","showAction","overlayStyle","trigger","placement","align","getPopupContainer","transitionName","animation","overlayClassName"];const V7=jt({compatConfig:{MODE:3},props:{minOverlayWidthMatchTrigger:{type:Boolean,default:void 0},arrow:{type:Boolean,default:!1},prefixCls:et.string.def("rc-dropdown"),transitionName:String,overlayClassName:et.string.def(""),openClassName:String,animation:et.any,align:et.object,overlayStyle:{type:Object,default:void 0},placement:et.string.def("bottomLeft"),overlay:et.any,trigger:et.oneOfType([et.string,et.arrayOf(et.string)]).def("hover"),alignPoint:{type:Boolean,default:void 0},showAction:et.array,hideAction:et.array,getPopupContainer:Function,visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},mouseEnterDelay:et.number.def(.15),mouseLeaveDelay:et.number.def(.1)},emits:["visibleChange","overlayClick"],slots:["overlay"],setup:function(e,r){var i=r.slots,u=r.emit,d=r.expose,m=qe(!!e.visible);an(function(){return e.visible},function(O){O!==void 0&&(m.value=O)});var o=qe();d({triggerRef:o});var _=function(R){e.visible===void 0&&(m.value=!1),u("overlayClick",R)},C=function(R){e.visible===void 0&&(m.value=R),u("visibleChange",R)},T=function(){var R,z=(R=i.overlay)===null||R===void 0?void 0:R.call(i),F={prefixCls:"".concat(e.prefixCls,"-menu"),onClick:_,getPopupContainer:function(){return o.value.getPopupDomNode()}};return j(Hn,null,[e.arrow&&j("div",{class:"".concat(e.prefixCls,"-arrow")},null),ui(z,F,!1)])},S=ue(function(){var O=e.minOverlayWidthMatchTrigger,R=O===void 0?!e.alignPoint:O;return R}),P=function(){var R,z=(R=i.default)===null||R===void 0?void 0:R.call(i);return m.value&&z?ui(z[0],{class:e.openClassName||"".concat(e.prefixCls,"-open")},!1):z},A=ue(function(){return!e.hideAction&&e.trigger.indexOf("contextmenu")!==-1?["click"]:e.hideAction});return function(){var O=e.prefixCls,R=e.arrow,z=e.showAction,F=e.overlayStyle,N=e.trigger,U=e.placement,G=e.align,q=e.getPopupContainer,V=e.transitionName,Z=e.animation,Q=e.overlayClassName,te=Cr(e,j7);return j(py,H(H({},te),{},{prefixCls:O,ref:o,popupClassName:qt(Q,Ie({},"".concat(O,"-show-arrow"),R)),popupStyle:F,builtinPlacements:$7,action:N,showAction:z,hideAction:A.value||[],popupPlacement:U,popupAlign:G,popupTransitionName:V,popupAnimation:Z,popupVisible:m.value,stretch:S.value?"minWidth":"",onPopupVisibleChange:C,getPopupContainer:q}),{popup:T,default:P})}}});var B0={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},N0={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},gd=[],yd=[];function U7(){var t=document.createElement("div"),e=t.style;"AnimationEvent"in window||(delete B0.animationstart.animation,delete N0.animationend.animation),"TransitionEvent"in window||(delete B0.transitionstart.transition,delete N0.transitionend.transition);function r(i,u){for(var d in i)if(i.hasOwnProperty(d)){var m=i[d];for(var o in m)if(o in e){u.push(m[o]);break}}}r(B0,gd),r(N0,yd)}typeof window<"u"&&typeof document<"u"&&U7();function zI(t,e,r){t.addEventListener(e,r,!1)}function LI(t,e,r){t.removeEventListener(e,r,!1)}var K7={startEvents:gd,addStartEventListener:function(e,r){if(gd.length===0){setTimeout(r,0);return}gd.forEach(function(i){zI(e,i,r)})},removeStartEventListener:function(e,r){gd.length!==0&&gd.forEach(function(i){LI(e,i,r)})},endEvents:yd,addEndEventListener:function(e,r){if(yd.length===0){setTimeout(r,0);return}yd.forEach(function(i){zI(e,i,r)})},removeEndEventListener:function(e,r){yd.length!==0&&yd.forEach(function(i){LI(e,i,r)})}};const Nv=K7;var wl;function FI(t){return!t||t.offsetParent===null}function G7(t){var e=(t||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return e&&e[1]&&e[2]&&e[3]?!(e[1]===e[2]&&e[2]===e[3]):!0}const H7=jt({compatConfig:{MODE:3},name:"Wave",props:{insertExtraNode:Boolean,disabled:Boolean},setup:function(e,r){var i=r.slots,u=r.expose,d=Ji(),m=hr("",e),o=m.csp,_=m.prefixCls;u({csp:o});var C=null,T=null,S=null,P=!1,A=null,O=!1,R=function(V){if(!O){var Z=Ku(d);!V||V.target!==Z||P||U(Z)}},z=function(V){!V||V.animationName!=="fadeEffect"||U(V.target)},F=function(){var V=e.insertExtraNode;return V?"".concat(_.value,"-click-animating"):"".concat(_.value,"-click-animating-without-extra-node")},N=function(V,Z){var Q=e.insertExtraNode,te=e.disabled;if(!(te||!V||FI(V)||V.className.indexOf("-leave")>=0)){A=document.createElement("div"),A.className="".concat(_.value,"-click-animating-node");var ie=F();if(V.removeAttribute(ie),V.setAttribute(ie,"true"),wl=wl||document.createElement("style"),Z&&Z!=="#ffffff"&&Z!=="rgb(255, 255, 255)"&&G7(Z)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(Z)&&Z!=="transparent"){var ve;(ve=o.value)!==null&&ve!==void 0&&ve.nonce&&(wl.nonce=o.value.nonce),A.style.borderColor=Z,wl.innerHTML=`
        [`.concat(_.value,"-click-animating-without-extra-node='true']::after, .").concat(_.value,`-click-animating-node {
          --antd-wave-shadow-color: `).concat(Z,`;
        }`),document.body.contains(wl)||document.body.appendChild(wl)}Q&&V.appendChild(A),Nv.addStartEventListener(V,R),Nv.addEndEventListener(V,z)}},U=function(V){if(!(!V||V===A||!(V instanceof Element))){var Z=e.insertExtraNode,Q=F();V.setAttribute(Q,"false"),wl&&(wl.innerHTML=""),Z&&A&&V.contains(A)&&V.removeChild(A),Nv.removeStartEventListener(V,R),Nv.removeEndEventListener(V,z)}},G=function(V){if(!(!V||!V.getAttribute||V.getAttribute("disabled")||V.className.indexOf("disabled")>=0)){var Z=function(te){if(!(te.target.tagName==="INPUT"||FI(te.target))){U(V);var ie=getComputedStyle(V).getPropertyValue("border-top-color")||getComputedStyle(V).getPropertyValue("border-color")||getComputedStyle(V).getPropertyValue("background-color");T=setTimeout(function(){return N(V,ie)},0),fr.cancel(S),P=!0,S=fr(function(){P=!1},10)}};return V.addEventListener("click",Z,!0),{cancel:function(){V.removeEventListener("click",Z,!0)}}}};return wr(function(){gr(function(){var q=Ku(d);q.nodeType===1&&(C=G(q))})}),Er(function(){C&&C.cancel(),clearTimeout(T),O=!0}),function(){var q;return(q=i.default)===null||q===void 0?void 0:q.call(i)[0]}}});function H3(t){return t==="danger"?{danger:!0}:{type:t}}var q7=function(){return{prefixCls:String,type:String,htmlType:{type:String,default:"button"},shape:{type:String},size:{type:String},loading:{type:[Boolean,Object],default:function(){return!1}},disabled:{type:Boolean,default:void 0},ghost:{type:Boolean,default:void 0},block:{type:Boolean,default:void 0},danger:{type:Boolean,default:void 0},icon:et.any,href:String,target:String,title:String,onClick:{type:Function},onMousedown:{type:Function}}};const q3=q7;var BI=function(e){e&&(e.style.width="0px",e.style.opacity="0",e.style.transform="scale(0)")},NI=function(e){gr(function(){e&&(e.style.width="".concat(e.scrollWidth,"px"),e.style.opacity="1",e.style.transform="scale(1)")})},$I=function(e){e&&e.style&&(e.style.width=null,e.style.opacity=null,e.style.transform=null)};const W7=jt({compatConfig:{MODE:3},name:"LoadingIcon",props:{prefixCls:String,loading:[Boolean,Object],existIcon:Boolean},setup:function(e){return function(){var r=e.existIcon,i=e.prefixCls,u=e.loading;if(r)return j("span",{class:"".concat(i,"-loading-icon")},[j(Nd,null,null)]);var d=!!u;return j(os,{name:"".concat(i,"-loading-icon-motion"),onBeforeEnter:BI,onEnter:NI,onAfterEnter:$I,onBeforeLeave:NI,onLeave:function(o){setTimeout(function(){BI(o)})},onAfterLeave:$I},{default:function(){return[d?j("span",{class:"".concat(i,"-loading-icon")},[j(Nd,null,null)]):null]}})}}});var jI=/^[\u4e00-\u9fa5]{2}$/,VI=jI.test.bind(jI);function $v(t){return t==="text"||t==="link"}const Xi=jt({compatConfig:{MODE:3},name:"AButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:Di(q3(),{type:"default"}),slots:["icon"],setup:function(e,r){var i=r.slots,u=r.attrs,d=r.emit,m=hr("btn",e),o=m.prefixCls,_=m.autoInsertSpaceInButton,C=m.direction,T=m.size,S=qe(null),P=qe(void 0),A=!1,O=qe(!1),R=qe(!1),z=ue(function(){return _.value!==!1}),F=ue(function(){return On(e.loading)==="object"&&e.loading.delay?e.loading.delay||!0:!!e.loading});an(F,function(V){clearTimeout(P.value),typeof F.value=="number"?P.value=setTimeout(function(){O.value=V},F.value):O.value=V},{immediate:!0});var N=ue(function(){var V,Z=e.type,Q=e.shape,te=Q===void 0?"default":Q,ie=e.ghost,ve=e.block,ce=e.danger,de=o.value,xe={large:"lg",small:"sm",middle:void 0},De=T.value,ge=De&&xe[De]||"";return V={},Ie(V,"".concat(de),!0),Ie(V,"".concat(de,"-").concat(Z),Z),Ie(V,"".concat(de,"-").concat(te),te!=="default"&&te),Ie(V,"".concat(de,"-").concat(ge),ge),Ie(V,"".concat(de,"-loading"),O.value),Ie(V,"".concat(de,"-background-ghost"),ie&&!$v(Z)),Ie(V,"".concat(de,"-two-chinese-chars"),R.value&&z.value),Ie(V,"".concat(de,"-block"),ve),Ie(V,"".concat(de,"-dangerous"),!!ce),Ie(V,"".concat(de,"-rtl"),C.value==="rtl"),V}),U=function(){var Z=S.value;if(!(!Z||_.value===!1)){var Q=Z.textContent;A&&VI(Q)?R.value||(R.value=!0):R.value&&(R.value=!1)}},G=function(Z){if(O.value||e.disabled){Z.preventDefault();return}d("click",Z)},q=function(Z,Q){var te=Q?" ":"";if(Z.type===Xd){var ie=Z.children.trim();return VI(ie)&&(ie=ie.split("").join(te)),j("span",null,[ie])}return Z};return vr(function(){Ni(!(e.ghost&&$v(e.type)),"Button","`link` or `text` button can't be a `ghost` button.")}),wr(U),Ca(U),Er(function(){P.value&&clearTimeout(P.value)}),function(){var V,Z,Q=e.icon,te=Q===void 0?(V=i.icon)===null||V===void 0?void 0:V.call(i):Q,ie=fo((Z=i.default)===null||Z===void 0?void 0:Z.call(i));A=ie.length===1&&!te&&!$v(e.type);var ve=e.type,ce=e.htmlType,de=e.disabled,xe=e.href,De=e.title,ge=e.target,he=e.onMousedown,me=O.value?"loading":te,Pe=H(H({},u),{},{title:De,disabled:de,class:[N.value,u.class,Ie({},"".concat(o.value,"-icon-only"),ie.length===0&&!!me)],onClick:G,onMousedown:he});de||delete Pe.disabled;var He=te&&!O.value?te:j(W7,{existIcon:!!te,prefixCls:o.value,loading:!!O.value},null),Ke=ie.map(function(Le){return q(Le,A&&z.value)});if(xe!==void 0)return j("a",H(H({},Pe),{},{href:xe,target:ge,ref:S}),[He,Ke]);var Re=j("button",H(H({},Pe),{},{ref:S,type:ce}),[He,Ke]);return $v(ve)?Re:j(H7,{ref:"wave",disabled:!!O.value},{default:function(){return[Re]}})}}});function UI(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yy(t,e,r){return e&&UI(t.prototype,e),r&&UI(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Z7=yy(function t(e){_y(this,t),this.error=new Error("unreachable case: ".concat(JSON.stringify(e)))}),X7=function(){return{prefixCls:String,size:{type:String}}};const fb=jt({compatConfig:{MODE:3},name:"AButtonGroup",props:X7(),setup:function(e,r){var i=r.slots,u=hr("btn-group",e),d=u.prefixCls,m=u.direction,o=ue(function(){var _,C=e.size,T="";switch(C){case"large":T="lg";break;case"small":T="sm";break;case"middle":case void 0:break;default:console.warn(new Z7(C).error)}return _={},Ie(_,"".concat(d.value),!0),Ie(_,"".concat(d.value,"-").concat(T),T),Ie(_,"".concat(d.value,"-rtl"),m.value==="rtl"),_});return function(){var _;return j("div",{class:o.value},[fo((_=i.default)===null||_===void 0?void 0:_.call(i))])}}});Xi.Group=fb;Xi.install=function(t){return t.component(Xi.name,Xi),t.component(fb.name,fb),t};var W3=function(){return{arrow:{type:[Boolean,Object],default:void 0},trigger:{type:[Array,String]},overlay:et.any,visible:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},align:{type:Object},getPopupContainer:Function,prefixCls:String,transitionName:String,placement:String,overlayClassName:String,overlayStyle:{type:Object,default:void 0},forceRender:{type:Boolean,default:void 0},mouseEnterDelay:Number,mouseLeaveDelay:Number,openClassName:String,minOverlayWidthMatchTrigger:{type:Boolean,default:void 0},destroyPopupOnHide:{type:Boolean,default:void 0},onVisibleChange:{type:Function},"onUpdate:visible":{type:Function}}},$0=q3(),Y7=function(){return H(H({},W3()),{},{type:$0.type,size:String,htmlType:$0.htmlType,href:String,disabled:{type:Boolean,default:void 0},prefixCls:String,icon:et.any,title:String,loading:$0.loading,onClick:{type:Function}})},J7={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"};const Q7=J7;function KI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){eK(t,u,r[u])})}return t}function eK(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Pw=function(e,r){var i=KI({},e,r.attrs);return j($r,KI({},i,{icon:Q7}),null)};Pw.displayName="EllipsisOutlined";Pw.inheritAttrs=!1;const Z3=Pw;var tK=["type","disabled","loading","htmlType","class","overlay","trigger","align","visible","onVisibleChange","placement","href","title","icon","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","onClick","onUpdate:visible"],nK=Xi.Group;const Fg=jt({compatConfig:{MODE:3},name:"ADropdownButton",inheritAttrs:!1,__ANT_BUTTON:!0,props:Di(Y7(),{trigger:"hover",placement:"bottomRight",type:"default"}),slots:["icon","leftButton","rightButton","overlay"],setup:function(e,r){var i=r.slots,u=r.attrs,d=r.emit,m=function(P){d("update:visible",P),d("visibleChange",P)},o=hr("dropdown-button",e),_=o.prefixCls,C=o.direction,T=o.getPopupContainer;return function(){var S,P,A=H(H({},e),u),O=A.type,R=O===void 0?"default":O,z=A.disabled,F=A.loading,N=A.htmlType,U=A.class,G=U===void 0?"":U,q=A.overlay,V=q===void 0?(S=i.overlay)===null||S===void 0?void 0:S.call(i):q,Z=A.trigger,Q=A.align,te=A.visible;A.onVisibleChange;var ie=A.placement,ve=ie===void 0?C.value==="rtl"?"bottomLeft":"bottomRight":ie,ce=A.href,de=A.title,xe=A.icon,De=xe===void 0?((P=i.icon)===null||P===void 0?void 0:P.call(i))||j(Z3,null,null):xe,ge=A.mouseEnterDelay,he=A.mouseLeaveDelay,me=A.overlayClassName,Pe=A.overlayStyle,He=A.destroyPopupOnHide,Ke=A.onClick;A["onUpdate:visible"];var Re=Cr(A,tK),Le={align:Q,disabled:z,trigger:z?[]:Z,placement:ve,getPopupContainer:T.value,onVisibleChange:m,mouseEnterDelay:ge,mouseLeaveDelay:he,visible:te,overlayClassName:me,overlayStyle:Pe,destroyPopupOnHide:He},Te=j(Xi,{type:R,disabled:z,loading:F,onClick:Ke,htmlType:N,href:ce,title:de},{default:i.default}),oe=j(Xi,{type:R,icon:De},null);return j(nK,H(H({},Re),{},{class:qt(_.value,G)}),{default:function(){return[i.leftButton?i.leftButton({button:Te}):Te,j(Xu,Le,{default:function(){return[i.rightButton?i.rightButton({button:oe}):oe]},overlay:function(){return V}})]}})}}});var rK={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"};const iK=rK;function GI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){oK(t,u,r[u])})}return t}function oK(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Aw=function(e,r){var i=GI({},e,r.attrs);return j($r,GI({},i,{icon:iK}),null)};Aw.displayName="RightOutlined";Aw.inheritAttrs=!1;const Bg=Aw;var X3=jt({compatConfig:{MODE:3},name:"ADropdown",inheritAttrs:!1,props:Di(W3(),{mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft",trigger:"hover"}),slots:["overlay"],setup:function(e,r){var i=r.slots,u=r.attrs,d=r.emit,m=hr("dropdown",e),o=m.prefixCls,_=m.rootPrefixCls,C=m.direction,T=m.getPopupContainer,S=ue(function(){var R=e.placement,z=R===void 0?"":R,F=e.transitionName;return F!==void 0?F:z.indexOf("top")>=0?"".concat(_.value,"-slide-down"):"".concat(_.value,"-slide-up")}),P=function(){var z,F,N,U=e.overlay||((z=i.overlay)===null||z===void 0?void 0:z.call(i)),G=Array.isArray(U)?U[0]:U;if(!G)return null;var q=G.props||{};Ni(!q.mode||q.mode==="vertical","Dropdown",'mode="'.concat(q.mode,`" is not supported for Dropdown's Menu.`));var V=q.selectable,Z=V===void 0?!1:V,Q=q.expandIcon,te=Q===void 0?(F=G.children)===null||F===void 0||(N=F.expandIcon)===null||N===void 0?void 0:N.call(F):Q,ie=typeof te<"u"&&Co(te)?te:j("span",{class:"".concat(o.value,"-menu-submenu-arrow")},[j(Bg,{class:"".concat(o.value,"-menu-submenu-arrow-icon")},null)]),ve=Co(G)?ui(G,{mode:"vertical",selectable:Z,expandIcon:function(){return ie}}):G;return ve},A=ue(function(){var R=e.placement;if(!R)return C.value==="rtl"?"bottomRight":"bottomLeft";if(R.includes("Center")){var z=R.slice(0,R.indexOf("Center"));return Ni(!R.includes("Center"),"Dropdown","You are using '".concat(R,"' placement in Dropdown, which is deprecated. Try to use '").concat(z,"' instead.")),z}return R}),O=function(z){d("update:visible",z),d("visibleChange",z)};return function(){var R,z,F=e.arrow,N=e.trigger,U=e.disabled,G=e.overlayClassName,q=(R=i.default)===null||R===void 0?void 0:R.call(i)[0],V=ui(q,kr({class:qt(q==null||(z=q.props)===null||z===void 0?void 0:z.class,Ie({},"".concat(o.value,"-rtl"),C.value==="rtl"),"".concat(o.value,"-trigger"))},U?{disabled:U}:{})),Z=qt(G,Ie({},"".concat(o.value,"-rtl"),C.value==="rtl")),Q=U?[]:N,te;Q&&Q.indexOf("contextmenu")!==-1&&(te=!0);var ie=K3({arrowPointAtCenter:On(F)==="object"&&F.pointAtCenter,autoAdjustOverflow:!0}),ve=hi(H(H(H({},e),u),{},{builtinPlacements:ie,overlayClassName:Z,arrow:F,alignPoint:te,prefixCls:o.value,getPopupContainer:T.value,transitionName:S.value,trigger:Q,onVisibleChange:O,placement:A.value}),["overlay","onUpdate:visible"]);return j(V7,ve,{default:function(){return[V]},overlay:P})}}});X3.Button=Fg;const Xu=X3;function aK(t,e,r,i){var u=r?r.call(i,t,e):void 0;if(u!==void 0)return!!u;if(t===e)return!0;if(On(t)!=="object"||!t||On(e)!=="object"||!e)return!1;var d=Object.keys(t),m=Object.keys(e);if(d.length!==m.length)return!1;for(var o=Object.prototype.hasOwnProperty.bind(e),_=0;_<d.length;_++){var C=d[_];if(!o(C))return!1;var T=t[C],S=e[C];if(u=r?r.call(i,T,S,C):void 0,u===!1||u===void 0&&T!==S)return!1}return!0}function Lh(t,e,r,i){return aK(Yn(t),Yn(e),r,i)}var Y3=Symbol("menuContextKey"),J3=function(e){sr(Y3,e)},Nl=function(){return Kn(Y3)},Q3=Symbol("ForceRenderKey"),sK=function(e){sr(Q3,e)},eD=function(){return Kn(Q3,!1)},tD=Symbol("menuFirstLevelContextKey"),nD=function(e){sr(tD,e)},lK=function(){return Kn(tD,!0)},Ng=jt({compatConfig:{MODE:3},name:"MenuContextProvider",inheritAttrs:!1,props:{mode:{type:String,default:void 0},overflowDisabled:{type:Boolean,default:void 0},isRootMenu:{type:Boolean,default:void 0}},setup:function(e,r){var i=r.slots,u=Nl(),d=H({},u);return e.mode!==void 0&&(d.mode=Nr(e,"mode")),e.isRootMenu!==void 0&&(d.isRootMenu=Nr(e,"isRootMenu")),e.overflowDisabled!==void 0&&(d.overflowDisabled=Nr(e,"overflowDisabled")),J3(d),function(){var m;return(m=i.default)===null||m===void 0?void 0:m.call(i)}}});const uK=J3;function rD(t,e,r,i){for(var u=t.length,d=r+(i?1:-1);i?d--:++d<u;)if(e(t[d],d,t))return d;return-1}function cK(t){return t!==t}function dK(t,e,r){for(var i=r-1,u=t.length;++i<u;)if(t[i]===e)return i;return-1}function fK(t,e,r){return e===e?dK(t,e,r):rD(t,cK,r)}function iD(t,e){var r=t==null?0:t.length;return!!r&&fK(t,e,0)>-1}function oD(t,e,r){for(var i=-1,u=t==null?0:t.length;++i<u;)if(r(e,t[i]))return!0;return!1}function hK(){}var pK=1/0,mK=Id&&1/fw(new Id([,-0]))[1]==pK?function(t){return new Id(t)}:hK;const vK=mK;var gK=200;function yK(t,e,r){var i=-1,u=iD,d=t.length,m=!0,o=[],_=o;if(r)m=!1,u=oD;else if(d>=gK){var C=e?null:vK(t);if(C)return fw(C);m=!1,u=Mg,_=new $d}else _=e?[]:o;e:for(;++i<d;){var T=t[i],S=e?e(T):T;if(T=r||T!==0?T:0,m&&S===S){for(var P=_.length;P--;)if(_[P]===S)continue e;e&&_.push(S),o.push(T)}else u(_,S,r)||(_!==o&&_.push(S),o.push(T))}return o}function j0(t){return t&&t.length?yK(t):[]}var aD=Symbol("siderCollapsed"),sD=Symbol("siderHookProvider"),jv="$$__vc-menu-more__key",lD=Symbol("KeyPathContext"),Mw=function(){return Kn(lD,{parentEventKeys:ue(function(){return[]}),parentKeys:ue(function(){return[]}),parentInfo:{}})},_K=function(e,r,i){var u=Mw(),d=u.parentEventKeys,m=u.parentKeys,o=ue(function(){return[].concat(bn(d.value),[e])}),_=ue(function(){return[].concat(bn(m.value),[r])});return sr(lD,{parentEventKeys:o,parentKeys:_,parentInfo:i}),_},uD=Symbol("measure"),HI=jt({compatConfig:{MODE:3},setup:function(e,r){var i=r.slots;return sr(uD,!0),function(){var u;return(u=i.default)===null||u===void 0?void 0:u.call(i)}}}),kw=function(){return Kn(uD,!1)};const xK=_K;function cD(t){var e=Nl(),r=e.mode,i=e.rtl,u=e.inlineIndent;return ue(function(){return r.value!=="inline"?null:i.value?{paddingRight:"".concat(t.value*u.value,"px")}:{paddingLeft:"".concat(t.value*u.value,"px")}})}var bK=0,wK=function(){return{id:String,role:String,disabled:Boolean,danger:Boolean,title:{type:[String,Boolean],default:void 0},icon:et.any,onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function}};const Tp=jt({compatConfig:{MODE:3},name:"AMenuItem",inheritAttrs:!1,props:wK(),slots:["icon","title"],setup:function(e,r){var i=r.slots,u=r.emit,d=r.attrs,m=Ji(),o=kw(),_=On(m.vnode.key)==="symbol"?String(m.vnode.key):m.vnode.key;Ni(On(m.vnode.key)!=="symbol","MenuItem",'MenuItem `:key="'.concat(String(_),'"` not support Symbol type'));var C="menu_item_".concat(++bK,"_$$_").concat(_),T=Mw(),S=T.parentEventKeys,P=T.parentKeys,A=Nl(),O=A.prefixCls,R=A.activeKeys,z=A.disabled,F=A.changeActiveKeys,N=A.rtl,U=A.inlineCollapsed,G=A.siderCollapsed,q=A.onItemClick,V=A.selectedKeys,Z=A.registerMenuInfo,Q=A.unRegisterMenuInfo,te=lK(),ie=qe(!1),ve=ue(function(){return[].concat(bn(P.value),[_])}),ce={eventKey:C,key:_,parentEventKeys:S,parentKeys:P,isLeaf:!0};Z(C,ce),Er(function(){Q(C)}),an(R,function(){ie.value=!!R.value.find(function(Te){return Te===_})},{immediate:!0});var de=ue(function(){return z.value||e.disabled}),xe=ue(function(){return V.value.includes(_)}),De=ue(function(){var Te,oe="".concat(O.value,"-item");return Te={},Ie(Te,"".concat(oe),!0),Ie(Te,"".concat(oe,"-danger"),e.danger),Ie(Te,"".concat(oe,"-active"),ie.value),Ie(Te,"".concat(oe,"-selected"),xe.value),Ie(Te,"".concat(oe,"-disabled"),de.value),Te}),ge=function(oe){return{key:_,eventKey:C,keyPath:ve.value,eventKeyPath:[].concat(bn(S.value),[C]),domEvent:oe,item:H(H({},e),d)}},he=function(oe){if(!de.value){var ze=ge(oe);u("click",oe),q(ze)}},me=function(oe){de.value||(F(ve.value),u("mouseenter",oe))},Pe=function(oe){de.value||(F([]),u("mouseleave",oe))},He=function(oe){if(u("keydown",oe),oe.which===Fn.ENTER){var ze=ge(oe);u("click",oe),q(ze)}},Ke=function(oe){F(ve.value),u("focus",oe)},Re=function(oe,ze){var Fe=j("span",{class:"".concat(O.value,"-title-content")},[ze]);return(!oe||Co(ze)&&ze.type==="span")&&ze&&U.value&&te&&typeof ze=="string"?j("div",{class:"".concat(O.value,"-inline-collapsed-noicon")},[ze.charAt(0)]):Fe},Le=cD(ue(function(){return ve.value.length}));return function(){var Te,oe,ze,Fe;if(o)return null;var lt=(Te=e.title)!==null&&Te!==void 0?Te:(oe=i.title)===null||oe===void 0?void 0:oe.call(i),vt=fo((ze=i.default)===null||ze===void 0?void 0:ze.call(i)),kt=vt.length,It=lt;typeof lt>"u"?It=te&&kt?vt:"":lt===!1&&(It="");var se={title:It};!G.value&&!U.value&&(se.title=null,se.visible=!1);var ae={};e.role==="option"&&(ae["aria-selected"]=xe.value);var Be=mp(i,e,"icon");return j(G3,H(H({},se),{},{placement:N.value?"left":"right",overlayClassName:"".concat(O.value,"-inline-collapsed-tooltip")}),{default:function(){return[j(Pd.Item,H(H(H({component:"li"},d),{},{id:e.id,style:H(H({},d.style||{}),Le.value),class:[De.value,(Fe={},Ie(Fe,"".concat(d.class),!!d.class),Ie(Fe,"".concat(O.value,"-item-only-child"),(Be?kt+1:kt)===1),Fe)],role:e.role||"menuitem",tabindex:e.disabled?null:-1,"data-menu-id":_,"aria-disabled":e.disabled},ae),{},{onMouseenter:me,onMouseleave:Pe,onClick:he,onKeydown:He,onFocus:Ke,title:typeof lt=="string"?lt:void 0}),{default:function(){return[ui(Be,{class:"".concat(O.value,"-item-icon")},!1),Re(Be,vt)]}})]}})}}});var Ol={adjustX:1,adjustY:1},CK={topLeft:{points:["bl","tl"],overflow:Ol,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Ol,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Ol,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Ol,offset:[4,0]}},SK={topLeft:{points:["bl","tl"],overflow:Ol,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Ol,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Ol,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Ol,offset:[4,0]}},TK={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};const qI=jt({compatConfig:{MODE:3},name:"PopupTrigger",inheritAttrs:!1,props:{prefixCls:String,mode:String,visible:Boolean,popupClassName:String,popupOffset:Array,disabled:Boolean,onVisibleChange:Function},slots:["popup"],emits:["visibleChange"],setup:function(e,r){var i=r.slots,u=r.emit,d=qe(!1),m=Nl(),o=m.getPopupContainer,_=m.rtl,C=m.subMenuOpenDelay,T=m.subMenuCloseDelay,S=m.builtinPlacements,P=m.triggerSubMenuAction,A=m.isRootMenu,O=m.forceSubMenuRender,R=m.motion,z=m.defaultMotions,F=eD(),N=ue(function(){return _.value?H(H({},SK),S.value):H(H({},CK),S.value)}),U=ue(function(){return TK[e.mode]}),G=qe();an(function(){return e.visible},function(Z){fr.cancel(G.value),G.value=fr(function(){d.value=Z})},{immediate:!0}),Er(function(){fr.cancel(G.value)});var q=function(Q){u("visibleChange",Q)},V=ue(function(){var Z,Q,te=R.value||((Z=z.value)===null||Z===void 0?void 0:Z[e.mode])||((Q=z.value)===null||Q===void 0?void 0:Q.other),ie=typeof te=="function"?te():te;return ie?oy(ie.name,{css:!0}):void 0});return function(){var Z=e.prefixCls,Q=e.popupClassName,te=e.mode,ie=e.popupOffset,ve=e.disabled;return j(py,{prefixCls:Z,popupClassName:qt("".concat(Z,"-popup"),Ie({},"".concat(Z,"-rtl"),_.value),Q),stretch:te==="horizontal"?"minWidth":null,getPopupContainer:A.value?o.value:function(ce){return ce.parentNode},builtinPlacements:N.value,popupPlacement:U.value,popupVisible:d.value,popupAlign:ie&&{offset:ie},action:ve?[]:[P.value],mouseEnterDelay:C.value,mouseLeaveDelay:T.value,onPopupVisibleChange:q,forceRender:F||O.value,popupAnimation:V.value},{popup:i.popup,default:i.default})}}});var dD=function(e,r){var i,u=r.slots,d=r.attrs,m=Nl(),o=m.prefixCls,_=m.mode;return j("ul",H(H({},d),{},{class:qt(o.value,"".concat(o.value,"-sub"),"".concat(o.value,"-").concat(_.value==="inline"?"inline":"vertical")),"data-menu-list":!0}),[(i=u.default)===null||i===void 0?void 0:i.call(u)])};dD.displayName="SubMenuList";const fD=dD,EK=jt({compatConfig:{MODE:3},name:"InlineSubMenuList",inheritAttrs:!1,props:{id:String,open:Boolean,keyPath:Array},setup:function(e,r){var i=r.slots,u=ue(function(){return"inline"}),d=Nl(),m=d.motion,o=d.mode,_=d.defaultMotions,C=ue(function(){return o.value===u.value}),T=qe(!C.value),S=ue(function(){return C.value?e.open:!1});an(o,function(){C.value&&(T.value=!1)},{flush:"post"});var P=ue(function(){var A,O,R=m.value||((A=_.value)===null||A===void 0?void 0:A[u.value])||((O=_.value)===null||O===void 0?void 0:O.other),z=typeof R=="function"?R():R;return H(H({},z),{},{appear:e.keyPath.length<=1})});return function(){var A;return T.value?null:j(Ng,{mode:u.value},{default:function(){return[j(os,P.value,{default:function(){return[uo(j(fD,{id:e.id},{default:function(){return[(A=i.default)===null||A===void 0?void 0:A.call(i)]}}),[[Rp,S.value]])]}})]}})}}});var WI=0,IK=function(){return{icon:et.any,title:et.any,disabled:Boolean,level:Number,popupClassName:String,popupOffset:Array,internalPopupClose:Boolean,eventKey:String,expandIcon:Function,onMouseenter:Function,onMouseleave:Function,onTitleClick:Function}};const Vd=jt({compatConfig:{MODE:3},name:"ASubMenu",inheritAttrs:!1,props:IK(),slots:["icon","title","expandIcon"],setup:function(e,r){var i,u,d=r.slots,m=r.attrs,o=r.emit;nD(!1);var _=kw(),C=Ji(),T=On(C.vnode.key)==="symbol"?String(C.vnode.key):C.vnode.key;Ni(On(C.vnode.key)!=="symbol","SubMenu",'SubMenu `:key="'.concat(String(T),'"` not support Symbol type'));var S=Fx(T)?T:"sub_menu_".concat(++WI,"_$$_not_set_key"),P=(i=e.eventKey)!==null&&i!==void 0?i:Fx(T)?"sub_menu_".concat(++WI,"_$$_").concat(T):S,A=Mw(),O=A.parentEventKeys,R=A.parentInfo,z=A.parentKeys,F=ue(function(){return[].concat(bn(z.value),[S])}),N=qe([]),U={eventKey:P,key:S,parentEventKeys:O,childrenEventKeys:N,parentKeys:z};(u=R.childrenEventKeys)===null||u===void 0||u.value.push(P),Er(function(){if(R.childrenEventKeys){var pt;R.childrenEventKeys.value=(pt=R.childrenEventKeys)===null||pt===void 0?void 0:pt.value.filter(function(dt){return dt!=P})}}),xK(P,S,U);var G=Nl(),q=G.prefixCls,V=G.activeKeys,Z=G.disabled,Q=G.changeActiveKeys,te=G.mode,ie=G.inlineCollapsed,ve=G.antdMenuTheme,ce=G.openKeys,de=G.overflowDisabled,xe=G.onOpenChange,De=G.registerMenuInfo,ge=G.unRegisterMenuInfo,he=G.selectedSubMenuKeys,me=G.expandIcon,Pe=T!=null,He=!_&&(eD()||!Pe);sK(He),(_&&Pe||!_&&!Pe||He)&&(De(P,U),Er(function(){ge(P)}));var Ke=ue(function(){return"".concat(q.value,"-submenu")}),Re=ue(function(){return Z.value||e.disabled}),Le=qe(),Te=qe(),oe=ue(function(){return ce.value.includes(S)}),ze=ue(function(){return!de.value&&oe.value}),Fe=ue(function(){return he.value.includes(S)}),lt=qe(!1);an(V,function(){lt.value=!!V.value.find(function(pt){return pt===S})},{immediate:!0});var vt=function(dt){Re.value||(o("titleClick",dt,S),te.value==="inline"&&xe(S,!oe.value))},kt=function(dt){Re.value||(Q(F.value),o("mouseenter",dt))},It=function(dt){Re.value||(Q([]),o("mouseleave",dt))},se=cD(ue(function(){return F.value.length})),ae=function(dt){te.value!=="inline"&&xe(S,dt)},Be=function(){Q(F.value)},st=P&&"".concat(P,"-popup"),ut=ue(function(){return qt(q.value,"".concat(q.value,"-").concat(ve.value),e.popupClassName)}),bt=function(dt,Ot){if(!Ot)return ie.value&&!z.value.length&&dt&&typeof dt=="string"?j("div",{class:"".concat(q.value,"-inline-collapsed-noicon")},[dt.charAt(0)]):j("span",{class:"".concat(q.value,"-title-content")},[dt]);var Kt=Co(dt)&&dt.type==="span";return j(Hn,null,[ui(Ot,{class:"".concat(q.value,"-item-icon")},!1),Kt?dt:j("span",{class:"".concat(q.value,"-title-content")},[dt])])},At=ue(function(){return te.value!=="inline"&&F.value.length>1?"vertical":te.value}),_t=ue(function(){return te.value==="horizontal"?"vertical":te.value}),nt=ue(function(){return At.value==="horizontal"?"vertical":At.value}),tt=function(){var dt=Ke.value,Ot=mp(d,e,"icon"),Kt=e.expandIcon||d.expandIcon||me.value,cn=bt(mp(d,e,"title"),Ot);return j("div",{style:se.value,class:"".concat(dt,"-title"),tabindex:Re.value?null:-1,ref:Le,title:typeof cn=="string"?cn:null,"data-menu-id":S,"aria-expanded":ze.value,"aria-haspopup":!0,"aria-controls":st,"aria-disabled":Re.value,onClick:vt,onFocus:Be},[cn,te.value!=="horizontal"&&Kt?Kt(H(H({},e),{},{isOpen:ze.value})):j("i",{class:"".concat(dt,"-arrow")},null)])};return function(){var pt;if(_){var dt;return Pe?(dt=d.default)===null||dt===void 0?void 0:dt.call(d):null}var Ot=Ke.value,Kt=function(){return null};return!de.value&&te.value!=="inline"?Kt=function(){return j(qI,{mode:At.value,prefixCls:Ot,visible:!e.internalPopupClose&&ze.value,popupClassName:ut.value,popupOffset:e.popupOffset,disabled:Re.value,onVisibleChange:ae},{default:function(){return[tt()]},popup:function(){return j(Ng,{mode:nt.value,isRootMenu:!1},{default:function(){return[j(fD,{id:st,ref:Te},{default:d.default})]}})}})}:Kt=function(){return j(qI,null,{default:tt})},j(Ng,{mode:_t.value},{default:function(){return[j(Pd.Item,H(H({component:"li"},m),{},{role:"none",class:qt(Ot,"".concat(Ot,"-").concat(te.value),m.class,(pt={},Ie(pt,"".concat(Ot,"-open"),ze.value),Ie(pt,"".concat(Ot,"-active"),lt.value),Ie(pt,"".concat(Ot,"-selected"),Fe.value),Ie(pt,"".concat(Ot,"-disabled"),Re.value),pt)),onMouseenter:kt,onMouseleave:It,"data-submenu-id":S}),{default:function(){return j(Hn,null,[Kt(),!de.value&&j(EK,{id:st,open:ze.value,keyPath:F.value},{default:d.default})])}})]}})}}});function hD(t,e){if(t.classList)return t.classList.contains(e);var r=t.className;return" ".concat(r," ").indexOf(" ".concat(e," "))>-1}function ZI(t,e){t.classList?t.classList.add(e):hD(t,e)||(t.className="".concat(t.className," ").concat(e))}function XI(t,e){if(t.classList)t.classList.remove(e);else if(hD(t,e)){var r=t.className;t.className=" ".concat(r," ").replace(" ".concat(e," ")," ")}}var PK=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant-motion-collapse",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{name:e,appear:r,css:!0,onBeforeEnter:function(u){u.style.height="0px",u.style.opacity="0",ZI(u,e)},onEnter:function(u){gr(function(){u.style.height="".concat(u.scrollHeight,"px"),u.style.opacity="1"})},onAfterEnter:function(u){u&&(XI(u,e),u.style.height=null,u.style.opacity=null)},onBeforeLeave:function(u){ZI(u,e),u.style.height="".concat(u.offsetHeight,"px"),u.style.opacity=null},onLeave:function(u){setTimeout(function(){u.style.height="0px",u.style.opacity="0"})},onAfterLeave:function(u){u&&(XI(u,e),u.style&&(u.style.height=null,u.style.opacity=null))}}};const Ow=PK;var AK=function(){return{id:String,prefixCls:String,disabled:Boolean,inlineCollapsed:Boolean,disabledOverflow:Boolean,forceSubMenuRender:Boolean,openKeys:Array,selectedKeys:Array,activeKey:String,selectable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},motion:Object,theme:{type:String,default:"light"},mode:{type:String,default:"vertical"},inlineIndent:{type:Number,default:24},subMenuOpenDelay:{type:Number,default:.1},subMenuCloseDelay:{type:Number,default:.1},builtinPlacements:{type:Object},triggerSubMenuAction:{type:String,default:"hover"},getPopupContainer:Function,expandIcon:Function,onOpenChange:Function,onSelect:Function,onDeselect:Function,onClick:[Function,Array],onFocus:Function,onBlur:Function,onMousedown:Function,"onUpdate:openKeys":Function,"onUpdate:selectedKeys":Function,"onUpdate:activeKey":Function}},YI=[];const jo=jt({compatConfig:{MODE:3},name:"AMenu",inheritAttrs:!1,props:AK(),slots:["expandIcon","overflowedIndicator"],setup:function(e,r){var i=r.slots,u=r.emit,d=r.attrs,m=hr("menu",e),o=m.prefixCls,_=m.direction,C=m.getPrefixCls,T=qe({}),S=Kn(aD,qe(void 0)),P=ue(function(){return S.value!==void 0?S.value:e.inlineCollapsed}),A=qe(!1);wr(function(){A.value=!0}),vr(function(){Ni(!(e.inlineCollapsed===!0&&e.mode!=="inline"),"Menu","`inlineCollapsed` should only be used when `mode` is inline."),Ni(!(S.value!==void 0&&e.inlineCollapsed===!0),"Menu","`inlineCollapsed` not control Menu under Sider. Should set `collapsed` on Sider instead.")});var O=qe([]),R=qe([]),z=qe({});an(T,function(){for(var Te={},oe=0,ze=Object.values(T.value);oe<ze.length;oe++){var Fe=ze[oe];Te[Fe.key]=Fe}z.value=Te},{flush:"post"}),vr(function(){if(e.activeKey!==void 0){var Te=[],oe=e.activeKey?z.value[e.activeKey]:void 0;oe&&e.activeKey!==void 0?Te=j0([].concat(gi(oe.parentKeys),e.activeKey)):Te=[],Lh(O.value,Te)||(O.value=Te)}}),an(function(){return e.selectedKeys},function(Te){Te&&(R.value=Te.slice())},{immediate:!0,deep:!0});var F=qe([]);an([z,R],function(){var Te=[];R.value.forEach(function(oe){var ze=z.value[oe];ze&&(Te=Te.concat(gi(ze.parentKeys)))}),Te=j0(Te),Lh(F.value,Te)||(F.value=Te)},{immediate:!0});var N=function(oe){if(!!e.selectable){var ze=oe.key,Fe=R.value.includes(ze),lt;e.multiple?Fe?lt=R.value.filter(function(kt){return kt!==ze}):lt=[].concat(bn(R.value),[ze]):lt=[ze];var vt=H(H({},oe),{},{selectedKeys:lt});Lh(lt,R.value)||(e.selectedKeys===void 0&&(R.value=lt),u("update:selectedKeys",lt),Fe&&e.multiple?u("deselect",vt):u("select",vt)),Q.value!=="inline"&&!e.multiple&&U.value.length&&ve(YI)}},U=qe([]);an(function(){return e.openKeys},function(){var Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:U.value;Lh(U.value,Te)||(U.value=Te.slice())},{immediate:!0,deep:!0});var G,q=function(oe){clearTimeout(G),G=setTimeout(function(){e.activeKey===void 0&&(O.value=oe),u("update:activeKey",oe[oe.length-1])})},V=ue(function(){return!!e.disabled}),Z=ue(function(){return _.value==="rtl"}),Q=qe("vertical"),te=qe(!1);vr(function(){(e.mode==="inline"||e.mode==="vertical")&&P.value?(Q.value="vertical",te.value=P.value):(Q.value=e.mode,te.value=!1)});var ie=ue(function(){return Q.value==="inline"}),ve=function(oe){U.value=oe,u("update:openKeys",oe),u("openChange",oe)},ce=qe(U.value),de=qe(!1);an(U,function(){ie.value&&(ce.value=U.value)},{immediate:!0}),an(ie,function(){if(!de.value){de.value=!0;return}ie.value?U.value=ce.value:ve(YI)},{immediate:!0});var xe=ue(function(){var Te;return Te={},Ie(Te,"".concat(o.value),!0),Ie(Te,"".concat(o.value,"-root"),!0),Ie(Te,"".concat(o.value,"-").concat(Q.value),!0),Ie(Te,"".concat(o.value,"-inline-collapsed"),te.value),Ie(Te,"".concat(o.value,"-rtl"),Z.value),Ie(Te,"".concat(o.value,"-").concat(e.theme),!0),Te}),De=ue(function(){return C()}),ge=ue(function(){return{horizontal:{name:"".concat(De.value,"-slide-up")},inline:Ow,other:{name:"".concat(De.value,"-zoom-big")}}});nD(!0);var he=function Te(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ze=[],Fe=T.value;return oe.forEach(function(lt){var vt=Fe[lt],kt=vt.key,It=vt.childrenEventKeys;ze.push.apply(ze,[kt].concat(bn(Te(gi(It)))))}),ze},me=function(oe){u("click",oe),N(oe)},Pe=function(oe,ze){var Fe=z.value[oe].childrenEventKeys,lt=U.value.filter(function(kt){return kt!==oe});if(ze)lt.push(oe);else if(Q.value!=="inline"){var vt=he(gi(Fe));lt=j0(lt.filter(function(kt){return!vt.includes(kt)}))}Lh(U,lt)||ve(lt)},He=function(oe,ze){T.value=H(H({},T.value),{},Ie({},oe,ze))},Ke=function(oe){delete T.value[oe],T.value=H({},T.value)},Re=qe(0),Le=ue(function(){return e.expandIcon||i.expandIcon?function(Te){var oe=e.expandIcon||i.expandIcon;return oe=typeof oe=="function"?oe(Te):oe,ui(oe,{class:"".concat(o.value,"-submenu-expand-icon")},!1)}:null});return uK({store:T,prefixCls:o,activeKeys:O,openKeys:U,selectedKeys:R,changeActiveKeys:q,disabled:V,rtl:Z,mode:Q,inlineIndent:ue(function(){return e.inlineIndent}),subMenuCloseDelay:ue(function(){return e.subMenuCloseDelay}),subMenuOpenDelay:ue(function(){return e.subMenuOpenDelay}),builtinPlacements:ue(function(){return e.builtinPlacements}),triggerSubMenuAction:ue(function(){return e.triggerSubMenuAction}),getPopupContainer:ue(function(){return e.getPopupContainer}),inlineCollapsed:te,antdMenuTheme:ue(function(){return e.theme}),siderCollapsed:S,defaultMotions:ue(function(){return A.value?ge.value:null}),motion:ue(function(){return A.value?e.motion:null}),overflowDisabled:qe(void 0),onOpenChange:Pe,onItemClick:me,registerMenuInfo:He,unRegisterMenuInfo:Ke,selectedSubMenuKeys:F,isRootMenu:qe(!0),expandIcon:Le,forceSubMenuRender:ue(function(){return e.forceSubMenuRender})}),function(){var Te,oe,ze=fo((Te=i.default)===null||Te===void 0?void 0:Te.call(i)),Fe=Re.value>=ze.length-1||Q.value!=="horizontal"||e.disabledOverflow,lt=Q.value!=="horizontal"||e.disabledOverflow?ze:ze.map(function(kt,It){return j(Ng,{key:kt.key,overflowDisabled:It>Re.value},{default:function(){return kt}})}),vt=((oe=i.overflowedIndicator)===null||oe===void 0?void 0:oe.call(i))||j(Z3,null,null);return j(Pd,H(H({},d),{},{onMousedown:e.onMousedown,prefixCls:"".concat(o.value,"-overflow"),component:"ul",itemComponent:Tp,class:[xe.value,d.class],role:"menu",id:e.id,data:lt,renderRawItem:function(It){return It},renderRawRest:function(It){var se=It.length,ae=se?ze.slice(-se):null;return j(Hn,null,[j(Vd,{eventKey:jv,key:jv,title:vt,disabled:Fe,internalPopupClose:se===0},{default:function(){return ae}}),j(HI,null,{default:function(){return[j(Vd,{eventKey:jv,key:jv,title:vt,disabled:Fe,internalPopupClose:se===0},{default:function(){return ae}})]}})])},maxCount:Q.value!=="horizontal"||e.disabledOverflow?Pd.INVALIDATE:Pd.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(It){Re.value=It}}),{default:function(){return[j(L1,{to:"body"},{default:function(){return[j("div",{style:{display:"none"},"aria-hidden":!0},[j(HI,null,{default:function(){return[lt]}})])]}})]}})}}});var MK=function(){return{title:et.any}};const hb=jt({compatConfig:{MODE:3},name:"AMenuItemGroup",inheritAttrs:!1,props:MK(),slots:["title"],setup:function(e,r){var i=r.slots,u=r.attrs,d=Nl(),m=d.prefixCls,o=ue(function(){return"".concat(m.value,"-item-group")}),_=kw();return function(){var C,T;return _?(C=i.default)===null||C===void 0?void 0:C.call(i):j("li",H(H({},u),{},{onClick:function(P){return P.stopPropagation()},class:o.value}),[j("div",{title:typeof e.title=="string"?e.title:void 0,class:"".concat(o.value,"-title")},[mp(i,e,"title")]),j("ul",{class:"".concat(o.value,"-list")},[(T=i.default)===null||T===void 0?void 0:T.call(i)])])}}});var kK=function(){return{prefixCls:String,dashed:Boolean}};const pb=jt({compatConfig:{MODE:3},name:"AMenuDivider",props:kK(),setup:function(e){var r=hr("menu",e),i=r.prefixCls,u=ue(function(){var d;return d={},Ie(d,"".concat(i.value,"-item-divider"),!0),Ie(d,"".concat(i.value,"-item-divider-dashed"),!!e.dashed),d});return function(){return j("li",{class:u.value},null)}}});jo.install=function(t){return t.component(jo.name,jo),t.component(Tp.name,Tp),t.component(Vd.name,Vd),t.component(pb.name,pb),t.component(hb.name,hb),t};jo.Item=Tp;jo.Divider=pb;jo.SubMenu=Vd;jo.ItemGroup=hb;function xy(t,e){for(var r=-1,i=t==null?0:t.length,u=Array(i);++r<i;)u[r]=e(t[r],r,t);return u}var OK="[object Symbol]";function by(t){return typeof t=="symbol"||ts(t)&&rc(t)==OK}var DK=1/0,JI=ia?ia.prototype:void 0,QI=JI?JI.toString:void 0;function pD(t){if(typeof t=="string")return t;if(ba(t))return xy(t,pD)+"";if(by(t))return QI?QI.call(t):"";var e=t+"";return e=="0"&&1/t==-DK?"-0":e}function RK(t,e,r){var i=-1,u=t.length;e<0&&(e=-e>u?0:u+e),r=r>u?u:r,r<0&&(r+=u),u=e>r?0:r-e>>>0,e>>>=0;for(var d=Array(u);++i<u;)d[i]=t[i+e];return d}function zK(t){return function(e){return e==null?void 0:e[t]}}var LK=/\s/;function FK(t){for(var e=t.length;e--&&LK.test(t.charAt(e)););return e}var BK=/^\s+/;function NK(t){return t&&t.slice(0,FK(t)+1).replace(BK,"")}var eP=0/0,$K=/^[-+]0x[0-9a-f]+$/i,jK=/^0b[01]+$/i,VK=/^0o[0-7]+$/i,UK=parseInt;function mb(t){if(typeof t=="number")return t;if(by(t))return eP;if($s(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$s(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=NK(t);var r=jK.test(t);return r||VK.test(t)?UK(t.slice(2),r?2:8):$K.test(t)?eP:+t}var tP=1/0,KK=17976931348623157e292;function GK(t){if(!t)return t===0?t:0;if(t=mb(t),t===tP||t===-tP){var e=t<0?-1:1;return e*KK}return t===t?t:0}function HK(t){var e=GK(t),r=e%1;return e===e?r?e-r:e:0}function qK(t){return t==null?"":pD(t)}var WK=["prefixCls","name","id","type","disabled","readonly","tabindex","autofocus","value","required"],ZK={prefixCls:String,name:String,id:String,type:String,defaultChecked:{type:[Boolean,Number],default:void 0},checked:{type:[Boolean,Number],default:void 0},disabled:Boolean,tabindex:{type:[Number,String]},readonly:Boolean,autofocus:Boolean,value:et.any,required:Boolean};const mD=jt({compatConfig:{MODE:3},name:"Checkbox",inheritAttrs:!1,props:Di(ZK,{prefixCls:"rc-checkbox",type:"checkbox",defaultChecked:!1}),emits:["click","change"],setup:function(e,r){var i=r.attrs,u=r.emit,d=r.expose,m=qe(e.checked===void 0?e.defaultChecked:e.checked),o=qe();an(function(){return e.checked},function(){m.value=e.checked}),d({focus:function(){var P;(P=o.value)===null||P===void 0||P.focus()},blur:function(){var P;(P=o.value)===null||P===void 0||P.blur()}});var _=qe(),C=function(P){if(!e.disabled){e.checked===void 0&&(m.value=P.target.checked),P.shiftKey=_.value;var A={target:H(H({},e),{},{checked:P.target.checked}),stopPropagation:function(){P.stopPropagation()},preventDefault:function(){P.preventDefault()},nativeEvent:P};e.checked!==void 0&&(o.value.checked=!!e.checked),u("change",A),_.value=!1}},T=function(P){u("click",P),_.value=P.shiftKey};return function(){var S,P=e.prefixCls,A=e.name,O=e.id,R=e.type,z=e.disabled,F=e.readonly,N=e.tabindex,U=e.autofocus,G=e.value,q=e.required,V=Cr(e,WK),Z=i.class,Q=i.onFocus,te=i.onBlur,ie=i.onKeydown,ve=i.onKeypress,ce=i.onKeyup,de=H(H({},V),i),xe=Object.keys(de).reduce(function(he,me){return(me.substr(0,5)==="aria-"||me.substr(0,5)==="data-"||me==="role")&&(he[me]=de[me]),he},{}),De=qt(P,Z,(S={},Ie(S,"".concat(P,"-checked"),m.value),Ie(S,"".concat(P,"-disabled"),z),S)),ge=H(H({name:A,id:O,type:R,readonly:F,disabled:z,tabindex:N,class:"".concat(P,"-input"),checked:!!m.value,autofocus:U,value:G},xe),{},{onChange:C,onClick:T,onFocus:Q,onBlur:te,onKeydown:ie,onKeypress:ve,onKeyup:ce,required:q});return j("span",{class:De},[j("input",H({ref:o},ge),null),j("span",{class:"".concat(P,"-inner")},null)])}}});var XK=["prefixCls","id"],vD=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:et.any,name:String,id:String,autofocus:{type:Boolean,default:void 0},onChange:Function,onFocus:Function,onBlur:Function,onClick:Function,"onUpdate:checked":Function,"onUpdate:value":Function}};const bo=jt({compatConfig:{MODE:3},name:"ARadio",props:vD(),setup:function(e,r){var i=r.emit,u=r.expose,d=r.slots,m=Ks(),o=qe(),_=Kn("radioGroupContext",void 0),C=hr("radio",e),T=C.prefixCls,S=C.direction,P=function(){o.value.focus()},A=function(){o.value.blur()};u({focus:P,blur:A});var O=function(F){var N=F.target.checked;i("update:checked",N),i("update:value",N),i("change",F),m.onFieldChange()},R=function(F){i("change",F),_&&_.onRadioChange&&_.onRadioChange(F)};return function(){var z,F=_;e.prefixCls;var N=e.id,U=N===void 0?m.id.value:N,G=Cr(e,XK),q=H({prefixCls:T.value,id:U},hi(G,["onUpdate:checked","onUpdate:value"]));F?(q.name=F.props.name,q.onChange=R,q.checked=e.value===F.stateValue.value,q.disabled=e.disabled||F.props.disabled):q.onChange=O;var V=qt((z={},Ie(z,"".concat(T.value,"-wrapper"),!0),Ie(z,"".concat(T.value,"-wrapper-checked"),q.checked),Ie(z,"".concat(T.value,"-wrapper-disabled"),q.disabled),Ie(z,"".concat(T.value,"-wrapper-rtl"),S.value==="rtl"),z));return j("label",{class:V},[j(mD,H(H({},q),{},{type:"radio",ref:o}),null),d.default&&j("span",null,[d.default()])])}}});var YK=Yi("large","default","small"),JK=function(){return{prefixCls:String,value:et.any,size:et.oneOf(YK),options:{type:Array},disabled:{type:Boolean,default:void 0},name:String,buttonStyle:{type:String,default:"outline"},id:String,optionType:{type:String,default:"default"},onChange:Function,"onUpdate:value":Function}};const QK=jt({compatConfig:{MODE:3},name:"ARadioGroup",props:JK(),setup:function(e,r){var i=r.slots,u=r.emit,d=Ks(),m=hr("radio",e),o=m.prefixCls,_=m.direction,C=m.size,T=qe(e.value),S=qe(!1);an(function(){return e.value},function(A){T.value=A,S.value=!1});var P=function(O){var R=T.value,z=O.target.value;"value"in e||(T.value=z),!S.value&&z!==R&&(S.value=!0,u("update:value",z),u("change",O),d.onFieldChange()),gr(function(){S.value=!1})};return sr("radioGroupContext",{onRadioChange:P,stateValue:T,props:e}),function(){var A,O=e.options,R=e.optionType,z=e.buttonStyle,F=e.id,N=F===void 0?d.id.value:F,U="".concat(o.value,"-group"),G=qt(U,"".concat(U,"-").concat(z),(A={},Ie(A,"".concat(U,"-").concat(C.value),C.value),Ie(A,"".concat(U,"-rtl"),_.value==="rtl"),A)),q=null;if(O&&O.length>0){var V=R==="button"?"".concat(o.value,"-button"):o.value;q=O.map(function(Q){if(typeof Q=="string"||typeof Q=="number")return j(bo,{key:Q,prefixCls:V,disabled:e.disabled,value:Q,checked:T.value===Q},{default:function(){return[Q]}});var te=Q.value,ie=Q.disabled,ve=Q.label;return j(bo,{key:"radio-group-value-options-".concat(te),prefixCls:V,disabled:ie||e.disabled,value:te,checked:T.value===te},{default:function(){return[ve]}})})}else{var Z;q=(Z=i.default)===null||Z===void 0?void 0:Z.call(i)}return j("div",{class:G,id:N},[q])}}}),eG=jt({compatConfig:{MODE:3},name:"ARadioButton",props:vD(),setup:function(e,r){var i=r.slots,u=hr("radio-button",e),d=u.prefixCls,m=Kn("radioGroupContext",void 0);return function(){var o,_=H(H({},e),{},{prefixCls:d.value});return m&&(_.onChange=m.onRadioChange,_.checked=_.value===m.stateValue.value,_.disabled=_.disabled||m.props.disabled),j(bo,_,{default:function(){return[(o=i.default)===null||o===void 0?void 0:o.call(i)]}})}}});bo.Group=QK;bo.Button=eG;bo.install=function(t){return t.component(bo.name,bo),t.component(bo.Group.name,bo.Group),t.component(bo.Button.name,bo.Button),t};var tG=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nG=/^\w*$/;function Dw(t,e){if(ba(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||by(t)?!0:nG.test(t)||!tG.test(t)||e!=null&&t in Object(e)}var rG="Expected a function";function Rw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(rG);var r=function(){var i=arguments,u=e?e.apply(this,i):i[0],d=r.cache;if(d.has(u))return d.get(u);var m=t.apply(this,i);return r.cache=d.set(u,m)||d,m};return r.cache=new(Rw.Cache||Us),r}Rw.Cache=Us;var iG=500;function oG(t){var e=Rw(t,function(i){return r.size===iG&&r.clear(),i}),r=e.cache;return e}var aG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sG=/\\(\\)?/g,lG=oG(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(aG,function(r,i,u,d){e.push(u?d.replace(sG,"$1"):i||r)}),e});const uG=lG;function wy(t,e){return ba(t)?t:Dw(t,e)?[t]:uG(qK(t))}var cG=1/0;function jp(t){if(typeof t=="string"||by(t))return t;var e=t+"";return e=="0"&&1/t==-cG?"-0":e}function zw(t,e){e=wy(e,t);for(var r=0,i=e.length;t!=null&&r<i;)t=t[jp(e[r++])];return r&&r==i?t:void 0}var dG=function(){try{var t=sc(Object,"defineProperty");return t({},"",{}),t}catch{}}();const $g=dG;function gD(t,e,r){e=="__proto__"&&$g?$g(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var fG=Object.prototype,hG=fG.hasOwnProperty;function yD(t,e,r){var i=t[e];(!(hG.call(t,e)&&dw(i,r))||r===void 0&&!(e in t))&&gD(t,e,r)}function pG(t,e){return t!=null&&e in Object(t)}function mG(t,e,r){e=wy(e,t);for(var i=-1,u=e.length,d=!1;++i<u;){var m=jp(e[i]);if(!(d=t!=null&&r(t,m)))break;t=t[m]}return d||++i!=u?d:(u=t==null?0:t.length,!!u&&vw(u)&&y3(m,u)&&(ba(t)||mw(t)))}function vG(t,e){return t!=null&&mG(t,e,pG)}var nP=ia?ia.isConcatSpreadable:void 0;function gG(t){return ba(t)||mw(t)||!!(nP&&t&&t[nP])}function _D(t,e,r,i,u){var d=-1,m=t.length;for(r||(r=gG),u||(u=[]);++d<m;){var o=t[d];e>0&&r(o)?e>1?_D(o,e-1,r,i,u):hw(u,o):i||(u[u.length]=o)}return u}function yG(t){var e=t==null?0:t.length;return e?_D(t,1):[]}function _G(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var rP=Math.max;function xD(t,e,r){return e=rP(e===void 0?t.length-1:e,0),function(){for(var i=arguments,u=-1,d=rP(i.length-e,0),m=Array(d);++u<d;)m[u]=i[e+u];u=-1;for(var o=Array(e+1);++u<e;)o[u]=i[u];return o[e]=r(m),_G(t,this,o)}}function xG(t){return function(){return t}}function Lw(t){return t}var bG=$g?function(t,e){return $g(t,"toString",{configurable:!0,enumerable:!1,value:xG(e),writable:!0})}:Lw;const wG=bG;var CG=800,SG=16,TG=Date.now;function EG(t){var e=0,r=0;return function(){var i=TG(),u=SG-(i-r);if(r=i,u>0){if(++e>=CG)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var IG=EG(wG);const bD=IG;function PG(t){return bD(xD(t,void 0,yG),t+"")}var wD=function(){return oc()&&window.document.documentElement},CD=function(e){if(oc()&&window.document.documentElement){var r=Array.isArray(e)?e:[e],i=window.document.documentElement;return r.some(function(u){return u in i.style})}return!1},AG=function(e,r){if(!CD(e))return!1;var i=document.createElement("div"),u=i.style[e];return i.style[e]=r,i.style[e]!==u};function MG(t,e){return!Array.isArray(t)&&e!==void 0?AG(t,e):CD(t)}var Vv,kG=function(){if(!wD())return!1;if(Vv!==void 0)return Vv;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),Vv=e.scrollHeight===1,document.body.removeChild(e),Vv};const SD=function(){var t=qe(!1);return wr(function(){t.value=kG()}),t};var TD=Symbol("rowContextKey"),OG=function(e){sr(TD,e)},DG=function(){return Kn(TD,{gutter:ue(function(){}),wrap:ue(function(){}),supportFlexGap:ue(function(){})})};const RG=OG;Yi("top","middle","bottom","stretch");Yi("start","end","center","space-around","space-between");var zG=function(){return{align:String,justify:String,prefixCls:String,gutter:{type:[Number,Array,Object],default:0},wrap:{type:Boolean,default:void 0}}},LG=jt({compatConfig:{MODE:3},name:"ARow",props:zG(),setup:function(e,r){var i=r.slots,u=hr("row",e),d=u.prefixCls,m=u.direction,o,_=qe({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0,xxxl:!0}),C=SD();wr(function(){o=Lg.subscribe(function(A){var O=e.gutter||0;(!Array.isArray(O)&&On(O)==="object"||Array.isArray(O)&&(On(O[0])==="object"||On(O[1])==="object"))&&(_.value=A)})}),Er(function(){Lg.unsubscribe(o)});var T=ue(function(){var A=[0,0],O=e.gutter,R=O===void 0?0:O,z=Array.isArray(R)?R:[R,0];return z.forEach(function(F,N){if(On(F)==="object")for(var U=0;U<MI.length;U++){var G=MI[U];if(_.value[G]&&F[G]!==void 0){A[N]=F[G];break}}else A[N]=F||0}),A});RG({gutter:T,supportFlexGap:C,wrap:ue(function(){return e.wrap})});var S=ue(function(){var A;return qt(d.value,(A={},Ie(A,"".concat(d.value,"-no-wrap"),e.wrap===!1),Ie(A,"".concat(d.value,"-").concat(e.justify),e.justify),Ie(A,"".concat(d.value,"-").concat(e.align),e.align),Ie(A,"".concat(d.value,"-rtl"),m.value==="rtl"),A))}),P=ue(function(){var A=T.value,O={},R=A[0]>0?"".concat(A[0]/-2,"px"):void 0,z=A[1]>0?"".concat(A[1]/-2,"px"):void 0;return R&&(O.marginLeft=R,O.marginRight=R),C.value?O.rowGap="".concat(A[1],"px"):z&&(O.marginTop=z,O.marginBottom=z),O});return function(){var A;return j("div",{class:S.value,style:P.value},[(A=i.default)===null||A===void 0?void 0:A.call(i)])}}});const FG=LG;function BG(t){return typeof t=="number"?"".concat(t," ").concat(t," auto"):/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?"0 0 ".concat(t):t}var NG=function(){return{span:[String,Number],order:[String,Number],offset:[String,Number],push:[String,Number],pull:[String,Number],xs:{type:[String,Number,Object],default:void 0},sm:{type:[String,Number,Object],default:void 0},md:{type:[String,Number,Object],default:void 0},lg:{type:[String,Number,Object],default:void 0},xl:{type:[String,Number,Object],default:void 0},xxl:{type:[String,Number,Object],default:void 0},xxxl:{type:[String,Number,Object],default:void 0},prefixCls:String,flex:[String,Number]}};const ED=jt({compatConfig:{MODE:3},name:"ACol",props:NG(),setup:function(e,r){var i=r.slots,u=DG(),d=u.gutter,m=u.supportFlexGap,o=u.wrap,_=hr("col",e),C=_.prefixCls,T=_.direction,S=ue(function(){var A,O=e.span,R=e.order,z=e.offset,F=e.push,N=e.pull,U=C.value,G={};return["xs","sm","md","lg","xl","xxl","xxxl"].forEach(function(q){var V,Z={},Q=e[q];typeof Q=="number"?Z.span=Q:On(Q)==="object"&&(Z=Q||{}),G=H(H({},G),{},(V={},Ie(V,"".concat(U,"-").concat(q,"-").concat(Z.span),Z.span!==void 0),Ie(V,"".concat(U,"-").concat(q,"-order-").concat(Z.order),Z.order||Z.order===0),Ie(V,"".concat(U,"-").concat(q,"-offset-").concat(Z.offset),Z.offset||Z.offset===0),Ie(V,"".concat(U,"-").concat(q,"-push-").concat(Z.push),Z.push||Z.push===0),Ie(V,"".concat(U,"-").concat(q,"-pull-").concat(Z.pull),Z.pull||Z.pull===0),Ie(V,"".concat(U,"-rtl"),T.value==="rtl"),V))}),qt(U,(A={},Ie(A,"".concat(U,"-").concat(O),O!==void 0),Ie(A,"".concat(U,"-order-").concat(R),R),Ie(A,"".concat(U,"-offset-").concat(z),z),Ie(A,"".concat(U,"-push-").concat(F),F),Ie(A,"".concat(U,"-pull-").concat(N),N),A),G)}),P=ue(function(){var A=e.flex,O=d.value,R={};if(O&&O[0]>0){var z="".concat(O[0]/2,"px");R.paddingLeft=z,R.paddingRight=z}if(O&&O[1]>0&&!m.value){var F="".concat(O[1]/2,"px");R.paddingTop=F,R.paddingBottom=F}return A&&(R.flex=BG(A),o.value===!1&&!R.minWidth&&(R.minWidth=0)),R});return function(){var A;return j("div",{class:S.value,style:P.value},[(A=i.default)===null||A===void 0?void 0:A.call(i)])}}});var $G=function(){return Sa.Date.now()};const V0=$G;var jG="Expected a function",VG=Math.max,UG=Math.min;function Fw(t,e,r){var i,u,d,m,o,_,C=0,T=!1,S=!1,P=!0;if(typeof t!="function")throw new TypeError(jG);e=mb(e)||0,$s(r)&&(T=!!r.leading,S="maxWait"in r,d=S?VG(mb(r.maxWait)||0,e):d,P="trailing"in r?!!r.trailing:P);function A(V){var Z=i,Q=u;return i=u=void 0,C=V,m=t.apply(Q,Z),m}function O(V){return C=V,o=setTimeout(F,e),T?A(V):m}function R(V){var Z=V-_,Q=V-C,te=e-Z;return S?UG(te,d-Q):te}function z(V){var Z=V-_,Q=V-C;return _===void 0||Z>=e||Z<0||S&&Q>=d}function F(){var V=V0();if(z(V))return N(V);o=setTimeout(F,R(V))}function N(V){return o=void 0,P&&i?A(V):(i=u=void 0,m)}function U(){o!==void 0&&clearTimeout(o),C=0,i=_=u=o=void 0}function G(){return o===void 0?m:N(V0())}function q(){var V=V0(),Z=z(V);if(i=arguments,u=this,_=V,Z){if(o===void 0)return O(_);if(S)return clearTimeout(o),o=setTimeout(F,e),A(_)}return o===void 0&&(o=setTimeout(F,e)),m}return q.cancel=U,q.flush=G,q}var ID=Symbol("TreeContextKey"),KG=jt({compatConfig:{MODE:3},name:"TreeContext",props:{value:{type:Object}},setup:function(e,r){var i=r.slots;return sr(ID,ue(function(){return e.value})),function(){var u;return(u=i.default)===null||u===void 0?void 0:u.call(i)}}}),Bw=function(){return Kn(ID,ue(function(){return{}}))},PD=Symbol("KeysStateKey"),GG=function(e){sr(PD,e)},AD=function(){return Kn(PD,{expandedKeys:mr([]),selectedKeys:mr([]),loadedKeys:mr([]),loadingKeys:mr([]),checkedKeys:mr([]),halfCheckedKeys:mr([]),expandedKeysSet:ue(function(){return new Set}),selectedKeysSet:ue(function(){return new Set}),loadedKeysSet:ue(function(){return new Set}),loadingKeysSet:ue(function(){return new Set}),checkedKeysSet:ue(function(){return new Set}),halfCheckedKeysSet:ue(function(){return new Set}),flattenNodes:mr([])})},HG=function(e){for(var r=e.prefixCls,i=e.level,u=e.isStart,d=e.isEnd,m="".concat(r,"-indent-unit"),o=[],_=0;_<i;_+=1){var C;o.push(j("span",{key:_,class:(C={},Ie(C,m,!0),Ie(C,"".concat(m,"-start"),u[_]),Ie(C,"".concat(m,"-end"),d[_]),C)},null))}return j("span",{"aria-hidden":"true",class:"".concat(r,"-indent")},[o])};const qG=HG;var Nw={eventKey:[String,Number],prefixCls:String,title:et.any,data:{type:Object,default:void 0},parent:{type:Object,default:void 0},isStart:{type:Array},isEnd:{type:Array},active:{type:Boolean,default:void 0},onMousemove:{type:Function},isLeaf:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},disableCheckbox:{type:Boolean,default:void 0},icon:et.any,switcherIcon:et.any,domRef:{type:Function}},WG={prefixCls:{type:String},motion:{type:Object},focusable:{type:Boolean},activeItem:{type:Object},focused:{type:Boolean},tabindex:{type:Number},checkable:{type:Boolean},selectable:{type:Boolean},disabled:{type:Boolean},height:{type:Number},itemHeight:{type:Number},virtual:{type:Boolean},onScroll:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onActiveChange:{type:Function},onContextmenu:{type:Function},onListChangeStart:{type:Function},onListChangeEnd:{type:Function}},MD=function(){return{prefixCls:String,focusable:{type:Boolean,default:void 0},activeKey:[Number,String],tabindex:Number,children:et.any,treeData:{type:Array},fieldNames:{type:Object},showLine:{type:[Boolean,Object],default:void 0},showIcon:{type:Boolean,default:void 0},icon:et.any,selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},draggable:{type:[Function,Boolean]},defaultExpandParent:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:[Object,Array]},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},allowDrop:{type:Function},dropIndicatorRender:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onKeydown:{type:Function},onContextmenu:{type:Function},onClick:{type:Function},onDblclick:{type:Function},onScroll:{type:Function},onExpand:{type:Function},onCheck:{type:Function},onSelect:{type:Function},onLoad:{type:Function},loadData:{type:Function},loadedKeys:{type:Array},onMouseenter:{type:Function},onMouseleave:{type:Function},onRightClick:{type:Function},onDragstart:{type:Function},onDragenter:{type:Function},onDragover:{type:Function},onDragleave:{type:Function},onDragend:{type:Function},onDrop:{type:Function},onActiveChange:{type:Function},filterTreeNode:{type:Function},motion:et.any,switcherIcon:et.any,height:Number,itemHeight:Number,virtual:{type:Boolean,default:void 0},direction:{type:String}}},ZG=["eventKey","isLeaf","isStart","isEnd","domRef","active","data","onMousemove","selectable"],iP="open",oP="close",XG="---";const vb=jt({compatConfig:{MODE:3},name:"TreeNode",inheritAttrs:!1,props:Nw,isTreeNode:1,slots:["title","icon","switcherIcon"],setup:function(e,r){var i=r.attrs,u=r.slots,d=r.expose;"slots"in e.data,"treeData slots is deprecated, please use ".concat(Object.keys(e.data.slots||{}).map(function(Rt){return"`v-slot:"+Rt+"` "}),"instead");var m=qe(!1),o=Bw(),_=AD(),C=_.expandedKeysSet,T=_.selectedKeysSet,S=_.loadedKeysSet,P=_.loadingKeysSet,A=_.checkedKeysSet,O=_.halfCheckedKeysSet,R=o.value,z=R.dragOverNodeKey,F=R.dropPosition,N=R.keyEntities,U=ue(function(){return _b(e.eventKey,{expandedKeysSet:C.value,selectedKeysSet:T.value,loadedKeysSet:S.value,loadingKeysSet:P.value,checkedKeysSet:A.value,halfCheckedKeysSet:O.value,dragOverNodeKey:z,dropPosition:F,keyEntities:N})}),G=ga(function(){return U.value.expanded}),q=ga(function(){return U.value.selected}),V=ga(function(){return U.value.checked}),Z=ga(function(){return U.value.loaded}),Q=ga(function(){return U.value.loading}),te=ga(function(){return U.value.halfChecked}),ie=ga(function(){return U.value.dragOver}),ve=ga(function(){return U.value.dragOverGapTop}),ce=ga(function(){return U.value.dragOverGapBottom}),de=ga(function(){return U.value.pos}),xe=qe(),De=ue(function(){var Rt=e.eventKey,ht=o.value.keyEntities,Ht=ht[Rt]||{},wn=Ht.children;return!!(wn||[]).length}),ge=ue(function(){var Rt=e.isLeaf,ht=o.value.loadData,Ht=De.value;return Rt===!1?!1:Rt||!ht&&!Ht||ht&&Z.value&&!Ht}),he=ue(function(){return ge.value?null:G.value?iP:oP}),me=ue(function(){var Rt=e.disabled,ht=o.value.disabled;return!!(ht||Rt)}),Pe=ue(function(){var Rt=e.checkable,ht=o.value.checkable;return!ht||Rt===!1?!1:ht}),He=ue(function(){var Rt=e.selectable,ht=o.value.selectable;return typeof Rt=="boolean"?Rt:ht}),Ke=ue(function(){var Rt=e.data,ht=e.active,Ht=e.checkable,wn=e.disableCheckbox,zt=e.disabled,mt=e.selectable;return H(H({active:ht,checkable:Ht,disableCheckbox:wn,disabled:zt,selectable:mt},Rt),{},{dataRef:Rt,data:Rt,isLeaf:ge.value,checked:V.value,expanded:G.value,loading:Q.value,selected:q.value,halfChecked:te.value})}),Re=Ji(),Le=ue(function(){var Rt=e.eventKey,ht=o.value.keyEntities,Ht=ht[Rt]||{},wn=Ht.parent;return H(H({},xb(kr({},e,U.value))),{},{parent:wn})}),Te=Or({eventData:Le,eventKey:ue(function(){return e.eventKey}),selectHandle:xe,pos:de,key:Re.vnode.key});d(Te);var oe=function(ht){var Ht=o.value.onNodeDoubleClick;Ht(ht,Le.value)},ze=function(ht){if(!me.value){var Ht=o.value.onNodeSelect;ht.preventDefault(),Ht(ht,Le.value)}},Fe=function(ht){if(!me.value){var Ht=e.disableCheckbox,wn=o.value.onNodeCheck;if(!(!Pe.value||Ht)){ht.preventDefault();var zt=!V.value;wn(ht,Le.value,zt)}}},lt=function(ht){var Ht=o.value.onNodeClick;Ht(ht,Le.value),He.value?ze(ht):Fe(ht)},vt=function(ht){var Ht=o.value.onNodeMouseEnter;Ht(ht,Le.value)},kt=function(ht){var Ht=o.value.onNodeMouseLeave;Ht(ht,Le.value)},It=function(ht){var Ht=o.value.onNodeContextMenu;Ht(ht,Le.value)},se=function(ht){var Ht=o.value.onNodeDragStart;ht.stopPropagation(),m.value=!0,Ht(ht,Te);try{ht.dataTransfer.setData("text/plain","")}catch{}},ae=function(ht){var Ht=o.value.onNodeDragEnter;ht.preventDefault(),ht.stopPropagation(),Ht(ht,Te)},Be=function(ht){var Ht=o.value.onNodeDragOver;ht.preventDefault(),ht.stopPropagation(),Ht(ht,Te)},st=function(ht){var Ht=o.value.onNodeDragLeave;ht.stopPropagation(),Ht(ht,Te)},ut=function(ht){var Ht=o.value.onNodeDragEnd;ht.stopPropagation(),m.value=!1,Ht(ht,Te)},bt=function(ht){var Ht=o.value.onNodeDrop;ht.preventDefault(),ht.stopPropagation(),m.value=!1,Ht(ht,Te)},At=function(ht){var Ht=o.value.onNodeExpand;Q.value||Ht(ht,Le.value)},_t=function(){var ht=e.data,Ht=o.value.draggable;return!!(Ht&&(!Ht.nodeDraggable||Ht.nodeDraggable(ht)))},nt=function(){var ht=o.value,Ht=ht.draggable,wn=ht.prefixCls;return Ht!=null&&Ht.icon?j("span",{class:"".concat(wn,"-draggable-icon")},[Ht.icon]):null},tt=function(){var ht,Ht,wn,zt=e.switcherIcon,mt=zt===void 0?u.switcherIcon||((ht=o.value.slots)===null||ht===void 0?void 0:ht[(Ht=e.data)===null||Ht===void 0||(wn=Ht.slots)===null||wn===void 0?void 0:wn.switcherIcon]):zt,St=o.value.switcherIcon,yt=mt||St;return typeof yt=="function"?yt(Ke.value):yt},pt=function(){var ht=o.value,Ht=ht.loadData,wn=ht.onNodeLoad;Q.value||Ht&&G.value&&!ge.value&&!De.value&&!Z.value&&wn(Le.value)};wr(function(){pt()}),Ca(function(){pt()});var dt=function(){var ht=o.value.prefixCls,Ht=tt();if(ge.value)return Ht!==!1?j("span",{class:qt("".concat(ht,"-switcher"),"".concat(ht,"-switcher-noop"))},[Ht]):null;var wn=qt("".concat(ht,"-switcher"),"".concat(ht,"-switcher_").concat(G.value?iP:oP));return Ht!==!1?j("span",{onClick:At,class:wn},[Ht]):null},Ot=function(){var ht,Ht,wn=e.disableCheckbox,zt=o.value.prefixCls,mt=me.value,St=Pe.value;return St?j("span",{class:qt("".concat(zt,"-checkbox"),V.value&&"".concat(zt,"-checkbox-checked"),!V.value&&te.value&&"".concat(zt,"-checkbox-indeterminate"),(mt||wn)&&"".concat(zt,"-checkbox-disabled")),onClick:Fe},[(ht=(Ht=o.value).customCheckable)===null||ht===void 0?void 0:ht.call(Ht)]):null},Kt=function(){var ht=o.value.prefixCls;return j("span",{class:qt("".concat(ht,"-iconEle"),"".concat(ht,"-icon__").concat(he.value||"docu"),Q.value&&"".concat(ht,"-icon_loading"))},null)},cn=function(){var ht=e.disabled,Ht=e.eventKey,wn=o.value,zt=wn.draggable,mt=wn.dropLevelOffset,St=wn.dropPosition,yt=wn.prefixCls,Wt=wn.indent,tn=wn.dropIndicatorRender,on=wn.dragOverNodeKey,Tt=wn.direction,Et=zt!==!1,sn=!ht&&Et&&on===Ht;return sn?tn({dropPosition:St,dropLevelOffset:mt,indent:Wt,prefixCls:yt,direction:Tt}):null},Cn=function(){var ht,Ht,wn,zt,mt=e.icon,St=mt===void 0?u.icon:mt,yt=e.data,Wt=u.title||((ht=o.value.slots)===null||ht===void 0?void 0:ht[(Ht=e.data)===null||Ht===void 0||(wn=Ht.slots)===null||wn===void 0?void 0:wn.title])||((zt=o.value.slots)===null||zt===void 0?void 0:zt.title)||e.title,tn=o.value,on=tn.prefixCls,Tt=tn.showIcon,Et=tn.icon,sn=tn.loadData,xn=me.value,An="".concat(on,"-node-content-wrapper"),Mn;if(Tt){var ir,Dn,lr=St||((ir=o.value.slots)===null||ir===void 0?void 0:ir[yt==null||(Dn=yt.slots)===null||Dn===void 0?void 0:Dn.icon])||Et;Mn=lr?j("span",{class:qt("".concat(on,"-iconEle"),"".concat(on,"-icon__customize"))},[typeof lr=="function"?lr(Ke.value):lr]):Kt()}else sn&&Q.value&&(Mn=Kt());var Ce;typeof Wt=="function"?Ce=Wt(Ke.value):Ce=Wt,Ce=Ce===void 0?XG:Ce;var Y=j("span",{class:"".concat(on,"-title")},[Ce]);return j("span",{ref:xe,title:typeof Wt=="string"?Wt:"",class:qt("".concat(An),"".concat(An,"-").concat(he.value||"normal"),!xn&&(q.value||m.value)&&"".concat(on,"-node-selected")),onMouseenter:vt,onMouseleave:kt,onContextmenu:It,onClick:lt,onDblclick:oe},[Mn,Y,cn()])};return function(){var Rt,ht=H(H({},e),i),Ht=ht.eventKey,wn=ht.isLeaf,zt=ht.isStart,mt=ht.isEnd,St=ht.domRef,yt=ht.active;ht.data;var Wt=ht.onMousemove,tn=ht.selectable,on=Cr(ht,ZG),Tt=o.value,Et=Tt.prefixCls,sn=Tt.filterTreeNode,xn=Tt.keyEntities,An=Tt.dropContainerKey,Mn=Tt.dropTargetKey,ir=Tt.draggingNodeKey,Dn=me.value,lr=lc(on,{aria:!0,data:!0}),Ce=xn[Ht]||{},Y=Ce.level,ne=mt[mt.length-1],be=_t(),Oe=!Dn&&be,Ve=ir===Ht,it=tn!==void 0?{"aria-selected":!!tn}:void 0;return j("div",H(H({ref:St,class:qt(i.class,"".concat(Et,"-treenode"),(Rt={},Ie(Rt,"".concat(Et,"-treenode-disabled"),Dn),Ie(Rt,"".concat(Et,"-treenode-switcher-").concat(G.value?"open":"close"),!wn),Ie(Rt,"".concat(Et,"-treenode-checkbox-checked"),V.value),Ie(Rt,"".concat(Et,"-treenode-checkbox-indeterminate"),te.value),Ie(Rt,"".concat(Et,"-treenode-selected"),q.value),Ie(Rt,"".concat(Et,"-treenode-loading"),Q.value),Ie(Rt,"".concat(Et,"-treenode-active"),yt),Ie(Rt,"".concat(Et,"-treenode-leaf-last"),ne),Ie(Rt,"".concat(Et,"-treenode-draggable"),Oe),Ie(Rt,"dragging",Ve),Ie(Rt,"drop-target",Mn===Ht),Ie(Rt,"drop-container",An===Ht),Ie(Rt,"drag-over",!Dn&&ie.value),Ie(Rt,"drag-over-gap-top",!Dn&&ve.value),Ie(Rt,"drag-over-gap-bottom",!Dn&&ce.value),Ie(Rt,"filter-node",sn&&sn(Le.value)),Rt)),style:i.style,draggable:Oe,"aria-grabbed":Ve,onDragstart:Oe?se:void 0,onDragenter:be?ae:void 0,onDragover:be?Be:void 0,onDragleave:be?st:void 0,onDrop:be?bt:void 0,onDragend:be?ut:void 0,onMousemove:Wt},it),lr),[j(qG,{prefixCls:Et,level:Y,isStart:zt,isEnd:mt},null),nt(),dt(),Ot(),Cn()])}}});function ks(t,e){if(!t)return[];var r=t.slice(),i=r.indexOf(e);return i>=0&&r.splice(i,1),r}function El(t,e){var r=(t||[]).slice();return r.indexOf(e)===-1&&r.push(e),r}function $w(t){return t.split("-")}function kD(t,e){return"".concat(t,"-").concat(e)}function YG(t){return t&&t.type&&t.type.isTreeNode}function JG(t,e){var r=[],i=e[t];function u(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];d.forEach(function(m){var o=m.key,_=m.children;r.push(o),u(_)})}return u(i.children),r}function QG(t){if(t.parent){var e=$w(t.pos);return Number(e[e.length-1])===t.parent.children.length-1}return!1}function eH(t){var e=$w(t.pos);return Number(e[e.length-1])===0}function aP(t,e,r,i,u,d,m,o,_,C){var T,S=t.clientX,P=t.clientY,A=t.target.getBoundingClientRect(),O=A.top,R=A.height,z=(C==="rtl"?-1:1)*(((u==null?void 0:u.x)||0)-S),F=(z-12)/i,N=o[r.eventKey];if(P<O+R/2){var U=m.findIndex(function(De){return De.key===N.key}),G=U<=0?0:U-1,q=m[G].key;N=o[q]}var V=N.key,Z=N,Q=N.key,te=0,ie=0;if(!_.has(V))for(var ve=0;ve<F&&QG(N);ve+=1)N=N.parent,ie+=1;var ce=e.eventData,de=N.node,xe=!0;return eH(N)&&N.level===0&&P<O+R/2&&d({dragNode:ce,dropNode:de,dropPosition:-1})&&N.key===r.eventKey?te=-1:(Z.children||[]).length&&_.has(Q)?d({dragNode:ce,dropNode:de,dropPosition:0})?te=0:xe=!1:ie===0?F>-1.5?d({dragNode:ce,dropNode:de,dropPosition:1})?te=1:xe=!1:d({dragNode:ce,dropNode:de,dropPosition:0})?te=0:d({dragNode:ce,dropNode:de,dropPosition:1})?te=1:xe=!1:d({dragNode:ce,dropNode:de,dropPosition:1})?te=1:xe=!1,{dropPosition:te,dropLevelOffset:ie,dropTargetKey:N.key,dropTargetPos:N.pos,dragOverNodeKey:Q,dropContainerKey:te===0?null:((T=N.parent)===null||T===void 0?void 0:T.key)||null,dropAllowed:xe}}function sP(t,e){if(!!t){var r=e.multiple;return r?t.slice():t.length?[t[0]]:t}}function U0(t){if(!t)return null;var e;if(Array.isArray(t))e={checkedKeys:t,halfCheckedKeys:void 0};else if(On(t)==="object")e={checkedKeys:t.checked||void 0,halfCheckedKeys:t.halfChecked||void 0};else return null;return e}function gb(t,e){var r=new Set;function i(u){if(!r.has(u)){var d=e[u];if(!!d){r.add(u);var m=d.parent,o=d.node;o.disabled||m&&i(m.key)}}}return(t||[]).forEach(function(u){i(u)}),bn(r)}var tH=["title","icon","switcherIcon"];function Vp(t,e){return t!=null?t:e}function Cy(t){var e=t||{},r=e.title,i=e._title,u=e.key,d=e.children,m=r||"title";return{title:m,_title:i||[m],key:u||"key",children:d||"children"}}function yb(t){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=Ko(r);return i.map(function(u){var d,m,o,_;if(!YG(u))return null;for(var C=u.children||{},T=u.key,S={},P=0,A=Object.entries(u.props);P<A.length;P++){var O=zn(A[P],2),R=O[0],z=O[1];S[ra(R)]=z}var F=S.isLeaf,N=S.checkable,U=S.selectable,G=S.disabled,q=S.disableCheckbox,V={isLeaf:F||F===""||void 0,checkable:N||N===""||void 0,selectable:U||U===""||void 0,disabled:G||G===""||void 0,disableCheckbox:q||q===""||void 0},Z=H(H({},S),V),Q=S.title,te=Q===void 0?(d=C.title)===null||d===void 0?void 0:d.call(C,Z):Q,ie=S.icon,ve=ie===void 0?(m=C.icon)===null||m===void 0?void 0:m.call(C,Z):ie,ce=S.switcherIcon,de=ce===void 0?(o=C.switcherIcon)===null||o===void 0?void 0:o.call(C,Z):ce,xe=Cr(S,tH),De=(_=C.default)===null||_===void 0?void 0:_.call(C),ge=H(H({},xe),{},{title:te,icon:ve,switcherIcon:de,key:T,isLeaf:F},V),he=e(De);return he.length&&(ge.children=he),ge})}return e(t)}function nH(t,e,r){var i=Cy(r),u=i._title,d=i.key,m=i.children,o=new Set(e===!0?[]:e),_=[];function C(T){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return T.map(function(P,A){for(var O=kD(S?S.pos:"0",A),R=Vp(P[d],O),z,F=0;F<u.length;F+=1){var N=u[F];if(P[N]!==void 0){z=P[N];break}}var U=H(H({},hi(P,[].concat(bn(u),[d,m]))),{},{title:z,key:R,parent:S,pos:O,children:null,data:P,isStart:[].concat(bn(S?S.isStart:[]),[A===0]),isEnd:[].concat(bn(S?S.isEnd:[]),[A===T.length-1])});return _.push(U),e===!0||o.has(R)?U.children=C(P[m]||[],U):U.children=[],U})}return C(t),_}function rH(t,e,r){var i={};On(r)==="object"?i=r:i={externalGetKey:r},i=i||{};var u=i,d=u.childrenPropName,m=u.externalGetKey,o=u.fieldNames,_=Cy(o),C=_.key,T=_.children,S=d||T,P;m?typeof m=="string"?P=function(R){return R[m]}:typeof m=="function"&&(P=function(R){return m(R)}):P=function(R,z){return Vp(R[C],z)};function A(O,R,z,F){var N=O?O[S]:t,U=O?kD(z.pos,R):"0",G=O?[].concat(bn(F),[O]):[];if(O){var q=P(O,U),V={node:O,index:R,pos:U,key:q,parentPos:z.node?z.pos:null,level:z.level+1,nodes:G};e(V)}N&&N.forEach(function(Z,Q){A(Z,Q,{node:O,pos:U,level:z?z.level+1:-1},G)})}A(null)}function jw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.initWrapper,i=e.processEntity,u=e.onProcessFinished,d=e.externalGetKey,m=e.childrenPropName,o=e.fieldNames,_=arguments.length>2?arguments[2]:void 0,C=d||_,T={},S={},P={posEntities:T,keyEntities:S};return r&&(P=r(P)||P),rH(t,function(A){var O=A.node,R=A.index,z=A.pos,F=A.key,N=A.parentPos,U=A.level,G=A.nodes,q={node:O,nodes:G,index:R,key:F,pos:z,level:U},V=Vp(F,z);T[z]=q,S[V]=q,q.parent=T[N],q.parent&&(q.parent.children=q.parent.children||[],q.parent.children.push(q)),i&&i(q,P)},{externalGetKey:C,childrenPropName:m,fieldNames:o}),u&&u(P),P}function _b(t,e){var r=e.expandedKeysSet,i=e.selectedKeysSet,u=e.loadedKeysSet,d=e.loadingKeysSet,m=e.checkedKeysSet,o=e.halfCheckedKeysSet,_=e.dragOverNodeKey,C=e.dropPosition,T=e.keyEntities,S=T[t],P={eventKey:t,expanded:r.has(t),selected:i.has(t),loaded:u.has(t),loading:d.has(t),checked:m.has(t),halfChecked:o.has(t),pos:String(S?S.pos:""),parent:S.parent,dragOver:_===t&&C===0,dragOverGapTop:_===t&&C===-1,dragOverGapBottom:_===t&&C===1};return P}function xb(t){var e=t.data,r=t.expanded,i=t.selected,u=t.checked,d=t.loaded,m=t.loading,o=t.halfChecked,_=t.dragOver,C=t.dragOverGapTop,T=t.dragOverGapBottom,S=t.pos,P=t.active,A=t.eventKey,O=H(H({dataRef:e},e),{},{expanded:r,selected:i,checked:u,loaded:d,loading:m,halfChecked:o,dragOver:_,dragOverGapTop:C,dragOverGapBottom:T,pos:S,active:P,eventKey:A,key:A});return"props"in O||Object.defineProperty(O,"props",{get:function(){return t}}),O}function OD(t,e){var r=new Set;return t.forEach(function(i){e.has(i)||r.add(i)}),r}function iH(t){var e=t||{},r=e.disabled,i=e.disableCheckbox,u=e.checkable;return!!(r||i)||u===!1}function oH(t,e,r,i){for(var u=new Set(t),d=new Set,m=0;m<=r;m+=1){var o=e.get(m)||new Set;o.forEach(function(S){var P=S.key,A=S.node,O=S.children,R=O===void 0?[]:O;u.has(P)&&!i(A)&&R.filter(function(z){return!i(z.node)}).forEach(function(z){u.add(z.key)})})}for(var _=new Set,C=r;C>=0;C-=1){var T=e.get(C)||new Set;T.forEach(function(S){var P=S.parent,A=S.node;if(!(i(A)||!S.parent||_.has(S.parent.key))){if(i(S.parent.node)){_.add(P.key);return}var O=!0,R=!1;(P.children||[]).filter(function(z){return!i(z.node)}).forEach(function(z){var F=z.key,N=u.has(F);O&&!N&&(O=!1),!R&&(N||d.has(F))&&(R=!0)}),O&&u.add(P.key),R&&d.add(P.key),_.add(P.key)}})}return{checkedKeys:Array.from(u),halfCheckedKeys:Array.from(OD(d,u))}}function aH(t,e,r,i,u){for(var d=new Set(t),m=new Set(e),o=0;o<=i;o+=1){var _=r.get(o)||new Set;_.forEach(function(P){var A=P.key,O=P.node,R=P.children,z=R===void 0?[]:R;!d.has(A)&&!m.has(A)&&!u(O)&&z.filter(function(F){return!u(F.node)}).forEach(function(F){d.delete(F.key)})})}m=new Set;for(var C=new Set,T=i;T>=0;T-=1){var S=r.get(T)||new Set;S.forEach(function(P){var A=P.parent,O=P.node;if(!(u(O)||!P.parent||C.has(P.parent.key))){if(u(P.parent.node)){C.add(A.key);return}var R=!0,z=!1;(A.children||[]).filter(function(F){return!u(F.node)}).forEach(function(F){var N=F.key,U=d.has(N);R&&!U&&(R=!1),!z&&(U||m.has(N))&&(z=!0)}),R||d.delete(A.key),z&&m.add(A.key),C.add(A.key)}})}return{checkedKeys:Array.from(d),halfCheckedKeys:Array.from(OD(m,d))}}function Ad(t,e,r,i,u,d){var m;d?m=d:m=iH;var o=new Set(t.filter(function(C){var T=!!r[C];return T})),_;return e===!0?_=oH(o,u,i,m):_=aH(o,e.halfCheckedKeys,u,i,m),_}function DD(t){var e=qe(0),r=mr();return vr(function(){var i=new Map,u=0,d=t.value||{};for(var m in d)if(Object.prototype.hasOwnProperty.call(d,m)){var o=d[m],_=o.level,C=i.get(_);C||(C=new Set,i.set(_,C)),C.add(o),u=Math.max(u,_)}e.value=u,r.value=i}),{maxLevel:e,levelEntities:r}}var sH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};const lH=sH;function lP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){uH(t,u,r[u])})}return t}function uH(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vw=function(e,r){var i=lP({},e,r.attrs);return j($r,lP({},i,{icon:lH}),null)};Vw.displayName="LeftOutlined";Vw.inheritAttrs=!1;const bb=Vw;function cH(t,e){for(var r=-1,i=t==null?0:t.length;++r<i&&e(t[r],r,t)!==!1;);return t}function Up(t,e,r,i){var u=!r;r||(r={});for(var d=-1,m=e.length;++d<m;){var o=e[d],_=i?i(r[o],t[o],o,r,t):void 0;_===void 0&&(_=t[o]),u?gD(r,o,_):yD(r,o,_)}return r}function dH(t,e){return t&&Up(e,Np(e),t)}function fH(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var hH=Object.prototype,pH=hH.hasOwnProperty;function mH(t){if(!$s(t))return fH(t);var e=gw(t),r=[];for(var i in t)i=="constructor"&&(e||!pH.call(t,i))||r.push(i);return r}function Uw(t){return dy(t)?b3(t,!0):mH(t)}function vH(t,e){return t&&Up(e,Uw(e),t)}var RD=typeof Fo=="object"&&Fo&&!Fo.nodeType&&Fo,uP=RD&&typeof Bo=="object"&&Bo&&!Bo.nodeType&&Bo,gH=uP&&uP.exports===RD,cP=gH?Sa.Buffer:void 0,dP=cP?cP.allocUnsafe:void 0;function yH(t,e){if(e)return t.slice();var r=t.length,i=dP?dP(r):new t.constructor(r);return t.copy(i),i}function _H(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}function xH(t,e){return Up(t,pw(t),e)}var bH=Object.getOwnPropertySymbols,wH=bH?function(t){for(var e=[];t;)hw(e,pw(t)),t=N1(t);return e}:m3;const zD=wH;function CH(t,e){return Up(t,zD(t),e)}function LD(t){return p3(t,Uw,zD)}var SH=Object.prototype,TH=SH.hasOwnProperty;function EH(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&TH.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Kw(t){var e=new t.constructor(t.byteLength);return new kg(e).set(new kg(t)),e}function IH(t,e){var r=e?Kw(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var PH=/\w*$/;function AH(t){var e=new t.constructor(t.source,PH.exec(t));return e.lastIndex=t.lastIndex,e}var fP=ia?ia.prototype:void 0,hP=fP?fP.valueOf:void 0;function MH(t){return hP?Object(hP.call(t)):{}}function kH(t,e){var r=e?Kw(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var OH="[object Boolean]",DH="[object Date]",RH="[object Map]",zH="[object Number]",LH="[object RegExp]",FH="[object Set]",BH="[object String]",NH="[object Symbol]",$H="[object ArrayBuffer]",jH="[object DataView]",VH="[object Float32Array]",UH="[object Float64Array]",KH="[object Int8Array]",GH="[object Int16Array]",HH="[object Int32Array]",qH="[object Uint8Array]",WH="[object Uint8ClampedArray]",ZH="[object Uint16Array]",XH="[object Uint32Array]";function YH(t,e,r){var i=t.constructor;switch(e){case $H:return Kw(t);case OH:case DH:return new i(+t);case jH:return IH(t,r);case VH:case UH:case KH:case GH:case HH:case qH:case WH:case ZH:case XH:return kH(t,r);case RH:return new i;case zH:case BH:return new i(t);case LH:return AH(t);case FH:return new i;case NH:return MH(t)}}var pP=Object.create,JH=function(){function t(){}return function(e){if(!$s(e))return{};if(pP)return pP(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const QH=JH;function eq(t){return typeof t.constructor=="function"&&!gw(t)?QH(N1(t)):{}}var tq="[object Map]";function nq(t){return ts(t)&&Cp(t)==tq}var mP=jd&&jd.isMap,rq=mP?cy(mP):nq;const iq=rq;var oq="[object Set]";function aq(t){return ts(t)&&Cp(t)==oq}var vP=jd&&jd.isSet,sq=vP?cy(vP):aq;const lq=sq;var uq=1,cq=2,dq=4,FD="[object Arguments]",fq="[object Array]",hq="[object Boolean]",pq="[object Date]",mq="[object Error]",BD="[object Function]",vq="[object GeneratorFunction]",gq="[object Map]",yq="[object Number]",ND="[object Object]",_q="[object RegExp]",xq="[object Set]",bq="[object String]",wq="[object Symbol]",Cq="[object WeakMap]",Sq="[object ArrayBuffer]",Tq="[object DataView]",Eq="[object Float32Array]",Iq="[object Float64Array]",Pq="[object Int8Array]",Aq="[object Int16Array]",Mq="[object Int32Array]",kq="[object Uint8Array]",Oq="[object Uint8ClampedArray]",Dq="[object Uint16Array]",Rq="[object Uint32Array]",ei={};ei[FD]=ei[fq]=ei[Sq]=ei[Tq]=ei[hq]=ei[pq]=ei[Eq]=ei[Iq]=ei[Pq]=ei[Aq]=ei[Mq]=ei[gq]=ei[yq]=ei[ND]=ei[_q]=ei[xq]=ei[bq]=ei[wq]=ei[kq]=ei[Oq]=ei[Dq]=ei[Rq]=!0;ei[mq]=ei[BD]=ei[Cq]=!1;function Jh(t,e,r,i,u,d){var m,o=e&uq,_=e&cq,C=e&dq;if(r&&(m=u?r(t,i,u,d):r(t)),m!==void 0)return m;if(!$s(t))return t;var T=ba(t);if(T){if(m=EH(t),!o)return _H(t,m)}else{var S=Cp(t),P=S==BD||S==vq;if(Og(t))return yH(t,o);if(S==ND||S==FD||P&&!u){if(m=_||P?{}:eq(t),!o)return _?CH(t,vH(m,t)):xH(t,dH(m,t))}else{if(!ei[S])return u?t:{};m=YH(t,S,o)}}d||(d=new Qa);var A=d.get(t);if(A)return A;d.set(t,m),lq(t)?t.forEach(function(z){m.add(Jh(z,e,r,z,t,d))}):iq(t)&&t.forEach(function(z,F){m.set(F,Jh(z,e,r,F,t,d))});var O=C?_?LD:eb:_?Uw:Np,R=T?void 0:O(t);return cH(R||t,function(z,F){R&&(F=z,z=t[F]),yD(m,F,Jh(z,e,r,F,t,d))}),m}var zq=1,Lq=4;function ig(t){return Jh(t,zq|Lq)}function Hu(){return Hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Hu.apply(this,arguments)}function Fq(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ep(t,e)}function wb(t){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wb(t)}function Ep(t,e){return Ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,u){return i.__proto__=u,i},Ep(t,e)}function Bq(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function og(t,e,r){return Bq()?og=Reflect.construct.bind():og=function(u,d,m){var o=[null];o.push.apply(o,d);var _=Function.bind.apply(u,o),C=new _;return m&&Ep(C,m.prototype),C},og.apply(null,arguments)}function Nq(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Cb(t){var e=typeof Map=="function"?new Map:void 0;return Cb=function(i){if(i===null||!Nq(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,u)}function u(){return og(i,arguments,wb(this).constructor)}return u.prototype=Object.create(i.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),Ep(u,i)},Cb(t)}var $q=/%[sdj%]/g,jq=function(){};typeof process<"u"&&process.env;function Sb(t){if(!t||!t.length)return null;var e={};return t.forEach(function(r){var i=r.field;e[i]=e[i]||[],e[i].push(r)}),e}function Lo(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var u=0,d=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var m=t.replace($q,function(o){if(o==="%%")return"%";if(u>=d)return o;switch(o){case"%s":return String(r[u++]);case"%d":return Number(r[u++]);case"%j":try{return JSON.stringify(r[u++])}catch{return"[Circular]"}break;default:return o}});return m}return t}function Vq(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Si(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Vq(e)&&typeof t=="string"&&!t)}function Uq(t,e,r){var i=[],u=0,d=t.length;function m(o){i.push.apply(i,o||[]),u++,u===d&&r(i)}t.forEach(function(o){e(o,m)})}function gP(t,e,r){var i=0,u=t.length;function d(m){if(m&&m.length){r(m);return}var o=i;i=i+1,o<u?e(t[o],d):r([])}d([])}function Kq(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,t[r]||[])}),e}var yP=function(t){Fq(e,t);function e(r,i){var u;return u=t.call(this,"Async Validation Error")||this,u.errors=r,u.fields=i,u}return e}(Cb(Error));function Gq(t,e,r,i,u){if(e.first){var d=new Promise(function(P,A){var O=function(F){return i(F),F.length?A(new yP(F,Sb(F))):P(u)},R=Kq(t);gP(R,r,O)});return d.catch(function(P){return P}),d}var m=e.firstFields===!0?Object.keys(t):e.firstFields||[],o=Object.keys(t),_=o.length,C=0,T=[],S=new Promise(function(P,A){var O=function(z){if(T.push.apply(T,z),C++,C===_)return i(T),T.length?A(new yP(T,Sb(T))):P(u)};o.length||(i(T),P(u)),o.forEach(function(R){var z=t[R];m.indexOf(R)!==-1?gP(z,r,O):Uq(z,r,O)})});return S.catch(function(P){return P}),S}function Hq(t){return!!(t&&t.message!==void 0)}function qq(t,e){for(var r=t,i=0;i<e.length;i++){if(r==null)return r;r=r[e[i]]}return r}function _P(t,e){return function(r){var i;return t.fullFields?i=qq(e,t.fullFields):i=e[r.field||t.fullField],Hq(r)?(r.field=r.field||t.fullField,r.fieldValue=i,r):{message:typeof r=="function"?r():r,fieldValue:i,field:r.field||t.fullField}}}function xP(t,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];typeof i=="object"&&typeof t[r]=="object"?t[r]=Hu({},t[r],i):t[r]=i}}return t}var $D=function(e,r,i,u,d,m){e.required&&(!i.hasOwnProperty(e.field)||Si(r,m||e.type))&&u.push(Lo(d.messages.required,e.fullField))},Wq=function(e,r,i,u,d){(/^\s+$/.test(r)||r==="")&&u.push(Lo(d.messages.whitespace,e.fullField))},Uv,Zq=function(){if(Uv)return Uv;var t="[a-fA-F\\d:]",e=function(G){return G&&G.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",u=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+r+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+r+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+r+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+r+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+r+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+r+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+r+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),d=new RegExp("(?:^"+r+"$)|(?:^"+u+"$)"),m=new RegExp("^"+r+"$"),o=new RegExp("^"+u+"$"),_=function(G){return G&&G.exact?d:new RegExp("(?:"+e(G)+r+e(G)+")|(?:"+e(G)+u+e(G)+")","g")};_.v4=function(U){return U&&U.exact?m:new RegExp(""+e(U)+r+e(U),"g")},_.v6=function(U){return U&&U.exact?o:new RegExp(""+e(U)+u+e(U),"g")};var C="(?:(?:[a-z]+:)?//)",T="(?:\\S+(?::\\S*)?@)?",S=_.v4().source,P=_.v6().source,A="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",O="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",R="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",z="(?::\\d{2,5})?",F='(?:[/?#][^\\s"]*)?',N="(?:"+C+"|www\\.)"+T+"(?:localhost|"+S+"|"+P+"|"+A+O+R+")"+z+F;return Uv=new RegExp("(?:^"+N+"$)","i"),Uv},bP={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Kh={integer:function(e){return Kh.number(e)&&parseInt(e,10)===e},float:function(e){return Kh.number(e)&&!Kh.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Kh.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(bP.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Zq())},hex:function(e){return typeof e=="string"&&!!e.match(bP.hex)}},Xq=function(e,r,i,u,d){if(e.required&&r===void 0){$D(e,r,i,u,d);return}var m=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;m.indexOf(o)>-1?Kh[o](r)||u.push(Lo(d.messages.types[o],e.fullField,e.type)):o&&typeof r!==e.type&&u.push(Lo(d.messages.types[o],e.fullField,e.type))},Yq=function(e,r,i,u,d){var m=typeof e.len=="number",o=typeof e.min=="number",_=typeof e.max=="number",C=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T=r,S=null,P=typeof r=="number",A=typeof r=="string",O=Array.isArray(r);if(P?S="number":A?S="string":O&&(S="array"),!S)return!1;O&&(T=r.length),A&&(T=r.replace(C,"_").length),m?T!==e.len&&u.push(Lo(d.messages[S].len,e.fullField,e.len)):o&&!_&&T<e.min?u.push(Lo(d.messages[S].min,e.fullField,e.min)):_&&!o&&T>e.max?u.push(Lo(d.messages[S].max,e.fullField,e.max)):o&&_&&(T<e.min||T>e.max)&&u.push(Lo(d.messages[S].range,e.fullField,e.min,e.max))},cd="enum",Jq=function(e,r,i,u,d){e[cd]=Array.isArray(e[cd])?e[cd]:[],e[cd].indexOf(r)===-1&&u.push(Lo(d.messages[cd],e.fullField,e[cd].join(", ")))},Qq=function(e,r,i,u,d){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||u.push(Lo(d.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var m=new RegExp(e.pattern);m.test(r)||u.push(Lo(d.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},br={required:$D,whitespace:Wq,type:Xq,range:Yq,enum:Jq,pattern:Qq},eW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r,"string")&&!e.required)return i();br.required(e,r,u,m,d,"string"),Si(r,"string")||(br.type(e,r,u,m,d),br.range(e,r,u,m,d),br.pattern(e,r,u,m,d),e.whitespace===!0&&br.whitespace(e,r,u,m,d))}i(m)},tW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d),r!==void 0&&br.type(e,r,u,m,d)}i(m)},nW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(r===""&&(r=void 0),Si(r)&&!e.required)return i();br.required(e,r,u,m,d),r!==void 0&&(br.type(e,r,u,m,d),br.range(e,r,u,m,d))}i(m)},rW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d),r!==void 0&&br.type(e,r,u,m,d)}i(m)},iW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d),Si(r)||br.type(e,r,u,m,d)}i(m)},oW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d),r!==void 0&&(br.type(e,r,u,m,d),br.range(e,r,u,m,d))}i(m)},aW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d),r!==void 0&&(br.type(e,r,u,m,d),br.range(e,r,u,m,d))}i(m)},sW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(r==null&&!e.required)return i();br.required(e,r,u,m,d,"array"),r!=null&&(br.type(e,r,u,m,d),br.range(e,r,u,m,d))}i(m)},lW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d),r!==void 0&&br.type(e,r,u,m,d)}i(m)},uW="enum",cW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d),r!==void 0&&br[uW](e,r,u,m,d)}i(m)},dW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r,"string")&&!e.required)return i();br.required(e,r,u,m,d),Si(r,"string")||br.pattern(e,r,u,m,d)}i(m)},fW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r,"date")&&!e.required)return i();if(br.required(e,r,u,m,d),!Si(r,"date")){var _;r instanceof Date?_=r:_=new Date(r),br.type(e,_,u,m,d),_&&br.range(e,_.getTime(),u,m,d)}}i(m)},hW=function(e,r,i,u,d){var m=[],o=Array.isArray(r)?"array":typeof r;br.required(e,r,u,m,d,o),i(m)},K0=function(e,r,i,u,d){var m=e.type,o=[],_=e.required||!e.required&&u.hasOwnProperty(e.field);if(_){if(Si(r,m)&&!e.required)return i();br.required(e,r,u,o,d,m),Si(r,m)||br.type(e,r,u,o,d)}i(o)},pW=function(e,r,i,u,d){var m=[],o=e.required||!e.required&&u.hasOwnProperty(e.field);if(o){if(Si(r)&&!e.required)return i();br.required(e,r,u,m,d)}i(m)},Qh={string:eW,method:tW,number:nW,boolean:rW,regexp:iW,integer:oW,float:aW,array:sW,object:lW,enum:cW,pattern:dW,date:fW,url:K0,hex:K0,email:K0,required:hW,any:pW};function Tb(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Eb=Tb(),Kp=function(){function t(r){this.rules=null,this._messages=Eb,this.define(r)}var e=t.prototype;return e.define=function(i){var u=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(d){var m=i[d];u.rules[d]=Array.isArray(m)?m:[m]})},e.messages=function(i){return i&&(this._messages=xP(Tb(),i)),this._messages},e.validate=function(i,u,d){var m=this;u===void 0&&(u={}),d===void 0&&(d=function(){});var o=i,_=u,C=d;if(typeof _=="function"&&(C=_,_={}),!this.rules||Object.keys(this.rules).length===0)return C&&C(null,o),Promise.resolve(o);function T(R){var z=[],F={};function N(G){if(Array.isArray(G)){var q;z=(q=z).concat.apply(q,G)}else z.push(G)}for(var U=0;U<R.length;U++)N(R[U]);z.length?(F=Sb(z),C(z,F)):C(null,o)}if(_.messages){var S=this.messages();S===Eb&&(S=Tb()),xP(S,_.messages),_.messages=S}else _.messages=this.messages();var P={},A=_.keys||Object.keys(this.rules);A.forEach(function(R){var z=m.rules[R],F=o[R];z.forEach(function(N){var U=N;typeof U.transform=="function"&&(o===i&&(o=Hu({},o)),F=o[R]=U.transform(F)),typeof U=="function"?U={validator:U}:U=Hu({},U),U.validator=m.getValidationMethod(U),U.validator&&(U.field=R,U.fullField=U.fullField||R,U.type=m.getType(U),P[R]=P[R]||[],P[R].push({rule:U,value:F,source:o,field:R}))})});var O={};return Gq(P,_,function(R,z){var F=R.rule,N=(F.type==="object"||F.type==="array")&&(typeof F.fields=="object"||typeof F.defaultField=="object");N=N&&(F.required||!F.required&&R.value),F.field=R.field;function U(V,Z){return Hu({},Z,{fullField:F.fullField+"."+V,fullFields:F.fullFields?[].concat(F.fullFields,[V]):[V]})}function G(V){V===void 0&&(V=[]);var Z=Array.isArray(V)?V:[V];!_.suppressWarning&&Z.length&&t.warning("async-validator:",Z),Z.length&&F.message!==void 0&&(Z=[].concat(F.message));var Q=Z.map(_P(F,o));if(_.first&&Q.length)return O[F.field]=1,z(Q);if(!N)z(Q);else{if(F.required&&!R.value)return F.message!==void 0?Q=[].concat(F.message).map(_P(F,o)):_.error&&(Q=[_.error(F,Lo(_.messages.required,F.field))]),z(Q);var te={};F.defaultField&&Object.keys(R.value).map(function(ce){te[ce]=F.defaultField}),te=Hu({},te,R.rule.fields);var ie={};Object.keys(te).forEach(function(ce){var de=te[ce],xe=Array.isArray(de)?de:[de];ie[ce]=xe.map(U.bind(null,ce))});var ve=new t(ie);ve.messages(_.messages),R.rule.options&&(R.rule.options.messages=_.messages,R.rule.options.error=_.error),ve.validate(R.value,R.rule.options||_,function(ce){var de=[];Q&&Q.length&&de.push.apply(de,Q),ce&&ce.length&&de.push.apply(de,ce),z(de.length?de:null)})}}var q;if(F.asyncValidator)q=F.asyncValidator(F,R.value,G,R.source,_);else if(F.validator){try{q=F.validator(F,R.value,G,R.source,_)}catch(V){console.error==null||console.error(V),_.suppressValidatorError||setTimeout(function(){throw V},0),G(V.message)}q===!0?G():q===!1?G(typeof F.message=="function"?F.message(F.fullField||F.field):F.message||(F.fullField||F.field)+" fails"):q instanceof Array?G(q):q instanceof Error&&G(q.message)}q&&q.then&&q.then(function(){return G()},function(V){return G(V)})},function(R){T(R)},o)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Qh.hasOwnProperty(i.type))throw new Error(Lo("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var u=Object.keys(i),d=u.indexOf("message");return d!==-1&&u.splice(d,1),u.length===1&&u[0]==="required"?Qh.required:Qh[this.getType(i)]||void 0},t}();Kp.register=function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");Qh[e]=r};Kp.warning=jq;Kp.messages=Eb;Kp.validators=Qh;function Fl(t){return t==null?[]:Array.isArray(t)?t:[t]}function jD(t,e){for(var r=t,i=0;i<e.length;i+=1){if(r==null)return;r=r[e[i]]}return r}function VD(t,e,r,i){if(!e.length)return r;var u=iw(e),d=u[0],m=u.slice(1),o;return!t&&typeof d=="number"?o=[]:Array.isArray(t)?o=bn(t):o=H({},t),i&&r===void 0&&m.length===1?delete o[d][m[0]]:o[d]=VD(o[d],m,r,i),o}function mW(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&i&&r===void 0&&!jD(t,e.slice(0,-1))?t:VD(t,e,r,i)}function Ib(t){return Fl(t)}function vW(t,e){var r=jD(t,e);return r}function gW(t,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=mW(t,e,r,i);return u}function yW(t,e){return t&&t.some(function(r){return xW(r,e)})}function wP(t){return On(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function UD(t,e){var r=Array.isArray(t)?bn(t):H({},t);return e&&Object.keys(e).forEach(function(i){var u=r[i],d=e[i],m=wP(u)&&wP(d);r[i]=m?UD(u,d||{}):d}),r}function _W(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return r.reduce(function(u,d){return UD(u,d)},t)}function CP(t,e){var r={};return e.forEach(function(i){var u=vW(t,i);r=gW(r,i,u)}),r}function xW(t,e){return!t||!e||t.length!==e.length?!1:t.every(function(r,i){return e[i]===r})}var Oo="'${name}' is not a valid ${type}",Sy={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Oo,method:Oo,array:Oo,object:Oo,number:Oo,date:Oo,boolean:Oo,integer:Oo,float:Oo,regexp:Oo,email:Oo,url:Oo,hex:Oo},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},bW=Kp;function wW(t,e){return t.replace(/\$\{\w+\}/g,function(r){var i=r.slice(2,-1);return e[i]})}function Pb(t,e,r,i,u){return Ab.apply(this,arguments)}function Ab(){return Ab=Fp(rs.mark(function t(e,r,i,u,d){var m,o,_,C,T,S,P,A;return rs.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return m=H({},i),delete m.ruleIndex,delete m.trigger,o=null,m&&m.type==="array"&&m.defaultField&&(o=m.defaultField,delete m.defaultField),_=new bW(Ie({},e,[m])),C=_W({},Sy,u.validateMessages),_.messages(C),T=[],R.prev=9,R.next=12,Promise.resolve(_.validate(Ie({},e,r),H({},u)));case 12:R.next=17;break;case 14:R.prev=14,R.t0=R.catch(9),R.t0.errors?T=R.t0.errors.map(function(z,F){var N=z.message;return Co(N)?wo(N,{key:"error_".concat(F)}):N}):(console.error(R.t0),T=[C.default()]);case 17:if(!(!T.length&&o)){R.next=22;break}return R.next=20,Promise.all(r.map(function(z,F){return Pb("".concat(e,".").concat(F),z,o,u,d)}));case 20:return S=R.sent,R.abrupt("return",S.reduce(function(z,F){return[].concat(bn(z),bn(F))},[]));case 22:return P=H(H({},i),{},{name:e,enum:(i.enum||[]).join(", ")},d),A=T.map(function(z){return typeof z=="string"?wW(z,P):z}),R.abrupt("return",A);case 25:case"end":return R.stop()}},t,null,[[9,14]])})),Ab.apply(this,arguments)}function KD(t,e,r,i,u,d){var m=t.join("."),o=r.map(function(T,S){var P=T.validator,A=H(H({},T),{},{ruleIndex:S});return P&&(A.validator=function(O,R,z){var F=!1,N=function(){for(var q=arguments.length,V=new Array(q),Z=0;Z<q;Z++)V[Z]=arguments[Z];Promise.resolve().then(function(){F||z.apply(void 0,V)})},U=P(O,R,N);F=U&&typeof U.then=="function"&&typeof U.catch=="function",F&&U.then(function(){z()}).catch(function(G){z(G||" ")})}),A}).sort(function(T,S){var P=T.warningOnly,A=T.ruleIndex,O=S.warningOnly,R=S.ruleIndex;return!!P==!!O?A-R:P?1:-1}),_;if(u===!0)_=new Promise(function(){var T=Fp(rs.mark(function S(P,A){var O,R,z;return rs.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:O=0;case 1:if(!(O<o.length)){N.next=12;break}return R=o[O],N.next=5,Pb(m,e,R,i,d);case 5:if(z=N.sent,!z.length){N.next=9;break}return A([{errors:z,rule:R}]),N.abrupt("return");case 9:O+=1,N.next=1;break;case 12:P([]);case 13:case"end":return N.stop()}},S)}));return function(S,P){return T.apply(this,arguments)}}());else{var C=o.map(function(T){return Pb(m,e,T,i,d).then(function(S){return{errors:S,rule:T}})});_=(u?SW(C):CW(C)).then(function(T){return Promise.reject(T)})}return _.catch(function(T){return T}),_}function CW(t){return Mb.apply(this,arguments)}function Mb(){return Mb=Fp(rs.mark(function t(e){return rs.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(e).then(function(u){var d,m=(d=[]).concat.apply(d,bn(u));return m}));case 1:case"end":return i.stop()}},t)})),Mb.apply(this,arguments)}function SW(t){return kb.apply(this,arguments)}function kb(){return kb=Fp(rs.mark(function t(e){var r;return rs.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=0,u.abrupt("return",new Promise(function(d){e.forEach(function(m){m.then(function(o){o.errors.length&&d([o]),r+=1,r===e.length&&d([])})})}));case 2:case"end":return u.stop()}},t)})),kb.apply(this,arguments)}var TW=1,EW=2;function IW(t,e,r,i){var u=r.length,d=u,m=!i;if(t==null)return!d;for(t=Object(t);u--;){var o=r[u];if(m&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++u<d;){o=r[u];var _=o[0],C=t[_],T=o[1];if(m&&o[2]){if(C===void 0&&!(_ in t))return!1}else{var S=new Qa;if(i)var P=i(C,T,_,t,e,S);if(!(P===void 0?fy(T,C,TW|EW,i,S):P))return!1}}return!0}function GD(t){return t===t&&!$s(t)}function PW(t){for(var e=Np(t),r=e.length;r--;){var i=e[r],u=t[i];e[r]=[i,u,GD(u)]}return e}function HD(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function AW(t){var e=PW(t);return e.length==1&&e[0][2]?HD(e[0][0],e[0][1]):function(r){return r===t||IW(r,t,e)}}function MW(t,e,r){var i=t==null?void 0:zw(t,e);return i===void 0?r:i}var kW=1,OW=2;function DW(t,e){return Dw(t)&&GD(e)?HD(jp(t),e):function(r){var i=MW(r,t);return i===void 0&&i===e?vG(r,t):fy(e,i,kW|OW)}}function RW(t){return function(e){return zw(e,t)}}function zW(t){return Dw(t)?zK(jp(t)):RW(t)}function qD(t){return typeof t=="function"?t:t==null?Lw:typeof t=="object"?ba(t)?DW(t[0],t[1]):AW(t):zW(t)}function LW(t){return function(e,r,i){var u=Object(e);if(!dy(e)){var d=qD(r);e=Np(e),r=function(o){return d(u[o],o,u)}}var m=t(e,r,i);return m>-1?u[d?e[m]:m]:void 0}}var FW=Math.max;function BW(t,e,r){var i=t==null?0:t.length;if(!i)return-1;var u=r==null?0:HK(r);return u<0&&(u=FW(i+u,0)),rD(t,qD(e),u)}var NW=LW(BW);const $W=NW;var WD=Symbol("formContextKey"),ZD=function(e){sr(WD,e)},Gw=function(){return Kn(WD,{name:ue(function(){}),labelAlign:ue(function(){return"right"}),vertical:ue(function(){return!1}),addField:function(r,i){},removeField:function(r){},model:ue(function(){}),rules:ue(function(){}),colon:ue(function(){}),labelWrap:ue(function(){}),labelCol:ue(function(){}),requiredMark:ue(function(){return!1}),validateTrigger:ue(function(){}),onValidate:function(){},validateMessages:ue(function(){return Sy})})},XD=Symbol("formItemPrefixContextKey"),jW=function(e){sr(XD,e)},VW=function(){return Kn(XD,{prefixCls:ue(function(){return""})})},Hw=function(e,r){var i,u,d,m,o=r.slots,_=r.emit,C=r.attrs,T=H(H({},e),C),S=T.prefixCls,P=T.htmlFor,A=T.labelCol,O=T.labelAlign,R=T.colon,z=T.required,F=T.requiredMark,N=Lp("Form"),U=zn(N,1),G=U[0],q=(i=e.label)!==null&&i!==void 0?i:(u=o.label)===null||u===void 0?void 0:u.call(o);if(!q)return null;var V=Gw(),Z=V.vertical,Q=V.labelAlign,te=V.labelCol,ie=V.labelWrap,ve=V.colon,ce=A||(te==null?void 0:te.value)||{},de=O||(Q==null?void 0:Q.value),xe="".concat(S,"-item-label"),De=qt(xe,de==="left"&&"".concat(xe,"-left"),ce.class,Ie({},"".concat(xe,"-wrap"),!!ie.value)),ge=q,he=R===!0||(ve==null?void 0:ve.value)!==!1&&R!==!1,me=he&&!Z.value;if(me&&typeof q=="string"&&q.trim()!==""&&(ge=q.replace(/[:|：]\s*$/,"")),ge=j(Hn,null,[ge,(d=o.tooltip)===null||d===void 0?void 0:d.call(o,{class:"".concat(S,"-item-tooltip")})]),F==="optional"&&!z){var Pe,He;ge=j(Hn,null,[ge,j("span",{class:"".concat(S,"-item-optional")},[((Pe=G.value)===null||Pe===void 0?void 0:Pe.optional)||((He=Ld.Form)===null||He===void 0?void 0:He.optional)])])}var Ke=qt((m={},Ie(m,"".concat(S,"-item-required"),z),Ie(m,"".concat(S,"-item-required-mark-optional"),F==="optional"),Ie(m,"".concat(S,"-item-no-colon"),!he),m));return j(ED,H(H({},ce),{},{class:De}),{default:function(){return[j("label",{for:P,class:Ke,title:typeof q=="string"?q:"",onClick:function(Te){return _("click",Te)}},[ge])]}})};Hw.displayName="FormItemLabel";Hw.inheritAttrs=!1;const UW=Hw,KW=jt({compatConfig:{MODE:3},name:"ErrorList",props:["errors","help","onDomErrorVisibleChange","helpStatus","warnings"],setup:function(e){var r=hr("",e),i=r.prefixCls,u=VW(),d=u.prefixCls,m=u.status,o=ue(function(){return"".concat(d.value,"-item-explain")}),_=ue(function(){return!!(e.errors&&e.errors.length)}),C=qe(m.value);return an([_,m],function(){_.value&&(C.value=m.value)}),function(){var T,S,P=Ow("".concat(i.value,"-show-help-item")),A=_O("".concat(i.value,"-show-help-item"),P);return A.class=o.value,(T=e.errors)!==null&&T!==void 0&&T.length?j(kk,H(H({},A),{},{tag:"div"}),{default:function(){return[(S=e.errors)===null||S===void 0?void 0:S.map(function(R,z){return j("div",{key:z,role:"alert",class:C.value?"".concat(o.value,"-").concat(C.value):""},[R])})]}}):null}}});var GW={success:PO,warning:IO,error:ay,validating:Nd},HW=jt({compatConfig:{MODE:3},slots:["help","extra","errors"],inheritAttrs:!1,props:["prefixCls","errors","hasFeedback","onDomErrorVisibleChange","wrapperCol","help","extra","status"],setup:function(e,r){var i=r.slots,u=Gw(),d=u.wrapperCol,m=H({},u);return delete m.labelCol,delete m.wrapperCol,ZD(m),jW({prefixCls:ue(function(){return e.prefixCls}),status:ue(function(){return e.status})}),function(){var o,_,C,T=e.prefixCls,S=e.wrapperCol,P=e.help,A=P===void 0?(o=i.help)===null||o===void 0?void 0:o.call(i):P,O=e.errors,R=O===void 0?(_=i.errors)===null||_===void 0?void 0:_.call(i):O,z=e.hasFeedback,F=e.status,N=e.extra,U=N===void 0?(C=i.extra)===null||C===void 0?void 0:C.call(i):N,G="".concat(T,"-item"),q=S||(d==null?void 0:d.value)||{},V=qt("".concat(G,"-control"),q.class),Z=F&&GW[F];return j(ED,H(H({},q),{},{class:V}),{default:function(){var te;return j(Hn,null,[j("div",{class:"".concat(G,"-control-input")},[j("div",{class:"".concat(G,"-control-input-content")},[(te=i.default)===null||te===void 0?void 0:te.call(i)]),z&&Z?j("span",{class:"".concat(G,"-children-icon")},[j(Z,null,null)]):null]),j(KW,{errors:R,help:A,class:"".concat(G,"-explain-connected")},null),U?j("div",{class:"".concat(G,"-extra")},[U]):null])}})}}});const qW=HW;function WW(t){var e=mr(t.value.slice()),r=null;return vr(function(){clearTimeout(r),r=setTimeout(function(){e.value=t.value},t.value.length?0:10)}),e}Yi("success","warning","error","validating","");function G0(t,e,r){var i=t,u=e,d=0;try{for(var m=u.length;d<m-1&&!(!i&&!r);++d){var o=u[d];if(o in i)i=i[o];else{if(r)throw Error("please transfer a valid name path to form item!");break}}if(r&&!i)throw Error("please transfer a valid name path to form item!")}catch{console.error("please transfer a valid name path to form item!")}return{o:i,k:u[d],v:i?i[u[d]]:void 0}}var ZW=function(){return{htmlFor:String,prefixCls:String,label:et.any,help:et.any,extra:et.any,labelCol:{type:Object},wrapperCol:{type:Object},hasFeedback:{type:Boolean,default:!1},colon:{type:Boolean,default:void 0},labelAlign:et.oneOf(Yi("left","right")),prop:{type:[String,Number,Array]},name:{type:[String,Number,Array]},rules:[Array,Object],autoLink:{type:Boolean,default:!0},required:{type:Boolean,default:void 0},validateFirst:{type:Boolean,default:void 0},validateStatus:et.oneOf(Yi("","success","warning","error","validating")),validateTrigger:{type:[String,Array]},messageVariables:{type:Object},hidden:Boolean,noStyle:Boolean}},XW=0,YW="form_item";const qw=jt({compatConfig:{MODE:3},name:"AFormItem",inheritAttrs:!1,__ANT_NEW_FORM_ITEM:!0,props:ZW(),slots:["help","label","extra"],setup:function(e,r){var i=r.slots,u=r.attrs,d=r.expose;e.prop;var m="form-item-".concat(++XW),o=hr("form",e),_=o.prefixCls,C=Gw(),T=ue(function(){return e.name||e.prop}),S=qe([]),P=qe(!1),A=qe(),O=ue(function(){var Pe=T.value;return Ib(Pe)}),R=ue(function(){if(O.value.length){var Pe=C.name.value,He=O.value.join("_");return Pe?"".concat(Pe,"_").concat(He):"".concat(YW,"_").concat(He)}else return}),z=function(){var He=C.model.value;if(!(!He||!T.value))return G0(He,O.value,!0).v},F=ue(function(){return z()}),N=qe(ig(F.value)),U=ue(function(){var Pe=e.validateTrigger!==void 0?e.validateTrigger:C.validateTrigger.value;return Pe=Pe===void 0?"change":Pe,Fl(Pe)}),G=ue(function(){var Pe=C.rules.value,He=e.rules,Ke=e.required!==void 0?{required:!!e.required,trigger:U.value}:[],Re=G0(Pe,O.value);Pe=Pe?Re.o[Re.k]||Re.v:[];var Le=[].concat(He||Pe||[]);return $W(Le,function(Te){return Te.required})?Le:Le.concat(Ke)}),q=ue(function(){var Pe=G.value,He=!1;return Pe&&Pe.length&&Pe.every(function(Ke){return Ke.required?(He=!0,!1):!0}),He||e.required}),V=qe();vr(function(){V.value=e.validateStatus});var Z=ue(function(){var Pe={};return typeof e.label=="string"?Pe.label=e.label:e.name&&(Pe.label=String(name)),e.messageVariables&&(Pe=H(H({},Pe),e.messageVariables)),Pe}),Q=function(He){if(O.value.length!==0){var Ke=e.validateFirst,Re=Ke===void 0?!1:Ke,Le=He||{},Te=Le.triggerName,oe=G.value;if(Te&&(oe=oe.filter(function(Fe){var lt=Fe.trigger;if(!lt&&!U.value.length)return!0;var vt=Fl(lt||U.value);return vt.includes(Te)})),!oe.length)return Promise.resolve();var ze=KD(O.value,F.value,oe,H({validateMessages:C.validateMessages.value},He),Re,Z.value);return V.value="validating",S.value=[],ze.catch(function(Fe){return Fe}).then(function(){var Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(V.value==="validating"){var lt=Fe.filter(function(vt){return vt&&vt.errors.length});V.value=lt.length?"error":"success",S.value=lt.map(function(vt){return vt.errors}),C.onValidate(T.value,!S.value.length,S.value.length?Yn(S.value[0]):null)}}),ze}},te=function(){Q({triggerName:"blur"})},ie=function(){if(P.value){P.value=!1;return}Q({triggerName:"change"})},ve=function(){V.value=e.validateStatus,P.value=!1,S.value=[]},ce=function(){V.value=e.validateStatus,P.value=!0,S.value=[];var He=C.model.value||{},Ke=F.value,Re=G0(He,O.value,!0);Array.isArray(Ke)?Re.o[Re.k]=[].concat(N.value):Re.o[Re.k]=N.value,gr(function(){P.value=!1})},de=ue(function(){return e.htmlFor===void 0?R.value:e.htmlFor}),xe=function(){var He=de.value;if(!(!He||!A.value)){var Ke=A.value.$el.querySelector('[id="'.concat(He,'"]'));Ke&&Ke.focus&&Ke.focus()}};d({onFieldBlur:te,onFieldChange:ie,clearValidate:ve,resetField:ce}),w7({id:R,onFieldBlur:function(){e.autoLink&&te()},onFieldChange:function(){e.autoLink&&ie()},clearValidate:ve},ue(function(){return!!(e.autoLink&&C.model.value&&T.value)}));var De=!1;an(T,function(Pe){Pe?De||(De=!0,C.addField(m,{fieldValue:F,fieldId:R,fieldName:T,resetField:ce,clearValidate:ve,namePath:O,validateRules:Q,rules:G})):(De=!1,C.removeField(m))},{immediate:!0}),Er(function(){C.removeField(m)});var ge=WW(S),he=ue(function(){return e.validateStatus!==void 0?e.validateStatus:ge.value.length?"error":V.value}),me=ue(function(){var Pe;return Pe={},Ie(Pe,"".concat(_.value,"-item"),!0),Ie(Pe,"".concat(_.value,"-item-has-feedback"),he.value&&e.hasFeedback),Ie(Pe,"".concat(_.value,"-item-has-success"),he.value==="success"),Ie(Pe,"".concat(_.value,"-item-has-warning"),he.value==="warning"),Ie(Pe,"".concat(_.value,"-item-has-error"),he.value==="error"),Ie(Pe,"".concat(_.value,"-item-is-validating"),he.value==="validating"),Ie(Pe,"".concat(_.value,"-item-hidden"),e.hidden),Pe});return function(){var Pe,He;if(e.noStyle)return(Pe=i.default)===null||Pe===void 0?void 0:Pe.call(i);var Ke=(He=e.help)!==null&&He!==void 0?He:i.help?Ko(i.help()):null;return j(FG,H(H({},u),{},{class:[me.value,Ke!=null||ge.value.length?"".concat(_.value,"-item-with-help"):"",u.class],key:"row"}),{default:function(){var Le,Te,oe,ze;return j(Hn,null,[j(UW,H(H({},e),{},{htmlFor:de.value,required:q.value,requiredMark:C.requiredMark.value,prefixCls:_.value,onClick:xe,label:(Le=e.label)!==null&&Le!==void 0?Le:(Te=i.label)===null||Te===void 0?void 0:Te.call(i)}),null),j(qW,H(H({},e),{},{errors:Ke!=null?Fl(Ke):ge.value,prefixCls:_.value,status:he.value,ref:A,help:Ke,extra:(oe=e.extra)!==null&&oe!==void 0?oe:(ze=i.extra)===null||ze===void 0?void 0:ze.call(i)}),{default:i.default})])}})}}});function YD(t){var e=!1,r=t.length,i=[];return t.length?new Promise(function(u,d){t.forEach(function(m,o){m.catch(function(_){return e=!0,_}).then(function(_){r-=1,i[o]=_,!(r>0)&&(e&&d(i),u(i))})})}):Promise.resolve([])}function SP(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function TP(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function H0(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return TP(r.overflowY,e)||TP(r.overflowX,e)||function(i){var u=function(d){if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch{return null}}(i);return!!u&&(u.clientHeight<i.scrollHeight||u.clientWidth<i.scrollWidth)}(t)}return!1}function Kv(t,e,r,i,u,d,m,o){return d<t&&m>e||d>t&&m<e?0:d<=t&&o<=r||m>=e&&o>=r?d-t-i:m>e&&o<r||d<t&&o>r?m-e+u:0}function EP(t,e){var r=window,i=e.scrollMode,u=e.block,d=e.inline,m=e.boundary,o=e.skipOverflowHiddenElements,_=typeof m=="function"?m:function(kt){return kt!==m};if(!SP(t))throw new TypeError("Invalid target");for(var C=document.scrollingElement||document.documentElement,T=[],S=t;SP(S)&&_(S);){if((S=S.parentElement)===C){T.push(S);break}S!=null&&S===document.body&&H0(S)&&!H0(document.documentElement)||S!=null&&H0(S,o)&&T.push(S)}for(var P=r.visualViewport?r.visualViewport.width:innerWidth,A=r.visualViewport?r.visualViewport.height:innerHeight,O=window.scrollX||pageXOffset,R=window.scrollY||pageYOffset,z=t.getBoundingClientRect(),F=z.height,N=z.width,U=z.top,G=z.right,q=z.bottom,V=z.left,Z=u==="start"||u==="nearest"?U:u==="end"?q:U+F/2,Q=d==="center"?V+N/2:d==="end"?G:V,te=[],ie=0;ie<T.length;ie++){var ve=T[ie],ce=ve.getBoundingClientRect(),de=ce.height,xe=ce.width,De=ce.top,ge=ce.right,he=ce.bottom,me=ce.left;if(i==="if-needed"&&U>=0&&V>=0&&q<=A&&G<=P&&U>=De&&q<=he&&V>=me&&G<=ge)return te;var Pe=getComputedStyle(ve),He=parseInt(Pe.borderLeftWidth,10),Ke=parseInt(Pe.borderTopWidth,10),Re=parseInt(Pe.borderRightWidth,10),Le=parseInt(Pe.borderBottomWidth,10),Te=0,oe=0,ze="offsetWidth"in ve?ve.offsetWidth-ve.clientWidth-He-Re:0,Fe="offsetHeight"in ve?ve.offsetHeight-ve.clientHeight-Ke-Le:0;if(C===ve)Te=u==="start"?Z:u==="end"?Z-A:u==="nearest"?Kv(R,R+A,A,Ke,Le,R+Z,R+Z+F,F):Z-A/2,oe=d==="start"?Q:d==="center"?Q-P/2:d==="end"?Q-P:Kv(O,O+P,P,He,Re,O+Q,O+Q+N,N),Te=Math.max(0,Te+R),oe=Math.max(0,oe+O);else{Te=u==="start"?Z-De-Ke:u==="end"?Z-he+Le+Fe:u==="nearest"?Kv(De,he,de,Ke,Le+Fe,Z,Z+F,F):Z-(De+de/2)+Fe/2,oe=d==="start"?Q-me-He:d==="center"?Q-(me+xe/2)+ze/2:d==="end"?Q-ge+Re+ze:Kv(me,ge,xe,He,Re+ze,Q,Q+N,N);var lt=ve.scrollLeft,vt=ve.scrollTop;Z+=vt-(Te=Math.max(0,Math.min(vt+Te,ve.scrollHeight-de+Fe))),Q+=lt-(oe=Math.max(0,Math.min(lt+oe,ve.scrollWidth-xe+ze)))}te.push({el:ve,top:Te,left:oe})}return te}function JD(t){return t===Object(t)&&Object.keys(t).length!==0}function JW(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(i){var u=i.el,d=i.top,m=i.left;u.scroll&&r?u.scroll({top:d,left:m,behavior:e}):(u.scrollTop=d,u.scrollLeft=m)})}function QW(t){return t===!1?{block:"end",inline:"nearest"}:JD(t)?t:{block:"start",inline:"nearest"}}function eZ(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(JD(e)&&typeof e.behavior=="function")return e.behavior(r?EP(t,e):[]);if(!!r){var i=QW(e);return JW(EP(t,i),i.behavior)}}var tZ=Math.min;function nZ(t,e,r){for(var i=r?oD:iD,u=t[0].length,d=t.length,m=d,o=Array(d),_=1/0,C=[];m--;){var T=t[m];m&&e&&(T=xy(T,cy(e))),_=tZ(T.length,_),o[m]=!r&&(e||u>=120&&T.length>=120)?new $d(m&&T):void 0}T=t[0];var S=-1,P=o[0];e:for(;++S<u&&C.length<_;){var A=T[S],O=e?e(A):A;if(A=r||A!==0?A:0,!(P?Mg(P,O):i(C,O,r))){for(m=d;--m;){var R=o[m];if(!(R?Mg(R,O):i(t[m],O,r)))continue e}P&&P.push(O),C.push(A)}}return C}function rZ(t,e){return bD(xD(t,e,Lw),t+"")}function iZ(t){return ts(t)&&dy(t)}function oZ(t){return iZ(t)?t:[]}var aZ=rZ(function(t){var e=xy(t,oZ);return e.length&&e[0]===t[0]?nZ(e):[]});const sZ=aZ;function lZ(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function uZ(t,e){return e.length<2?t:zw(t,RK(e,0,-1))}function cZ(t,e){return e=wy(e,t),t=uZ(t,e),t==null||delete t[jp(lZ(e))]}function dZ(t){return qk(t)?void 0:t}var fZ=1,hZ=2,pZ=4,mZ=PG(function(t,e){var r={};if(t==null)return r;var i=!1;e=xy(e,function(d){return d=wy(d,t),i||(i=d.length>1),d}),Up(t,LD(t),r),i&&(r=Jh(r,fZ|hZ|pZ,dZ));for(var u=e.length;u--;)cZ(r,e[u]);return r});const vZ=mZ;function IP(t){var e=!1;return t&&t.length&&t.every(function(r){return r.required?(e=!0,!1):!0}),e}function PP(t){return t==null?[]:Array.isArray(t)?t:[t]}function q0(t,e,r){var i=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var u=e.split("."),d=0,m=u.length;d<m-1&&!(!i&&!r);++d){var o=u[d];if(o in i)i=i[o];else{if(r)throw new Error("please transfer a valid name path to validate!");break}}return{o:i,k:u[d],v:i?i[u[d]]:null,isValid:i&&u[d]in i}}function gZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qe({}),r=arguments.length>2?arguments[2]:void 0,i=ig(gi(t)),u=Or({}),d=mr([]),m=function(G){kr(gi(t),H(H({},ig(i)),G)),gr(function(){Object.keys(u).forEach(function(q){u[q]={autoLink:!1,required:IP(gi(e)[q])}})})},o=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1?arguments[1]:void 0;return q.length?G.filter(function(V){var Z=PP(V.trigger||"change");return sZ(Z,q).length}):G},_=null,C=function(G){for(var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=arguments.length>2?arguments[2]:void 0,Z=[],Q={},te=function(De){var ge=G[De],he=q0(gi(t),ge,V);if(!he.isValid)return"continue";Q[ge]=he.v;var me=o(gi(e)[ge],PP(q&&q.trigger));me.length&&Z.push(T(ge,he.v,me,q||{}).then(function(){return{name:ge,errors:[],warnings:[]}}).catch(function(Pe){var He=[],Ke=[];return Pe.forEach(function(Re){var Le=Re.rule.warningOnly,Te=Re.errors;Le?Ke.push.apply(Ke,bn(Te)):He.push.apply(He,bn(Te))}),He.length?Promise.reject({name:ge,errors:He,warnings:Ke}):{name:ge,errors:He,warnings:Ke}}))},ie=0;ie<G.length;ie++)var ve=te(ie);var ce=YD(Z);_=ce;var de=ce.then(function(){return _===ce?Promise.resolve(Q):Promise.reject([])}).catch(function(xe){var De=xe.filter(function(ge){return ge&&ge.errors.length});return Promise.reject({values:Q,errorFields:De,outOfDate:_!==ce})});return de.catch(function(xe){return xe}),de},T=function(G,q,V){var Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Q=KD([G],q,V,H({validateMessages:Sy},Z),!!Z.validateFirst);return u[G]?(u[G].validateStatus="validating",Q.catch(function(te){return te}).then(function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(u[G].validateStatus==="validating"){var ie,ve=te.filter(function(ce){return ce&&ce.errors.length});u[G].validateStatus=ve.length?"error":"success",u[G].help=ve.length?ve.map(function(ce){return ce.errors}):null,r==null||(ie=r.onValidate)===null||ie===void 0||ie.call(r,G,!ve.length,ve.length?Yn(u[G].help[0]):null)}}),Q):Q.catch(function(te){return te})},S=function(G,q){var V=[],Z=!0;G?Array.isArray(G)?V=G:V=[G]:(Z=!1,V=d.value);var Q=C(V,q||{},Z);return Q.catch(function(te){return te}),Q},P=function(G){var q=[];G?Array.isArray(G)?q=G:q=[G]:q=d.value,q.forEach(function(V){u[V]&&kr(u[V],{validateStatus:"",help:null})})},A=function(G){for(var q={autoLink:!1},V=[],Z=Array.isArray(G)?G:[G],Q=0;Q<Z.length;Q++){var te=Z[Q];(te==null?void 0:te.validateStatus)==="error"&&(q.validateStatus="error",te.help&&V.push(te.help)),q.required=q.required||(te==null?void 0:te.required)}return q.help=V,q},O=i,R=!0,z=function(G){var q=[];d.value.forEach(function(V){var Z=q0(G,V,!1),Q=q0(O,V,!1),te=R&&(r==null?void 0:r.immediate)&&Z.isValid;(te||!hy(Z.v,Q.v))&&q.push(V)}),S(q,{trigger:"change"}),R=!1,O=ig(Yn(G))},F=r==null?void 0:r.debounce,N=!0;return an(e,function(){d.value=e?Object.keys(gi(e)):[],!N&&r&&r.validateOnRuleChange&&S(),N=!1},{deep:!0,immediate:!0}),an(d,function(){var U={};d.value.forEach(function(q){U[q]=kr({},u[q],{autoLink:!1,required:IP(gi(e)[q])}),delete u[q]});for(var G in u)Object.prototype.hasOwnProperty.call(u,G)&&delete u[G];kr(u,U)},{immediate:!0}),an(t,F&&F.wait?Fw(z,F.wait,vZ(F,["wait"])):z,{immediate:r&&!!r.immediate,deep:!0}),{modelRef:t,rulesRef:e,initialModel:i,validateInfos:u,resetFields:m,validate:S,validateField:T,mergeValidateInfo:A,clearValidate:P}}var yZ=function(){return{layout:et.oneOf(Yi("horizontal","inline","vertical")),labelCol:{type:Object},wrapperCol:{type:Object},colon:{type:Boolean,default:void 0},labelAlign:et.oneOf(Yi("left","right")),labelWrap:{type:Boolean,default:void 0},prefixCls:String,requiredMark:{type:[String,Boolean],default:void 0},hideRequiredMark:{type:Boolean,default:void 0},model:et.object,rules:{type:Object},validateMessages:{type:Object,default:void 0},validateOnRuleChange:{type:Boolean,default:void 0},scrollToFirstError:{type:[Boolean,Object]},onSubmit:Function,name:String,validateTrigger:{type:[String,Array]},size:{type:String},onValuesChange:{type:Function},onFieldsChange:{type:Function},onFinish:{type:Function},onFinishFailed:{type:Function},onValidate:{type:Function}}};function _Z(t,e){return hy(Fl(t),Fl(e))}var xZ=jt({compatConfig:{MODE:3},name:"AForm",inheritAttrs:!1,props:Di(yZ(),{layout:"horizontal",hideRequiredMark:!1,colon:!0}),Item:qw,useForm:gZ,setup:function(e,r){var i=r.emit,u=r.slots,d=r.expose,m=r.attrs,o=T7(e),_=hr("form",e),C=_.prefixCls,T=_.direction,S=_.form,P=ue(function(){return e.requiredMark===""||e.requiredMark}),A=ue(function(){var he;return P.value!==void 0?P.value:S&&((he=S.value)===null||he===void 0?void 0:he.requiredMark)!==void 0?S.value.requiredMark:!e.hideRequiredMark}),O=ue(function(){var he,me;return(he=e.colon)!==null&&he!==void 0?he:(me=S.value)===null||me===void 0?void 0:me.colon}),R=nj(),z=R.validateMessages,F=ue(function(){return H(H(H({},Sy),z.value),e.validateMessages)}),N=ue(function(){var he;return qt(C.value,(he={},Ie(he,"".concat(C.value,"-").concat(e.layout),!0),Ie(he,"".concat(C.value,"-hide-required-mark"),A.value===!1),Ie(he,"".concat(C.value,"-rtl"),T.value==="rtl"),Ie(he,"".concat(C.value,"-").concat(o.value),o.value),he))}),U=qe(),G={},q=function(me,Pe){G[me]=Pe},V=function(me){delete G[me]},Z=function(me){var Pe=!!me,He=Pe?Fl(me).map(Ib):[];return Pe?Object.values(G).filter(function(Ke){return He.findIndex(function(Re){return _Z(Re,Ke.fieldName.value)})>-1}):Object.values(G)},Q=function(me){if(!e.model){Ll(!1,"Form","model is required for resetFields to work.");return}Z(me).forEach(function(Pe){Pe.resetField()})},te=function(me){Z(me).forEach(function(Pe){Pe.clearValidate()})},ie=function(me){var Pe=e.scrollToFirstError;if(i("finishFailed",me),Pe&&me.errorFields.length){var He={};On(Pe)==="object"&&(He=Pe),ce(me.errorFields[0].name,He)}},ve=function(){return De.apply(void 0,arguments)},ce=function(me){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},He=Z(me?[me]:void 0);if(He.length){var Ke=He[0].fieldId.value,Re=Ke?document.getElementById(Ke):null;Re&&eZ(Re,H({scrollMode:"if-needed",block:"nearest"},Pe))}},de=function(){var me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(me===!0){var Pe=[];return Object.values(G).forEach(function(He){var Ke=He.namePath;Pe.push(Ke.value)}),CP(e.model,Pe)}else return CP(e.model,me)},xe=function(me,Pe){if(Ll(!(me instanceof Function),"Form","validateFields/validateField/validate not support callback, please use promise instead"),!e.model)return Ll(!1,"Form","model is required for validateFields to work."),Promise.reject("Form `model` is required for validateFields to work.");var He=!!me,Ke=He?Fl(me).map(Ib):[],Re=[];Object.values(G).forEach(function(oe){var ze;if(He||Ke.push(oe.namePath.value),!!((ze=oe.rules)!==null&&ze!==void 0&&ze.value.length)){var Fe=oe.namePath.value;if(!He||yW(Ke,Fe)){var lt=oe.validateRules(H({validateMessages:F.value},Pe));Re.push(lt.then(function(){return{name:Fe,errors:[],warnings:[]}}).catch(function(vt){var kt=[],It=[];return vt.forEach(function(se){var ae=se.rule.warningOnly,Be=se.errors;ae?It.push.apply(It,bn(Be)):kt.push.apply(kt,bn(Be))}),kt.length?Promise.reject({name:Fe,errors:kt,warnings:It}):{name:Fe,errors:kt,warnings:It}}))}}});var Le=YD(Re);U.value=Le;var Te=Le.then(function(){return U.value===Le?Promise.resolve(de(Ke)):Promise.reject([])}).catch(function(oe){var ze=oe.filter(function(Fe){return Fe&&Fe.errors.length});return Promise.reject({values:de(Ke),errorFields:ze,outOfDate:U.value!==Le})});return Te.catch(function(oe){return oe}),Te},De=function(){return xe.apply(void 0,arguments)},ge=function(me){if(me.preventDefault(),me.stopPropagation(),i("submit",me),e.model){var Pe=xe();Pe.then(function(He){i("finish",He)}).catch(function(He){ie(He)})}};return d({resetFields:Q,clearValidate:te,validateFields:xe,getFieldsValue:de,validate:ve,scrollToField:ce}),ZD({model:ue(function(){return e.model}),name:ue(function(){return e.name}),labelAlign:ue(function(){return e.labelAlign}),labelCol:ue(function(){return e.labelCol}),labelWrap:ue(function(){return e.labelWrap}),wrapperCol:ue(function(){return e.wrapperCol}),vertical:ue(function(){return e.layout==="vertical"}),colon:O,requiredMark:A,validateTrigger:ue(function(){return e.validateTrigger}),rules:ue(function(){return e.rules}),addField:q,removeField:V,onValidate:function(me,Pe,He){i("validate",me,Pe,He)},validateMessages:F}),an(function(){return e.rules},function(){e.validateOnRuleChange&&xe()}),function(){var he;return j("form",H(H({},m),{},{onSubmit:ge,class:[N.value,m.class]}),[(he=u.default)===null||he===void 0?void 0:he.call(u)])}}});const zs=xZ;zs.useInjectFormItemContext=Ks;zs.ItemRest=ub;zs.install=function(t){return t.component(zs.name,zs),t.component(zs.Item.name,zs.Item),t.component(ub.name,ub),t};var bZ=function(){return{name:String,prefixCls:String,options:{type:Array,default:function(){return[]}},disabled:Boolean,id:String}},wZ=function(){return H(H({},bZ()),{},{defaultValue:{type:Array},value:{type:Array},onChange:{type:Function},"onUpdate:value":{type:Function}})},CZ=function(){return{prefixCls:String,defaultChecked:{type:Boolean,default:void 0},checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:et.any,name:String,id:String,indeterminate:{type:Boolean,default:void 0},type:{type:String,default:"checkbox"},autofocus:{type:Boolean,default:void 0},onChange:Function,"onUpdate:checked":Function,onClick:Function,skipGroup:{type:Boolean,default:!1}}},SZ=function(){return H(H({},CZ()),{},{indeterminate:{type:Boolean,default:!1}})},QD=Symbol("CheckboxGroupContext"),TZ=["indeterminate","skipGroup","id"],EZ=["onMouseenter","onMouseleave","onInput","class","style"];const es=jt({compatConfig:{MODE:3},name:"ACheckbox",inheritAttrs:!1,__ANT_CHECKBOX:!0,props:SZ(),setup:function(e,r){var i=r.emit,u=r.attrs,d=r.slots,m=r.expose,o=Ks(),_=hr("checkbox",e),C=_.prefixCls,T=_.direction,S=Kn(QD,void 0),P=Symbol("checkboxUniId");vr(function(){!e.skipGroup&&S&&S.registerValue(P,e.value)}),Er(function(){S&&S.cancelValue(P)}),wr(function(){Ll(e.checked!==void 0||S||e.value===void 0,"Checkbox","`value` is not validate prop, do you mean `checked`?")});var A=function(N){var U=N.target.checked;i("update:checked",U),i("change",N)},O=qe(),R=function(){var N;(N=O.value)===null||N===void 0||N.focus()},z=function(){var N;(N=O.value)===null||N===void 0||N.blur()};return m({focus:R,blur:z}),function(){var F,N,U=fo((F=d.default)===null||F===void 0?void 0:F.call(d)),G=e.indeterminate,q=e.skipGroup,V=e.id,Z=V===void 0?o.id.value:V,Q=Cr(e,TZ),te=u.onMouseenter,ie=u.onMouseleave;u.onInput;var ve=u.class,ce=u.style,de=Cr(u,EZ),xe=H(H({},Q),{},{id:Z,prefixCls:C.value},de);S&&!q?(xe.onChange=function(){for(var he=arguments.length,me=new Array(he),Pe=0;Pe<he;Pe++)me[Pe]=arguments[Pe];i.apply(void 0,["change"].concat(me)),S.toggleOption({label:U,value:e.value})},xe.name=S.name.value,xe.checked=S.mergedValue.value.indexOf(e.value)!==-1,xe.disabled=e.disabled||S.disabled.value,xe.indeterminate=G):xe.onChange=A;var De=qt((N={},Ie(N,"".concat(C.value,"-wrapper"),!0),Ie(N,"".concat(C.value,"-rtl"),T.value==="rtl"),Ie(N,"".concat(C.value,"-wrapper-checked"),xe.checked),Ie(N,"".concat(C.value,"-wrapper-disabled"),xe.disabled),N),ve),ge=qt(Ie({},"".concat(C.value,"-indeterminate"),G));return j("label",{class:De,style:ce,onMouseenter:te,onMouseleave:ie},[j(mD,H(H({},xe),{},{class:ge,ref:O}),null),U.length?j("span",null,[U]):null])}}});function IZ(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ry(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var i=0,u=function(){};return{s:u,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(C){throw C},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,m=!1,o;return{s:function(){r=r.call(t)},n:function(){var C=r.next();return d=C.done,C},e:function(C){m=!0,o=C},f:function(){try{!d&&r.return!=null&&r.return()}finally{if(m)throw o}}}}const Ob=jt({compatConfig:{MODE:3},name:"ACheckboxGroup",props:wZ(),setup:function(e,r){var i=r.slots,u=r.emit,d=r.expose,m=Ks(),o=hr("checkbox",e),_=o.prefixCls,C=o.direction,T=qe((e.value===void 0?e.defaultValue:e.value)||[]);an(function(){return e.value},function(){T.value=e.value||[]});var S=ue(function(){return e.options.map(function(N){return typeof N=="string"||typeof N=="number"?{label:N,value:N}:N})}),P=qe(Symbol()),A=qe(new Map),O=function(U){A.value.delete(U),P.value=Symbol()},R=function(U,G){A.value.set(U,G),P.value=Symbol()},z=qe(new Map);an(P,function(){var N=new Map,U=IZ(A.value.values()),G;try{for(U.s();!(G=U.n()).done;){var q=G.value;N.set(q,!0)}}catch(V){U.e(V)}finally{U.f()}z.value=N});var F=function(U){var G=T.value.indexOf(U.value),q=bn(T.value);G===-1?q.push(U.value):q.splice(G,1),e.value===void 0&&(T.value=q);var V=q.filter(function(Z){return z.value.has(Z)}).sort(function(Z,Q){var te=S.value.findIndex(function(ve){return ve.value===Z}),ie=S.value.findIndex(function(ve){return ve.value===Q});return te-ie});u("update:value",V),u("change",V),m.onFieldChange()};return sr(QD,{cancelValue:O,registerValue:R,toggleOption:F,mergedValue:T,name:ue(function(){return e.name}),disabled:ue(function(){return e.disabled})}),d({mergedValue:T}),function(){var N,U=e.id,G=U===void 0?m.id.value:U,q=null,V="".concat(_.value,"-group");return S.value&&S.value.length>0&&(q=S.value.map(function(Z){var Q;return j(es,{prefixCls:_.value,key:Z.value.toString(),disabled:"disabled"in Z?Z.disabled:e.disabled,indeterminate:Z.indeterminate,value:Z.value,checked:T.value.indexOf(Z.value)!==-1,onChange:Z.onChange,class:"".concat(V,"-item")},{default:function(){return[Z.label===void 0?(Q=i.label)===null||Q===void 0?void 0:Q.call(i,Z):Z.label]}})})),j("div",{class:[V,Ie({},"".concat(V,"-rtl"),C.value==="rtl")],id:G},[q||((N=i.default)===null||N===void 0?void 0:N.call(i))])}}});es.Group=Ob;es.install=function(t){return t.component(es.name,es),t.component(Ob.name,Ob),t};Xu.Button=Fg;Xu.install=function(t){return t.component(Xu.name,Xu),t.component(Fg.name,Fg),t};var W0;function Ip(t){if(typeof document>"u")return 0;if(t||W0===void 0){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var r=document.createElement("div"),i=r.style;i.position="absolute",i.top="0",i.left="0",i.pointerEvents="none",i.visibility="hidden",i.width="200px",i.height="150px",i.overflow="hidden",r.appendChild(e),document.body.appendChild(r);var u=e.offsetWidth;r.style.overflow="scroll";var d=e.offsetWidth;u===d&&(d=r.clientWidth),document.body.removeChild(r),W0=u-d}return W0}function AP(t){var e=t.match(/^(.*)px$/),r=Number(e==null?void 0:e[1]);return Number.isNaN(r)?Ip():r}function PZ(t){if(typeof document>"u"||!t||!(t instanceof Element))return{width:0,height:0};var e=getComputedStyle(t,"::-webkit-scrollbar"),r=e.width,i=e.height;return{width:AP(r),height:AP(i)}}function Ud(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.element,i=r===void 0?document.body:r,u={},d=Object.keys(t);return d.forEach(function(m){u[m]=i.style[m]}),d.forEach(function(m){i.style[m]=t[m]}),u}function AZ(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Z0={};const MP=function(t){if(!(!AZ()&&!t)){var e="ant-scrolling-effect",r=new RegExp("".concat(e),"g"),i=document.body.className;if(t){if(!r.test(i))return;Ud(Z0),Z0={},document.body.className=i.replace(r,"").trim();return}var u=Ip();if(u&&(Z0=Ud({position:"relative",width:"calc(100% - ".concat(u,"px)")}),!r.test(i))){var d="".concat(i," ").concat(e);document.body.className=d.trim()}}};var ea=[],eR="ant-scrolling-effect",X0=new RegExp("".concat(eR),"g"),MZ=0,Y0=new Map,kZ=yy(function t(e){var r=this;_y(this,t),Ie(this,"getContainer",function(){var i;return(i=r.options)===null||i===void 0?void 0:i.container}),Ie(this,"reLock",function(i){var u=ea.find(function(d){var m=d.target;return m===r.lockTarget});u&&r.unLock(),r.options=i,u&&(u.options=i,r.lock())}),Ie(this,"lock",function(){var i;if(!ea.some(function(_){var C=_.target;return C===r.lockTarget})){if(ea.some(function(_){var C,T=_.options;return(T==null?void 0:T.container)===((C=r.options)===null||C===void 0?void 0:C.container)})){ea=[].concat(bn(ea),[{target:r.lockTarget,options:r.options}]);return}var u=0,d=((i=r.options)===null||i===void 0?void 0:i.container)||document.body;(d===document.body&&window.innerWidth-document.documentElement.clientWidth>0||d.scrollHeight>d.clientHeight)&&(u=Ip());var m=d.className;if(ea.filter(function(_){var C,T=_.options;return(T==null?void 0:T.container)===((C=r.options)===null||C===void 0?void 0:C.container)}).length===0&&Y0.set(d,Ud({width:u!==0?"calc(100% - ".concat(u,"px)"):void 0,overflow:"hidden",overflowX:"hidden",overflowY:"hidden"},{element:d})),!X0.test(m)){var o="".concat(m," ").concat(eR);d.className=o.trim()}ea=[].concat(bn(ea),[{target:r.lockTarget,options:r.options}])}}),Ie(this,"unLock",function(){var i,u=ea.find(function(o){var _=o.target;return _===r.lockTarget});if(ea=ea.filter(function(o){var _=o.target;return _!==r.lockTarget}),!(!u||ea.some(function(o){var _,C=o.options;return(C==null?void 0:C.container)===((_=u.options)===null||_===void 0?void 0:_.container)}))){var d=((i=r.options)===null||i===void 0?void 0:i.container)||document.body,m=d.className;!X0.test(m)||(Ud(Y0.get(d),{element:d}),Y0.delete(d),d.className=d.className.replace(X0,"").trim())}}),this.lockTarget=MZ++,this.options=e}),Es=0,Gh=oc(),Gv={},dd=function(e){if(!Gh)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(On(e)==="object"&&e instanceof window.HTMLElement)return e}return document.body};const OZ=jt({compatConfig:{MODE:3},name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:et.any,visible:{type:Boolean,default:void 0}},setup:function(e,r){var i=r.slots,u=qe(),d=qe(),m=qe(),o=new kZ({container:dd(e.getContainer)}),_=function(){var R,z;(R=u.value)===null||R===void 0||(z=R.parentNode)===null||z===void 0||z.removeChild(u.value)},C=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(R||u.value&&!u.value.parentNode){var z=dd(e.getContainer);return z?(z.appendChild(u.value),!0):!1}return!0},T=function(){return Gh?(u.value||(u.value=document.createElement("div"),C(!0)),S(),u.value):null},S=function(){var R=e.wrapperClassName;u.value&&R&&R!==u.value.className&&(u.value.className=R)};Ca(function(){S(),C()});var P=function(){Es===1&&!Object.keys(Gv).length?(MP(),Gv=Ud({overflow:"hidden",overflowX:"hidden",overflowY:"hidden"})):Es||(Ud(Gv),Gv={},MP(!0))},A=Ji();return wr(function(){var O=!1;an([function(){return e.visible},function(){return e.getContainer}],function(R,z){var F=zn(R,2),N=F[0],U=F[1],G=zn(z,2),q=G[0],V=G[1];if(Gh&&dd(e.getContainer)===document.body&&(N&&!q?Es+=1:O&&(Es-=1)),O){var Z=typeof U=="function"&&typeof V=="function";(Z?U.toString()!==V.toString():U!==V)&&_(),N&&N!==q&&Gh&&dd(U)!==o.getContainer()&&o.reLock({container:dd(U)})}O=!0},{immediate:!0,flush:"post"}),gr(function(){C()||(m.value=fr(function(){A.update()}))})}),Er(function(){var O=e.visible,R=e.getContainer;Gh&&dd(R)===document.body&&(Es=O&&Es?Es-1:Es),_(),fr.cancel(m.value)}),function(){var O=e.forceRender,R=e.visible,z=null,F={getOpenCount:function(){return Es},getContainer:T,switchScrollingEffect:P,scrollLocker:o};return(O||R||d.value)&&(z=j(ib,{getContainer:T,ref:d},{default:function(){var U;return(U=i.default)===null||U===void 0?void 0:U.call(i,F)}})),z}}});var tR=function(){return{id:String,prefixCls:String,inputPrefixCls:String,defaultValue:et.oneOfType([et.string,et.number]),value:{type:[String,Number,Symbol],default:void 0},placeholder:{type:[String,Number]},autocomplete:String,type:{type:String,default:"text"},name:String,size:{type:String},disabled:{type:Boolean,default:void 0},readonly:{type:Boolean,default:void 0},addonBefore:et.any,addonAfter:et.any,prefix:et.any,suffix:et.any,autofocus:{type:Boolean,default:void 0},allowClear:{type:Boolean,default:void 0},lazy:{type:Boolean,default:!0},maxlength:Number,loading:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},showCount:{type:[Boolean,Object]},htmlSize:Number,onPressEnter:Function,onKeydown:Function,onKeyup:Function,onFocus:Function,onBlur:Function,onChange:Function,onInput:Function,"onUpdate:value":Function,valueModifiers:Object,hidden:Boolean}};const Ww=tR;var nR=function(){return H(H({},hi(tR(),["prefix","addonBefore","addonAfter","suffix"])),{},{rows:Number,autosize:{type:[Boolean,Object],default:void 0},autoSize:{type:[Boolean,Object],default:void 0},onResize:{type:Function},onCompositionstart:Function,onCompositionend:Function,valueModifiers:Object})};function rR(t,e,r,i,u){var d;return qt(t,(d={},Ie(d,"".concat(t,"-sm"),r==="small"),Ie(d,"".concat(t,"-lg"),r==="large"),Ie(d,"".concat(t,"-disabled"),i),Ie(d,"".concat(t,"-rtl"),u==="rtl"),Ie(d,"".concat(t,"-borderless"),!e),d))}var ep=function(e){return e!=null&&(Array.isArray(e)?Ko(e).length:!0)};function DZ(t){return ep(t.prefix)||ep(t.suffix)||ep(t.allowClear)}function J0(t){return ep(t.addonBefore)||ep(t.addonAfter)}var RZ=["text","input"];const iR=jt({compatConfig:{MODE:3},name:"ClearableLabeledInput",inheritAttrs:!1,props:{prefixCls:String,inputType:et.oneOf(Yi("text","input")),value:et.any,defaultValue:et.any,allowClear:{type:Boolean,default:void 0},element:et.any,handleReset:Function,disabled:{type:Boolean,default:void 0},direction:{type:String},size:{type:String},suffix:et.any,prefix:et.any,addonBefore:et.any,addonAfter:et.any,readonly:{type:Boolean,default:void 0},focused:{type:Boolean,default:void 0},bordered:{type:Boolean,default:!0},triggerFocus:{type:Function},hidden:Boolean},setup:function(e,r){var i=r.slots,u=r.attrs,d=qe(),m=function(A){var O;if((O=d.value)!==null&&O!==void 0&&O.contains(A.target)){var R=e.triggerFocus;R==null||R()}},o=function(A){var O,R=e.allowClear,z=e.value,F=e.disabled,N=e.readonly,U=e.handleReset,G=e.suffix,q=G===void 0?i.suffix:G;if(!R)return null;var V=!F&&!N&&z,Z="".concat(A,"-clear-icon");return j(ay,{onClick:U,onMousedown:function(te){return te.preventDefault()},class:qt((O={},Ie(O,"".concat(Z,"-hidden"),!V),Ie(O,"".concat(Z,"-has-suffix"),!!q),O),Z),role:"button"},null)},_=function(A){var O,R=e.suffix,z=R===void 0?(O=i.suffix)===null||O===void 0?void 0:O.call(i):R,F=e.allowClear;return z||F?j("span",{class:"".concat(A,"-suffix")},[o(A),z]):null},C=function(A,O){var R,z,F,N=e.focused,U=e.value,G=e.prefix,q=G===void 0?(R=i.prefix)===null||R===void 0?void 0:R.call(i):G,V=e.size,Z=e.suffix,Q=Z===void 0?(z=i.suffix)===null||z===void 0?void 0:z.call(i):Z,te=e.disabled,ie=e.allowClear,ve=e.direction,ce=e.readonly,de=e.bordered,xe=e.hidden,De=e.addonAfter,ge=De===void 0?i.addonAfter:De,he=e.addonBefore,me=he===void 0?i.addonBefore:he,Pe=_(A);if(!DZ({prefix:q,suffix:Q,allowClear:ie}))return ui(O,{value:U});var He=q?j("span",{class:"".concat(A,"-prefix")},[q]):null,Ke=qt("".concat(A,"-affix-wrapper"),(F={},Ie(F,"".concat(A,"-affix-wrapper-focused"),N),Ie(F,"".concat(A,"-affix-wrapper-disabled"),te),Ie(F,"".concat(A,"-affix-wrapper-sm"),V==="small"),Ie(F,"".concat(A,"-affix-wrapper-lg"),V==="large"),Ie(F,"".concat(A,"-affix-wrapper-input-with-clear-btn"),Q&&ie&&U),Ie(F,"".concat(A,"-affix-wrapper-rtl"),ve==="rtl"),Ie(F,"".concat(A,"-affix-wrapper-readonly"),ce),Ie(F,"".concat(A,"-affix-wrapper-borderless"),!de),Ie(F,"".concat(u.class),!J0({addonAfter:ge,addonBefore:me})&&u.class),F));return j("span",{ref:d,class:Ke,style:u.style,onMouseup:m,hidden:xe},[He,ui(O,{style:null,value:U,class:rR(A,de,V,te)}),Pe])},T=function(A,O){var R,z,F,N=e.addonBefore,U=N===void 0?(R=i.addonBefore)===null||R===void 0?void 0:R.call(i):N,G=e.addonAfter,q=G===void 0?(z=i.addonAfter)===null||z===void 0?void 0:z.call(i):G,V=e.size,Z=e.direction,Q=e.hidden;if(!J0({addonBefore:U,addonAfter:q}))return O;var te="".concat(A,"-group"),ie="".concat(te,"-addon"),ve=U?j("span",{class:ie},[U]):null,ce=q?j("span",{class:ie},[q]):null,de=qt("".concat(A,"-wrapper"),te,Ie({},"".concat(te,"-rtl"),Z==="rtl")),xe=qt("".concat(A,"-group-wrapper"),(F={},Ie(F,"".concat(A,"-group-wrapper-sm"),V==="small"),Ie(F,"".concat(A,"-group-wrapper-lg"),V==="large"),Ie(F,"".concat(A,"-group-wrapper-rtl"),Z==="rtl"),F),u.class);return j("span",{class:xe,style:u.style,hidden:Q},[j("span",{class:de},[ve,ui(O,{style:null}),ce])])},S=function(A,O){var R,z=e.value,F=e.allowClear,N=e.direction,U=e.bordered,G=e.hidden,q=e.addonAfter,V=q===void 0?i.addonAfter:q,Z=e.addonBefore,Q=Z===void 0?i.addonBefore:Z;if(!F)return ui(O,{value:z});var te=qt("".concat(A,"-affix-wrapper"),"".concat(A,"-affix-wrapper-textarea-with-clear-btn"),(R={},Ie(R,"".concat(A,"-affix-wrapper-rtl"),N==="rtl"),Ie(R,"".concat(A,"-affix-wrapper-borderless"),!U),Ie(R,"".concat(u.class),!J0({addonAfter:V,addonBefore:Q})&&u.class),R));return j("span",{class:te,style:u.style,hidden:G},[ui(O,{style:null,value:z}),o(A)])};return function(){var P,A=e.prefixCls,O=e.inputType,R=e.element,z=R===void 0?(P=i.element)===null||P===void 0?void 0:P.call(i):R;return O===RZ[0]?S(A,z):T(A,C(A,z))}}});function Db(t){return typeof t>"u"||t===null?"":String(t)}function tp(t,e,r,i){if(!!r){var u=e;if(e.type==="click"){Object.defineProperty(u,"target",{writable:!0}),Object.defineProperty(u,"currentTarget",{writable:!0});var d=t.cloneNode(!0);u.target=d,u.currentTarget=d,d.value="",r(u);return}if(i!==void 0){Object.defineProperty(u,"target",{writable:!0}),Object.defineProperty(u,"currentTarget",{writable:!0}),u.target=t,u.currentTarget=t,t.value=i,r(u);return}r(u)}}function oR(t,e){if(!!t){t.focus(e);var r=e||{},i=r.cursor;if(i){var u=t.value.length;switch(i){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(u,u);break;default:t.setSelectionRange(0,u)}}}}const vi=jt({compatConfig:{MODE:3},name:"AInput",inheritAttrs:!1,props:Ww(),setup:function(e,r){var i=r.slots,u=r.attrs,d=r.expose,m=r.emit,o=qe(),_=qe(),C,T=Ks(),S=hr("input",e),P=S.direction,A=S.prefixCls,O=S.size,R=S.autocomplete,z=qe(e.value===void 0?e.defaultValue:e.value),F=qe(!1);an(function(){return e.value},function(){z.value=e.value}),an(function(){return e.disabled},function(){e.value!==void 0&&(z.value=e.value),e.disabled&&(F.value=!1)});var N=function(){C=setTimeout(function(){var me;((me=o.value)===null||me===void 0?void 0:me.getAttribute("type"))==="password"&&o.value.hasAttribute("value")&&o.value.removeAttribute("value")})},U=function(me){oR(o.value,me)},G=function(){var me;(me=o.value)===null||me===void 0||me.blur()},q=function(me,Pe,He){var Ke;(Ke=o.value)===null||Ke===void 0||Ke.setSelectionRange(me,Pe,He)},V=function(){var me;(me=o.value)===null||me===void 0||me.select()};d({focus:U,blur:G,input:o,stateValue:z,setSelectionRange:q,select:V});var Z=function(me){var Pe=e.onFocus;F.value=!0,Pe==null||Pe(me),gr(function(){N()})},Q=function(me){var Pe=e.onBlur;F.value=!1,Pe==null||Pe(me),T.onFieldBlur(),gr(function(){N()})},te=function(me){m("update:value",me.target.value),m("change",me),m("input",me),T.onFieldChange()},ie=Ji(),ve=function(me,Pe){z.value!==me&&(e.value===void 0?z.value=me:gr(function(){o.value.value!==z.value&&ie.update()}),gr(function(){Pe&&Pe()}))},ce=function(me){tp(o.value,me,te),ve("",function(){U()})},de=function(me){var Pe=me.target,He=Pe.value,Ke=Pe.composing;if(!((me.isComposing||Ke)&&e.lazy||z.value===He)){var Re=me.target.value;tp(o.value,me,te),ve(Re,function(){N()})}},xe=function(me){me.keyCode===13&&m("pressEnter",me),m("keydown",me)};wr(function(){N()}),Er(function(){clearTimeout(C)});var De=function(){var me,Pe=e.addonBefore,He=Pe===void 0?i.addonBefore:Pe,Ke=e.addonAfter,Re=Ke===void 0?i.addonAfter:Ke,Le=e.disabled,Te=e.bordered,oe=Te===void 0?!0:Te,ze=e.valueModifiers,Fe=ze===void 0?{}:ze,lt=e.htmlSize,vt=hi(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","size","bordered","htmlSize","lazy","showCount","valueModifiers"]),kt=H(H(H({},vt),u),{},{autocomplete:R.value,onChange:de,onInput:de,onFocus:Z,onBlur:Q,onKeydown:xe,class:qt(rR(A.value,oe,O.value,Le,P.value),Ie({},u.class,u.class&&!He&&!Re)),ref:o,key:"ant-input",size:lt,id:(me=vt.id)!==null&&me!==void 0?me:T.id.value});Fe.lazy&&delete kt.onInput,kt.autofocus||delete kt.autofocus;var It=j("input",hi(kt,["size"]),null);return uo(It,[[$p]])},ge=function(){var me,Pe=z.value,He=e.maxlength,Ke=e.suffix,Re=Ke===void 0?(me=i.suffix)===null||me===void 0?void 0:me.call(i):Ke,Le=e.showCount,Te=Number(He)>0;if(Re||Le){var oe=bn(Db(Pe)).length,ze=null;return On(Le)==="object"?ze=Le.formatter({count:oe,maxlength:He}):ze="".concat(oe).concat(Te?" / ".concat(He):""),j(Hn,null,[!!Le&&j("span",{class:qt("".concat(A.value,"-show-count-suffix"),Ie({},"".concat(A.value,"-show-count-has-suffix"),!!Re))},[ze]),Re])}return null};return function(){var he=H(H(H({},u),e),{},{prefixCls:A.value,inputType:"input",value:Db(z.value),handleReset:ce,focused:F.value&&!e.disabled});return j(iR,H(H({},hi(he,["element","valueModifiers","suffix","showCount"])),{},{ref:_}),H(H({},i),{},{element:De,suffix:ge}))}}}),zZ=jt({compatConfig:{MODE:3},name:"AInputGroup",props:{prefixCls:String,size:{type:String},compact:{type:Boolean,default:void 0},onMouseenter:{type:Function},onMouseleave:{type:Function},onFocus:{type:Function},onBlur:{type:Function}},setup:function(e,r){var i=r.slots,u=hr("input-group",e),d=u.prefixCls,m=u.direction,o=ue(function(){var _,C=d.value;return _={},Ie(_,"".concat(C),!0),Ie(_,"".concat(C,"-lg"),e.size==="large"),Ie(_,"".concat(C,"-sm"),e.size==="small"),Ie(_,"".concat(C,"-compact"),e.compact),Ie(_,"".concat(C,"-rtl"),m.value==="rtl"),_});return function(){var _;return j("span",{class:o.value,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave,onFocus:e.onFocus,onBlur:e.onBlur},[(_=i.default)===null||_===void 0?void 0:_.call(i)])}}});var Q0=/iPhone/i,kP=/iPod/i,OP=/iPad/i,ex=/\bAndroid(?:.+)Mobile\b/i,DP=/Android/i,fd=/\bAndroid(?:.+)SD4930UR\b/i,Hv=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,Is=/Windows Phone/i,RP=/\bWindows(?:.+)ARM\b/i,zP=/BlackBerry/i,LP=/BB10/i,FP=/Opera Mini/i,BP=/\b(CriOS|Chrome)(?:.+)Mobile/i,NP=/Mobile(?:.+)Firefox\b/i;function er(t,e){return t.test(e)}function $P(t){var e=t||(typeof navigator<"u"?navigator.userAgent:""),r=e.split("[FBAN");if(typeof r[1]<"u"){var i=r,u=zn(i,1);e=u[0]}if(r=e.split("Twitter"),typeof r[1]<"u"){var d=r,m=zn(d,1);e=m[0]}var o={apple:{phone:er(Q0,e)&&!er(Is,e),ipod:er(kP,e),tablet:!er(Q0,e)&&er(OP,e)&&!er(Is,e),device:(er(Q0,e)||er(kP,e)||er(OP,e))&&!er(Is,e)},amazon:{phone:er(fd,e),tablet:!er(fd,e)&&er(Hv,e),device:er(fd,e)||er(Hv,e)},android:{phone:!er(Is,e)&&er(fd,e)||!er(Is,e)&&er(ex,e),tablet:!er(Is,e)&&!er(fd,e)&&!er(ex,e)&&(er(Hv,e)||er(DP,e)),device:!er(Is,e)&&(er(fd,e)||er(Hv,e)||er(ex,e)||er(DP,e))||er(/\bokhttp\b/i,e)},windows:{phone:er(Is,e),tablet:er(RP,e),device:er(Is,e)||er(RP,e)},other:{blackberry:er(zP,e),blackberry10:er(LP,e),opera:er(FP,e),firefox:er(NP,e),chrome:er(BP,e),device:er(zP,e)||er(LP,e)||er(FP,e)||er(NP,e)||er(BP,e)},any:null,phone:null,tablet:null};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var LZ=H(H({},$P()),{},{isMobile:$P});const FZ=LZ;var BZ=["disabled","loading","addonAfter","suffix"];const NZ=jt({compatConfig:{MODE:3},name:"AInputSearch",inheritAttrs:!1,props:H(H({},Ww()),{},{inputPrefixCls:String,enterButton:et.any,onSearch:{type:Function}}),setup:function(e,r){var i=r.slots,u=r.attrs,d=r.expose,m=r.emit,o=qe(),_=function(){var G;(G=o.value)===null||G===void 0||G.focus()},C=function(){var G;(G=o.value)===null||G===void 0||G.blur()};d({focus:_,blur:C});var T=function(G){m("update:value",G.target.value),G&&G.target&&G.type==="click"&&m("search",G.target.value,G),m("change",G)},S=function(G){var q;document.activeElement===((q=o.value)===null||q===void 0?void 0:q.input)&&G.preventDefault()},P=function(G){var q;m("search",(q=o.value)===null||q===void 0?void 0:q.stateValue,G),FZ.tablet||o.value.focus()},A=hr("input-search",e),O=A.prefixCls,R=A.getPrefixCls,z=A.direction,F=A.size,N=ue(function(){return R("input",e.inputPrefixCls)});return function(){var U,G,q,V,Z,Q=e.disabled,te=e.loading,ie=e.addonAfter,ve=ie===void 0?(U=i.addonAfter)===null||U===void 0?void 0:U.call(i):ie,ce=e.suffix,de=ce===void 0?(G=i.suffix)===null||G===void 0?void 0:G.call(i):ce,xe=Cr(e,BZ),De=e.enterButton,ge=De===void 0?(q=(V=i.enterButton)===null||V===void 0?void 0:V.call(i))!==null&&q!==void 0?q:!1:De;ge=ge||ge==="";var he=typeof ge=="boolean"?j(Iw,null,null):null,me="".concat(O.value,"-button"),Pe=Array.isArray(ge)?ge[0]:ge,He,Ke=Pe.type&&qk(Pe.type)&&Pe.type.__ANT_BUTTON;if(Ke||Pe.tagName==="button")He=ui(Pe,H({onMousedown:S,onClick:P,key:"enterButton"},Ke?{class:me,size:F.value}:{}),!1);else{var Re=he&&!ge;He=j(Xi,{class:me,type:ge?"primary":void 0,size:F.value,disabled:Q,key:"enterButton",onMousedown:S,onClick:P,loading:te,icon:Re?he:null},{default:function(){return[Re?null:he||ge]}})}ve&&(He=[He,ve]);var Le=qt(O.value,(Z={},Ie(Z,"".concat(O.value,"-rtl"),z.value==="rtl"),Ie(Z,"".concat(O.value,"-").concat(F.value),!!F.value),Ie(Z,"".concat(O.value,"-with-button"),!!ge),Z),u.class);return j(vi,H(H(H({ref:o},hi(xe,["onUpdate:value","onSearch","enterButton"])),u),{},{onPressEnter:P,size:F.value,prefixCls:N.value,addonAfter:He,suffix:de,onChange:T,class:Le,disabled:Q}),i)}}});var $Z=`
 min-height:0 !important;
 max-height:none !important;
 height:0 !important;
 visibility:hidden !important;
 overflow:hidden !important;
 position:absolute !important;
 z-index:-1000 !important;
 top:0 !important;
 right:0 !important
`,jZ=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],tx={},ta;function VZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&tx[r])return tx[r];var i=window.getComputedStyle(t),u=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),d=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),m=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),o=jZ.map(function(C){return"".concat(C,":").concat(i.getPropertyValue(C))}).join(";"),_={sizingStyle:o,paddingSize:d,borderSize:m,boxSizing:u};return e&&r&&(tx[r]=_),_}function UZ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;ta||(ta=document.createElement("textarea"),ta.setAttribute("tab-index","-1"),ta.setAttribute("aria-hidden","true"),document.body.appendChild(ta)),t.getAttribute("wrap")?ta.setAttribute("wrap",t.getAttribute("wrap")):ta.removeAttribute("wrap");var u=VZ(t,e),d=u.paddingSize,m=u.borderSize,o=u.boxSizing,_=u.sizingStyle;ta.setAttribute("style","".concat(_,";").concat($Z)),ta.value=t.value||t.placeholder||"";var C=Number.MIN_SAFE_INTEGER,T=Number.MAX_SAFE_INTEGER,S=ta.scrollHeight,P;if(o==="border-box"?S+=m:o==="content-box"&&(S-=d),r!==null||i!==null){ta.value=" ";var A=ta.scrollHeight-d;r!==null&&(C=A*r,o==="border-box"&&(C=C+d+m),S=Math.max(C,S)),i!==null&&(T=A*i,o==="border-box"&&(T=T+d+m),P=S>T?"":"hidden",S=Math.min(T,S))}return{height:"".concat(S,"px"),minHeight:"".concat(C,"px"),maxHeight:"".concat(T,"px"),overflowY:P,resize:"none"}}var nx=0,jP=1,KZ=2,GZ=jt({compatConfig:{MODE:3},name:"ResizableTextArea",inheritAttrs:!1,props:nR(),setup:function(e,r){var i=r.attrs,u=r.emit,d=r.expose,m,o,_=qe(),C=qe({}),T=qe(nx);Er(function(){fr.cancel(m),fr.cancel(o)});var S=function(){try{if(document.activeElement===_.value){var N=_.value.selectionStart,U=_.value.selectionEnd;_.value.setSelectionRange(N,U)}}catch{}},P=function(){var N=e.autoSize||e.autosize;if(!(!N||!_.value)){var U=N.minRows,G=N.maxRows;C.value=UZ(_.value,!1,U,G),T.value=jP,fr.cancel(o),o=fr(function(){T.value=KZ,o=fr(function(){T.value=nx,S()})})}},A=function(){fr.cancel(m),m=fr(P)},O=function(N){if(T.value===nx){u("resize",N);var U=e.autoSize||e.autosize;U&&A()}};Ll(e.autosize===void 0,"Input.TextArea","autosize is deprecated, please use autoSize instead.");var R=function(){var N=e.prefixCls,U=e.autoSize,G=e.autosize,q=e.disabled,V=hi(e,["prefixCls","onPressEnter","autoSize","autosize","defaultValue","allowClear","type","lazy","maxlength","valueModifiers"]),Z=qt(N,i.class,Ie({},"".concat(N,"-disabled"),q)),Q=[i.style,C.value,T.value===jP?{overflowX:"hidden",overflowY:"hidden"}:null],te=H(H(H({},V),i),{},{style:Q,class:Z});return te.autofocus||delete te.autofocus,te.rows===0&&delete te.rows,j(Yd,{onResize:O,disabled:!(U||G)},{default:function(){return[uo(j("textarea",H(H({},te),{},{ref:_}),null),[[$p]])]}})};an(function(){return e.value},function(){gr(function(){P()})}),wr(function(){gr(function(){P()})});var z=Ji();return d({resizeTextarea:P,textArea:_,instance:z}),function(){return R()}}});const HZ=GZ;function aR(t,e){return bn(t||"").slice(0,e).join("")}function VP(t,e,r,i){var u=r;return t?u=aR(r,i):bn(e||"").length<r.length&&bn(r||"").length>i&&(u=e),u}const qZ=jt({compatConfig:{MODE:3},name:"ATextarea",inheritAttrs:!1,props:nR(),setup:function(e,r){var i=r.attrs,u=r.expose,d=r.emit,m=Ks(),o=qe(e.value===void 0?e.defaultValue:e.value),_=qe(),C=qe(""),T=hr("input",e),S=T.prefixCls,P=T.size,A=T.direction,O=ue(function(){return e.showCount===""||e.showCount||!1}),R=ue(function(){return Number(e.maxlength)>0}),z=qe(!1),F=qe(),N=qe(0),U=function(ge){z.value=!0,F.value=C.value,N.value=ge.currentTarget.selectionStart,d("compositionstart",ge)},G=function(ge){z.value=!1;var he=ge.currentTarget.value;if(R.value){var me,Pe=N.value>=e.maxlength+1||N.value===((me=F.value)===null||me===void 0?void 0:me.length);he=VP(Pe,F.value,he,e.maxlength)}he!==C.value&&(Q(he),tp(ge.currentTarget,ge,ve,he)),d("compositionend",ge)},q=Ji();an(function(){return e.value},function(){"value"in q.vnode.props;var De;o.value=(De=e.value)!==null&&De!==void 0?De:""});var V=function(ge){var he;oR((he=_.value)===null||he===void 0?void 0:he.textArea,ge)},Z=function(){var ge,he;(ge=_.value)===null||ge===void 0||(he=ge.textArea)===null||he===void 0||he.blur()},Q=function(ge,he){o.value!==ge&&(e.value===void 0?o.value=ge:gr(function(){if(_.value.textArea.value!==C.value){var me,Pe,He;(me=_.value)===null||me===void 0||(Pe=(He=me.instance).update)===null||Pe===void 0||Pe.call(He)}}),gr(function(){he&&he()}))},te=function(ge){ge.keyCode===13&&d("pressEnter",ge),d("keydown",ge)},ie=function(ge){var he=e.onBlur;he==null||he(ge),m.onFieldBlur()},ve=function(ge){d("update:value",ge.target.value),d("change",ge),d("input",ge),m.onFieldChange()},ce=function(ge){tp(_.value.textArea,ge,ve),Q("",function(){V()})},de=function(ge){var he=ge.target.composing,me=ge.target.value;if(z.value=!!(ge.isComposing||he),!(z.value&&e.lazy||o.value===me)){if(R.value){var Pe=ge.target,He=Pe.selectionStart>=e.maxlength+1||Pe.selectionStart===me.length||!Pe.selectionStart;me=VP(He,C.value,me,e.maxlength)}tp(ge.currentTarget,ge,ve,me),Q(me)}},xe=function(){var ge,he,me,Pe=i.style,He=i.class,Ke=e.bordered,Re=Ke===void 0?!0:Ke,Le=H(H(H({},hi(e,["allowClear"])),i),{},{style:O.value?{}:Pe,class:(ge={},Ie(ge,"".concat(S.value,"-borderless"),!Re),Ie(ge,"".concat(He),He&&!O.value),Ie(ge,"".concat(S.value,"-sm"),P.value==="small"),Ie(ge,"".concat(S.value,"-lg"),P.value==="large"),ge),showCount:null,prefixCls:S.value,onInput:de,onChange:de,onBlur:ie,onKeydown:te,onCompositionstart:U,onCompositionend:G});return(he=e.valueModifiers)!==null&&he!==void 0&&he.lazy&&delete Le.onInput,j(HZ,H(H({},Le),{},{id:(me=Le.id)!==null&&me!==void 0?me:m.id.value,ref:_,maxlength:e.maxlength}),null)};return u({focus:V,blur:Z,resizableTextArea:_}),vr(function(){var De=Db(o.value);!z.value&&R.value&&(e.value===null||e.value===void 0)&&(De=aR(De,e.maxlength)),C.value=De}),function(){var De=e.maxlength,ge=e.bordered,he=ge===void 0?!0:ge,me=e.hidden,Pe=i.style,He=i.class,Ke=H(H(H({},e),i),{},{prefixCls:S.value,inputType:"text",handleReset:ce,direction:A.value,bordered:he,style:O.value?void 0:Pe}),Re=j(iR,H(H({},Ke),{},{value:C.value}),{element:xe});if(O.value){var Le=bn(C.value).length,Te="";On(O.value)==="object"?Te=O.value.formatter({count:Le,maxlength:De}):Te="".concat(Le).concat(R.value?" / ".concat(De):""),Re=j("div",{hidden:me,class:qt("".concat(S.value,"-textarea"),Ie({},"".concat(S.value,"-textarea-rtl"),A.value==="rtl"),"".concat(S.value,"-textarea-show-count"),He),style:Pe,"data-count":On(Te)!=="object"?Te:void 0},[Re])}return Re}}});var WZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const ZZ=WZ;function UP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){XZ(t,u,r[u])})}return t}function XZ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Zw=function(e,r){var i=UP({},e,r.attrs);return j($r,UP({},i,{icon:ZZ}),null)};Zw.displayName="EyeOutlined";Zw.inheritAttrs=!1;const YZ=Zw;var JZ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"};const QZ=JZ;function KP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){eX(t,u,r[u])})}return t}function eX(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Xw=function(e,r){var i=KP({},e,r.attrs);return j($r,KP({},i,{icon:QZ}),null)};Xw.displayName="EyeInvisibleOutlined";Xw.inheritAttrs=!1;const tX=Xw;var nX=["size","visibilityToggle"],rX={click:"onClick",hover:"onMouseover"},iX=function(e){return j(e?YZ:tX,null,null)};const sR=jt({compatConfig:{MODE:3},name:"AInputPassword",inheritAttrs:!1,props:H(H({},Ww()),{},{prefixCls:String,inputPrefixCls:String,action:{type:String,default:"click"},visibilityToggle:{type:Boolean,default:!0},iconRender:Function}),setup:function(e,r){var i=r.slots,u=r.attrs,d=r.expose,m=qe(!1),o=function(){var N=e.disabled;N||(m.value=!m.value)},_=qe(),C=function(){var N;(N=_.value)===null||N===void 0||N.focus()},T=function(){var N;(N=_.value)===null||N===void 0||N.blur()};d({focus:C,blur:T});var S=function(N){var U,G=e.action,q=e.iconRender,V=q===void 0?i.iconRender||iX:q,Z=rX[G]||"",Q=V(m.value),te=(U={},Ie(U,Z,o),Ie(U,"class","".concat(N,"-icon")),Ie(U,"key","passwordIcon"),Ie(U,"onMousedown",function(ve){ve.preventDefault()}),Ie(U,"onMouseup",function(ve){ve.preventDefault()}),U);return ui(Co(Q)?Q:j("span",null,[Q]),te)},P=hr("input-password",e),A=P.prefixCls,O=P.getPrefixCls,R=ue(function(){return O("input",e.inputPrefixCls)}),z=function(){var N=e.size,U=e.visibilityToggle,G=Cr(e,nX),q=U&&S(A.value),V=qt(A.value,u.class,Ie({},"".concat(A.value,"-").concat(N),!!N)),Z=H(H(H({},hi(G,["suffix","iconRender","action"])),u),{},{type:m.value?"text":"password",class:V,prefixCls:R.value,suffix:q});return N&&(Z.size=N),j(vi,H({ref:_},Z),i)};return function(){return z()}}});vi.Group=zZ;vi.Search=NZ;vi.TextArea=qZ;vi.Password=sR;vi.install=function(t){return t.component(vi.name,vi),t.component(vi.Group.name,vi.Group),t.component(vi.Search.name,vi.Search),t.component(vi.TextArea.name,vi.TextArea),t.component(vi.Password.name,vi.Password),t};function GP(t){var e=t.getBoundingClientRect(),r=document.documentElement;return{left:e.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||document.body.clientTop||0)}}function Yw(){return{keyboard:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},afterClose:Function,closable:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},visible:{type:Boolean,default:void 0},destroyOnClose:{type:Boolean,default:void 0},mousePosition:et.shape({x:Number,y:Number}).loose,title:et.any,footer:et.any,transitionName:String,maskTransitionName:String,animation:et.any,maskAnimation:et.any,wrapStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},maskStyle:{type:Object,default:void 0},prefixCls:String,wrapClassName:String,rootClassName:String,width:[String,Number],height:[String,Number],zIndex:Number,bodyProps:et.any,maskProps:et.any,wrapProps:et.any,getContainer:et.any,dialogStyle:{type:Object,default:void 0},dialogClass:String,closeIcon:et.any,forceRender:{type:Boolean,default:void 0},getOpenCount:Function,focusTriggerAfterClose:{type:Boolean,default:void 0},onClose:Function,modalRender:Function}}function HP(t,e,r){var i=e;return!i&&r&&(i="".concat(t,"-").concat(r)),i}var qP=-1;function oX(){return qP+=1,qP}function WP(t,e){var r=t["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var u=t.document;r=u.documentElement[i],typeof r!="number"&&(r=u.body[i])}return r}function aX(t){var e=t.getBoundingClientRect(),r={left:e.left,top:e.top},i=t.ownerDocument,u=i.defaultView||i.parentWindow;return r.left+=WP(u),r.top+=WP(u,!0),r}var ZP={width:0,height:0,overflow:"hidden",outline:"none"};const sX=jt({compatConfig:{MODE:3},name:"Content",inheritAttrs:!1,props:H(H({},Yw()),{},{motionName:String,ariaId:String,onVisibleChanged:Function,onMousedown:Function,onMouseup:Function}),setup:function(e,r){var i=r.expose,u=r.slots,d=r.attrs,m=qe(),o=qe(),_=qe();i({focus:function(){var O;(O=m.value)===null||O===void 0||O.focus()},changeActive:function(O){var R=document,z=R.activeElement;O&&z===o.value?m.value.focus():!O&&z===m.value&&o.value.focus()}});var C=qe(),T=ue(function(){var A=e.width,O=e.height,R={};return A!==void 0&&(R.width=typeof A=="number"?"".concat(A,"px"):A),O!==void 0&&(R.height=typeof O=="number"?"".concat(O,"px"):O),C.value&&(R.transformOrigin=C.value),R}),S=function(){gr(function(){if(_.value){var O=aX(_.value);C.value=e.mousePosition?"".concat(e.mousePosition.x-O.left,"px ").concat(e.mousePosition.y-O.top,"px"):""}})},P=function(O){e.onVisibleChanged(O)};return function(){var A,O,R,z,F=e.prefixCls,N=e.footer,U=N===void 0?(A=u.footer)===null||A===void 0?void 0:A.call(u):N,G=e.title,q=G===void 0?(O=u.title)===null||O===void 0?void 0:O.call(u):G,V=e.ariaId,Z=e.closable,Q=e.closeIcon,te=Q===void 0?(R=u.closeIcon)===null||R===void 0?void 0:R.call(u):Q,ie=e.onClose,ve=e.bodyStyle,ce=e.bodyProps,de=e.onMousedown,xe=e.onMouseup,De=e.visible,ge=e.modalRender,he=ge===void 0?u.modalRender:ge,me=e.destroyOnClose,Pe=e.motionName,He;U&&(He=j("div",{class:"".concat(F,"-footer")},[U]));var Ke;q&&(Ke=j("div",{class:"".concat(F,"-header")},[j("div",{class:"".concat(F,"-title"),id:V},[q])]));var Re;Z&&(Re=j("button",{type:"button",onClick:ie,"aria-label":"Close",class:"".concat(F,"-close")},[te||j("span",{class:"".concat(F,"-close-x")},null)]));var Le=j("div",{class:"".concat(F,"-content")},[Re,Ke,j("div",H({class:"".concat(F,"-body"),style:ve},ce),[(z=u.default)===null||z===void 0?void 0:z.call(u)]),He]),Te=oy(Pe);return j(os,H(H({},Te),{},{onBeforeEnter:S,onAfterEnter:function(){return P(!0)},onAfterLeave:function(){return P(!1)}}),{default:function(){return[De||!me?uo(j("div",H(H({},d),{},{ref:_,key:"dialog-element",role:"document",style:[T.value,d.style],class:[F,d.class],onMousedown:de,onMouseup:xe}),[j("div",{tabindex:0,ref:m,style:ZP,"aria-hidden":"true"},null),he?he({originVNode:Le}):Le,j("div",{tabindex:0,ref:o,style:ZP,"aria-hidden":"true"},null)]),[[Rp,De]]):null]}})}}});function lX(t){if(t==null)throw new TypeError("Cannot destructure "+t)}const uX=jt({compatConfig:{MODE:3},name:"Mask",props:{prefixCls:String,visible:Boolean,motionName:String,maskProps:Object},setup:function(e,r){return lX(r),function(){var i=e.prefixCls,u=e.visible,d=e.maskProps,m=e.motionName,o=oy(m);return j(os,o,{default:function(){return[uo(j("div",H({class:"".concat(i,"-mask")},d),null),[[Rp,u]])]}})}}}),XP=jt({compatConfig:{MODE:3},name:"Dialog",inheritAttrs:!1,props:Di(H(H({},Yw()),{},{getOpenCount:Function,scrollLocker:Object}),{mask:!0,visible:!1,keyboard:!0,closable:!0,maskClosable:!0,destroyOnClose:!1,prefixCls:"rc-dialog",getOpenCount:function(){return null},focusTriggerAfterClose:!0}),setup:function(e,r){var i=r.attrs,u=r.slots,d=qe(),m=qe(),o=qe(),_=qe(e.visible),C=qe("vcDialogTitle".concat(oX())),T=function(U){if(U){if(!Vu(m.value,document.activeElement)){var G;d.value=document.activeElement,(G=o.value)===null||G===void 0||G.focus()}}else{var q=_.value;if(_.value=!1,e.mask&&d.value&&e.focusTriggerAfterClose){try{d.value.focus({preventScroll:!0})}catch{}d.value=null}if(q){var V;(V=e.afterClose)===null||V===void 0||V.call(e)}}},S=function(U){var G;(G=e.onClose)===null||G===void 0||G.call(e,U)},P=qe(!1),A=qe(),O=function(){clearTimeout(A.value),P.value=!0},R=function(){A.value=setTimeout(function(){P.value=!1})},z=function(U){if(!e.maskClosable)return null;P.value?P.value=!1:m.value===U.target&&S(U)},F=function(U){if(e.keyboard&&U.keyCode===Fn.ESC){U.stopPropagation(),S(U);return}e.visible&&U.keyCode===Fn.TAB&&o.value.changeActive(!U.shiftKey)};return an(function(){return e.visible},function(){e.visible&&(_.value=!0)},{flush:"post"}),Er(function(){var N;clearTimeout(A.value),(N=e.scrollLocker)===null||N===void 0||N.unLock()}),vr(function(){var N;if((N=e.scrollLocker)===null||N===void 0||N.unLock(),_.value){var U;(U=e.scrollLocker)===null||U===void 0||U.lock()}}),function(){var N=e.prefixCls,U=e.mask,G=e.visible,q=e.maskTransitionName,V=e.maskAnimation,Z=e.zIndex,Q=e.wrapClassName,te=e.rootClassName,ie=e.wrapStyle,ve=e.closable,ce=e.maskProps,de=e.maskStyle,xe=e.transitionName,De=e.animation,ge=e.wrapProps,he=e.title,me=he===void 0?u.title:he,Pe=i.style,He=i.class;return j("div",H({class:["".concat(N,"-root"),te]},lc(e,{data:!0})),[j(uX,{prefixCls:N,visible:U&&G,motionName:HP(N,q,V),style:H({zIndex:Z},de),maskProps:ce},null),j("div",H({tabIndex:-1,onKeydown:F,class:qt("".concat(N,"-wrap"),Q),ref:m,onClick:z,role:"dialog","aria-labelledby":me?C.value:null,style:H(H({zIndex:Z},ie),{},{display:_.value?null:"none"})},ge),[j(sX,H(H({},hi(e,["scrollLocker"])),{},{style:Pe,class:He,onMousedown:O,onMouseup:R,ref:o,closable:ve,ariaId:C.value,prefixCls:N,visible:G,onClose:S,onVisibleChanged:T,motionName:HP(N,xe,De)}),u)])])}}});var cX=Yw(),dX=jt({compatConfig:{MODE:3},name:"DialogWrap",inheritAttrs:!1,props:Di(cX,{visible:!1}),setup:function(e,r){var i=r.attrs,u=r.slots,d=qe(e.visible);return yw({},{inTriggerContext:!1}),an(function(){return e.visible},function(){e.visible&&(d.value=!0)},{flush:"post"}),function(){var m=e.visible,o=e.getContainer,_=e.forceRender,C=e.destroyOnClose,T=C===void 0?!1:C,S=e.afterClose,P=H(H(H({},e),i),{},{ref:"_component",key:"dialog"});return o===!1?j(XP,H(H({},P),{},{getOpenCount:function(){return 2}}),u):!_&&T&&!d.value?null:j(OZ,{visible:m,forceRender:_,getContainer:o},{default:function(O){return P=H(H(H({},P),O),{},{afterClose:function(){S==null||S(),d.value=!1}}),j(XP,P,u)}})}}});const fX=dX;var hX={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};const pX=hX;function YP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){mX(t,u,r[u])})}return t}function mX(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Jw=function(e,r){var i=YP({},e,r.attrs);return j($r,YP({},i,{icon:pX}),null)};Jw.displayName="UpOutlined";Jw.inheritAttrs=!1;const vX=Jw;function Rb(){return typeof BigInt=="function"}function np(t){var e=t.trim(),r=e.startsWith("-");r&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var i=e||"0",u=i.split("."),d=u[0]||"0",m=u[1]||"0";d==="0"&&m==="0"&&(r=!1);var o=r?"-":"";return{negative:r,negativeStr:o,trimStr:i,integerStr:d,decimalStr:m,fullStr:"".concat(o).concat(i)}}function Qw(t){var e=String(t);return!Number.isNaN(Number(e))&&e.includes("e")}function Pp(t){var e=String(t);if(Qw(t)){var r=Number(e.slice(e.indexOf("e-")+2)),i=e.match(/\.(\d+)/);return i!=null&&i[1]&&(r+=i[1].length),r}return e.includes(".")&&tC(e)?e.length-e.indexOf(".")-1:0}function eC(t){var e=String(t);if(Qw(t)){if(t>Number.MAX_SAFE_INTEGER)return String(Rb()?BigInt(t).toString():Number.MAX_SAFE_INTEGER);if(t<Number.MIN_SAFE_INTEGER)return String(Rb()?BigInt(t).toString():Number.MIN_SAFE_INTEGER);e=t.toFixed(Pp(e))}return np(e).fullStr}function tC(t){return typeof t=="number"?!Number.isNaN(t):t?/^\s*-?\d+(\.\d+)?\s*$/.test(t)||/^\s*-?\d+\.\s*$/.test(t)||/^\s*-?\.\d+\s*$/.test(t):!1}var gX=function(){function t(e){if(_y(this,t),Ie(this,"origin",""),!e&&e!==0||!String(e).trim()){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return yy(t,[{key:"negate",value:function(){return new t(-this.toNumber())}},{key:"add",value:function(r){if(this.isInvalidate())return new t(r);var i=Number(r);if(Number.isNaN(i))return this;var u=this.number+i;if(u>Number.MAX_SAFE_INTEGER)return new t(Number.MAX_SAFE_INTEGER);if(u<Number.MIN_SAFE_INTEGER)return new t(Number.MIN_SAFE_INTEGER);var d=Math.max(Pp(this.number),Pp(i));return new t(u.toFixed(d))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toNumber()===(r==null?void 0:r.toNumber())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":eC(this.number):this.origin}}]),t}(),yX=function(){function t(e){if(_y(this,t),Ie(this,"origin",""),!e&&e!==0||!String(e).trim()){this.empty=!0;return}if(this.origin=String(e),e==="-"){this.nan=!0;return}var r=e;if(Qw(r)&&(r=Number(r)),r=typeof r=="string"?r:eC(r),tC(r)){var i=np(r);this.negative=i.negative;var u=i.trimStr.split(".");this.integer=BigInt(u[0]);var d=u[1]||"0";this.decimal=BigInt(d),this.decimalLen=d.length}else this.nan=!0}return yy(t,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(r){var i="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(r,"0"));return BigInt(i)}},{key:"negate",value:function(){var r=new t(this.toString());return r.negative=!r.negative,r}},{key:"add",value:function(r){if(this.isInvalidate())return new t(r);var i=new t(r);if(i.isInvalidate())return this;var u=Math.max(this.getDecimalStr().length,i.getDecimalStr().length),d=this.alignDecimal(u),m=i.alignDecimal(u),o=(d+m).toString(),_=np(o),C=_.negativeStr,T=_.trimStr,S="".concat(C).concat(T.padStart(u+1,"0"));return new t("".concat(S.slice(0,-u),".").concat(S.slice(-u)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toString()===(r==null?void 0:r.toString())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":np("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),t}();function qa(t){return Rb()?new yX(t):new gX(t)}function zb(t,e,r){if(t==="")return"";var i=np(t),u=i.negativeStr,d=i.integerStr,m=i.decimalStr,o="".concat(e).concat(m),_="".concat(u).concat(d);if(r>=0){var C=Number(m[r]);if(C>=5){var T=qa(t).add("".concat(u,"0.").concat("0".repeat(r)).concat(10-C));return zb(T.toString(),e,r)}return r===0?_:"".concat(_).concat(e).concat(m.padEnd(r,"0").slice(0,r))}return o===".0"?_:"".concat(_).concat(o)}var _X=200,xX=600;const bX=jt({compatConfig:{MODE:3},name:"StepHandler",inheritAttrs:!1,props:{prefixCls:String,upDisabled:Boolean,downDisabled:Boolean,onStep:{type:Function}},slots:["upNode","downNode"],setup:function(e,r){var i=r.slots,u=r.emit,d=qe(),m=function(C,T){C.preventDefault(),u("step",T);function S(){u("step",T),d.value=setTimeout(S,_X)}d.value=setTimeout(S,xX)},o=function(){clearTimeout(d.value)};return Er(function(){o()}),function(){if(M3())return null;var _=e.prefixCls,C=e.upDisabled,T=e.downDisabled,S="".concat(_,"-handler"),P=qt(S,"".concat(S,"-up"),Ie({},"".concat(S,"-up-disabled"),C)),A=qt(S,"".concat(S,"-down"),Ie({},"".concat(S,"-down-disabled"),T)),O={unselectable:"on",role:"button",onMouseup:o,onMouseleave:o},R=i.upNode,z=i.downNode;return j("div",{class:"".concat(S,"-wrap")},[j("span",H(H({},O),{},{onMousedown:function(N){m(N,!0)},"aria-label":"Increase Value","aria-disabled":C,class:P}),[(R==null?void 0:R())||j("span",{unselectable:"on",class:"".concat(_,"-handler-up-inner")},null)]),j("span",H(H({},O),{},{onMousedown:function(N){m(N,!1)},"aria-label":"Decrease Value","aria-disabled":T,class:A}),[(z==null?void 0:z())||j("span",{unselectable:"on",class:"".concat(_,"-handler-down-inner")},null)])])}}});function wX(t,e){var r=qe(null);function i(){try{var d=t.value,m=d.selectionStart,o=d.selectionEnd,_=d.value,C=_.substring(0,m),T=_.substring(o);r.value={start:m,end:o,value:_,beforeTxt:C,afterTxt:T}}catch{}}function u(){if(t.value&&r.value&&e.value)try{var d=t.value.value,m=r.value,o=m.beforeTxt,_=m.afterTxt,C=m.start,T=d.length;if(d.endsWith(_))T=d.length-r.value.afterTxt.length;else if(d.startsWith(o))T=o.length;else{var S=o[C-1],P=d.indexOf(S,C-1);P!==-1&&(T=P+1)}t.value.setSelectionRange(T,T)}catch(A){"Something warning of cursor restore. Please fire issue about this: ".concat(A.message)}}return[i,u]}const CX=function(){var t=qe(0),e=function(){fr.cancel(t.value)};return Er(function(){e()}),function(r){e(),t.value=fr(function(){r()})}};var SX=["prefixCls","min","max","step","defaultValue","value","disabled","readonly","keyboard","controls","autofocus","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","lazy","class","style"],JP=function(e,r){return e||r.isEmpty()?r.toString():r.toNumber()},QP=function(e){var r=qa(e);return r.isInvalidate()?null:r},lR=function(){return{stringMode:{type:Boolean},defaultValue:{type:[String,Number]},value:{type:[String,Number]},prefixCls:{type:String},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},tabindex:{type:Number},controls:{type:Boolean,default:!0},readonly:{type:Boolean},disabled:{type:Boolean},autofocus:{type:Boolean},keyboard:{type:Boolean,default:!0},parser:{type:Function},formatter:{type:Function},precision:{type:Number},decimalSeparator:{type:String},onInput:{type:Function},onChange:{type:Function},onPressEnter:{type:Function},onStep:{type:Function},onBlur:{type:Function},onFocus:{type:Function}}};const TX=jt({compatConfig:{MODE:3},name:"InnerInputNumber",inheritAttrs:!1,props:H(H({},lR()),{},{lazy:Boolean}),slots:["upHandler","downHandler"],setup:function(e,r){var i=r.attrs,u=r.slots,d=r.emit,m=r.expose,o=qe(),_=qe(!1),C=qe(!1),T=qe(!1),S=qe(qa(e.value));function P(Te){e.value===void 0&&(S.value=Te)}var A=function(oe,ze){if(!ze)return e.precision>=0?e.precision:Math.max(Pp(oe),Pp(e.step))},O=function(oe){var ze=String(oe);if(e.parser)return e.parser(ze);var Fe=ze;return e.decimalSeparator&&(Fe=Fe.replace(e.decimalSeparator,".")),Fe.replace(/[^\w.-]+/g,"")},R=qe(""),z=function(oe,ze){if(e.formatter)return e.formatter(oe,{userTyping:ze,input:String(R.value)});var Fe=typeof oe=="number"?eC(oe):oe;if(!ze){var lt=A(Fe,ze);if(tC(Fe)&&(e.decimalSeparator||lt>=0)){var vt=e.decimalSeparator||".";Fe=zb(Fe,vt,lt)}}return Fe},F=function(){var Te=e.value;return S.value.isInvalidate()&&["string","number"].includes(On(Te))?Number.isNaN(Te)?"":Te:z(S.value.toString(),!1)}();R.value=F;function N(Te,oe){R.value=z(Te.isInvalidate()?Te.toString(!1):Te.toString(!oe),oe)}var U=ue(function(){return QP(e.max)}),G=ue(function(){return QP(e.min)}),q=ue(function(){return!U.value||!S.value||S.value.isInvalidate()?!1:U.value.lessEquals(S.value)}),V=ue(function(){return!G.value||!S.value||S.value.isInvalidate()?!1:S.value.lessEquals(G.value)}),Z=wX(o,_),Q=zn(Z,2),te=Q[0],ie=Q[1],ve=function(oe){return U.value&&!oe.lessEquals(U.value)?U.value:G.value&&!G.value.lessEquals(oe)?G.value:null},ce=function(oe){return!ve(oe)},de=function(oe,ze){var Fe=oe,lt=ce(Fe)||Fe.isEmpty();if(!Fe.isEmpty()&&!ze&&(Fe=ve(Fe)||Fe,lt=!0),!e.readonly&&!e.disabled&&lt){var vt=Fe.toString(),kt=A(vt,ze);if(kt>=0&&(Fe=qa(zb(vt,".",kt))),!Fe.equals(S.value)){var It;P(Fe),(It=e.onChange)===null||It===void 0||It.call(e,Fe.isEmpty()?null:JP(e.stringMode,Fe)),e.value===void 0&&N(Fe,ze)}return Fe}return S.value},xe=CX(),De=function Te(oe){var ze;if(te(),R.value=oe,!T.value){var Fe=O(oe),lt=qa(Fe);lt.isNaN()||de(lt,!0)}(ze=e.onInput)===null||ze===void 0||ze.call(e,oe),xe(function(){var vt=oe;e.parser||(vt=oe.replace(/。/g,".")),vt!==oe&&Te(vt)})},ge=function(){T.value=!0},he=function(){T.value=!1,De(o.value.value)},me=function(oe){De(oe.target.value)},Pe=function(oe){var ze,Fe;if(!(oe&&q.value||!oe&&V.value)){C.value=!1;var lt=qa(e.step);oe||(lt=lt.negate());var vt=(S.value||qa(0)).add(lt.toString()),kt=de(vt,!1);(ze=e.onStep)===null||ze===void 0||ze.call(e,JP(e.stringMode,kt),{offset:e.step,type:oe?"up":"down"}),(Fe=o.value)===null||Fe===void 0||Fe.focus()}},He=function(oe){var ze=qa(O(R.value)),Fe=ze;ze.isNaN()?Fe=S.value:Fe=de(ze,oe),e.value!==void 0?N(S.value,!1):Fe.isNaN()||N(Fe,!1)},Ke=function(oe){var ze=oe.which;if(C.value=!0,ze===Fn.ENTER){var Fe;T.value||(C.value=!1),He(!1),(Fe=e.onPressEnter)===null||Fe===void 0||Fe.call(e,oe)}e.keyboard!==!1&&!T.value&&[Fn.UP,Fn.DOWN].includes(ze)&&(Pe(Fn.UP===ze),oe.preventDefault())},Re=function(){C.value=!1},Le=function(oe){He(!1),_.value=!1,C.value=!1,d("blur",oe)};return an(function(){return e.precision},function(){S.value.isInvalidate()||N(S.value,!1)},{flush:"post"}),an(function(){return e.value},function(){var Te=qa(e.value);S.value=Te;var oe=qa(O(R.value));(!Te.equals(oe)||!C.value||e.formatter)&&N(Te,C.value)},{flush:"post"}),an(R,function(){e.formatter&&ie()},{flush:"post"}),an(function(){return e.disabled},function(Te){Te&&(_.value=!1)}),m({focus:function(){var oe;(oe=o.value)===null||oe===void 0||oe.focus()},blur:function(){var oe;(oe=o.value)===null||oe===void 0||oe.blur()}}),function(){var Te,oe=H(H({},i),e),ze=oe.prefixCls,Fe=ze===void 0?"rc-input-number":ze,lt=oe.min,vt=oe.max,kt=oe.step,It=kt===void 0?1:kt;oe.defaultValue,oe.value;var se=oe.disabled,ae=oe.readonly;oe.keyboard;var Be=oe.controls,st=Be===void 0?!0:Be,ut=oe.autofocus;oe.stringMode,oe.parser,oe.formatter,oe.precision,oe.decimalSeparator,oe.onChange,oe.onInput,oe.onPressEnter,oe.onStep;var bt=oe.lazy,At=oe.class,_t=oe.style,nt=Cr(oe,SX),tt=u.upHandler,pt=u.downHandler,dt="".concat(Fe,"-input"),Ot={};return bt?Ot.onChange=me:Ot.onInput=me,j("div",{class:qt(Fe,At,(Te={},Ie(Te,"".concat(Fe,"-focused"),_.value),Ie(Te,"".concat(Fe,"-disabled"),se),Ie(Te,"".concat(Fe,"-readonly"),ae),Ie(Te,"".concat(Fe,"-not-a-number"),S.value.isNaN()),Ie(Te,"".concat(Fe,"-out-of-range"),!S.value.isInvalidate()&&!ce(S.value)),Te)),style:_t,onKeydown:Ke,onKeyup:Re},[st&&j(bX,{prefixCls:Fe,upDisabled:q.value,downDisabled:V.value,onStep:Pe},{upNode:tt,downNode:pt}),j("div",{class:"".concat(dt,"-wrap")},[j("input",H(H(H({autofocus:ut,autocomplete:"off",role:"spinbutton","aria-valuemin":lt,"aria-valuemax":vt,"aria-valuenow":S.value.isInvalidate()?null:S.value.toString(),step:It},nt),{},{ref:o,class:dt,value:R.value,disabled:se,readonly:ae,onFocus:function(cn){_.value=!0,d("focus",cn)}},Ot),{},{onBlur:Le,onCompositionstart:ge,onCompositionend:he}),null)])])}}});function rx(t){return t!=null}var EX=["class","bordered","readonly","style","addonBefore","addonAfter","prefix","valueModifiers"],eA=lR(),IX=function(){return H(H({},eA),{},{size:{type:String},bordered:{type:Boolean,default:!0},placeholder:String,name:String,id:String,type:String,addonBefore:et.any,addonAfter:et.any,prefix:et.any,"onUpdate:value":eA.onChange,valueModifiers:Object})},ix=jt({compatConfig:{MODE:3},name:"AInputNumber",inheritAttrs:!1,props:IX(),slots:["addonBefore","addonAfter","prefix"],setup:function(e,r){var i=r.emit,u=r.expose,d=r.attrs,m=r.slots,o=Ks(),_=hr("input-number",e),C=_.prefixCls,T=_.size,S=_.direction,P=qe(e.value===void 0?e.defaultValue:e.value),A=qe(!1);an(function(){return e.value},function(){P.value=e.value});var O=qe(null),R=function(){var q;(q=O.value)===null||q===void 0||q.focus()},z=function(){var q;(q=O.value)===null||q===void 0||q.blur()};u({focus:R,blur:z});var F=function(q){e.value===void 0&&(P.value=q),i("update:value",q),i("change",q),o.onFieldChange()},N=function(q){A.value=!1,i("blur",q),o.onFieldBlur()},U=function(q){A.value=!0,i("focus",q)};return function(){var G,q,V,Z,Q=H(H({},d),e),te=Q.class,ie=Q.bordered,ve=Q.readonly,ce=Q.style,de=Q.addonBefore,xe=de===void 0?(G=m.addonBefore)===null||G===void 0?void 0:G.call(m):de,De=Q.addonAfter,ge=De===void 0?(q=m.addonAfter)===null||q===void 0?void 0:q.call(m):De,he=Q.prefix,me=he===void 0?(V=m.prefix)===null||V===void 0?void 0:V.call(m):he,Pe=Q.valueModifiers,He=Pe===void 0?{}:Pe,Ke=Cr(Q,EX),Re=C.value,Le=T.value,Te=qt((Z={},Ie(Z,"".concat(Re,"-lg"),Le==="large"),Ie(Z,"".concat(Re,"-sm"),Le==="small"),Ie(Z,"".concat(Re,"-rtl"),S.value==="rtl"),Ie(Z,"".concat(Re,"-readonly"),ve),Ie(Z,"".concat(Re,"-borderless"),!ie),Z),te),oe=j(TX,H(H({},hi(Ke,["size","defaultValue"])),{},{ref:O,lazy:!!He.lazy,value:P.value,class:Te,prefixCls:Re,readonly:ve,onChange:F,onBlur:N,onFocus:U}),{upHandler:function(){return j(vX,{class:"".concat(Re,"-handler-up-inner")},null)},downHandler:function(){return j(Sw,{class:"".concat(Re,"-handler-down-inner")},null)}}),ze=rx(xe)||rx(ge);if(rx(me)){var Fe,lt=qt("".concat(Re,"-affix-wrapper"),(Fe={},Ie(Fe,"".concat(Re,"-affix-wrapper-focused"),A.value),Ie(Fe,"".concat(Re,"-affix-wrapper-disabled"),e.disabled),Ie(Fe,"".concat(Re,"-affix-wrapper-rtl"),S.value==="rtl"),Ie(Fe,"".concat(Re,"-affix-wrapper-readonly"),ve),Ie(Fe,"".concat(Re,"-affix-wrapper-borderless"),!ie),Ie(Fe,"".concat(te),!ze&&te),Fe));oe=j("div",{class:lt,style:ce,onMouseup:function(){return O.value.focus()}},[j("span",{class:"".concat(Re,"-prefix")},[me]),oe])}if(ze){var vt,kt="".concat(Re,"-group"),It="".concat(kt,"-addon"),se=xe?j("div",{class:It},[xe]):null,ae=ge?j("div",{class:It},[ge]):null,Be=qt("".concat(Re,"-wrapper"),kt,Ie({},"".concat(kt,"-rtl"),S.value==="rtl")),st=qt("".concat(Re,"-group-wrapper"),(vt={},Ie(vt,"".concat(Re,"-group-wrapper-sm"),Le==="small"),Ie(vt,"".concat(Re,"-group-wrapper-lg"),Le==="large"),Ie(vt,"".concat(Re,"-group-wrapper-rtl"),S.value==="rtl"),vt),te);oe=j("div",{class:st,style:ce},[j("div",{class:Be},[se,oe,ae])])}return ui(oe,{style:ce})}}});const PX=kr(ix,{install:function(e){return e.component(ix.name,ix),e}});var nC=function(){return{prefixCls:String,hasSider:{type:Boolean,default:void 0},tagName:String}};function Ty(t){var e=t.suffixCls,r=t.tagName,i=t.name;return function(u){var d=jt({compatConfig:{MODE:3},name:i,props:nC(),setup:function(o,_){var C=_.slots,T=hr(e,o),S=T.prefixCls;return function(){var P=H(H({},o),{},{prefixCls:S.value,tagName:r});return j(u,P,C)}}});return d}}var rC=jt({compatConfig:{MODE:3},props:nC(),setup:function(e,r){var i=r.slots;return function(){return j(e.tagName,{class:e.prefixCls},i)}}}),AX=jt({compatConfig:{MODE:3},props:nC(),setup:function(e,r){var i=r.slots,u=hr("",e),d=u.direction,m=qe([]),o={addSider:function(T){m.value=[].concat(bn(m.value),[T])},removeSider:function(T){m.value=m.value.filter(function(S){return S!==T})}};sr(sD,o);var _=ue(function(){var C,T=e.prefixCls,S=e.hasSider;return C={},Ie(C,"".concat(T),!0),Ie(C,"".concat(T,"-has-sider"),typeof S=="boolean"?S:m.value.length>0),Ie(C,"".concat(T,"-rtl"),d.value==="rtl"),C});return function(){var C=e.tagName;return j(C,{class:_.value},i)}}}),MX=Ty({suffixCls:"layout",tagName:"section",name:"ALayout"})(AX),ag=Ty({suffixCls:"layout-header",tagName:"header",name:"ALayoutHeader"})(rC),ox=Ty({suffixCls:"layout-footer",tagName:"footer",name:"ALayoutFooter"})(rC),sg=Ty({suffixCls:"layout-content",tagName:"main",name:"ALayoutContent"})(rC);const ax=MX;var kX={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"};const OX=kX;function tA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){DX(t,u,r[u])})}return t}function DX(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var iC=function(e,r){var i=tA({},e,r.attrs);return j($r,tA({},i,{icon:OX}),null)};iC.displayName="BarsOutlined";iC.inheritAttrs=!1;const RX=iC;var nA={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px",xxxl:"1999.98px"},zX=function(){return{prefixCls:String,collapsible:{type:Boolean,default:void 0},collapsed:{type:Boolean,default:void 0},defaultCollapsed:{type:Boolean,default:void 0},reverseArrow:{type:Boolean,default:void 0},zeroWidthTriggerStyle:{type:Object,default:void 0},trigger:et.any,width:et.oneOfType([et.number,et.string]),collapsedWidth:et.oneOfType([et.number,et.string]),breakpoint:et.oneOf(Yi("xs","sm","md","lg","xl","xxl","xxxl")),theme:et.oneOf(Yi("light","dark")).def("dark"),onBreakpoint:Function,onCollapse:Function}},LX=function(){var t=0;return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t+=1,"".concat(e).concat(t)}}();const lg=jt({compatConfig:{MODE:3},name:"ALayoutSider",inheritAttrs:!1,props:Di(zX(),{collapsible:!1,defaultCollapsed:!1,reverseArrow:!1,width:200,collapsedWidth:80}),emits:["breakpoint","update:collapsed","collapse"],setup:function(e,r){var i=r.emit,u=r.attrs,d=r.slots,m=hr("layout-sider",e),o=m.prefixCls,_=Kn(sD,void 0),C=qe(!!(e.collapsed!==void 0?e.collapsed:e.defaultCollapsed)),T=qe(!1);an(function(){return e.collapsed},function(){C.value=!!e.collapsed}),sr(aD,C);var S=function(N,U){e.collapsed===void 0&&(C.value=N),i("update:collapsed",N),i("collapse",N,U)},P=qe(function(F){T.value=F.matches,i("breakpoint",F.matches),C.value!==F.matches&&S(F.matches,"responsive")}),A;function O(F){return P.value(F)}var R=LX("ant-sider-");_&&_.addSider(R),wr(function(){an(function(){return e.breakpoint},function(){try{var F;(F=A)===null||F===void 0||F.removeEventListener("change",O)}catch{var N;(N=A)===null||N===void 0||N.removeListener(O)}if(typeof window<"u"){var U=window,G=U.matchMedia;if(G&&e.breakpoint&&e.breakpoint in nA){A=G("(max-width: ".concat(nA[e.breakpoint],")"));try{A.addEventListener("change",O)}catch{A.addListener(O)}O(A)}}},{immediate:!0})}),Er(function(){try{var F;(F=A)===null||F===void 0||F.removeEventListener("change",O)}catch{var N;(N=A)===null||N===void 0||N.removeListener(O)}_&&_.removeSider(R)});var z=function(){S(!C.value,"clickTrigger")};return function(){var F,N,U,G=o.value,q=e.collapsedWidth,V=e.width,Z=e.reverseArrow,Q=e.zeroWidthTriggerStyle,te=e.trigger,ie=te===void 0?(F=d.trigger)===null||F===void 0?void 0:F.call(d):te,ve=e.collapsible,ce=e.theme,de=C.value?q:V,xe=B7(de)?"".concat(de,"px"):String(de),De=parseFloat(String(q||0))===0?j("span",{onClick:z,class:qt("".concat(G,"-zero-width-trigger"),"".concat(G,"-zero-width-trigger-").concat(Z?"right":"left")),style:Q},[ie||j(RX,null,null)]):null,ge={expanded:j(Z?Bg:bb,null,null),collapsed:j(Z?bb:Bg,null,null)},he=C.value?"collapsed":"expanded",me=ge[he],Pe=ie!==null?De||j("div",{class:"".concat(G,"-trigger"),onClick:z,style:{width:xe}},[ie||me]):null,He=[u.style,{flex:"0 0 ".concat(xe),maxWidth:xe,minWidth:xe,width:xe}],Ke=qt(G,"".concat(G,"-").concat(ce),(N={},Ie(N,"".concat(G,"-collapsed"),!!C.value),Ie(N,"".concat(G,"-has-trigger"),ve&&ie!==null&&!De),Ie(N,"".concat(G,"-below"),!!T.value),Ie(N,"".concat(G,"-zero-width"),parseFloat(xe)===0),N),u.class);return j("aside",H(H({},u),{},{class:Ke,style:He}),[j("div",{class:"".concat(G,"-children")},[(U=d.default)===null||U===void 0?void 0:U.call(d)]),ve||T.value&&De?Pe:null])}}});var FX=ag,BX=lg,NX=sg;const $X=kr(ax,{Header:ag,Footer:ox,Content:sg,Sider:lg,install:function(e){return e.component(ax.name,ax),e.component(ag.name,ag),e.component(ox.name,ox),e.component(lg.name,lg),e.component(sg.name,sg),e}});var jX=["class","style"],VX=function(){return{prefixCls:String,spinning:{type:Boolean,default:void 0},size:String,wrapperClassName:String,tip:et.any,delay:Number,indicator:et.any}},ug=null;function UX(t,e){return!!t&&!!e&&!isNaN(Number(e))}function KX(t){var e=t.indicator;ug=typeof e=="function"?e:function(){return j(e,null,null)}}const Md=jt({compatConfig:{MODE:3},name:"ASpin",inheritAttrs:!1,props:Di(VX(),{size:"default",spinning:!0,wrapperClassName:""}),setup:function(){return{originalUpdateSpinning:null,configProvider:Kn("configProvider",JO)}},data:function(){var e=this.spinning,r=this.delay,i=UX(e,r);return{sSpinning:e&&!i}},created:function(){this.originalUpdateSpinning=this.updateSpinning,this.debouncifyUpdateSpinning(this.$props)},mounted:function(){this.updateSpinning()},updated:function(){var e=this;gr(function(){e.debouncifyUpdateSpinning(),e.updateSpinning()})},beforeUnmount:function(){this.cancelExistingSpin()},methods:{debouncifyUpdateSpinning:function(e){var r=e||this.$props,i=r.delay;i&&(this.cancelExistingSpin(),this.updateSpinning=Fw(this.originalUpdateSpinning,i))},updateSpinning:function(){var e=this.spinning,r=this.sSpinning;r!==e&&(this.sSpinning=e)},cancelExistingSpin:function(){var e=this.updateSpinning;e&&e.cancel&&e.cancel()},renderIndicator:function(e){var r="".concat(e,"-dot"),i=j1(this,"indicator");return i===null?null:(Array.isArray(i)&&(i=i.length===1?i[0]:i),co(i)?wo(i,{class:r}):ug&&co(ug())?wo(ug(),{class:r}):j("span",{class:"".concat(r," ").concat(e,"-dot-spin")},[j("i",{class:"".concat(e,"-dot-item")},null),j("i",{class:"".concat(e,"-dot-item")},null),j("i",{class:"".concat(e,"-dot-item")},null),j("i",{class:"".concat(e,"-dot-item")},null)]))}},render:function(){var e,r,i,u=this.$props,d=u.size,m=u.prefixCls,o=u.tip,_=o===void 0?(e=(r=this.$slots).tip)===null||e===void 0?void 0:e.call(r):o,C=u.wrapperClassName,T=this.$attrs,S=T.class,P=T.style,A=Cr(T,jX),O=this.configProvider,R=O.getPrefixCls,z=O.direction,F=R("spin",m),N=this.sSpinning,U=(i={},Ie(i,F,!0),Ie(i,"".concat(F,"-sm"),d==="small"),Ie(i,"".concat(F,"-lg"),d==="large"),Ie(i,"".concat(F,"-spinning"),N),Ie(i,"".concat(F,"-show-text"),!!_),Ie(i,"".concat(F,"-rtl"),z==="rtl"),Ie(i,S,!!S),i),G=j("div",H(H({},A),{},{style:P,class:U}),[this.renderIndicator(F),_?j("div",{class:"".concat(F,"-text")},[_]):null]),q=Zk(this);if(q&&q.length){var V,Z=(V={},Ie(V,"".concat(F,"-container"),!0),Ie(V,"".concat(F,"-blur"),N),V);return j("div",{class:["".concat(F,"-nested-loading"),C]},[N&&j("div",{key:"loading"},[G]),j("div",{class:Z,key:"container"},[q])])}return G}});Md.setDefaultIndicator=KX;Md.install=function(t){return t.component(Md.name,Md),t};var GX={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"};const HX=GX;function rA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){qX(t,u,r[u])})}return t}function qX(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oC=function(e,r){var i=rA({},e,r.attrs);return j($r,rA({},i,{icon:HX}),null)};oC.displayName="DoubleLeftOutlined";oC.inheritAttrs=!1;const WX=oC;var ZX={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"};const XX=ZX;function iA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){YX(t,u,r[u])})}return t}function YX(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var aC=function(e,r){var i=iA({},e,r.attrs);return j($r,iA({},i,{icon:XX}),null)};aC.displayName="DoubleRightOutlined";aC.inheritAttrs=!1;const JX=aC,QX=jt({compatConfig:{MODE:3},inheritAttrs:!1,props:j3(),Option:cb.Option,setup:function(e,r){var i=r.attrs,u=r.slots;return function(){var d=H(H({},e),{},{size:"small"},i);return j(cb,d,u)}}}),Du=jt({compatConfig:{MODE:3},name:"Pager",inheritAttrs:!1,props:{rootPrefixCls:String,page:Number,active:{type:Boolean,default:void 0},last:{type:Boolean,default:void 0},locale:et.object,showTitle:{type:Boolean,default:void 0},itemRender:{type:Function,default:function(){}},onClick:{type:Function},onKeypress:{type:Function}},eimt:["click","keypress"],setup:function(e,r){var i=r.emit,u=r.attrs,d=function(){i("click",e.page)},m=function(_){i("keypress",_,d,e.page)};return function(){var o,_=e.showTitle,C=e.page,T=e.itemRender,S=u.class,P=u.style,A="".concat(e.rootPrefixCls,"-item"),O=qt(A,"".concat(A,"-").concat(e.page),(o={},Ie(o,"".concat(A,"-active"),e.active),Ie(o,"".concat(A,"-disabled"),!e.page),o),S);return j("li",{onClick:d,onKeypress:m,title:_?String(C):null,tabindex:"0",class:O,style:P},[T({page:C,type:"page",originalElement:j("a",{rel:"nofollow"},[C])})])}}}),Lu={ZERO:48,NINE:57,NUMPAD_ZERO:96,NUMPAD_NINE:105,BACKSPACE:8,DELETE:46,ENTER:13,ARROW_UP:38,ARROW_DOWN:40},eY=jt({compatConfig:{MODE:3},props:{disabled:{type:Boolean,default:void 0},changeSize:Function,quickGo:Function,selectComponentClass:et.any,current:Number,pageSizeOptions:et.array.def(["10","20","50","100"]),pageSize:Number,buildOptionText:Function,locale:et.object,rootPrefixCls:String,selectPrefixCls:String,goButton:et.any},setup:function(e){var r=qe(""),i=ue(function(){return!r.value||isNaN(r.value)?void 0:Number(r.value)}),u=function(T){return"".concat(T.value," ").concat(e.locale.items_per_page)},d=function(T){var S=T.target,P=S.value,A=S.composing;T.isComposing||A||r.value===P||(r.value=P)},m=function(T){var S=e.goButton,P=e.quickGo,A=e.rootPrefixCls;if(!(S||r.value===""))if(T.relatedTarget&&(T.relatedTarget.className.indexOf("".concat(A,"-item-link"))>=0||T.relatedTarget.className.indexOf("".concat(A,"-item"))>=0)){r.value="";return}else P(i.value),r.value=""},o=function(T){r.value!==""&&(T.keyCode===Lu.ENTER||T.type==="click")&&(e.quickGo(i.value),r.value="")},_=ue(function(){var C=e.pageSize,T=e.pageSizeOptions;return T.some(function(S){return S.toString()===C.toString()})?T:T.concat([C.toString()]).sort(function(S,P){var A=isNaN(Number(S))?0:Number(S),O=isNaN(Number(P))?0:Number(P);return A-O})});return function(){var C=e.rootPrefixCls,T=e.locale,S=e.changeSize,P=e.quickGo,A=e.goButton,O=e.selectComponentClass,R=e.selectPrefixCls,z=e.pageSize,F=e.disabled,N="".concat(C,"-options"),U=null,G=null,q=null;if(!S&&!P)return null;if(S&&O){var V=e.buildOptionText||u,Z=_.value.map(function(Q,te){return j(O.Option,{key:te,value:Q},{default:function(){return[V({value:Q})]}})});U=j(O,{disabled:F,prefixCls:R,showSearch:!1,class:"".concat(N,"-size-changer"),optionLabelProp:"children",value:(z||_.value[0]).toString(),onChange:function(te){return S(Number(te))},getPopupContainer:function(te){return te.parentNode}},{default:function(){return[Z]}})}return P&&(A&&(q=typeof A=="boolean"?j("button",{type:"button",onClick:o,onKeyup:o,disabled:F,class:"".concat(N,"-quick-jumper-button")},[T.jump_to_confirm]):j("span",{onClick:o,onKeyup:o},[A])),G=j("div",{class:"".concat(N,"-quick-jumper")},[T.jump_to,uo(j("input",{disabled:F,type:"text",value:r.value,onInput:d,onChange:d,onKeyup:o,onBlur:m},null),[[$p]]),T.page,q])),j("li",{class:"".concat(N)},[U,G])}}}),tY={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875"};var nY=["class"];function rY(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function iY(t){var e=t.originalElement;return e}function Ps(t,e,r){var i=typeof t>"u"?e.statePageSize:t;return Math.floor((r.total-1)/i)+1}const oY=jt({compatConfig:{MODE:3},name:"Pagination",mixins:[w3],inheritAttrs:!1,props:{disabled:{type:Boolean,default:void 0},prefixCls:et.string.def("rc-pagination"),selectPrefixCls:et.string.def("rc-select"),current:Number,defaultCurrent:et.number.def(1),total:et.number.def(0),pageSize:Number,defaultPageSize:et.number.def(10),hideOnSinglePage:{type:Boolean,default:!1},showSizeChanger:{type:Boolean,default:void 0},showLessItems:{type:Boolean,default:!1},selectComponentClass:et.any,showPrevNextJumpers:{type:Boolean,default:!0},showQuickJumper:et.oneOfType([et.looseBool,et.object]).def(!1),showTitle:{type:Boolean,default:!0},pageSizeOptions:et.arrayOf(et.oneOfType([et.number,et.string])),buildOptionText:Function,showTotal:Function,simple:{type:Boolean,default:void 0},locale:et.object.def(tY),itemRender:et.func.def(iY),prevIcon:et.any,nextIcon:et.any,jumpPrevIcon:et.any,jumpNextIcon:et.any,totalBoundaryShowSizeChanger:et.number.def(50)},data:function(){var e=this.$props,r=db([this.current,this.defaultCurrent]),i=db([this.pageSize,this.defaultPageSize]);return r=Math.min(r,Ps(i,void 0,e)),{stateCurrent:r,stateCurrentInputValue:r,statePageSize:i}},watch:{current:function(e){this.setState({stateCurrent:e,stateCurrentInputValue:e})},pageSize:function(e){var r={},i=this.stateCurrent,u=Ps(e,this.$data,this.$props);i=i>u?u:i,md(this,"current")||(r.stateCurrent=i,r.stateCurrentInputValue=i),r.statePageSize=e,this.setState(r)},stateCurrent:function(e,r){var i=this;this.$nextTick(function(){if(i.$refs.paginationNode){var u=i.$refs.paginationNode.querySelector(".".concat(i.prefixCls,"-item-").concat(r));u&&document.activeElement===u&&u.blur()}})},total:function(){var e={},r=Ps(this.pageSize,this.$data,this.$props);if(md(this,"current")){var i=Math.min(this.current,r);e.stateCurrent=i,e.stateCurrentInputValue=i}else{var u=this.stateCurrent;u===0&&r>0?u=1:u=Math.min(this.stateCurrent,r),e.stateCurrent=u}this.setState(e)}},methods:{getJumpPrevPage:function(){return Math.max(1,this.stateCurrent-(this.showLessItems?3:5))},getJumpNextPage:function(){return Math.min(Ps(void 0,this.$data,this.$props),this.stateCurrent+(this.showLessItems?3:5))},getItemIcon:function(e,r){var i=this.$props.prefixCls,u=j1(this,e,this.$props)||j("button",{type:"button","aria-label":r,class:"".concat(i,"-item-link")},null);return u},getValidValue:function(e){var r=e.target.value,i=Ps(void 0,this.$data,this.$props),u=this.$data.stateCurrentInputValue,d;return r===""?d=r:isNaN(Number(r))?d=u:r>=i?d=i:d=Number(r),d},isValid:function(e){return rY(e)&&e!==this.stateCurrent},shouldDisplayQuickJumper:function(){var e=this.$props,r=e.showQuickJumper,i=e.pageSize,u=e.total;return u<=i?!1:r},handleKeyDown:function(e){(e.keyCode===Lu.ARROW_UP||e.keyCode===Lu.ARROW_DOWN)&&e.preventDefault()},handleKeyUp:function(e){if(!(e.isComposing||e.target.composing)){var r=this.getValidValue(e),i=this.stateCurrentInputValue;r!==i&&this.setState({stateCurrentInputValue:r}),e.keyCode===Lu.ENTER?this.handleChange(r):e.keyCode===Lu.ARROW_UP?this.handleChange(r-1):e.keyCode===Lu.ARROW_DOWN&&this.handleChange(r+1)}},changePageSize:function(e){var r=this.stateCurrent,i=r,u=Ps(e,this.$data,this.$props);r=r>u?u:r,u===0&&(r=this.stateCurrent),typeof e=="number"&&(md(this,"pageSize")||this.setState({statePageSize:e}),md(this,"current")||this.setState({stateCurrent:r,stateCurrentInputValue:r})),this.__emit("update:pageSize",e),r!==i&&this.__emit("update:current",r),this.__emit("showSizeChange",r,e),this.__emit("change",r,e)},handleChange:function(e){var r=this.$props.disabled,i=e;if(this.isValid(i)&&!r){var u=Ps(void 0,this.$data,this.$props);return i>u?i=u:i<1&&(i=1),md(this,"current")||this.setState({stateCurrent:i,stateCurrentInputValue:i}),this.__emit("update:current",i),this.__emit("change",i,this.statePageSize),i}return this.stateCurrent},prev:function(){this.hasPrev()&&this.handleChange(this.stateCurrent-1)},next:function(){this.hasNext()&&this.handleChange(this.stateCurrent+1)},jumpPrev:function(){this.handleChange(this.getJumpPrevPage())},jumpNext:function(){this.handleChange(this.getJumpNextPage())},hasPrev:function(){return this.stateCurrent>1},hasNext:function(){return this.stateCurrent<Ps(void 0,this.$data,this.$props)},getShowSizeChanger:function(){var e=this.$props,r=e.showSizeChanger,i=e.total,u=e.totalBoundaryShowSizeChanger;return typeof r<"u"?r:i>u},runIfEnter:function(e,r){if(e.key==="Enter"||e.charCode===13){for(var i=arguments.length,u=new Array(i>2?i-2:0),d=2;d<i;d++)u[d-2]=arguments[d];r.apply(void 0,u)}},runIfEnterPrev:function(e){this.runIfEnter(e,this.prev)},runIfEnterNext:function(e){this.runIfEnter(e,this.next)},runIfEnterJumpPrev:function(e){this.runIfEnter(e,this.jumpPrev)},runIfEnterJumpNext:function(e){this.runIfEnter(e,this.jumpNext)},handleGoTO:function(e){(e.keyCode===Lu.ENTER||e.type==="click")&&this.handleChange(this.stateCurrentInputValue)},renderPrev:function(e){var r=this.$props.itemRender,i=r({page:e,type:"prev",originalElement:this.getItemIcon("prevIcon","prev page")}),u=!this.hasPrev();return Co(i)?ui(i,u?{disabled:u}:{}):i},renderNext:function(e){var r=this.$props.itemRender,i=r({page:e,type:"next",originalElement:this.getItemIcon("nextIcon","next page")}),u=!this.hasNext();return Co(i)?ui(i,u?{disabled:u}:{}):i}},render:function(){var e,r=this.$props,i=r.prefixCls,u=r.disabled,d=r.hideOnSinglePage,m=r.total,o=r.locale,_=r.showQuickJumper,C=r.showLessItems,T=r.showTitle,S=r.showTotal,P=r.simple,A=r.itemRender,O=r.showPrevNextJumpers,R=r.jumpPrevIcon,z=r.jumpNextIcon,F=r.selectComponentClass,N=r.selectPrefixCls,U=r.pageSizeOptions,G=this.stateCurrent,q=this.statePageSize,V=Wk(this.$attrs).extraAttrs,Z=V.class,Q=Cr(V,nY);if(d===!0&&this.total<=q)return null;var te=Ps(void 0,this.$data,this.$props),ie=[],ve=null,ce=null,de=null,xe=null,De=null,ge=_&&_.goButton,he=C?1:2,me=G-1>0?G-1:0,Pe=G+1<te?G+1:te,He=this.hasPrev(),Ke=this.hasNext();if(P)return ge&&(typeof ge=="boolean"?De=j("button",{type:"button",onClick:this.handleGoTO,onKeyup:this.handleGoTO},[o.jump_to_confirm]):De=j("span",{onClick:this.handleGoTO,onKeyup:this.handleGoTO},[ge]),De=j("li",{title:T?"".concat(o.jump_to).concat(G,"/").concat(te):null,class:"".concat(i,"-simple-pager")},[De])),j("ul",H({class:qt("".concat(i," ").concat(i,"-simple"),Ie({},"".concat(i,"-disabled"),u),Z)},Q),[j("li",{title:T?o.prev_page:null,onClick:this.prev,tabindex:He?0:null,onKeypress:this.runIfEnterPrev,class:qt("".concat(i,"-prev"),Ie({},"".concat(i,"-disabled"),!He)),"aria-disabled":!He},[this.renderPrev(me)]),j("li",{title:T?"".concat(G,"/").concat(te):null,class:"".concat(i,"-simple-pager")},[uo(j("input",{type:"text",value:this.stateCurrentInputValue,disabled:u,onKeydown:this.handleKeyDown,onKeyup:this.handleKeyUp,onInput:this.handleKeyUp,onChange:this.handleKeyUp,size:"3"},null),[[$p]]),j("span",{class:"".concat(i,"-slash")},[Zi("\uFF0F")]),te]),j("li",{title:T?o.next_page:null,onClick:this.next,tabindex:Ke?0:null,onKeypress:this.runIfEnterNext,class:qt("".concat(i,"-next"),Ie({},"".concat(i,"-disabled"),!Ke)),"aria-disabled":!Ke},[this.renderNext(Pe)]),De]);if(te<=3+he*2){var Re={locale:o,rootPrefixCls:i,showTitle:T,itemRender:A,onClick:this.handleChange,onKeypress:this.runIfEnter};te||ie.push(j(Du,H(H({},Re),{},{key:"noPager",page:1,class:"".concat(i,"-item-disabled")}),null));for(var Le=1;Le<=te;Le+=1){var Te=G===Le;ie.push(j(Du,H(H({},Re),{},{key:Le,page:Le,active:Te}),null))}}else{var oe=C?o.prev_3:o.prev_5,ze=C?o.next_3:o.next_5;O&&(ve=j("li",{title:this.showTitle?oe:null,key:"prev",onClick:this.jumpPrev,tabindex:"0",onKeypress:this.runIfEnterJumpPrev,class:qt("".concat(i,"-jump-prev"),Ie({},"".concat(i,"-jump-prev-custom-icon"),!!R))},[A({page:this.getJumpPrevPage(),type:"jump-prev",originalElement:this.getItemIcon("jumpPrevIcon","prev page")})]),ce=j("li",{title:this.showTitle?ze:null,key:"next",tabindex:"0",onClick:this.jumpNext,onKeypress:this.runIfEnterJumpNext,class:qt("".concat(i,"-jump-next"),Ie({},"".concat(i,"-jump-next-custom-icon"),!!z))},[A({page:this.getJumpNextPage(),type:"jump-next",originalElement:this.getItemIcon("jumpNextIcon","next page")})])),xe=j(Du,{locale:o,last:!0,rootPrefixCls:i,onClick:this.handleChange,onKeypress:this.runIfEnter,key:te,page:te,active:!1,showTitle:T,itemRender:A},null),de=j(Du,{locale:o,rootPrefixCls:i,onClick:this.handleChange,onKeypress:this.runIfEnter,key:1,page:1,active:!1,showTitle:T,itemRender:A},null);var Fe=Math.max(1,G-he),lt=Math.min(G+he,te);G-1<=he&&(lt=1+he*2),te-G<=he&&(Fe=te-he*2);for(var vt=Fe;vt<=lt;vt+=1){var kt=G===vt;ie.push(j(Du,{locale:o,rootPrefixCls:i,onClick:this.handleChange,onKeypress:this.runIfEnter,key:vt,page:vt,active:kt,showTitle:T,itemRender:A},null))}G-1>=he*2&&G!==1+2&&(ie[0]=j(Du,{locale:o,rootPrefixCls:i,onClick:this.handleChange,onKeypress:this.runIfEnter,key:Fe,page:Fe,class:"".concat(i,"-item-after-jump-prev"),active:!1,showTitle:this.showTitle,itemRender:A},null),ie.unshift(ve)),te-G>=he*2&&G!==te-2&&(ie[ie.length-1]=j(Du,{locale:o,rootPrefixCls:i,onClick:this.handleChange,onKeypress:this.runIfEnter,key:lt,page:lt,class:"".concat(i,"-item-before-jump-next"),active:!1,showTitle:this.showTitle,itemRender:A},null),ie.push(ce)),Fe!==1&&ie.unshift(de),lt!==te&&ie.push(xe)}var It=null;S&&(It=j("li",{class:"".concat(i,"-total-text")},[S(m,[m===0?0:(G-1)*q+1,G*q>m?m:G*q])]));var se=!He||!te,ae=!Ke||!te,Be=this.buildOptionText||this.$slots.buildOptionText;return j("ul",H(H({unselectable:"on",ref:"paginationNode"},Q),{},{class:qt((e={},Ie(e,"".concat(i),!0),Ie(e,"".concat(i,"-disabled"),u),e),Z)}),[It,j("li",{title:T?o.prev_page:null,onClick:this.prev,tabindex:se?null:0,onKeypress:this.runIfEnterPrev,class:qt("".concat(i,"-prev"),Ie({},"".concat(i,"-disabled"),se)),"aria-disabled":se},[this.renderPrev(me)]),ie,j("li",{title:T?o.next_page:null,onClick:this.next,tabindex:ae?null:0,onKeypress:this.runIfEnterNext,class:qt("".concat(i,"-next"),Ie({},"".concat(i,"-disabled"),ae)),"aria-disabled":ae},[this.renderNext(Pe)]),j(eY,{disabled:u,locale:o,rootPrefixCls:i,selectComponentClass:F,selectPrefixCls:N,changeSize:this.getShowSizeChanger()?this.changePageSize:null,current:G,pageSize:q,pageSizeOptions:U,buildOptionText:Be||null,quickGo:this.shouldDisplayQuickJumper()?this.handleChange:null,goButton:ge},null)])}});var aY=["size","itemRender","buildOptionText","selectComponentClass","responsive"],sY=function(){return{total:Number,defaultCurrent:Number,disabled:{type:Boolean,default:void 0},current:Number,defaultPageSize:Number,pageSize:Number,hideOnSinglePage:{type:Boolean,default:void 0},showSizeChanger:{type:Boolean,default:void 0},pageSizeOptions:Array,buildOptionText:Function,showQuickJumper:{type:[Boolean,Object],default:void 0},showTotal:Function,size:String,simple:{type:Boolean,default:void 0},locale:Object,prefixCls:String,selectPrefixCls:String,totalBoundaryShowSizeChanger:Number,selectComponentClass:String,itemRender:Function,role:String,responsive:Boolean,showLessItems:{type:Boolean,default:void 0},onChange:Function,onShowSizeChange:Function,"onUpdate:current":Function,"onUpdate:pageSize":Function}};const lY=jt({compatConfig:{MODE:3},name:"APagination",inheritAttrs:!1,props:sY(),setup:function(e,r){var i=r.slots,u=r.attrs,d=hr("pagination",e),m=d.prefixCls,o=d.configProvider,_=d.direction,C=ue(function(){return o.getPrefixCls("select",e.selectPrefixCls)}),T=V3(),S=Lp("Pagination",tO,Nr(e,"locale")),P=zn(S,1),A=P[0],O=function(z){var F=j("span",{class:"".concat(z,"-item-ellipsis")},[Zi("\u2022\u2022\u2022")]),N=j("button",{class:"".concat(z,"-item-link"),type:"button",tabindex:-1},[j(bb,null,null)]),U=j("button",{class:"".concat(z,"-item-link"),type:"button",tabindex:-1},[j(Bg,null,null)]),G=j("a",{rel:"nofollow",class:"".concat(z,"-item-link")},[j("div",{class:"".concat(z,"-item-container")},[j(WX,{class:"".concat(z,"-item-link-icon")},null),F])]),q=j("a",{rel:"nofollow",class:"".concat(z,"-item-link")},[j("div",{class:"".concat(z,"-item-container")},[j(JX,{class:"".concat(z,"-item-link-icon")},null),F])]);if(_.value==="rtl"){var V=[U,N];N=V[0],U=V[1];var Z=[q,G];G=Z[0],q=Z[1]}return{prevIcon:N,nextIcon:U,jumpPrevIcon:G,jumpNextIcon:q}};return function(){var R,z=e.size,F=e.itemRender,N=F===void 0?i.itemRender:F,U=e.buildOptionText,G=U===void 0?i.buildOptionText:U,q=e.selectComponentClass,V=e.responsive,Z=Cr(e,aY),Q=z==="small"||!!((R=T.value)!==null&&R!==void 0&&R.xs&&!z&&V),te=H(H(H(H({},Z),O(m.value)),{},{prefixCls:m.value,selectPrefixCls:C.value,selectComponentClass:q||(Q?QX:cb),locale:A.value,buildOptionText:G},u),{},{class:qt(Ie({mini:Q},"".concat(m.value,"-rtl"),_.value==="rtl"),u.class),itemRender:N});return j(oY,te,null)}}}),uY=zp(lY);var cY=["prefixCls","visible","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"],Lb=null,dY=function(e){Lb={x:e.pageX,y:e.pageY},setTimeout(function(){return Lb=null},100)};wD()&&zo(document.documentElement,"click",dY,!0);var fY=function(){return{prefixCls:String,visible:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:et.any,closable:{type:Boolean,default:void 0},closeIcon:et.any,onOk:Function,onCancel:Function,"onUpdate:visible":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:et.any,okText:et.any,okType:String,cancelText:et.any,icon:et.any,maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:Object,cancelButtonProps:Object,destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:{type:Object,default:void 0},maskStyle:{type:Object,default:void 0},mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function}},xd=[];const Vo=jt({compatConfig:{MODE:3},name:"AModal",inheritAttrs:!1,props:Di(fY(),{width:520,transitionName:"zoom",maskTransitionName:"fade",confirmLoading:!1,visible:!1,okType:"primary"}),setup:function(e,r){var i=r.emit,u=r.slots,d=r.attrs,m=Lp("Modal"),o=zn(m,1),_=o[0],C=hr("modal",e),T=C.prefixCls,S=C.rootPrefixCls,P=C.direction,A=C.getPopupContainer,O=function(N){i("update:visible",!1),i("cancel",N),i("change",!1)},R=function(N){i("ok",N)},z=function(){var N,U,G=e.okText,q=G===void 0?(N=u.okText)===null||N===void 0?void 0:N.call(u):G,V=e.okType,Z=e.cancelText,Q=Z===void 0?(U=u.cancelText)===null||U===void 0?void 0:U.call(u):Z,te=e.confirmLoading;return j(Hn,null,[j(Xi,H({onClick:O},e.cancelButtonProps),{default:function(){return[Q||_.value.cancelText]}}),j(Xi,H(H({},H3(V)),{},{loading:te,onClick:R},e.okButtonProps),{default:function(){return[q||_.value.okText]}})])};return function(){var F,N;e.prefixCls;var U=e.visible,G=e.wrapClassName,q=e.centered,V=e.getContainer,Z=e.closeIcon,Q=Z===void 0?(F=u.closeIcon)===null||F===void 0?void 0:F.call(u):Z,te=e.focusTriggerAfterClose,ie=te===void 0?!0:te,ve=Cr(e,cY),ce=qt(G,(N={},Ie(N,"".concat(T.value,"-centered"),!!q),Ie(N,"".concat(T.value,"-wrap-rtl"),P.value==="rtl"),N));return j(fX,H(H(H({},ve),d),{},{getContainer:V||A.value,prefixCls:T.value,wrapClassName:ce,visible:U,mousePosition:Lb,onClose:O,focusTriggerAfterClose:ie,transitionName:gp(S.value,"zoom",e.transitionName),maskTransitionName:gp(S.value,"fade",e.maskTransitionName)}),H(H({},u),{},{footer:u.footer||z,closeIcon:function(){return j("span",{class:"".concat(T.value,"-close-x")},[Q||j(nw,{class:"".concat(T.value,"-close-icon")},null)])}}))}}});var hY=function(){var e=qe(!1);return Er(function(){e.value=!0}),e};const pY=hY;var mY={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:Object,emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function oA(t){return!!(t&&!!t.then)}const aA=jt({compatConfig:{MODE:3},name:"ActionButton",props:mY,setup:function(e,r){var i=r.slots,u=qe(!1),d=qe(),m=qe(!1),o,_=pY();wr(function(){e.autofocus&&(o=setTimeout(function(){var S;return(S=d.value.$el)===null||S===void 0?void 0:S.focus()}))}),Er(function(){clearTimeout(o)});var C=function(P){var A=e.close;!oA(P)||(m.value=!0,P.then(function(){_.value||(m.value=!1),A.apply(void 0,arguments),u.value=!1},function(O){console.error(O),_.value||(m.value=!1),u.value=!1}))},T=function(P){var A=e.actionFn,O=e.close,R=O===void 0?function(){}:O;if(!u.value){if(u.value=!0,!A){R();return}var z;if(e.emitEvent){if(z=A(P),e.quitOnNullishReturnValue&&!oA(z)){u.value=!1,R(P);return}}else if(A.length)z=A(R),u.value=!1;else if(z=A(),!z){R();return}C(z)}};return function(){var S=e.type,P=e.prefixCls,A=e.buttonProps;return j(Xi,H(H(H({},H3(S)),{},{onClick:T,loading:m.value,prefixCls:P},A),{},{ref:d}),i)}}});function Fh(t){return typeof t=="function"?t():t}const vY=jt({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName"],setup:function(e,r){var i=r.attrs,u=Lp("Modal"),d=zn(u,1),m=d[0];return function(){var o=e.icon,_=e.onCancel,C=e.onOk,T=e.close,S=e.closable,P=S===void 0?!1:S,A=e.zIndex,O=e.afterClose,R=e.visible,z=e.keyboard,F=e.centered,N=e.getContainer,U=e.maskStyle,G=e.okButtonProps,q=e.cancelButtonProps,V=e.okCancel,Z=V===void 0?!0:V,Q=e.width,te=Q===void 0?416:Q,ie=e.mask,ve=ie===void 0?!0:ie,ce=e.maskClosable,de=ce===void 0?!1:ce,xe=e.type,De=e.title,ge=e.content,he=e.direction,me=e.closeIcon,Pe=e.modalRender,He=e.focusTriggerAfterClose,Ke=e.rootPrefixCls,Re=e.bodyStyle,Le=e.wrapClassName,Te=e.okType||"primary",oe=e.prefixCls||"ant-modal",ze="".concat(oe,"-confirm"),Fe=i.style||{},lt=Fh(e.okText)||(Z?m.value.okText:m.value.justOkText),vt=Fh(e.cancelText)||m.value.cancelText,kt=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",It=qt(ze,"".concat(ze,"-").concat(xe),"".concat(oe,"-").concat(xe),Ie({},"".concat(ze,"-rtl"),he==="rtl"),i.class),se=Z&&j(aA,{actionFn:_,close:T,autofocus:kt==="cancel",buttonProps:q,prefixCls:"".concat(Ke,"-btn")},{default:function(){return[vt]}});return j(Vo,{prefixCls:oe,class:It,wrapClassName:qt(Ie({},"".concat(ze,"-centered"),!!F),Le),onCancel:function(Be){return T({triggerCancel:!0},Be)},visible:R,title:"",footer:"",transitionName:gp(Ke,"zoom",e.transitionName),maskTransitionName:gp(Ke,"fade",e.maskTransitionName),mask:ve,maskClosable:de,maskStyle:U,style:Fe,bodyStyle:Re,width:te,zIndex:A,afterClose:O,keyboard:z,centered:F,getContainer:N,closable:P,closeIcon:me,modalRender:Pe,focusTriggerAfterClose:He},{default:function(){return[j("div",{class:"".concat(ze,"-body-wrapper")},[j("div",{class:"".concat(ze,"-body")},[Fh(o),De===void 0?null:j("span",{class:"".concat(ze,"-title")},[Fh(De)]),j("div",{class:"".concat(ze,"-content")},[Fh(ge)])]),j("div",{class:"".concat(ze,"-btns")},[se,j(aA,{type:Te,actionFn:C,close:T,autofocus:kt==="ok",buttonProps:G,prefixCls:"".concat(Ke,"-btn")},{default:function(){return[lt]}})])])]}})}}});var gY=function(e){var r=document.createDocumentFragment(),i=H(H({},hi(e,["parentContext","appContext"])),{},{close:m,visible:!0}),u=null;function d(){u&&(Sg(null,r),u.component.update(),u=null);for(var T=arguments.length,S=new Array(T),P=0;P<T;P++)S[P]=arguments[P];var A=S.some(function(z){return z&&z.triggerCancel});e.onCancel&&A&&e.onCancel.apply(e,S);for(var O=0;O<xd.length;O++){var R=xd[O];if(R===m){xd.splice(O,1);break}}}function m(){for(var T=this,S=arguments.length,P=new Array(S),A=0;A<S;A++)P[A]=arguments[A];i=H(H({},i),{},{visible:!1,afterClose:function(){typeof e.afterClose=="function"&&e.afterClose(),d.apply(T,P)}}),o(i)}function o(T){typeof T=="function"?i=T(i):i=H(H({},i),T),u&&(kr(u.component.props,i),u.component.update())}var _=function(S){var P=Ro,A=P.prefixCls,O=S.prefixCls||"".concat(A,"-modal");return j(Td,H(H({},P),{},{notUpdateGlobalConfig:!0,prefixCls:A}),{default:function(){return[j(vY,H(H({},S),{},{rootPrefixCls:A,prefixCls:O}),null)]}})};function C(T){var S=j(_,H({},T));return S.appContext=e.parentContext||e.appContext||S.appContext,Sg(S,r),S}return u=C(i),xd.push(m),{destroy:m,update:o}};const Gp=gY;function yY(t){return H(H({icon:function(){return j(ew,null,null)},okCancel:!1},t),{},{type:"warning"})}function _Y(t){return H(H({icon:function(){return j($O,null,null)},okCancel:!1},t),{},{type:"info"})}function xY(t){return H(H({icon:function(){return j(NO,null,null)},okCancel:!1},t),{},{type:"success"})}function bY(t){return H(H({icon:function(){return j(jO,null,null)},okCancel:!1},t),{},{type:"error"})}function wY(t){return H(H({icon:function(){return j(ew,null,null)},okCancel:!0},t),{},{type:"confirm"})}function uR(t){return Gp(yY(t))}Vo.info=function(e){return Gp(_Y(e))};Vo.success=function(e){return Gp(xY(e))};Vo.error=function(e){return Gp(bY(e))};Vo.warning=uR;Vo.warn=uR;Vo.confirm=function(e){return Gp(wY(e))};Vo.destroyAll=function(){for(;xd.length;){var e=xd.pop();e&&e()}};Vo.install=function(t){return t.component(Vo.name,Vo),t};var CY={small:8,middle:16,large:24},SY=function(){return{prefixCls:String,size:{type:[String,Number,Array]},direction:et.oneOf(Yi("horizontal","vertical")).def("horizontal"),align:et.oneOf(Yi("start","end","center","baseline")),wrap:{type:Boolean,default:void 0}}};function TY(t){return typeof t=="string"?CY[t]:t||0}var EY=jt({compatConfig:{MODE:3},name:"ASpace",props:SY(),slots:["split"],setup:function(e,r){var i=r.slots,u=hr("space",e),d=u.prefixCls,m=u.space,o=u.direction,_=SD(),C=ue(function(){var z,F,N;return(z=(F=e.size)!==null&&F!==void 0?F:(N=m.value)===null||N===void 0?void 0:N.size)!==null&&z!==void 0?z:"small"}),T=qe(),S=qe();an(C,function(){var z=(Array.isArray(C.value)?C.value:[C.value,C.value]).map(function(N){return TY(N)}),F=zn(z,2);T.value=F[0],S.value=F[1]},{immediate:!0});var P=ue(function(){return e.align===void 0&&e.direction==="horizontal"?"center":e.align}),A=ue(function(){var z;return qt(d.value,"".concat(d.value,"-").concat(e.direction),(z={},Ie(z,"".concat(d.value,"-rtl"),o.value==="rtl"),Ie(z,"".concat(d.value,"-align-").concat(P.value),P.value),z))}),O=ue(function(){return o.value==="rtl"?"marginLeft":"marginRight"}),R=ue(function(){var z={};return _.value&&(z.columnGap="".concat(T.value,"px"),z.rowGap="".concat(S.value,"px")),H(H({},z),e.wrap&&{flexWrap:"wrap",marginBottom:"".concat(-S.value,"px")})});return function(){var z,F,N=e.wrap,U=e.direction,G=U===void 0?"horizontal":U,q=Ko((z=i.default)===null||z===void 0?void 0:z.call(i)),V=q.length;if(V===0)return null;var Z=(F=i.split)===null||F===void 0?void 0:F.call(i),Q="".concat(d.value,"-item"),te=T.value,ie=V-1;return j("div",{class:A.value,style:R.value},[q.map(function(ve,ce){var de={};return _.value||(G==="vertical"?ce<ie&&(de={marginBottom:"".concat(te/(Z?2:1),"px")}):de=H(H({},ce<ie&&Ie({},O.value,"".concat(te/(Z?2:1),"px"))),N&&{paddingBottom:"".concat(S.value,"px")})),j(Hn,null,[j("div",{class:Q,style:de},[ve]),ce<ie&&Z&&j("span",{class:"".concat(Q,"-split"),style:de},[Z])])})])}}});const IY=zp(EY);var cR=Symbol("TableContextProps"),PY=function(e){sr(cR,e)},as=function(){return Kn(cR,{})},AY="RC_TABLE_KEY";function dR(t){return t==null?[]:Array.isArray(t)?t:[t]}function fR(t,e){if(!e&&typeof e!="number")return t;for(var r=dR(e),i=t,u=0;u<r.length;u+=1){if(!i)return null;var d=r[u];i=i[d]}return i}function Ey(t){var e=[],r={};return t.forEach(function(i){for(var u=i||{},d=u.key,m=u.dataIndex,o=d||dR(m).join("-")||AY;r[o];)o="".concat(o,"_next");r[o]=!0,e.push(o)}),e}function MY(){var t={};function e(d,m){m&&Object.keys(m).forEach(function(o){var _=m[o];_&&On(_)==="object"?(d[o]=d[o]||{},e(d[o],_)):d[o]=_})}for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return i.forEach(function(d){e(t,d)}),t}function Fb(t){return t!=null}var hR=Symbol("SlotsContextProps"),kY=function(e){sr(hR,e)},pR=function(){return Kn(hR,ue(function(){return{}}))},mR=Symbol("ContextProps"),OY=function(e){sr(mR,e)},DY=function(){return Kn(mR,{onResizeColumn:function(){}})},kd="RC_TABLE_INTERNAL_COL_DEFINE",vR=Symbol("HoverContextProps"),RY=function(e){sr(vR,e)},zY=function(){return Kn(vR,{startRow:qe(-1),endRow:qe(-1),onHover:function(){}})},Bb=qe(!1),LY=function(){wr(function(){Bb.value=Bb.value||MG("position","sticky")})},FY=function(){return Bb},BY=["colSpan","rowSpan","style","class"];function NY(t,e,r,i){var u=t+e-1;return t<=i&&u>=r}function $Y(t){return t&&On(t)==="object"&&!Array.isArray(t)&&!co(t)}const Iy=jt({name:"Cell",props:["prefixCls","record","index","renderIndex","dataIndex","customRender","component","colSpan","rowSpan","fixLeft","fixRight","firstFixLeft","lastFixLeft","firstFixRight","lastFixRight","appendNode","additionalProps","ellipsis","align","rowType","isSticky","column","cellType","transformCellText"],slots:["appendNode"],setup:function(e,r){var i=r.slots,u=pR(),d=zY(),m=d.onHover,o=d.startRow,_=d.endRow,C=ue(function(){var z,F,N,U;return(z=(F=e.colSpan)!==null&&F!==void 0?F:(N=e.additionalProps)===null||N===void 0?void 0:N.colSpan)!==null&&z!==void 0?z:(U=e.additionalProps)===null||U===void 0?void 0:U.colspan}),T=ue(function(){var z,F,N,U;return(z=(F=e.rowSpan)!==null&&F!==void 0?F:(N=e.additionalProps)===null||N===void 0?void 0:N.rowSpan)!==null&&z!==void 0?z:(U=e.additionalProps)===null||U===void 0?void 0:U.rowspan}),S=ga(function(){var z=e.index;return NY(z,T.value||1,o.value,_.value)}),P=FY(),A=function(F,N){var U,G=e.record,q=e.index,V=e.additionalProps;G&&m(q,q+N-1),V==null||(U=V.onMouseenter)===null||U===void 0||U.call(V,F)},O=function(F){var N,U=e.record,G=e.additionalProps;U&&m(-1,-1),G==null||(N=G.onMouseleave)===null||N===void 0||N.call(G,F)},R=function z(F){var N=Ko(F)[0];return co(N)?N.type===Xd?N.children:Array.isArray(N.children)?z(N.children):void 0:N};return function(){var z,F,N,U,G,q,V=e.prefixCls,Z=e.record,Q=e.index,te=e.renderIndex,ie=e.dataIndex,ve=e.customRender,ce=e.component,de=ce===void 0?"td":ce,xe=e.fixLeft,De=e.fixRight,ge=e.firstFixLeft,he=e.lastFixLeft,me=e.firstFixRight,Pe=e.lastFixRight,He=e.appendNode,Ke=He===void 0?(z=i.appendNode)===null||z===void 0?void 0:z.call(i):He,Re=e.additionalProps,Le=Re===void 0?{}:Re,Te=e.ellipsis,oe=e.align,ze=e.rowType,Fe=e.isSticky,lt=e.column,vt=lt===void 0?{}:lt,kt=e.cellType,It="".concat(V,"-cell"),se,ae,Be=(F=i.default)===null||F===void 0?void 0:F.call(i);if(Fb(Be)||kt==="header")ae=Be;else{var st,ut=fR(Z,ie);if(ae=ut,ve){var bt=ve({text:ut,value:ut,record:Z,index:Q,renderIndex:te,column:vt.__originColumn__});$Y(bt)?(ae=bt.children,se=bt.props):ae=bt}if(!(kd in vt)&&kt==="body"&&u.value.bodyCell&&!((st=vt.slots)!==null&&st!==void 0&&st.customRender)){var At=ck(u.value,"bodyCell",{text:ut,value:ut,record:Z,index:Q,column:vt.__originColumn__},function(){var St=ae===void 0?ut:ae;return[On(St)==="object"&&Co(St)||On(St)!=="object"?St:null]});ae=fo(At)}e.transformCellText&&(ae=e.transformCellText({text:ae,record:Z,index:Q,column:vt.__originColumn__}))}On(ae)==="object"&&!Array.isArray(ae)&&!co(ae)&&(ae=null),Te&&(he||me)&&(ae=j("span",{class:"".concat(It,"-content")},[ae])),Array.isArray(ae)&&ae.length===1&&(ae=ae[0]);var _t=se||{},nt=_t.colSpan,tt=_t.rowSpan,pt=_t.style,dt=_t.class,Ot=Cr(_t,BY),Kt=(N=nt!==void 0?nt:C.value)!==null&&N!==void 0?N:1,cn=(U=tt!==void 0?tt:T.value)!==null&&U!==void 0?U:1;if(Kt===0||cn===0)return null;var Cn={},Rt=typeof xe=="number"&&P.value,ht=typeof De=="number"&&P.value;Rt&&(Cn.position="sticky",Cn.left="".concat(xe,"px")),ht&&(Cn.position="sticky",Cn.right="".concat(De,"px"));var Ht={};oe&&(Ht.textAlign=oe);var wn,zt=Te===!0?{showTitle:!0}:Te;zt&&(zt.showTitle||ze==="header")&&(typeof ae=="string"||typeof ae=="number"?wn=ae.toString():co(ae)&&(wn=R([ae])));var mt=H(H(H({title:wn},Ot),Le),{},{colSpan:Kt!==1?Kt:null,rowSpan:cn!==1?cn:null,class:qt(It,(G={},Ie(G,"".concat(It,"-fix-left"),Rt&&P.value),Ie(G,"".concat(It,"-fix-left-first"),ge&&P.value),Ie(G,"".concat(It,"-fix-left-last"),he&&P.value),Ie(G,"".concat(It,"-fix-right"),ht&&P.value),Ie(G,"".concat(It,"-fix-right-first"),me&&P.value),Ie(G,"".concat(It,"-fix-right-last"),Pe&&P.value),Ie(G,"".concat(It,"-ellipsis"),Te),Ie(G,"".concat(It,"-with-append"),Ke),Ie(G,"".concat(It,"-fix-sticky"),(Rt||ht)&&Fe&&P.value),Ie(G,"".concat(It,"-row-hover"),!se&&S.value),G),Le.class,dt),onMouseenter:function(yt){A(yt,cn)},onMouseleave:O,style:H(H(H(H({},$1(Le.style)),Ht),Cn),pt)});return j(de,mt,{default:function(){return[Ke,ae,(q=i.dragHandle)===null||q===void 0?void 0:q.call(i)]}})}}});function sC(t,e,r,i,u){var d=r[t]||{},m=r[e]||{},o,_;d.fixed==="left"?o=i.left[t]:m.fixed==="right"&&(_=i.right[e]);var C=!1,T=!1,S=!1,P=!1,A=r[e+1],O=r[t-1];if(u==="rtl"){if(o!==void 0){var R=O&&O.fixed==="left";P=!R}else if(_!==void 0){var z=A&&A.fixed==="right";S=!z}}else if(o!==void 0){var F=A&&A.fixed==="left";C=!F}else if(_!==void 0){var N=O&&O.fixed==="right";T=!N}return{fixLeft:o,fixRight:_,lastFixLeft:C,firstFixRight:T,lastFixRight:S,firstFixLeft:P,isSticky:i.isSticky}}var sA={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},lA=50;const jY=jt({compatConfig:{MODE:3},name:"DragHandle",props:{prefixCls:String,width:{type:Number,required:!0},minWidth:{type:Number,default:lA},maxWidth:{type:Number,default:1/0},column:{type:Object,default:void 0}},setup:function(e){var r=0,i={remove:function(){}},u={remove:function(){}},d=function(){i.remove(),u.remove()};is(function(){d()}),vr(function(){Ni(!isNaN(e.width),"Table","width must be a number when use resizable")});var m=DY(),o=m.onResizeColumn,_=ue(function(){return typeof e.minWidth=="number"&&!isNaN(e.minWidth)?e.minWidth:lA}),C=ue(function(){return typeof e.maxWidth=="number"&&!isNaN(e.maxWidth)?e.maxWidth:1/0}),T=Ji(),S=0,P=qe(!1),A,O=function(V){var Z=0;V.touches?V.touches.length?Z=V.touches[0].pageX:Z=V.changedTouches[0].pageX:Z=V.pageX;var Q=r-Z,te=Math.max(S-Q,_.value);te=Math.min(te,C.value),fr.cancel(A),A=fr(function(){o(te,e.column.__originColumn__)})},R=function(V){O(V)},z=function(V){P.value=!1,O(V),d()},F=function(V,Z){P.value=!0,d(),S=T.vnode.el.parentNode.getBoundingClientRect().width,!(V instanceof MouseEvent&&V.which!==1)&&(V.stopPropagation&&V.stopPropagation(),r=V.touches?V.touches[0].pageX:V.pageX,i=zo(document.documentElement,Z.move,R),u=zo(document.documentElement,Z.stop,z))},N=function(V){V.stopPropagation(),V.preventDefault(),F(V,sA.mouse)},U=function(V){V.stopPropagation(),V.preventDefault(),F(V,sA.touch)},G=function(V){V.stopPropagation(),V.preventDefault()};return function(){var q=e.prefixCls,V=Ie({},ao?"onTouchstartPassive":"onTouchstart",function(Z){return U(Z)});return j("div",H(H({class:"".concat(q,"-resize-handle ").concat(P.value?"dragging":""),onMousedown:N},V),{},{onClick:G}),[j("div",{class:"".concat(q,"-resize-handle-line")},null)])}}}),VY=jt({name:"HeaderRow",props:["cells","stickyOffsets","flattenColumns","rowComponent","cellComponent","index","customHeaderRow"],setup:function(e){var r=as();return function(){var i=r.prefixCls,u=r.direction,d=e.cells,m=e.stickyOffsets,o=e.flattenColumns,_=e.rowComponent,C=e.cellComponent,T=e.customHeaderRow,S=e.index,P;T&&(P=T(d.map(function(O){return O.column}),S));var A=Ey(d.map(function(O){return O.column}));return j(_,P,{default:function(){return[d.map(function(R,z){var F=R.column,N=sC(R.colStart,R.colEnd,o,m,u),U;F&&F.customHeaderCell&&(U=R.column.customHeaderCell(F));var G=F;return j(Iy,H(H(H({},R),{},{cellType:"header",ellipsis:F.ellipsis,align:F.align,component:C,prefixCls:i,key:A[z]},N),{},{additionalProps:U,rowType:"header",column:F}),{default:function(){return F.title},dragHandle:function(){return G.resizable?j(jY,{prefixCls:i,width:G.width,minWidth:G.minWidth,maxWidth:G.maxWidth,column:G},null):null}})})]}})}}});function UY(t){var e=[];function r(m,o){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;e[_]=e[_]||[];var C=o,T=m.filter(Boolean).map(function(S){var P={key:S.key,class:qt(S.className,S.class),column:S,colStart:C},A=1,O=S.children;return O&&O.length>0&&(A=r(O,C,_+1).reduce(function(R,z){return R+z},0),P.hasSubColumns=!0),"colSpan"in S&&(A=S.colSpan),"rowSpan"in S&&(P.rowSpan=S.rowSpan),P.colSpan=A,P.colEnd=P.colStart+A-1,e[_].push(P),C+=A,A});return T}r(t,0);for(var i=e.length,u=function(o){e[o].forEach(function(_){!("rowSpan"in _)&&!_.hasSubColumns&&(_.rowSpan=i-o)})},d=0;d<i;d+=1)u(d);return e}const uA=jt({name:"Header",inheritAttrs:!1,props:["columns","flattenColumns","stickyOffsets","customHeaderRow"],setup:function(e){var r=as(),i=ue(function(){return UY(e.columns)});return function(){var u=r.prefixCls,d=r.getComponent,m=e.stickyOffsets,o=e.flattenColumns,_=e.customHeaderRow,C=d(["header","wrapper"],"thead"),T=d(["header","row"],"tr"),S=d(["header","cell"],"th");return j(C,{class:"".concat(u,"-thead")},{default:function(){return[i.value.map(function(A,O){var R=j(VY,{key:O,flattenColumns:o,cells:A,stickyOffsets:m,rowComponent:T,cellComponent:S,customHeaderRow:_,index:O},null);return R})]}})}}});var gR=Symbol("ExpandedRowProps"),KY=function(e){sr(gR,e)},GY=function(){return Kn(gR,{})};const yR=jt({name:"ExpandedRow",inheritAttrs:!1,props:["prefixCls","component","cellComponent","expanded","colSpan","isEmpty"],setup:function(e,r){var i=r.slots,u=r.attrs,d=as(),m=GY(),o=m.fixHeader,_=m.fixColumn,C=m.componentWidth,T=m.horizonScroll;return function(){var S=e.prefixCls,P=e.component,A=e.cellComponent,O=e.expanded,R=e.colSpan,z=e.isEmpty;return j(P,{class:u.class,style:{display:O?null:"none"}},{default:function(){return[j(Iy,{component:A,prefixCls:S,colSpan:R},{default:function(){var U,G=(U=i.default)===null||U===void 0?void 0:U.call(i);return(z?T.value:_.value)&&(G=j("div",{style:{width:"".concat(C.value-(o.value?d.scrollbarSize:0),"px"),position:"sticky",left:0,overflow:"hidden"},class:"".concat(S,"-expanded-row-fixed")},[G])),G}})]}})}}}),HY=jt({name:"MeasureCell",props:["columnKey"],setup:function(e,r){var i=r.emit,u=qe();return wr(function(){u.value&&i("columnResize",e.columnKey,u.value.offsetWidth)}),function(){return j(Yd,{onResize:function(m){var o=m.offsetWidth;i("columnResize",e.columnKey,o)}},{default:function(){return[j("td",{ref:u,style:{padding:0,border:0,height:0}},[j("div",{style:{height:0,overflow:"hidden"}},[Zi("\xA0")])])]}})}}});var _R=Symbol("BodyContextProps"),qY=function(e){sr(_R,e)},xR=function(){return Kn(_R,{})};const WY=jt({name:"BodyRow",inheritAttrs:!1,props:["record","index","renderIndex","recordKey","expandedKeys","rowComponent","cellComponent","customRow","rowExpandable","indent","rowKey","getRowKey","childrenColumnName"],setup:function(e,r){var i=r.attrs,u=as(),d=xR(),m=qe(!1),o=ue(function(){return e.expandedKeys&&e.expandedKeys.has(e.recordKey)});vr(function(){o.value&&(m.value=!0)});var _=ue(function(){return d.expandableType==="row"&&(!e.rowExpandable||e.rowExpandable(e.record))}),C=ue(function(){return d.expandableType==="nest"}),T=ue(function(){return e.childrenColumnName&&e.record&&e.record[e.childrenColumnName]}),S=ue(function(){return _.value||C.value}),P=function(N,U){d.onTriggerExpand(N,U)},A=ue(function(){var F;return((F=e.customRow)===null||F===void 0?void 0:F.call(e,e.record,e.index))||{}}),O=function(N){var U,G;d.expandRowByClick&&S.value&&P(e.record,N);for(var q=arguments.length,V=new Array(q>1?q-1:0),Z=1;Z<q;Z++)V[Z-1]=arguments[Z];(U=A.value)===null||U===void 0||(G=U.onClick)===null||G===void 0||G.call.apply(G,[U,N].concat(V))},R=ue(function(){var F=e.record,N=e.index,U=e.indent,G=d.rowClassName;return typeof G=="string"?G:typeof G=="function"?G(F,N,U):""}),z=ue(function(){return Ey(d.flattenColumns)});return function(){var F=i.class,N=i.style,U=e.record,G=e.index,q=e.rowKey,V=e.indent,Z=V===void 0?0:V,Q=e.rowComponent,te=e.cellComponent,ie=u.prefixCls,ve=u.fixedInfoList,ce=u.transformCellText,de=d.flattenColumns,xe=d.expandedRowClassName,De=d.indentSize,ge=d.expandIcon,he=d.expandedRowRender,me=d.expandIconColumnIndex,Pe=j(Q,H(H({},A.value),{},{"data-row-key":q,class:qt(F,"".concat(ie,"-row"),"".concat(ie,"-row-level-").concat(Z),R.value,A.value.class),style:H(H({},N),$1(A.value.style)),onClick:O}),{default:function(){return[de.map(function(Te,oe){var ze=Te.customRender,Fe=Te.dataIndex,lt=Te.className,vt=z[oe],kt=ve[oe],It;Te.customCell&&(It=Te.customCell(U,G,Te));var se=oe===(me||0)&&C.value?j(Hn,null,[j("span",{style:{paddingLeft:"".concat(De*Z,"px")},class:"".concat(ie,"-row-indent indent-level-").concat(Z)},null),ge({prefixCls:ie,expanded:o.value,expandable:T.value,record:U,onExpand:P})]):null;return j(Iy,H(H({cellType:"body",class:lt,ellipsis:Te.ellipsis,align:Te.align,component:te,prefixCls:ie,key:vt,record:U,index:G,renderIndex:e.renderIndex,dataIndex:Fe,customRender:ze},kt),{},{additionalProps:It,column:Te,transformCellText:ce,appendNode:se}),null)})]}}),He;if(_.value&&(m.value||o.value)){var Ke=he({record:U,index:G,indent:Z+1,expanded:o.value}),Re=xe&&xe(U,G,Z);He=j(yR,{expanded:o.value,class:qt("".concat(ie,"-expanded-row"),"".concat(ie,"-expanded-row-level-").concat(Z+1),Re),prefixCls:ie,component:Q,cellComponent:te,colSpan:de.length,isEmpty:!1},{default:function(){return[Ke]}})}return j(Hn,null,[Pe,He])}}});function bR(t,e,r,i,u,d){var m=[];m.push({record:t,indent:e,index:d});var o=u(t),_=i==null?void 0:i.has(o);if(t&&Array.isArray(t[r])&&_)for(var C=0;C<t[r].length;C+=1){var T=bR(t[r][C],e+1,r,i,u,C);m.push.apply(m,bn(T))}return m}function ZY(t,e,r,i){var u=ue(function(){var d=e.value,m=r.value,o=t.value;if(m!=null&&m.size){for(var _=[],C=0;C<(o==null?void 0:o.length);C+=1){var T=o[C];_.push.apply(_,bn(bR(T,0,d,m,i.value,C)))}return _}return o==null?void 0:o.map(function(S,P){return{record:S,indent:0,index:P}})});return u}var wR=Symbol("ResizeContextProps"),XY=function(e){sr(wR,e)},YY=function(){return Kn(wR,{onColumnResize:function(){}})};const JY=jt({name:"Body",props:["data","getRowKey","measureColumnWidth","expandedKeys","customRow","rowExpandable","childrenColumnName"],slots:["emptyNode"],setup:function(e,r){var i=r.slots,u=YY(),d=as(),m=xR(),o=ZY(Nr(e,"data"),Nr(e,"childrenColumnName"),Nr(e,"expandedKeys"),Nr(e,"getRowKey")),_=qe(-1),C=qe(-1),T;return RY({startRow:_,endRow:C,onHover:function(P,A){clearTimeout(T),T=setTimeout(function(){_.value=P,C.value=A},100)}}),function(){var S=e.data,P=e.getRowKey,A=e.measureColumnWidth,O=e.expandedKeys,R=e.customRow,z=e.rowExpandable,F=e.childrenColumnName,N=u.onColumnResize,U=d.prefixCls,G=d.getComponent,q=m.flattenColumns,V=G(["body","wrapper"],"tbody"),Z=G(["body","row"],"tr"),Q=G(["body","cell"],"td"),te;if(S.length)te=o.value.map(function(ce,de){var xe=ce.record,De=ce.indent,ge=ce.index,he=P(xe,de);return j(WY,{key:he,rowKey:he,record:xe,recordKey:he,index:de,renderIndex:ge,rowComponent:Z,cellComponent:Q,expandedKeys:O,customRow:R,getRowKey:P,rowExpandable:z,childrenColumnName:F,indent:De},null)});else{var ie;te=j(yR,{expanded:!0,class:"".concat(U,"-placeholder"),prefixCls:U,component:Z,cellComponent:Q,colSpan:q.length,isEmpty:!0},{default:function(){return[(ie=i.emptyNode)===null||ie===void 0?void 0:ie.call(i)]}})}var ve=Ey(q);return j(V,{class:"".concat(U,"-tbody")},{default:function(){return[A&&j("tr",{"aria-hidden":"true",class:"".concat(U,"-measure-row"),style:{height:0,fontSize:0}},[ve.map(function(de){return j(HY,{key:de,columnKey:de,onColumnResize:N},null)})]),te]}})}}});var Pl={},QY=["fixed"];function Nb(t){return t.reduce(function(e,r){var i=r.fixed,u=i===!0?"left":i,d=r.children;return d&&d.length>0?[].concat(bn(e),bn(Nb(d).map(function(m){return H({fixed:u},m)}))):[].concat(bn(e),[H(H({},r),{},{fixed:u})])},[])}function eJ(t){return t.map(function(e){var r=e.fixed,i=Cr(e,QY),u=r;return r==="left"?u="right":r==="right"&&(u="left"),H({fixed:u},i)})}function tJ(t,e){var r=t.prefixCls,i=t.columns,u=t.expandable,d=t.expandedKeys,m=t.getRowKey,o=t.onTriggerExpand,_=t.expandIcon,C=t.rowExpandable,T=t.expandIconColumnIndex,S=t.direction,P=t.expandRowByClick,A=t.expandColumnWidth,O=t.expandFixed,R=ue(function(){if(u.value){var N,U=i.value.slice();if(!U.includes(Pl)){var G=T.value||0;G>=0&&U.splice(G,0,Pl)}var q=U.indexOf(Pl);U=U.filter(function(xe,De){return xe!==Pl||De===q});var V=i.value[q],Z;(O.value==="left"||O.value)&&!T.value?Z="left":(O.value==="right"||O.value)&&T.value===i.value.length?Z="right":Z=V?V.fixed:null;var Q=d.value,te=C.value,ie=_.value,ve=r.value,ce=P.value,de=(N={},Ie(N,kd,{class:"".concat(r.value,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),Ie(N,"title",""),Ie(N,"fixed",Z),Ie(N,"class","".concat(r.value,"-row-expand-icon-cell")),Ie(N,"width",A.value),Ie(N,"customRender",function(De){var ge=De.record,he=De.index,me=m.value(ge,he),Pe=Q.has(me),He=te?te(ge):!0,Ke=ie({prefixCls:ve,expanded:Pe,expandable:He,record:ge,onExpand:o});return ce?j("span",{onClick:function(Le){return Le.stopPropagation()}},[Ke]):Ke}),N);return U.map(function(xe){return xe===Pl?de:xe})}return i.value.filter(function(xe){return xe!==Pl})}),z=ue(function(){var N=R.value;return e.value&&(N=e.value(N)),N.length||(N=[{customRender:function(){return null}}]),N}),F=ue(function(){return S.value==="rtl"?eJ(Nb(z.value)):Nb(z.value)});return[z,F]}function CR(t){var e=mr(t),r,i=mr([]);function u(d){i.value.push(d),fr.cancel(r),r=fr(function(){var m=i.value;i.value=[],m.forEach(function(o){e.value=o(e.value)})})}return Er(function(){fr.cancel(r)}),[e,u]}function nJ(t){var e=qe(t||null),r=qe();function i(){clearTimeout(r.value)}function u(m){e.value=m,i(),r.value=setTimeout(function(){e.value=null,r.value=void 0},100)}function d(){return e.value}return Er(function(){i()}),[u,d]}function rJ(t,e,r){var i=ue(function(){for(var u=[],d=[],m=0,o=0,_=t.value,C=e.value,T=r.value,S=0;S<C;S+=1)if(T==="rtl"){d[S]=o,o+=_[S]||0;var P=C-S-1;u[P]=m,m+=_[P]||0}else{u[S]=m,m+=_[S]||0;var A=C-S-1;d[A]=o,o+=_[A]||0}return{left:u,right:d}});return i}var iJ=["columnType"];function SR(t){for(var e=t.colWidths,r=t.columns,i=t.columCount,u=[],d=i||r.length,m=!1,o=d-1;o>=0;o-=1){var _=e[o],C=r&&r[o],T=C&&C[kd];if(_||T||m){var S=T||{};S.columnType;var P=Cr(S,iJ);u.unshift(j("col",H({key:o,style:{width:typeof _=="number"?"".concat(_,"px"):_}},P),null)),m=!0}}return j("colgroup",null,[u])}function $b(t,e){var r,i=e.slots;return j("div",null,[(r=i.default)===null||r===void 0?void 0:r.call(i)])}$b.displayName="Panel";var oJ=0,aJ=jt({name:"Summary",props:["fixed"],setup:function(e,r){var i=r.slots,u=as(),d="table-summary-uni-key-".concat(++oJ),m=ue(function(){return e.fixed===""||e.fixed});return vr(function(){u.summaryCollect(d,m.value)}),Er(function(){u.summaryCollect(d,!1)}),function(){var o;return(o=i.default)===null||o===void 0?void 0:o.call(i)}}});const sJ=aJ,lJ=jt({compatConfig:{MODE:3},name:"FooterRow",setup:function(e,r){var i=r.slots;return function(){var u;return j("tr",null,[(u=i.default)===null||u===void 0?void 0:u.call(i)])}}});var TR=Symbol("SummaryContextProps"),uJ=function(e){sr(TR,e)},cJ=function(){return Kn(TR,{})};const dJ=jt({name:"SummaryCell",props:["index","colSpan","rowSpan","align"],setup:function(e,r){var i=r.attrs,u=r.slots,d=as(),m=cJ();return function(){var o=e.index,_=e.colSpan,C=_===void 0?1:_,T=e.rowSpan,S=e.align,P=d.prefixCls,A=d.direction,O=m.scrollColumnIndex,R=m.stickyOffsets,z=m.flattenColumns,F=o+C-1,N=F+1===O?C+1:C,U=sC(o,o+N-1,z,R,A);return j(Iy,H({class:i.class,index:o,component:"td",prefixCls:P,record:null,dataIndex:null,align:S,colSpan:N,rowSpan:T,customRender:function(){var q;return(q=u.default)===null||q===void 0?void 0:q.call(u)}},U),null)}}}),qv=jt({name:"Footer",inheritAttrs:!1,props:["stickyOffsets","flattenColumns"],setup:function(e,r){var i=r.slots,u=as();return uJ(Or({stickyOffsets:Nr(e,"stickyOffsets"),flattenColumns:Nr(e,"flattenColumns"),scrollColumnIndex:ue(function(){var d=e.flattenColumns.length-1,m=e.flattenColumns[d];return m!=null&&m.scrollbar?d:null})})),function(){var d,m=u.prefixCls;return j("tfoot",{class:"".concat(m,"-summary")},[(d=i.default)===null||d===void 0?void 0:d.call(i)])}}});var fJ=sJ;function hJ(t){var e,r=t.prefixCls,i=t.record,u=t.onExpand,d=t.expanded,m=t.expandable,o="".concat(r,"-row-expand-icon");if(!m)return j("span",{class:[o,"".concat(r,"-row-spaced")]},null);var _=function(T){u(i,T),T.stopPropagation()};return j("span",{class:(e={},Ie(e,o,!0),Ie(e,"".concat(r,"-row-expanded"),d),Ie(e,"".concat(r,"-row-collapsed"),!d),e),onClick:_},null)}function pJ(t,e,r){var i=[];function u(d){(d||[]).forEach(function(m,o){i.push(e(m,o)),u(m[r])})}return u(t),i}const mJ=jt({name:"StickyScrollBar",inheritAttrs:!1,props:["offsetScroll","container","scrollBodyRef","scrollBodySizeInfo"],emits:["scroll"],setup:function(e,r){var i=r.emit,u=r.expose,d=as(),m=qe(0),o=qe(0),_=qe(0);vr(function(){m.value=e.scrollBodySizeInfo.scrollWidth||0,o.value=e.scrollBodySizeInfo.clientWidth||0,_.value=m.value&&o.value*(o.value/m.value)},{flush:"post"});var C=qe(),T=CR({scrollLeft:0,isHiddenScrollBar:!0}),S=zn(T,2),P=S[0],A=S[1],O=qe({delta:0,x:0}),R=qe(!1),z=function(){R.value=!1},F=function(ve){O.value={delta:ve.pageX-P.value.scrollLeft,x:0},R.value=!0,ve.preventDefault()},N=function(ve){var ce,de=ve||((ce=window)===null||ce===void 0?void 0:ce.event),xe=de.buttons;if(!R.value||xe===0){R.value&&(R.value=!1);return}var De=O.value.x+ve.pageX-O.value.x-O.value.delta;De<=0&&(De=0),De+_.value>=o.value&&(De=o.value-_.value),i("scroll",{scrollLeft:De/o.value*(m.value+2)}),O.value.x=ve.pageX},U=function(){if(!!e.scrollBodyRef.value){var ve=GP(e.scrollBodyRef.value).top,ce=ve+e.scrollBodyRef.value.offsetHeight,de=e.container===window?document.documentElement.scrollTop+window.innerHeight:GP(e.container).top+e.container.clientHeight;ce-Ip()<=de||ve>=de-e.offsetScroll?A(function(xe){return H(H({},xe),{},{isHiddenScrollBar:!0})}):A(function(xe){return H(H({},xe),{},{isHiddenScrollBar:!1})})}},G=function(ve){A(function(ce){return H(H({},ce),{},{scrollLeft:ve/m.value*o.value||0})})};u({setScrollLeft:G});var q=null,V=null,Z=null,Q=null;wr(function(){q=zo(document.body,"mouseup",z,!1),V=zo(document.body,"mousemove",N,!1),Z=zo(window,"resize",U,!1)}),ok(function(){gr(function(){U()})}),wr(function(){setTimeout(function(){an([_,R],function(){U()},{immediate:!0,flush:"post"})})}),an(function(){return e.container},function(){var ie;(ie=Q)===null||ie===void 0||ie.remove(),Q=zo(e.container,"scroll",U,!1)},{immediate:!0,flush:"post"}),Er(function(){var ie,ve,ce,de;(ie=q)===null||ie===void 0||ie.remove(),(ve=V)===null||ve===void 0||ve.remove(),(ce=Q)===null||ce===void 0||ce.remove(),(de=Z)===null||de===void 0||de.remove()}),an(function(){return H({},P.value)},function(ie,ve){ie.isHiddenScrollBar!==(ve==null?void 0:ve.isHiddenScrollBar)&&!ie.isHiddenScrollBar&&A(function(ce){var de=e.scrollBodyRef.value;return de?H(H({},ce),{},{scrollLeft:de.scrollLeft/de.scrollWidth*de.clientWidth}):ce})},{immediate:!0});var te=Ip();return function(){if(m.value<=o.value||!_.value||P.value.isHiddenScrollBar)return null;var ie=d.prefixCls;return j("div",{style:{height:"".concat(te,"px"),width:"".concat(o.value,"px"),bottom:"".concat(e.offsetScroll,"px")},class:"".concat(ie,"-sticky-scroll")},[j("div",{onMousedown:F,ref:C,class:qt("".concat(ie,"-sticky-scroll-bar"),Ie({},"".concat(ie,"-sticky-scroll-bar-active"),R)),style:{width:"".concat(_.value,"px"),transform:"translate3d(".concat(P.value.scrollLeft,"px, 0, 0)")}},null)])}}});var cA=oc()?window:null;function vJ(t,e){return ue(function(){var r=On(t.value)==="object"?t.value:{},i=r.offsetHeader,u=i===void 0?0:i,d=r.offsetSummary,m=d===void 0?0:d,o=r.offsetScroll,_=o===void 0?0:o,C=r.getContainer,T=C===void 0?function(){return cA}:C,S=T()||cA,P=!!t.value;return{isSticky:P,stickyClassName:P?"".concat(e.value,"-sticky-holder"):"",offsetHeader:u,offsetSummary:m,offsetScroll:_,container:S}})}function gJ(t,e){return ue(function(){for(var r=[],i=t.value,u=e.value,d=0;d<u;d+=1){var m=i[d];if(m!==void 0)r[d]=m;else return null}return r})}const dA=jt({name:"FixedHolder",inheritAttrs:!1,props:["columns","flattenColumns","stickyOffsets","customHeaderRow","noData","maxContentScroll","colWidths","columCount","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName"],emits:["scroll"],setup:function(e,r){var i=r.attrs,u=r.slots,d=r.emit,m=as(),o=ue(function(){return m.isSticky&&!e.fixHeader?0:m.scrollbarSize}),_=qe(),C=function(F){var N=F.currentTarget,U=F.deltaX;U&&(d("scroll",{currentTarget:N,scrollLeft:N.scrollLeft+U}),F.preventDefault())},T=qe();wr(function(){gr(function(){T.value=zo(_.value,"wheel",C)})}),Er(function(){var z;(z=T.value)===null||z===void 0||z.remove()});var S=ue(function(){return e.flattenColumns.every(function(z){return z.width&&z.width!==0&&z.width!=="0px"})}),P=qe([]),A=qe([]);vr(function(){var z=e.flattenColumns[e.flattenColumns.length-1],F={fixed:z?z.fixed:null,scrollbar:!0,customHeaderCell:function(){return{class:"".concat(m.prefixCls,"-cell-scrollbar")}}};P.value=o.value?[].concat(bn(e.columns),[F]):e.columns,A.value=o.value?[].concat(bn(e.flattenColumns),[F]):e.flattenColumns});var O=ue(function(){var z=e.stickyOffsets,F=e.direction,N=z.right,U=z.left;return H(H({},z),{},{left:F==="rtl"?[].concat(bn(U.map(function(G){return G+o.value})),[0]):U,right:F==="rtl"?N:[].concat(bn(N.map(function(G){return G+o.value})),[0]),isSticky:m.isSticky})}),R=gJ(Nr(e,"colWidths"),Nr(e,"columCount"));return function(){var z,F=e.noData,N=e.columCount,U=e.stickyTopOffset,G=e.stickyBottomOffset,q=e.stickyClassName,V=e.maxContentScroll,Z=m.isSticky;return j("div",{style:H({overflow:"hidden"},Z?{top:"".concat(U,"px"),bottom:"".concat(G,"px")}:{}),ref:_,class:qt(i.class,Ie({},q,!!q))},[j("table",{style:{tableLayout:"fixed",visibility:F||R.value?null:"hidden"}},[(!F||!V||S.value)&&j(SR,{colWidths:R.value?[].concat(bn(R.value),[o.value]):[],columCount:N+1,columns:A.value},null),(z=u.default)===null||z===void 0?void 0:z.call(u,H(H({},e),{},{stickyOffsets:O.value,columns:P.value,flattenColumns:A.value}))])])}}});function yJ(t){for(var e=-1,r=t==null?0:t.length,i={};++e<r;){var u=t[e];i[u[0]]=u[1]}return i}function fA(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return Or(yJ(r.map(function(u){return[u,Nr(t,u)]})))}var _J=[],xJ={},jb="rc-table-internal-hook";const bJ=jt({name:"Table",inheritAttrs:!1,props:["prefixCls","data","columns","rowKey","tableLayout","scroll","rowClassName","title","footer","id","showHeader","components","customRow","customHeaderRow","direction","expandFixed","expandColumnWidth","expandedRowKeys","defaultExpandedRowKeys","expandedRowRender","expandRowByClick","expandIcon","onExpand","onExpandedRowsChange","onUpdate:expandedRowKeys","defaultExpandAllRows","indentSize","expandIconColumnIndex","expandedRowClassName","childrenColumnName","rowExpandable","sticky","transformColumns","internalHooks","internalRefs","canExpandable","onUpdateInternalRefs","transformCellText"],slots:["title","footer","summary","emptyText"],emits:["expand","expandedRowsChange","updateInternalRefs","update:expandedRowKeys"],setup:function(e,r){var i=r.attrs,u=r.slots,d=r.emit,m=ue(function(){return e.data||_J}),o=ue(function(){return!!m.value.length}),_=ue(function(){return MY(e.components,{})}),C=function(Et,sn){return fR(_.value,Et)||sn},T=ue(function(){var Tt=e.rowKey;return typeof Tt=="function"?Tt:function(Et){var sn=Et&&Et[Tt];return sn}}),S=ue(function(){return e.expandIcon||hJ}),P=ue(function(){return e.childrenColumnName||"children"}),A=ue(function(){return e.expandedRowRender?"row":e.canExpandable||m.value.some(function(Tt){return Tt&&On(Tt)==="object"&&Tt[P.value]})?"nest":!1}),O=mr([]),R=vr(function(){e.defaultExpandedRowKeys&&(O.value=e.defaultExpandedRowKeys),e.defaultExpandAllRows&&(O.value=pJ(m.value,T.value,P.value))});R();var z=ue(function(){return new Set(e.expandedRowKeys||O.value||[])}),F=function(Et){var sn=T.value(Et,m.value.indexOf(Et)),xn,An=z.value.has(sn);An?(z.value.delete(sn),xn=bn(z.value)):xn=[].concat(bn(z.value),[sn]),O.value=xn,d("expand",!An,Et),d("update:expandedRowKeys",xn),d("expandedRowsChange",xn)},N=qe(0),U=tJ(H(H({},Wu(e)),{},{expandable:ue(function(){return!!e.expandedRowRender}),expandedKeys:z,getRowKey:T,onTriggerExpand:F,expandIcon:S}),ue(function(){return e.internalHooks===jb?e.transformColumns:null})),G=zn(U,2),q=G[0],V=G[1],Z=ue(function(){return{columns:q.value,flattenColumns:V.value}}),Q=qe(),te=qe(),ie=qe(),ve=qe({scrollWidth:0,clientWidth:0}),ce=qe(),de=Ls(!1),xe=zn(de,2),De=xe[0],ge=xe[1],he=Ls(!1),me=zn(he,2),Pe=me[0],He=me[1],Ke=CR(new Map),Re=zn(Ke,2),Le=Re[0],Te=Re[1],oe=ue(function(){return Ey(V.value)}),ze=ue(function(){return oe.value.map(function(Tt){return Le.value.get(Tt)})}),Fe=ue(function(){return V.value.length}),lt=rJ(ze,Fe,Nr(e,"direction")),vt=ue(function(){return e.scroll&&Fb(e.scroll.y)}),kt=ue(function(){return e.scroll&&Fb(e.scroll.x)||Boolean(e.expandFixed)}),It=ue(function(){return kt.value&&V.value.some(function(Tt){var Et=Tt.fixed;return Et})}),se=qe(),ae=vJ(Nr(e,"sticky"),Nr(e,"prefixCls")),Be=Or({}),st=ue(function(){var Tt=Object.values(Be)[0];return(vt.value||ae.value.isSticky)&&Tt}),ut=function(Et,sn){sn?Be[Et]=sn:delete Be[Et]},bt=qe({}),At=qe({}),_t=qe({});vr(function(){vt.value&&(At.value={overflowY:"scroll",maxHeight:XT(e.scroll.y)}),kt.value&&(bt.value={overflowX:"auto"},vt.value||(At.value={overflowY:"hidden"}),_t.value={width:e.scroll.x===!0?"auto":XT(e.scroll.x),minWidth:"100%"})});var nt=function(Et,sn){d3(Q.value)&&Te(function(xn){if(xn.get(Et)!==sn){var An=new Map(xn);return An.set(Et,sn),An}return xn})},tt=nJ(null),pt=zn(tt,2),dt=pt[0],Ot=pt[1];function Kt(Tt,Et){if(!!Et){if(typeof Et=="function"){Et(Tt);return}var sn=Et.$el||Et;sn.scrollLeft!==Tt&&(sn.scrollLeft=Tt)}}var cn=function(Et){var sn=Et.currentTarget,xn=Et.scrollLeft,An=e.direction==="rtl",Mn=typeof xn=="number"?xn:sn.scrollLeft,ir=sn||xJ;if(!Ot()||Ot()===ir){var Dn;dt(ir),Kt(Mn,te.value),Kt(Mn,ie.value),Kt(Mn,ce.value),Kt(Mn,(Dn=se.value)===null||Dn===void 0?void 0:Dn.setScrollLeft)}if(sn){var lr=sn.scrollWidth,Ce=sn.clientWidth;An?(ge(-Mn<lr-Ce),He(-Mn>0)):(ge(Mn>0),He(Mn<lr-Ce))}},Cn=function(){kt.value&&ie.value?cn({currentTarget:ie.value}):(ge(!1),He(!1))},Rt,ht=function(Et){Et!==N.value&&(Cn(),N.value=Q.value?Q.value.offsetWidth:Et)},Ht=function(Et){var sn=Et.width;if(clearTimeout(Rt),N.value===0){ht(sn);return}Rt=setTimeout(function(){ht(sn)},100)};an([kt,function(){return e.data},function(){return e.columns}],function(){kt.value&&Cn()},{flush:"post"});var wn=Ls(0),zt=zn(wn,2),mt=zt[0],St=zt[1];LY(),wr(function(){gr(function(){var Tt,Et;Cn(),St(PZ(ie.value).width),ve.value={scrollWidth:((Tt=ie.value)===null||Tt===void 0?void 0:Tt.scrollWidth)||0,clientWidth:((Et=ie.value)===null||Et===void 0?void 0:Et.clientWidth)||0}})}),Ca(function(){gr(function(){var Tt,Et,sn=((Tt=ie.value)===null||Tt===void 0?void 0:Tt.scrollWidth)||0,xn=((Et=ie.value)===null||Et===void 0?void 0:Et.clientWidth)||0;(ve.value.scrollWidth!==sn||ve.value.clientWidth!==xn)&&(ve.value={scrollWidth:sn,clientWidth:xn})})}),vr(function(){e.internalHooks===jb&&e.internalRefs&&e.onUpdateInternalRefs({body:ie.value?ie.value.$el||ie.value:null})},{flush:"post"});var yt=ue(function(){return e.tableLayout?e.tableLayout:It.value?e.scroll.x==="max-content"?"auto":"fixed":vt.value||ae.value.isSticky||V.value.some(function(Tt){var Et=Tt.ellipsis;return Et})?"fixed":"auto"}),Wt=function(){var Et;return o.value?null:((Et=u.emptyText)===null||Et===void 0?void 0:Et.call(u))||"No Data"};PY(Or(H(H({},Wu(fA(e,"prefixCls","direction","transformCellText"))),{},{getComponent:C,scrollbarSize:mt,fixedInfoList:ue(function(){return V.value.map(function(Tt,Et){return sC(Et,Et,V.value,lt.value,e.direction)})}),isSticky:ue(function(){return ae.value.isSticky}),summaryCollect:ut}))),qY(Or(H(H({},Wu(fA(e,"rowClassName","expandedRowClassName","expandRowByClick","expandedRowRender","expandIconColumnIndex","indentSize"))),{},{columns:q,flattenColumns:V,tableLayout:yt,expandIcon:S,expandableType:A,onTriggerExpand:F}))),XY({onColumnResize:nt}),KY({componentWidth:N,fixHeader:vt,fixColumn:It,horizonScroll:kt});var tn=function(){return j(JY,{data:m.value,measureColumnWidth:vt.value||kt.value||ae.value.isSticky,expandedKeys:z.value,rowExpandable:e.rowExpandable,getRowKey:T.value,customRow:e.customRow,childrenColumnName:P.value},{emptyNode:Wt})},on=function(){return j(SR,{colWidths:V.value.map(function(Et){var sn=Et.width;return sn}),columns:V.value},null)};return function(){var Tt,Et=e.prefixCls,sn=e.scroll,xn=e.tableLayout,An=e.direction,Mn=e.title,ir=Mn===void 0?u.title:Mn,Dn=e.footer,lr=Dn===void 0?u.footer:Dn,Ce=e.id,Y=e.showHeader,ne=e.customHeaderRow,be=ae.value,Oe=be.isSticky,Ve=be.offsetHeader,it=be.offsetSummary,rt=be.offsetScroll,Xe=be.stickyClassName,ot=be.container,Pt=C(["table"],"table"),Qt=C(["body"]),Bt=(Tt=u.summary)===null||Tt===void 0?void 0:Tt.call(u,{pageData:m.value}),Sn=function(){return null},mn={colWidths:ze.value,columCount:V.value.length,stickyOffsets:lt.value,customHeaderRow:ne,fixHeader:vt.value,scroll:sn};if(vt.value||Oe){var vn=function(){return null};typeof Qt=="function"?(vn=function(){return Qt(m.value,{scrollbarSize:mt.value,ref:ie,onScroll:cn})},mn.colWidths=V.value.map(function(rr,Ln){var gn=rr.width,wt=Ln===q.value.length-1?gn-mt.value:gn;return typeof wt=="number"&&!Number.isNaN(wt)?wt:0})):vn=function(){return j("div",{style:H(H({},bt.value),At.value),onScroll:cn,ref:ie,class:qt("".concat(Et,"-body"))},[j(Pt,{style:H(H({},_t.value),{},{tableLayout:yt.value})},{default:function(){return[on(),tn(),!st.value&&Bt&&j(qv,{stickyOffsets:lt.value,flattenColumns:V.value},{default:function(){return[Bt]}})]}})])};var In=H(H(H({noData:!m.value.length,maxContentScroll:kt.value&&sn.x==="max-content"},mn),Z.value),{},{direction:An,stickyClassName:Xe,onScroll:cn});Sn=function(){return j(Hn,null,[Y!==!1&&j(dA,H(H({},In),{},{stickyTopOffset:Ve,class:"".concat(Et,"-header"),ref:te}),{default:function(gn){return j(Hn,null,[j(uA,gn,null),st.value==="top"&&j(qv,gn,{default:function(){return[Bt]}})])}}),vn(),st.value&&st.value!=="top"&&j(dA,H(H({},In),{},{stickyBottomOffset:it,class:"".concat(Et,"-summary"),ref:ce}),{default:function(gn){return j(qv,gn,{default:function(){return[Bt]}})}}),Oe&&ie.value&&j(mJ,{ref:se,offsetScroll:rt,scrollBodyRef:ie,onScroll:cn,container:ot,scrollBodySizeInfo:ve.value},null)])}}else Sn=function(){return j("div",{style:H(H({},bt.value),At.value),class:qt("".concat(Et,"-content")),onScroll:cn,ref:ie},[j(Pt,{style:H(H({},_t.value),{},{tableLayout:yt.value})},{default:function(){return[on(),Y!==!1&&j(uA,H(H({},mn),Z.value),null),tn(),Bt&&j(qv,{stickyOffsets:lt.value,flattenColumns:V.value},{default:function(){return[Bt]}})]}})])};var Nn=lc(i,{aria:!0,data:!0}),nr=function(){var Ln;return j("div",H(H({},Nn),{},{class:qt(Et,(Ln={},Ie(Ln,"".concat(Et,"-rtl"),An==="rtl"),Ie(Ln,"".concat(Et,"-ping-left"),De.value),Ie(Ln,"".concat(Et,"-ping-right"),Pe.value),Ie(Ln,"".concat(Et,"-layout-fixed"),xn==="fixed"),Ie(Ln,"".concat(Et,"-fixed-header"),vt.value),Ie(Ln,"".concat(Et,"-fixed-column"),It.value),Ie(Ln,"".concat(Et,"-scroll-horizontal"),kt.value),Ie(Ln,"".concat(Et,"-has-fix-left"),V.value[0]&&V.value[0].fixed),Ie(Ln,"".concat(Et,"-has-fix-right"),V.value[Fe.value-1]&&V.value[Fe.value-1].fixed==="right"),Ie(Ln,i.class,i.class),Ln)),style:i.style,id:Ce,ref:Q}),[ir&&j($b,{class:"".concat(Et,"-title")},{default:function(){return[ir(m.value)]}}),j("div",{class:"".concat(Et,"-container")},[Sn()]),lr&&j($b,{class:"".concat(Et,"-footer")},{default:function(){return[lr(m.value)]}})])};return kt.value?j(Yd,{onResize:Ht},{default:nr}):nr()}}});var Vb=10;function wJ(t,e){var r={current:e.current,pageSize:e.pageSize},i=t&&On(t)==="object"?t:{};return Object.keys(i).forEach(function(u){var d=e[u];typeof d!="function"&&(r[u]=d)}),r}function CJ(){for(var t={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(function(u){u&&Object.keys(u).forEach(function(d){var m=u[d];m!==void 0&&(t[d]=m)})}),t}function SJ(t,e,r){var i=ue(function(){return e.value&&On(e.value)==="object"?e.value:{}}),u=ue(function(){return i.value.total||0}),d=Ls(function(){return{current:"defaultCurrent"in i.value?i.value.defaultCurrent:1,pageSize:"defaultPageSize"in i.value?i.value.defaultPageSize:Vb}}),m=zn(d,2),o=m[0],_=m[1],C=ue(function(){var P=CJ(o.value,i.value,{total:u.value>0?u.value:t.value}),A=Math.ceil((u.value||t.value)/P.pageSize);return P.current>A&&(P.current=A||1),P}),T=function(A,O){i.value!==!1&&_({current:A!=null?A:1,pageSize:O||C.value.pageSize})},S=function(A,O){if(i.value){var R,z;(R=(z=i.value).onChange)===null||R===void 0||R.call(z,A,O)}T(A,O),r(A,O||C.value.pageSize)};return[ue(function(){return i.value===!1?{}:H(H({},C.value),{},{onChange:S})}),T]}function TJ(t,e,r){var i=mr({});an([t,e,r],function(){var d=new Map,m=r.value,o=e.value;function _(C){C.forEach(function(T,S){var P=m(T,S);d.set(P,T),T&&On(T)==="object"&&o in T&&_(T[o]||[])})}_(t.value),i.value={kvMap:d}},{deep:!0,immediate:!0});function u(d){return i.value.kvMap.get(d)}return[u]}var Ds={},Ub="SELECT_ALL",Kb="SELECT_INVERT",Gb="SELECT_NONE",EJ=[];function ER(t,e){var r=[];return(t||[]).forEach(function(i){r.push(i),i&&On(i)==="object"&&e in i&&(r=[].concat(bn(r),bn(ER(i[e],e))))}),r}function IJ(t,e){var r=ue(function(){var xe=t.value||{},De=xe.checkStrictly,ge=De===void 0?!0:De;return H(H({},xe),{},{checkStrictly:ge})}),i=ab(r.value.selectedRowKeys||r.value.defaultSelectedRowKeys||EJ,{value:ue(function(){return r.value.selectedRowKeys})}),u=zn(i,2),d=u[0],m=u[1],o=mr(new Map),_=function(De){if(r.value.preserveSelectedRowKeys){var ge=new Map;De.forEach(function(he){var me=e.getRecordByKey(he);!me&&o.value.has(he)&&(me=o.value.get(he)),ge.set(he,me)}),o.value=ge}};vr(function(){_(d.value)});var C=ue(function(){return r.value.checkStrictly?null:jw(e.data.value,{externalGetKey:e.getRowKey.value,childrenPropName:e.childrenColumnName.value}).keyEntities}),T=ue(function(){return ER(e.pageData.value,e.childrenColumnName.value)}),S=ue(function(){var xe=new Map,De=e.getRowKey.value,ge=r.value.getCheckboxProps;return T.value.forEach(function(he,me){var Pe=De(he,me),He=(ge?ge(he):null)||{};xe.set(Pe,He)}),xe}),P=DD(C),A=P.maxLevel,O=P.levelEntities,R=function(De){var ge;return!!((ge=S.value.get(e.getRowKey.value(De)))!==null&&ge!==void 0&&ge.disabled)},z=ue(function(){if(r.value.checkStrictly)return[d.value||[],[]];var xe=Ad(d.value,!0,C.value,A.value,O.value,R),De=xe.checkedKeys,ge=xe.halfCheckedKeys;return[De||[],ge]}),F=ue(function(){return z.value[0]}),N=ue(function(){return z.value[1]}),U=ue(function(){var xe=r.value.type==="radio"?F.value.slice(0,1):F.value;return new Set(xe)}),G=ue(function(){return r.value.type==="radio"?new Set:new Set(N.value)}),q=Ls(null),V=zn(q,2),Z=V[0],Q=V[1],te=function(De){var ge,he;_(De);var me=r.value,Pe=me.preserveSelectedRowKeys,He=me.onChange,Ke=e.getRecordByKey;Pe?(ge=De,he=De.map(function(Re){return o.value.get(Re)})):(ge=[],he=[],De.forEach(function(Re){var Le=Ke(Re);Le!==void 0&&(ge.push(Re),he.push(Le))})),m(ge),He==null||He(ge,he)},ie=function(De,ge,he,me){var Pe=r.value.onSelect,He=e||{},Ke=He.getRecordByKey;if(Pe){var Re=he.map(function(Le){return Ke(Le)});Pe(Ke(De),ge,Re,me)}te(he)},ve=ue(function(){var xe=r.value,De=xe.onSelectInvert,ge=xe.onSelectNone,he=xe.selections,me=xe.hideSelectAll,Pe=e.data,He=e.pageData,Ke=e.getRowKey,Re=e.locale;if(!he||me)return null;var Le=he===!0?[Ub,Kb,Gb]:he;return Le.map(function(Te){return Te===Ub?{key:"all",text:Re.value.selectionAll,onSelect:function(){te(Pe.value.map(function(ze,Fe){return Ke.value(ze,Fe)}).filter(function(ze){var Fe=S.value.get(ze);return!(Fe!=null&&Fe.disabled)||U.value.has(ze)}))}}:Te===Kb?{key:"invert",text:Re.value.selectInvert,onSelect:function(){var ze=new Set(U.value);He.value.forEach(function(lt,vt){var kt=Ke.value(lt,vt),It=S.value.get(kt);It!=null&&It.disabled||(ze.has(kt)?ze.delete(kt):ze.add(kt))});var Fe=Array.from(ze);De&&(Ni(!1,"Table","`onSelectInvert` will be removed in future. Please use `onChange` instead."),De(Fe)),te(Fe)}}:Te===Gb?{key:"none",text:Re.value.selectNone,onSelect:function(){ge==null||ge(),te(Array.from(U.value).filter(function(ze){var Fe=S.value.get(ze);return Fe==null?void 0:Fe.disabled}))}}:Te})}),ce=ue(function(){return T.value.length}),de=function(De){var ge,he=r.value,me=he.onSelectAll,Pe=he.onSelectMultiple,He=he.columnWidth,Ke=he.type,Re=he.fixed,Le=he.renderCell,Te=he.hideSelectAll,oe=he.checkStrictly,ze=e.prefixCls,Fe=e.getRecordByKey,lt=e.getRowKey,vt=e.expandType,kt=e.getPopupContainer;if(!t.value)return De.filter(function(yt){return yt!==Ds});var It=De.slice(),se=new Set(U.value),ae=T.value.map(lt.value).filter(function(yt){return!S.value.get(yt).disabled}),Be=ae.every(function(yt){return se.has(yt)}),st=ae.some(function(yt){return se.has(yt)}),ut=function(){var Wt=[];Be?ae.forEach(function(on){se.delete(on),Wt.push(on)}):ae.forEach(function(on){se.has(on)||(se.add(on),Wt.push(on))});var tn=Array.from(se);me==null||me(!Be,tn.map(function(on){return Fe(on)}),Wt.map(function(on){return Fe(on)})),te(tn)},bt;if(Ke!=="radio"){var At;if(ve.value){var _t=j(jo,{getPopupContainer:kt.value},{default:function(){return[ve.value.map(function(Wt,tn){var on=Wt.key,Tt=Wt.text,Et=Wt.onSelect;return j(jo.Item,{key:on||tn,onClick:function(){Et==null||Et(ae)}},{default:function(){return[Tt]}})})]}});At=j("div",{class:"".concat(ze.value,"-selection-extra")},[j(Xu,{overlay:_t,getPopupContainer:kt.value},{default:function(){return[j("span",null,[j(Sw,null,null)])]}})])}var nt=T.value.map(function(yt,Wt){var tn=lt.value(yt,Wt),on=S.value.get(tn)||{};return H({checked:se.has(tn)},on)}).filter(function(yt){var Wt=yt.disabled;return Wt}),tt=!!nt.length&&nt.length===ce.value,pt=tt&&nt.every(function(yt){var Wt=yt.checked;return Wt}),dt=tt&&nt.some(function(yt){var Wt=yt.checked;return Wt});bt=!Te&&j("div",{class:"".concat(ze.value,"-selection")},[j(es,{checked:tt?pt:!!ce.value&&Be,indeterminate:tt?!pt&&dt:!Be&&st,onChange:ut,disabled:ce.value===0||tt,skipGroup:!0},null),At])}var Ot;Ke==="radio"?Ot=function(Wt){var tn=Wt.record,on=Wt.index,Tt=lt.value(tn,on),Et=se.has(Tt);return{node:j(bo,H(H({},S.value.get(Tt)),{},{checked:Et,onClick:function(xn){return xn.stopPropagation()},onChange:function(xn){se.has(Tt)||ie(Tt,!0,[Tt],xn.nativeEvent)}}),null),checked:Et}}:Ot=function(Wt){var tn=Wt.record,on=Wt.index,Tt=lt.value(tn,on),Et=se.has(Tt),sn=G.value.has(Tt),xn=S.value.get(Tt),An;if(vt.value==="nest")An=sn,Ni(typeof(xn==null?void 0:xn.indeterminate)!="boolean","Table","set `indeterminate` using `rowSelection.getCheckboxProps` is not allowed with tree structured dataSource.");else{var Mn;An=(Mn=xn==null?void 0:xn.indeterminate)!==null&&Mn!==void 0?Mn:sn}return{node:j(es,H(H({},xn),{},{indeterminate:An,checked:Et,skipGroup:!0,onClick:function(Dn){return Dn.stopPropagation()},onChange:function(Dn){var lr=Dn.nativeEvent,Ce=lr.shiftKey,Y=-1,ne=-1;if(Ce&&oe){var be=new Set([Z.value,Tt]);ae.some(function(mn,vn){if(be.has(mn))if(Y===-1)Y=vn;else return ne=vn,!0;return!1})}if(ne!==-1&&Y!==ne&&oe){var Oe=ae.slice(Y,ne+1),Ve=[];Et?Oe.forEach(function(mn){se.has(mn)&&(Ve.push(mn),se.delete(mn))}):Oe.forEach(function(mn){se.has(mn)||(Ve.push(mn),se.add(mn))});var it=Array.from(se);Pe==null||Pe(!Et,it.map(function(mn){return Fe(mn)}),Ve.map(function(mn){return Fe(mn)})),te(it)}else{var rt=F.value;if(oe){var Xe=Et?ks(rt,Tt):El(rt,Tt);ie(Tt,!Et,Xe,lr)}else{var ot=Ad([].concat(bn(rt),[Tt]),!0,C.value,A.value,O.value,R),Pt=ot.checkedKeys,Qt=ot.halfCheckedKeys,Bt=Pt;if(Et){var Sn=new Set(Pt);Sn.delete(Tt),Bt=Ad(Array.from(Sn),{checked:!1,halfCheckedKeys:Qt},C.value,A.value,O.value,R).checkedKeys}ie(Tt,!Et,Bt,lr)}}Q(Tt)}}),null),checked:Et}};var Kt=function(Wt){var tn=Wt.record,on=Wt.index,Tt=Ot({record:tn,index:on}),Et=Tt.node,sn=Tt.checked;return Le?Le(sn,tn,on,Et):Et};if(!It.includes(Ds))if(It.findIndex(function(yt){var Wt;return((Wt=yt[kd])===null||Wt===void 0?void 0:Wt.columnType)==="EXPAND_COLUMN"})===0){var cn=It,Cn=iw(cn),Rt=Cn[0],ht=Cn.slice(1);It=[Rt,Ds].concat(bn(ht))}else It=[Ds].concat(bn(It));var Ht=It.indexOf(Ds);It=It.filter(function(yt,Wt){return yt!==Ds||Wt===Ht});var wn=It[Ht-1],zt=It[Ht+1],mt=Re;mt===void 0&&((zt==null?void 0:zt.fixed)!==void 0?mt=zt.fixed:(wn==null?void 0:wn.fixed)!==void 0&&(mt=wn.fixed)),mt&&wn&&((ge=wn[kd])===null||ge===void 0?void 0:ge.columnType)==="EXPAND_COLUMN"&&wn.fixed===void 0&&(wn.fixed=mt);var St=Ie({fixed:mt,width:He,className:"".concat(ze.value,"-selection-column"),title:r.value.columnTitle||bt,customRender:Kt},kd,{class:"".concat(ze.value,"-selection-col")});return It.map(function(yt){return yt===Ds?St:yt})};return[de,U]}var PJ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"outlined"};const AJ=PJ;function hA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){MJ(t,u,r[u])})}return t}function MJ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var lC=function(e,r){var i=hA({},e,r.attrs);return j($r,hA({},i,{icon:AJ}),null)};lC.displayName="CaretDownOutlined";lC.inheritAttrs=!1;const kJ=lC;var OJ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"}}]},name:"caret-up",theme:"outlined"};const DJ=OJ;function pA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){RJ(t,u,r[u])})}return t}function RJ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var uC=function(e,r){var i=pA({},e,r.attrs);return j($r,pA({},i,{icon:DJ}),null)};uC.displayName="CaretUpOutlined";uC.inheritAttrs=!1;const zJ=uC;var LJ=["default"];function Kd(t,e){return"key"in t&&t.key!==void 0&&t.key!==null?t.key:t.dataIndex?Array.isArray(t.dataIndex)?t.dataIndex.join("."):t.dataIndex:e}function Py(t,e){return e?"".concat(e,"-").concat(t):"".concat(t)}function cC(t,e){return typeof t=="function"?t(e):t}function IR(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=fo(t),r=[];return e.forEach(function(i){var u,d,m;if(!!i){for(var o=i.key,_=((u=i.props)===null||u===void 0?void 0:u.style)||{},C=((d=i.props)===null||d===void 0?void 0:d.class)||"",T=i.props||{},S=0,P=Object.entries(T);S<P.length;S++){var A=zn(P[S],2),O=A[0],R=A[1];T[ra(O)]=R}var z=i.children||{},F=z.default,N=Cr(z,LJ),U=H(H(H({},N),T),{},{style:_,class:C});if(o&&(U.key=o),(m=i.type)!==null&&m!==void 0&&m.__ANT_TABLE_COLUMN_GROUP)U.children=IR(typeof F=="function"?F():F);else{var G,q=(G=i.children)===null||G===void 0?void 0:G.default;U.customRender=U.customRender||q}r.push(U)}}),r}var cg="ascend",sx="descend";function Hb(t){return On(t.sorter)==="object"&&typeof t.sorter.multiple=="number"?t.sorter.multiple:!1}function mA(t){return typeof t=="function"?t:t&&On(t)==="object"&&t.compare?t.compare:!1}function FJ(t,e){return e?t[t.indexOf(e)+1]:t[0]}function qb(t,e,r){var i=[];function u(d,m){i.push({column:d,key:Kd(d,m),multiplePriority:Hb(d),sortOrder:d.sortOrder})}return(t||[]).forEach(function(d,m){var o=Py(m,r);d.children?("sortOrder"in d&&u(d,o),i=[].concat(bn(i),bn(qb(d.children,e,o)))):d.sorter&&("sortOrder"in d?u(d,o):e&&d.defaultSortOrder&&i.push({column:d,key:Kd(d,o),multiplePriority:Hb(d),sortOrder:d.defaultSortOrder}))}),i}function PR(t,e,r,i,u,d,m,o){return(e||[]).map(function(_,C){var T=Py(C,o),S=_;if(S.sorter){var P=S.sortDirections||u,A=S.showSorterTooltip===void 0?m:S.showSorterTooltip,O=Kd(S,T),R=r.find(function(ie){var ve=ie.key;return ve===O}),z=R?R.sortOrder:null,F=FJ(P,z),N=P.includes(cg)&&j(zJ,{class:qt("".concat(t,"-column-sorter-up"),{active:z===cg})},null),U=P.includes(sx)&&j(kJ,{class:qt("".concat(t,"-column-sorter-down"),{active:z===sx})},null),G=d||{},q=G.cancelSort,V=G.triggerAsc,Z=G.triggerDesc,Q=q;F===sx?Q=Z:F===cg&&(Q=V);var te=On(A)==="object"?A:{title:Q};S=H(H({},S),{},{className:qt(S.className,Ie({},"".concat(t,"-column-sort"),z)),title:function(ve){var ce=j("div",{class:"".concat(t,"-column-sorters")},[j("span",{class:"".concat(t,"-column-title")},[cC(_.title,ve)]),j("span",{class:qt("".concat(t,"-column-sorter"),Ie({},"".concat(t,"-column-sorter-full"),!!(N&&U)))},[j("span",{class:"".concat(t,"-column-sorter-inner")},[N,U])])]);return A?j(G3,te,{default:function(){return[ce]}}):ce},customHeaderCell:function(ve){var ce=_.customHeaderCell&&_.customHeaderCell(ve)||{},de=ce.onClick;return ce.onClick=function(xe){i({column:_,key:O,sortOrder:F,multiplePriority:Hb(_)}),de&&de(xe)},ce.class=qt(ce.class,"".concat(t,"-column-has-sorters")),ce}})}return"children"in S&&(S=H(H({},S),{},{children:PR(t,S.children,r,i,u,d,m,T)})),S})}function vA(t){var e=t.column,r=t.sortOrder;return{column:e,order:r,field:e.dataIndex,columnKey:e.key}}function gA(t){var e=t.filter(function(r){var i=r.sortOrder;return i}).map(vA);return e.length===0&&t.length?H(H({},vA(t[t.length-1])),{},{column:void 0}):e.length<=1?e[0]||{}:e}function Wb(t,e,r){var i=e.slice().sort(function(m,o){return o.multiplePriority-m.multiplePriority}),u=t.slice(),d=i.filter(function(m){var o=m.column.sorter,_=m.sortOrder;return mA(o)&&_});return d.length?u.sort(function(m,o){for(var _=0;_<d.length;_+=1){var C=d[_],T=C.column.sorter,S=C.sortOrder,P=mA(T);if(P&&S){var A=P(m,o,S);if(A!==0)return S===cg?A:-A}}return 0}).map(function(m){var o=m[r];return o?H(H({},m),{},Ie({},r,Wb(o,e,r))):m}):u}function BJ(t){var e=t.prefixCls,r=t.mergedColumns,i=t.onSorterChange,u=t.sortDirections,d=t.tableLocale,m=t.showSorterTooltip,o=Ls(qb(r.value,!0)),_=zn(o,2),C=_[0],T=_[1],S=ue(function(){var z=!0,F=qb(r.value,!1);if(!F.length)return C.value;var N=[];function U(q){z?N.push(q):N.push(H(H({},q),{},{sortOrder:null}))}var G=null;return F.forEach(function(q){G===null?(U(q),q.sortOrder&&(q.multiplePriority===!1?z=!1:G=!0)):(G&&q.multiplePriority!==!1||(z=!1),U(q))}),N}),P=ue(function(){var z=S.value.map(function(F){var N=F.column,U=F.sortOrder;return{column:N,order:U}});return{sortColumns:z,sortColumn:z[0]&&z[0].column,sortOrder:z[0]&&z[0].order}});function A(z){var F;z.multiplePriority===!1||!S.value.length||S.value[0].multiplePriority===!1?F=[z]:F=[].concat(bn(S.value.filter(function(N){var U=N.key;return U!==z.key})),[z]),T(F),i(gA(F),F)}var O=function(F){return PR(e.value,F,S.value,A,u.value,d.value,m.value)},R=ue(function(){return gA(S.value)});return[O,S,P,R]}var NJ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"}}]},name:"filter",theme:"filled"};const $J=NJ;function yA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){jJ(t,u,r[u])})}return t}function jJ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var dC=function(e,r){var i=yA({},e,r.attrs);return j($r,yA({},i,{icon:$J}),null)};dC.displayName="FilterFilled";dC.inheritAttrs=!1;const VJ=dC;var UJ=function(e,r){var i,u=r.slots;return j("div",{onClick:function(m){return m.stopPropagation()}},[(i=u.default)===null||i===void 0?void 0:i.call(u)])};const KJ=UJ,_A=jt({compatConfig:{MODE:3},name:"FilterSearch",inheritAttrs:!1,props:{value:String,onChange:Function,filterSearch:Boolean,tablePrefixCls:String,locale:{type:Object,default:void 0}},setup:function(e){return function(){var r=e.value,i=e.onChange,u=e.filterSearch,d=e.tablePrefixCls,m=e.locale;return u?j("div",{class:"".concat(d,"-filter-dropdown-search")},[j(vi,{placeholder:m.filterSearchPlaceholder,onChange:i,value:r,htmlSize:1,class:"".concat(d,"-filter-dropdown-search-input")},{prefix:function(){return j(Iw,null,null)}})]):null}}});var GJ=["motion","motionNodes","motionType","active","eventKey"];const HJ=jt({compatConfig:{MODE:3},name:"MotionTreeNode",inheritAttrs:!1,props:H(H({},Nw),{},{active:Boolean,motion:Object,motionNodes:{type:Array},onMotionStart:Function,onMotionEnd:Function,motionType:String}),slots:["title","icon","switcherIcon","checkable"],setup:function(e,r){var i=r.attrs,u=r.slots,d=qe(!0),m=Bw(),o=qe(!1),_=ue(function(){return e.motion?e.motion:Ow()}),C=function(S,P){if(P==="appear"){var A,O;(A=_.value)===null||A===void 0||(O=A.onAfterEnter)===null||O===void 0||O.call(A,S)}else if(P==="leave"){var R,z;(R=_.value)===null||R===void 0||(z=R.onAfterLeave)===null||z===void 0||z.call(R,S)}o.value||e.onMotionEnd(),o.value=!0};return an(function(){return e.motionNodes},function(){e.motionNodes&&e.motionType==="hide"&&d.value&&gr(function(){d.value=!1})},{immediate:!0,flush:"post"}),wr(function(){e.motionNodes&&e.onMotionStart()}),Er(function(){e.motionNodes&&C()}),function(){e.motion;var T=e.motionNodes,S=e.motionType,P=e.active,A=e.eventKey,O=Cr(e,GJ);return T?j(os,H(H({},_.value),{},{appear:S==="show",onAfterAppear:function(z){return C(z,"appear")},onAfterLeave:function(z){return C(z,"leave")}}),{default:function(){return[uo(j("div",{class:"".concat(m.value.prefixCls,"-treenode-motion")},[T.map(function(z){var F=kr({},z.data),N=z.title,U=z.key,G=z.isStart,q=z.isEnd;return delete F.children,j(vb,H(H({},F),{},{title:N,active:P,data:z.data,key:U,eventKey:U,isStart:G,isEnd:q}),u)})]),[[Rp,d.value]])]}}):j(vb,H(H({domRef:qe,class:i.class,style:i.style},O),{},{active:P,eventKey:A}),u)}}});function qJ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=t.length,i=e.length;if(Math.abs(r-i)!==1)return{add:!1,key:null};function u(d,m){var o=new Map;d.forEach(function(C){o.set(C,!0)});var _=m.filter(function(C){return!o.has(C)});return _.length===1?_[0]:null}return r<i?{add:!0,key:u(t,e)}:{add:!1,key:u(e,t)}}function xA(t,e,r){var i=t.findIndex(function(o){return o.key===r}),u=t[i+1],d=e.findIndex(function(o){return o.key===r});if(u){var m=e.findIndex(function(o){return o.key===u.key});return e.slice(d+1,m)}return e.slice(d+1)}var WJ=["prefixCls","selectable","checkable","disabled","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabindex","onKeydown","onFocus","onBlur","onListChangeStart","onListChangeEnd"],bA={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},ZJ=function(){},ec="RC_TREE_MOTION_".concat(Math.random()),Zb={key:ec},AR={key:ec,level:0,index:0,pos:"0",node:Zb,nodes:[Zb]},wA={parent:null,children:[],pos:AR.pos,data:Zb,title:null,key:ec,isStart:[],isEnd:[]};function CA(t,e,r,i){return e===!1||!r?t:t.slice(0,Math.ceil(r/i)+1)}function SA(t){var e=t.key,r=t.pos;return Vp(e,r)}function XJ(t){for(var e=String(t.key),r=t;r.parent;)r=r.parent,e="".concat(r.key," > ").concat(e);return e}const YJ=jt({compatConfig:{MODE:3},name:"NodeList",inheritAttrs:!1,props:WG,setup:function(e,r){var i=r.expose,u=r.attrs,d=qe(),m=qe(),o=AD(),_=o.expandedKeys,C=o.flattenNodes;i({scrollTo:function(N){d.value.scrollTo(N)},getIndentWidth:function(){return m.value.offsetWidth}});var T=mr(C.value),S=mr([]),P=qe(null);function A(){T.value=C.value,S.value=[],P.value=null,e.onListChangeEnd()}var O=Bw();an([function(){return _.value.slice()},C],function(F,N){var U=zn(F,2),G=U[0],q=U[1],V=zn(N,2),Z=V[0],Q=V[1],te=qJ(Z,G);if(te.key!==null){var ie=e.virtual,ve=e.height,ce=e.itemHeight;if(te.add){var de=Q.findIndex(function(Pe){var He=Pe.key;return He===te.key}),xe=CA(xA(Q,q,te.key),ie,ve,ce),De=Q.slice();De.splice(de+1,0,wA),T.value=De,S.value=xe,P.value="show"}else{var ge=q.findIndex(function(Pe){var He=Pe.key;return He===te.key}),he=CA(xA(q,Q,te.key),ie,ve,ce),me=q.slice();me.splice(ge+1,0,wA),T.value=me,S.value=he,P.value="hide"}}else Q!==q&&(T.value=q)}),an(function(){return O.value.dragging},function(F){F||A()});var R=ue(function(){return e.motion===void 0?T.value:C.value}),z=function(){e.onActiveChange(null)};return function(){var F=H(H({},e),u),N=F.prefixCls;F.selectable,F.checkable;var U=F.disabled,G=F.motion,q=F.height,V=F.itemHeight,Z=F.virtual,Q=F.focusable,te=F.activeItem,ie=F.focused,ve=F.tabindex,ce=F.onKeydown,de=F.onFocus,xe=F.onBlur,De=F.onListChangeStart;F.onListChangeEnd;var ge=Cr(F,WJ);return j(Hn,null,[ie&&te&&j("span",{style:bA,"aria-live":"assertive"},[XJ(te)]),j("div",null,[j("input",{style:bA,disabled:Q===!1||U,tabindex:Q!==!1?ve:null,onKeydown:ce,onFocus:de,onBlur:xe,value:"",onChange:ZJ,"aria-label":"for screen reader"},null)]),j("div",{class:"".concat(N,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},[j("div",{class:"".concat(N,"-indent")},[j("div",{ref:m,class:"".concat(N,"-indent-unit")},null)])]),j(L3,H(H({},hi(ge,["onActiveChange"])),{},{data:R.value,itemKey:SA,height:q,fullHeight:!1,virtual:Z,itemHeight:V,prefixCls:"".concat(N,"-list"),ref:d,onVisibleChange:function(me,Pe){var He=new Set(me),Ke=Pe.filter(function(Re){return!He.has(Re)});Ke.some(function(Re){return SA(Re)===ec})&&A()}}),{default:function(me){var Pe=me.pos,He=kr({},me.data),Ke=me.title,Re=me.key,Le=me.isStart,Te=me.isEnd,oe=Vp(Re,Pe);return delete He.key,delete He.children,j(HJ,H(H({},He),{},{eventKey:oe,title:Ke,active:!!te&&Re===te.key,data:me.data,isStart:Le,isEnd:Te,motion:G,motionNodes:Re===ec?S.value:null,motionType:P.value,onMotionStart:De,onMotionEnd:A,onMousemove:z}),null)}})])}}});function JJ(t){var e=t.dropPosition,r=t.dropLevelOffset,i=t.indent,u={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:"".concat(2,"px")};switch(e){case-1:u.top=0,u.left="".concat(-r*i,"px");break;case 1:u.bottom=0,u.left="".concat(-r*i,"px");break;case 0:u.bottom=0,u.left="".concat(i);break}return j("div",{style:u},null)}var QJ=10;const eQ=jt({compatConfig:{MODE:3},name:"Tree",inheritAttrs:!1,slots:["checkable","title","icon","titleRender"],props:Di(MD(),{prefixCls:"vc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:JJ,allowDrop:function(){return!0}}),setup:function(e,r){var i=r.attrs,u=r.slots,d=r.expose,m=qe(!1),o={},_=qe(),C=mr([]),T=mr([]),S=mr([]),P=mr([]),A=mr([]),O=mr([]),R={},z=Or({draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null}),F=mr([]);an([function(){return e.treeData},function(){return e.children}],function(){F.value=e.treeData!==void 0?Yn(e.treeData).slice():yb(Yn(e.children))},{immediate:!0,deep:!0});var N=mr({}),U=qe(!1),G=qe(null),q=qe(!1),V=ue(function(){return Cy(e.fieldNames)}),Z=qe(),Q=null,te=null,ie=null,ve=ue(function(){return{expandedKeysSet:ce.value,selectedKeysSet:de.value,loadedKeysSet:xe.value,loadingKeysSet:De.value,checkedKeysSet:ge.value,halfCheckedKeysSet:he.value,dragOverNodeKey:z.dragOverNodeKey,dropPosition:z.dropPosition,keyEntities:N.value}}),ce=ue(function(){return new Set(O.value)}),de=ue(function(){return new Set(C.value)}),xe=ue(function(){return new Set(P.value)}),De=ue(function(){return new Set(A.value)}),ge=ue(function(){return new Set(T.value)}),he=ue(function(){return new Set(S.value)});vr(function(){if(F.value){var zt=jw(F.value,{fieldNames:V.value});N.value=H(Ie({},ec,AR),zt.keyEntities)}});var me=!1;an([function(){return e.expandedKeys},function(){return e.autoExpandParent},N],function(zt,mt){var St=zn(zt,2);St[0];var yt=St[1],Wt=zn(mt,2);Wt[0];var tn=Wt[1],on=O.value;if(e.expandedKeys!==void 0||me&&yt!==tn)on=e.autoExpandParent||!me&&e.defaultExpandParent?gb(e.expandedKeys,N.value):e.expandedKeys;else if(!me&&e.defaultExpandAll){var Tt=H({},N.value);delete Tt[ec],on=Object.keys(Tt).map(function(Et){return Tt[Et].key})}else!me&&e.defaultExpandedKeys&&(on=e.autoExpandParent||e.defaultExpandParent?gb(e.defaultExpandedKeys,N.value):e.defaultExpandedKeys);on&&(O.value=on),me=!0},{immediate:!0});var Pe=mr([]);vr(function(){Pe.value=nH(F.value,O.value,V.value)}),vr(function(){e.selectable&&(e.selectedKeys!==void 0?C.value=sP(e.selectedKeys,e):!me&&e.defaultSelectedKeys&&(C.value=sP(e.defaultSelectedKeys,e)))});var He=DD(N),Ke=He.maxLevel,Re=He.levelEntities;vr(function(){if(e.checkable){var zt;if(e.checkedKeys!==void 0?zt=U0(e.checkedKeys)||{}:!me&&e.defaultCheckedKeys?zt=U0(e.defaultCheckedKeys)||{}:F.value&&(zt=U0(e.checkedKeys)||{checkedKeys:T.value,halfCheckedKeys:S.value}),zt){var mt=zt,St=mt.checkedKeys,yt=St===void 0?[]:St,Wt=mt.halfCheckedKeys,tn=Wt===void 0?[]:Wt;if(!e.checkStrictly){var on=Ad(yt,!0,N.value,Ke.value,Re.value);yt=on.checkedKeys,tn=on.halfCheckedKeys}T.value=yt,S.value=tn}}}),vr(function(){e.loadedKeys&&(P.value=e.loadedKeys)});var Le=function(){kr(z,{dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},Te=function(mt){Z.value.scrollTo(mt)};an(function(){return e.activeKey},function(){e.activeKey!==void 0&&(G.value=e.activeKey)},{immediate:!0}),an(G,function(zt){gr(function(){zt!==null&&Te({key:zt})})},{immediate:!0,flush:"post"});var oe=function(mt){e.expandedKeys===void 0&&(O.value=mt)},ze=function(){z.draggingNodeKey!==null&&kr(z,{draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),Q=null,ie=null},Fe=function(mt,St){var yt=e.onDragend;z.dragOverNodeKey=null,ze(),yt==null||yt({event:mt,node:St.eventData}),te=null},lt=function zt(mt){Fe(mt,null),window.removeEventListener("dragend",zt)},vt=function(mt,St){var yt=e.onDragstart,Wt=St.eventKey,tn=St.eventData;te=St,Q={x:mt.clientX,y:mt.clientY};var on=ks(O.value,Wt);z.draggingNodeKey=Wt,z.dragChildrenKeys=JG(Wt,N.value),_.value=Z.value.getIndentWidth(),oe(on),window.addEventListener("dragend",lt),yt&&yt({event:mt,node:tn})},kt=function(mt,St){var yt=e.onDragenter,Wt=e.onExpand,tn=e.allowDrop,on=e.direction,Tt=St.pos,Et=St.eventKey;if(ie!==Et&&(ie=Et),!te){Le();return}var sn=aP(mt,te,St,_.value,Q,tn,Pe.value,N.value,ce.value,on),xn=sn.dropPosition,An=sn.dropLevelOffset,Mn=sn.dropTargetKey,ir=sn.dropContainerKey,Dn=sn.dropTargetPos,lr=sn.dropAllowed,Ce=sn.dragOverNodeKey;if(z.dragChildrenKeys.indexOf(Mn)!==-1||!lr){Le();return}if(o||(o={}),Object.keys(o).forEach(function(Y){clearTimeout(o[Y])}),te.eventKey!==St.eventKey&&(o[Tt]=window.setTimeout(function(){if(z.draggingNodeKey!==null){var Y=O.value.slice(),ne=N.value[St.eventKey];ne&&(ne.children||[]).length&&(Y=El(O.value,St.eventKey)),oe(Y),Wt&&Wt(Y,{node:St.eventData,expanded:!0,nativeEvent:mt})}},800)),te.eventKey===Mn&&An===0){Le();return}kr(z,{dragOverNodeKey:Ce,dropPosition:xn,dropLevelOffset:An,dropTargetKey:Mn,dropContainerKey:ir,dropTargetPos:Dn,dropAllowed:lr}),yt&&yt({event:mt,node:St.eventData,expandedKeys:O.value})},It=function(mt,St){var yt=e.onDragover,Wt=e.allowDrop,tn=e.direction;if(!!te){var on=aP(mt,te,St,_.value,Q,Wt,Pe.value,N.value,ce.value,tn),Tt=on.dropPosition,Et=on.dropLevelOffset,sn=on.dropTargetKey,xn=on.dropContainerKey,An=on.dropAllowed,Mn=on.dropTargetPos,ir=on.dragOverNodeKey;z.dragChildrenKeys.indexOf(sn)!==-1||!An||(te.eventKey===sn&&Et===0?z.dropPosition===null&&z.dropLevelOffset===null&&z.dropTargetKey===null&&z.dropContainerKey===null&&z.dropTargetPos===null&&z.dropAllowed===!1&&z.dragOverNodeKey===null||Le():Tt===z.dropPosition&&Et===z.dropLevelOffset&&sn===z.dropTargetKey&&xn===z.dropContainerKey&&Mn===z.dropTargetPos&&An===z.dropAllowed&&ir===z.dragOverNodeKey||kr(z,{dropPosition:Tt,dropLevelOffset:Et,dropTargetKey:sn,dropContainerKey:xn,dropTargetPos:Mn,dropAllowed:An,dragOverNodeKey:ir}),yt&&yt({event:mt,node:St.eventData}))}},se=function(mt,St){ie===St.eventKey&&!mt.currentTarget.contains(mt.relatedTarget)&&(Le(),ie=null);var yt=e.onDragleave;yt&&yt({event:mt,node:St.eventData})},ae=function(mt,St){var yt,Wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,tn=z.dragChildrenKeys,on=z.dropPosition,Tt=z.dropTargetKey,Et=z.dropTargetPos,sn=z.dropAllowed;if(!!sn){var xn=e.onDrop;if(z.dragOverNodeKey=null,ze(),Tt!==null){var An=H(H({},_b(Tt,Yn(ve.value))),{},{active:((yt=Rt.value)===null||yt===void 0?void 0:yt.key)===Tt,data:N.value[Tt].node});tn.indexOf(Tt);var Mn=$w(Et),ir={event:mt,node:xb(An),dragNode:te?te.eventData:null,dragNodesKeys:[te.eventKey].concat(tn),dropToGap:on!==0,dropPosition:on+Number(Mn[Mn.length-1])};Wt||xn==null||xn(ir),te=null}}},Be=function(mt,St){var yt=e.onClick;yt&&yt(mt,St)},st=function(mt,St){var yt=e.onDblclick;yt&&yt(mt,St)},ut=function(mt,St){var yt=C.value,Wt=e.onSelect,tn=e.multiple,on=St.selected,Tt=St[V.value.key],Et=!on;Et?tn?yt=El(yt,Tt):yt=[Tt]:yt=ks(yt,Tt);var sn=N.value,xn=yt.map(function(An){var Mn=sn[An];return Mn?Mn.node:null}).filter(function(An){return An});e.selectedKeys===void 0&&(C.value=yt),Wt&&Wt(yt,{event:"select",selected:Et,node:St,selectedNodes:xn,nativeEvent:mt})},bt=function(mt,St,yt){var Wt=e.checkStrictly,tn=e.onCheck,on=St[V.value.key],Tt,Et={event:"check",node:St,checked:yt,nativeEvent:mt},sn=N.value;if(Wt){var xn=yt?El(T.value,on):ks(T.value,on),An=ks(S.value,on);Tt={checked:xn,halfChecked:An},Et.checkedNodes=xn.map(function(Y){return sn[Y]}).filter(function(Y){return Y}).map(function(Y){return Y.node}),e.checkedKeys===void 0&&(T.value=xn)}else{var Mn=Ad([].concat(bn(T.value),[on]),!0,sn,Ke.value,Re.value),ir=Mn.checkedKeys,Dn=Mn.halfCheckedKeys;if(!yt){var lr=new Set(ir);lr.delete(on);var Ce=Ad(Array.from(lr),{checked:!1,halfCheckedKeys:Dn},sn,Ke.value,Re.value);ir=Ce.checkedKeys,Dn=Ce.halfCheckedKeys}Tt=ir,Et.checkedNodes=[],Et.checkedNodesPositions=[],Et.halfCheckedKeys=Dn,ir.forEach(function(Y){var ne=sn[Y];if(!!ne){var be=ne.node,Oe=ne.pos;Et.checkedNodes.push(be),Et.checkedNodesPositions.push({node:be,pos:Oe})}}),e.checkedKeys===void 0&&(T.value=ir,S.value=Dn)}tn&&tn(Tt,Et)},At=function(mt){var St=mt[V.value.key],yt=new Promise(function(Wt,tn){var on=e.loadData,Tt=e.onLoad;if(!on||xe.value.has(St)||De.value.has(St))return null;var Et=on(mt);Et.then(function(){var sn=El(P.value,St),xn=ks(A.value,St);Tt&&Tt(sn,{event:"load",node:mt}),e.loadedKeys===void 0&&(P.value=sn),A.value=xn,Wt()}).catch(function(sn){var xn=ks(A.value,St);if(A.value=xn,R[St]=(R[St]||0)+1,R[St]>=QJ){var An=El(P.value,St);e.loadedKeys===void 0&&(P.value=An),Wt()}tn(sn)}),A.value=El(A.value,St)});return yt.catch(function(){}),yt},_t=function(mt,St){var yt=e.onMouseenter;yt&&yt({event:mt,node:St})},nt=function(mt,St){var yt=e.onMouseleave;yt&&yt({event:mt,node:St})},tt=function(mt,St){var yt=e.onRightClick;yt&&(mt.preventDefault(),yt({event:mt,node:St}))},pt=function(mt){var St=e.onFocus;U.value=!0,St&&St(mt)},dt=function(mt){var St=e.onBlur;U.value=!1,Cn(null),St&&St(mt)},Ot=function(mt,St){var yt=O.value,Wt=e.onExpand,tn=e.loadData,on=St.expanded,Tt=St[V.value.key];if(!q.value){yt.indexOf(Tt);var Et=!on;if(Et?yt=El(yt,Tt):yt=ks(yt,Tt),oe(yt),Wt&&Wt(yt,{node:St,expanded:Et,nativeEvent:mt}),Et&&tn){var sn=At(St);sn&&sn.then(function(){}).catch(function(xn){var An=ks(O.value,Tt);oe(An),Promise.reject(xn)})}}},Kt=function(){q.value=!0},cn=function(){setTimeout(function(){q.value=!1})},Cn=function(mt){var St=e.onActiveChange;G.value!==mt&&(e.activeKey!==void 0&&(G.value=mt),mt!==null&&Te({key:mt}),St&&St(mt))},Rt=ue(function(){return G.value===null?null:Pe.value.find(function(zt){var mt=zt.key;return mt===G.value})||null}),ht=function(mt){var St=Pe.value.findIndex(function(tn){var on=tn.key;return on===G.value});St===-1&&mt<0&&(St=Pe.value.length),St=(St+mt+Pe.value.length)%Pe.value.length;var yt=Pe.value[St];if(yt){var Wt=yt.key;Cn(Wt)}else Cn(null)},Ht=ue(function(){return xb(H(H({},_b(G.value,ve.value)),{},{data:Rt.value.data,active:!0}))}),wn=function(mt){var St=e.onKeydown,yt=e.checkable,Wt=e.selectable;switch(mt.which){case Fn.UP:{ht(-1),mt.preventDefault();break}case Fn.DOWN:{ht(1),mt.preventDefault();break}}var tn=Rt.value;if(tn&&tn.data){var on=tn.data.isLeaf===!1||!!(tn.data.children||[]).length,Tt=Ht.value;switch(mt.which){case Fn.LEFT:{on&&ce.value.has(G.value)?Ot({},Tt):tn.parent&&Cn(tn.parent.key),mt.preventDefault();break}case Fn.RIGHT:{on&&!ce.value.has(G.value)?Ot({},Tt):tn.children&&tn.children.length&&Cn(tn.children[0].key),mt.preventDefault();break}case Fn.ENTER:case Fn.SPACE:{yt&&!Tt.disabled&&Tt.checkable!==!1&&!Tt.disableCheckbox?bt({},Tt,!ge.value.has(G.value)):!yt&&Wt&&!Tt.disabled&&Tt.selectable!==!1&&ut({},Tt);break}}}St&&St(mt)};return d({onNodeExpand:Ot,scrollTo:Te,onKeydown:wn,selectedKeys:ue(function(){return C.value}),checkedKeys:ue(function(){return T.value}),halfCheckedKeys:ue(function(){return S.value}),loadedKeys:ue(function(){return P.value}),loadingKeys:ue(function(){return A.value}),expandedKeys:ue(function(){return O.value})}),is(function(){window.removeEventListener("dragend",lt),m.value=!0}),GG({expandedKeys:O,selectedKeys:C,loadedKeys:P,loadingKeys:A,checkedKeys:T,halfCheckedKeys:S,expandedKeysSet:ce,selectedKeysSet:de,loadedKeysSet:xe,loadingKeysSet:De,checkedKeysSet:ge,halfCheckedKeysSet:he,flattenNodes:Pe}),function(){var zt,mt=z.draggingNodeKey,St=z.dropLevelOffset,yt=z.dropContainerKey,Wt=z.dropTargetKey,tn=z.dropPosition,on=z.dragOverNodeKey,Tt=e.prefixCls,Et=e.showLine,sn=e.focusable,xn=e.tabindex,An=xn===void 0?0:xn,Mn=e.selectable,ir=e.showIcon,Dn=e.icon,lr=Dn===void 0?u.icon:Dn,Ce=e.switcherIcon,Y=e.draggable,ne=e.checkable,be=e.checkStrictly,Oe=e.disabled,Ve=e.motion,it=e.loadData,rt=e.filterTreeNode,Xe=e.height,ot=e.itemHeight,Pt=e.virtual,Qt=e.dropIndicatorRender,Bt=e.onContextmenu,Sn=e.onScroll,mn=e.direction,vn=i.class,In=i.style,Nn=lc(H(H({},e),i),{aria:!0,data:!0}),nr;return Y&&(On(Y)==="object"?nr=Y:typeof Y=="function"?nr={nodeDraggable:Y}:nr={}),j(KG,{value:{prefixCls:Tt,selectable:Mn,showIcon:ir,icon:lr,switcherIcon:Ce,draggable:nr,draggingNodeKey:mt,checkable:ne,customCheckable:u.checkable,checkStrictly:be,disabled:Oe,keyEntities:N.value,dropLevelOffset:St,dropContainerKey:yt,dropTargetKey:Wt,dropPosition:tn,dragOverNodeKey:on,dragging:mt!==null,indent:_.value,direction:mn,dropIndicatorRender:Qt,loadData:it,filterTreeNode:rt,onNodeClick:Be,onNodeDoubleClick:st,onNodeExpand:Ot,onNodeSelect:ut,onNodeCheck:bt,onNodeLoad:At,onNodeMouseEnter:_t,onNodeMouseLeave:nt,onNodeContextMenu:tt,onNodeDragStart:vt,onNodeDragEnter:kt,onNodeDragOver:It,onNodeDragLeave:se,onNodeDragEnd:Fe,onNodeDrop:ae,slots:u}},{default:function(){return[j("div",{role:"tree",class:qt(Tt,vn,(zt={},Ie(zt,"".concat(Tt,"-show-line"),Et),Ie(zt,"".concat(Tt,"-focused"),U.value),Ie(zt,"".concat(Tt,"-active-focused"),G.value!==null),zt))},[j(YJ,H({ref:Z,prefixCls:Tt,style:In,disabled:Oe,selectable:Mn,checkable:!!ne,motion:Ve,height:Xe,itemHeight:ot,virtual:Pt,focusable:sn,focused:U.value,tabindex:An,activeItem:Rt.value,onFocus:pt,onBlur:dt,onKeydown:wn,onActiveChange:Cn,onListChangeStart:Kt,onListChangeEnd:cn,onContextmenu:Bt,onScroll:Sn},Nn),null)])]}})}}});var tQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const nQ=tQ;function TA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){rQ(t,u,r[u])})}return t}function rQ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var fC=function(e,r){var i=TA({},e,r.attrs);return j($r,TA({},i,{icon:nQ}),null)};fC.displayName="FileOutlined";fC.inheritAttrs=!1;const MR=fC;var iQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};const oQ=iQ;function EA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){aQ(t,u,r[u])})}return t}function aQ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var hC=function(e,r){var i=EA({},e,r.attrs);return j($r,EA({},i,{icon:oQ}),null)};hC.displayName="MinusSquareOutlined";hC.inheritAttrs=!1;const sQ=hC;var lQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};const uQ=lQ;function IA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){cQ(t,u,r[u])})}return t}function cQ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var pC=function(e,r){var i=IA({},e,r.attrs);return j($r,IA({},i,{icon:uQ}),null)};pC.displayName="PlusSquareOutlined";pC.inheritAttrs=!1;const dQ=pC;var fQ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};const hQ=fQ;function PA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){pQ(t,u,r[u])})}return t}function pQ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var mC=function(e,r){var i=PA({},e,r.attrs);return j($r,PA({},i,{icon:hQ}),null)};mC.displayName="CaretDownFilled";mC.inheritAttrs=!1;const mQ=mC;function vQ(t,e,r,i){var u=i.isLeaf,d=i.expanded,m=i.loading,o=e;if(m)return j(Nd,{class:"".concat(t,"-switcher-loading-icon")},null);var _;r&&On(r)==="object"&&(_=r.showLeafIcon);var C=null,T="".concat(t,"-switcher-icon");return u?(r&&(On(r)==="object"&&!_?C=j("span",{class:"".concat(t,"-switcher-leaf-line")},null):C=j(MR,{class:"".concat(t,"-switcher-line-icon")},null)),C):(C=j(mQ,{class:T},null),r&&(C=d?j(sQ,{class:"".concat(t,"-switcher-line-icon")},null):j(dQ,{class:"".concat(t,"-switcher-line-icon")},null)),typeof e=="function"?o=e(H(H({},i),{},{defaultIcon:C,switcherCls:T})):Co(o)&&(o=wo(o,{class:T})),o||C)}var AA=4;function gQ(t){var e,r=t.dropPosition,i=t.dropLevelOffset,u=t.prefixCls,d=t.indent,m=t.direction,o=m===void 0?"ltr":m,_=o==="ltr"?"left":"right",C=o==="ltr"?"right":"left",T=(e={},Ie(e,_,"".concat(-i*d+AA,"px")),Ie(e,C,0),e);switch(r){case-1:T.top="".concat(-3,"px");break;case 1:T.bottom="".concat(-3,"px");break;default:T.bottom="".concat(-3,"px"),T[_]="".concat(d+AA,"px");break}return j("div",{style:T,class:"".concat(u,"-drop-indicator")},null)}var kR=function(){var e=MD();return H(H({},e),{},{showLine:{type:[Boolean,Object],default:void 0},multiple:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandParent:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},checkedKeys:{type:[Array,Object]},defaultCheckedKeys:{type:Array},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},selectable:{type:Boolean,default:void 0},loadedKeys:{type:Array},draggable:{type:Boolean,default:void 0},showIcon:{type:Boolean,default:void 0},icon:{type:Function},switcherIcon:et.any,prefixCls:String,replaceFields:{type:Object},blockNode:{type:Boolean,default:void 0},openAnimation:et.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":Function,"onUpdate:checkedKeys":Function,"onUpdate:expandedKeys":Function})};const dg=jt({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:Di(kR(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,r){var i=r.attrs,u=r.expose,d=r.emit,m=r.slots;e.treeData===void 0&&m.default;var o=hr("tree",e),_=o.prefixCls,C=o.direction,T=o.virtual,S=qe(),P=function(F){var N;(N=S.value)===null||N===void 0||N.scrollTo(F)};u({treeRef:S,onNodeExpand:function(){for(var F,N=arguments.length,U=new Array(N),G=0;G<N;G++)U[G]=arguments[G];(F=S.value)===null||F===void 0||F.onNodeExpand.apply(F,U)},scrollTo:P,selectedKeys:ue(function(){var z;return(z=S.value)===null||z===void 0?void 0:z.selectedKeys}),checkedKeys:ue(function(){var z;return(z=S.value)===null||z===void 0?void 0:z.checkedKeys}),halfCheckedKeys:ue(function(){var z;return(z=S.value)===null||z===void 0?void 0:z.halfCheckedKeys}),loadedKeys:ue(function(){var z;return(z=S.value)===null||z===void 0?void 0:z.loadedKeys}),loadingKeys:ue(function(){var z;return(z=S.value)===null||z===void 0?void 0:z.loadingKeys}),expandedKeys:ue(function(){var z;return(z=S.value)===null||z===void 0?void 0:z.expandedKeys})}),vr(function(){Ni(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});var A=function(F,N){d("update:checkedKeys",F),d("check",F,N)},O=function(F,N){d("update:expandedKeys",F),d("expand",F,N)},R=function(F,N){d("update:selectedKeys",F),d("select",F,N)};return function(){var z,F=e.showIcon,N=e.showLine,U=e.switcherIcon,G=U===void 0?m.switcherIcon:U,q=e.icon,V=q===void 0?m.icon:q,Z=e.blockNode,Q=e.checkable,te=e.selectable,ie=e.fieldNames,ve=ie===void 0?e.replaceFields:ie,ce=e.motion,de=ce===void 0?e.openAnimation:ce,xe=e.itemHeight,De=xe===void 0?28:xe,ge=e.onDoubleclick,he=e.onDblclick,me=H(H(H({},i),hi(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{},{showLine:Boolean(N),dropIndicatorRender:gQ,fieldNames:ve,icon:V,itemHeight:De}),Pe=m.default?Ko(m.default()):void 0;return j(eQ,H(H({},me),{},{virtual:T.value,motion:de,ref:S,prefixCls:_.value,class:qt((z={},Ie(z,"".concat(_.value,"-icon-hide"),!F),Ie(z,"".concat(_.value,"-block-node"),Z),Ie(z,"".concat(_.value,"-unselectable"),!te),Ie(z,"".concat(_.value,"-rtl"),C.value==="rtl"),z),i.class),direction:C.value,checkable:Q,selectable:te,switcherIcon:function(Ke){return vQ(_.value,G,N,Ke)},onCheck:A,onExpand:O,onSelect:R,onDblclick:he||ge,children:Pe}),H(H({},m),{},{checkable:function(){return j("span",{class:"".concat(_.value,"-checkbox-inner")},null)}}))}}});var yQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const _Q=yQ;function MA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){xQ(t,u,r[u])})}return t}function xQ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var vC=function(e,r){var i=MA({},e,r.attrs);return j($r,MA({},i,{icon:_Q}),null)};vC.displayName="FolderOpenOutlined";vC.inheritAttrs=!1;const bQ=vC;var wQ={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};const CQ=wQ;function kA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?Object(arguments[e]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(u){return Object.getOwnPropertyDescriptor(r,u).enumerable}))),i.forEach(function(u){SQ(t,u,r[u])})}return t}function SQ(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var gC=function(e,r){var i=kA({},e,r.attrs);return j($r,kA({},i,{icon:CQ}),null)};gC.displayName="FolderOutlined";gC.inheritAttrs=!1;const TQ=gC;var Rs;(function(t){t[t.None=0]="None",t[t.Start=1]="Start",t[t.End=2]="End"})(Rs||(Rs={}));function yC(t,e,r){function i(u){var d=u[e.key],m=u[e.children];r(d,u)!==!1&&yC(m||[],e,r)}t.forEach(i)}function EQ(t){var e=t.treeData,r=t.expandedKeys,i=t.startKey,u=t.endKey,d=t.fieldNames,m=d===void 0?{title:"title",key:"key",children:"children"}:d,o=[],_=Rs.None;if(i&&i===u)return[i];if(!i||!u)return[];function C(T){return T===i||T===u}return yC(e,m,function(T){if(_===Rs.End)return!1;if(C(T)){if(o.push(T),_===Rs.None)_=Rs.Start;else if(_===Rs.Start)return _=Rs.End,!1}else _===Rs.Start&&o.push(T);return r.indexOf(T)!==-1}),o}function lx(t,e,r){var i=bn(e),u=[];return yC(t,r,function(d,m){var o=i.indexOf(d);return o!==-1&&(u.push(m),i.splice(o,1)),!!i.length}),u}var IQ=["icon","blockNode"],PQ=function(){return H(H({},kR()),{},{expandAction:{type:[Boolean,String]}})};function AQ(t){var e=t.isLeaf,r=t.expanded;return j(e?MR:r?bQ:TQ,null,null)}const ux=jt({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:Di(PQ(),{showIcon:!0,expandAction:"click"}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,r){var i,u=r.attrs,d=r.slots,m=r.emit,o=r.expose,_=qe(e.treeData||yb(Ko((i=d.default)===null||i===void 0?void 0:i.call(d))));an(function(){return e.treeData},function(){_.value=e.treeData}),Ca(function(){gr(function(){if(e.treeData===void 0&&d.default){var ie;_.value=yb(Ko((ie=d.default)===null||ie===void 0?void 0:ie.call(d)))}})});var C=qe(),T=qe(),S=ue(function(){return Cy(e.fieldNames)}),P=qe();o({selectedKeys:ue(function(){var ie;return(ie=P.value)===null||ie===void 0?void 0:ie.selectedKeys}),checkedKeys:ue(function(){var ie;return(ie=P.value)===null||ie===void 0?void 0:ie.checkedKeys}),halfCheckedKeys:ue(function(){var ie;return(ie=P.value)===null||ie===void 0?void 0:ie.halfCheckedKeys}),loadedKeys:ue(function(){var ie;return(ie=P.value)===null||ie===void 0?void 0:ie.loadedKeys}),loadingKeys:ue(function(){var ie;return(ie=P.value)===null||ie===void 0?void 0:ie.loadingKeys}),expandedKeys:ue(function(){var ie;return(ie=P.value)===null||ie===void 0?void 0:ie.expandedKeys})});var A=function(){var ve=jw(_.value,{fieldNames:S.value}),ce=ve.keyEntities,de;return e.defaultExpandAll?de=Object.keys(ce):e.defaultExpandParent?de=gb(e.expandedKeys||e.defaultExpandedKeys||[],ce):de=e.expandedKeys||e.defaultExpandedKeys,de},O=qe(e.selectedKeys||e.defaultSelectedKeys||[]),R=qe(A());an(function(){return e.selectedKeys},function(){e.selectedKeys!==void 0&&(O.value=e.selectedKeys)},{immediate:!0}),an(function(){return e.expandedKeys},function(){e.expandedKeys!==void 0&&(R.value=e.expandedKeys)},{immediate:!0});var z=function(ve,ce){var de=ce.isLeaf;de||ve.shiftKey||ve.metaKey||ve.ctrlKey||P.value.onNodeExpand(ve,ce)},F=Fw(z,200,{leading:!0}),N=function(ve,ce){e.expandedKeys===void 0&&(R.value=ve),m("update:expandedKeys",ve),m("expand",ve,ce)},U=function(ve,ce){var de=e.expandAction;de==="click"&&F(ve,ce),m("click",ve,ce)},G=function(ve,ce){var de=e.expandAction;(de==="dblclick"||de==="doubleclick")&&F(ve,ce),m("doubleclick",ve,ce),m("dblclick",ve,ce)},q=function(ve,ce){var de=e.multiple,xe=ce.node,De=ce.nativeEvent,ge=xe[S.value.key],he=H(H({},ce),{},{selected:!0}),me=(De==null?void 0:De.ctrlKey)||(De==null?void 0:De.metaKey),Pe=De==null?void 0:De.shiftKey,He;de&&me?(He=ve,C.value=ge,T.value=He,he.selectedNodes=lx(_.value,He,S.value)):de&&Pe?(He=Array.from(new Set([].concat(bn(T.value||[]),bn(EQ({treeData:_.value,expandedKeys:R.value,startKey:ge,endKey:C.value,fieldNames:S.value}))))),he.selectedNodes=lx(_.value,He,S.value)):(He=[ge],C.value=ge,T.value=He,he.selectedNodes=lx(_.value,He,S.value)),m("update:selectedKeys",He),m("select",He,he),e.selectedKeys===void 0&&(O.value=He)},V=function(ve,ce){m("update:checkedKeys",ve),m("check",ve,ce)},Z=hr("tree",e),Q=Z.prefixCls,te=Z.direction;return function(){var ie=qt("".concat(Q.value,"-directory"),Ie({},"".concat(Q.value,"-directory-rtl"),te.value==="rtl"),u.class),ve=e.icon,ce=ve===void 0?d.icon:ve,de=e.blockNode,xe=de===void 0?!0:de,De=Cr(e,IQ);return j(dg,H(H(H({},u),{},{icon:ce||AQ,ref:P,blockNode:xe},De),{},{prefixCls:Q.value,class:ie,expandedKeys:R.value,selectedKeys:O.value,onSelect:q,onClick:U,onDblclick:G,onExpand:N,onCheck:V}),d)}}});var cx=jt(H(H({},vb),{},{name:"ATreeNode",props:Nw}));const MQ=kr(dg,{DirectoryTree:ux,TreeNode:cx,install:function(e){return e.component(dg.name,dg),e.component(cx.name,cx),e.component(ux.name,ux),e}});var kQ=jo.SubMenu,OQ=jo.Item;function DQ(t){return t.some(function(e){var r=e.children;return r&&r.length>0})}function OR(t,e){return typeof e=="string"||typeof e=="number"?e==null?void 0:e.toString().toLowerCase().includes(t.trim().toLowerCase()):!1}function DR(t){var e=t.filters,r=t.prefixCls,i=t.filteredKeys,u=t.filterMultiple,d=t.searchValue,m=t.filterSearch;return e.map(function(o,_){var C=String(o.value);if(o.children)return j(kQ,{key:C||_,title:o.text,popupClassName:"".concat(r,"-dropdown-submenu")},{default:function(){return[DR({filters:o.children,prefixCls:r,filteredKeys:i,filterMultiple:u,searchValue:d,filterSearch:m})]}});var T=u?es:bo,S=j(OQ,{key:o.value!==void 0?C:_},{default:function(){return[j(T,{checked:i.includes(C)},null),j("span",null,[o.text])]}});return d.trim()?typeof m=="function"?m(d,o)?S:void 0:OR(d,o.text)?S:void 0:S})}const RQ=jt({name:"FilterDropdown",props:["tablePrefixCls","prefixCls","dropdownPrefixCls","column","filterState","filterMultiple","filterMode","filterSearch","columnKey","triggerFilter","locale","getPopupContainer"],setup:function(e,r){var i=r.slots,u=pR(),d=ue(function(){var Ke;return(Ke=e.filterMode)!==null&&Ke!==void 0?Ke:"menu"}),m=ue(function(){var Ke;return(Ke=e.filterSearch)!==null&&Ke!==void 0?Ke:!1}),o=ue(function(){return e.column.filterDropdownVisible}),_=qe(!1),C=ue(function(){var Ke;return!!(e.filterState&&((Ke=e.filterState.filteredKeys)!==null&&Ke!==void 0&&Ke.length||e.filterState.forceFiltered))}),T=ue(function(){var Ke;return Ay((Ke=e.column)===null||Ke===void 0?void 0:Ke.filters)}),S=ue(function(){var Ke=e.column,Re=Ke.filterDropdown,Le=Ke.slots,Te=Le===void 0?{}:Le,oe=Ke.customFilterDropdown;return Re||Te.filterDropdown&&u.value[Te.filterDropdown]||oe&&u.value.customFilterDropdown}),P=ue(function(){var Ke=e.column,Re=Ke.filterIcon,Le=Ke.slots,Te=Le===void 0?{}:Le;return Re||Te.filterIcon&&u.value[Te.filterIcon]||u.value.customFilterIcon}),A=function(Re){var Le,Te;_.value=Re,(Le=(Te=e.column).onFilterDropdownVisibleChange)===null||Le===void 0||Le.call(Te,Re)},O=ue(function(){return typeof o.value=="boolean"?o.value:_.value}),R=ue(function(){var Ke;return(Ke=e.filterState)===null||Ke===void 0?void 0:Ke.filteredKeys}),z=mr([]),F=function(Re){var Le=Re.selectedKeys;z.value=Le},N=function(Re,Le){var Te=Le.node,oe=Le.checked;e.filterMultiple?F({selectedKeys:Re}):F({selectedKeys:oe&&Te.key?[Te.key]:[]})};an(R,function(){!_.value||F({selectedKeys:R.value||[]})},{immediate:!0});var U=mr([]),G=qe(),q=function(Re){G.value=setTimeout(function(){U.value=Re})},V=function(){clearTimeout(G.value)};Er(function(){clearTimeout(G.value)});var Z=qe(""),Q=function(Re){var Le=Re.target.value;Z.value=Le};an(_,function(){_.value||(Z.value="")});var te=function(Re){var Le=e.column,Te=e.columnKey,oe=e.filterState,ze=Re&&Re.length?Re:null;if(ze===null&&(!oe||!oe.filteredKeys)||hy(ze,oe==null?void 0:oe.filteredKeys))return null;e.triggerFilter({column:Le,key:Te,filteredKeys:ze})},ie=function(){A(!1),te(z.value)},ve=function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{confirm:!1,closeDropdown:!1},Le=Re.confirm,Te=Re.closeDropdown;Le&&te([]),Te&&A(!1),Z.value="",z.value=[]},ce=function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{closeDropdown:!0},Le=Re.closeDropdown;Le&&A(!1),te(z.value)},de=function(Re){Re&&R.value!==void 0&&(z.value=R.value||[]),A(Re),!Re&&!S.value&&ie()},xe=hr("",e),De=xe.direction,ge=function(Re){if(Re.target.checked){var Le=T.value;z.value=Le}else z.value=[]},he=function Ke(Re){var Le=Re.filters;return(Le||[]).map(function(Te,oe){var ze=String(Te.value),Fe={title:Te.text,key:Te.value!==void 0?ze:oe};return Te.children&&(Fe.children=Ke({filters:Te.children})),Fe})},me=ue(function(){return he({filters:e.column.filters})}),Pe=ue(function(){return qt(Ie({},"".concat(e.dropdownPrefixCls,"-menu-without-submenu"),!DQ(e.column.filters||[])))}),He=function(){var Re=z.value,Le=e.column,Te=e.locale,oe=e.tablePrefixCls,ze=e.filterMultiple,Fe=e.dropdownPrefixCls,lt=e.getPopupContainer,vt=e.prefixCls;return(Le.filters||[]).length===0?j($u,{image:$u.PRESENTED_IMAGE_SIMPLE,description:Te.filterEmptyText,imageStyle:{height:24},style:{margin:0,padding:"16px 0"}},null):d.value==="tree"?j(Hn,null,[j(_A,{filterSearch:m.value,value:Z.value,onChange:Q,tablePrefixCls:oe,locale:Te},null),j("div",{class:"".concat(oe,"-filter-dropdown-tree")},[ze?j(es,{class:"".concat(oe,"-filter-dropdown-checkall"),onChange:ge,checked:Re.length===T.value.length,indeterminate:Re.length>0&&Re.length<T.value.length},{default:function(){return[Te.filterCheckall]}}):null,j(MQ,{checkable:!0,selectable:!1,blockNode:!0,multiple:ze,checkStrictly:!ze,class:"".concat(Fe,"-menu"),onCheck:N,checkedKeys:Re,selectedKeys:Re,showIcon:!1,treeData:me.value,autoExpandParent:!0,defaultExpandAll:!0,filterTreeNode:Z.value.trim()?function(kt){return OR(Z.value,kt.title)}:void 0},null)])]):j(Hn,null,[j(_A,{filterSearch:m.value,value:Z.value,onChange:Q,tablePrefixCls:oe,locale:Te},null),j(jo,{multiple:ze,prefixCls:"".concat(Fe,"-menu"),class:Pe.value,onClick:V,onSelect:F,onDeselect:F,selectedKeys:Re,getPopupContainer:lt,openKeys:U.value,onOpenChange:q},{default:function(){return DR({filters:Le.filters||[],filterSearch:m.value,prefixCls:vt,filteredKeys:z.value,filterMultiple:ze,searchValue:Z.value})}})])};return function(){var Ke,Re=e.tablePrefixCls,Le=e.prefixCls,Te=e.column,oe=e.dropdownPrefixCls,ze=e.locale,Fe=e.getPopupContainer,lt;if(typeof S.value=="function")lt=S.value({prefixCls:"".concat(oe,"-custom"),setSelectedKeys:function(ae){return F({selectedKeys:ae})},selectedKeys:z.value,confirm:ce,clearFilters:ve,filters:Te.filters,visible:O.value,column:Te.__originColumn__});else if(S.value)lt=S.value;else{var vt=z.value;lt=j(Hn,null,[He(),j("div",{class:"".concat(Le,"-dropdown-btns")},[j(Xi,{type:"link",size:"small",disabled:vt.length===0,onClick:function(){return ve()}},{default:function(){return[ze.filterReset]}}),j(Xi,{type:"primary",size:"small",onClick:ie},{default:function(){return[ze.filterConfirm]}})])])}var kt=j(KJ,{class:"".concat(Le,"-dropdown")},{default:function(){return[lt]}}),It;return typeof P.value=="function"?It=P.value({filtered:C.value,column:Te.__originColumn__}):P.value?It=P.value:It=j(VJ,null,null),j("div",{class:"".concat(Le,"-column")},[j("span",{class:"".concat(Re,"-column-title")},[(Ke=i.default)===null||Ke===void 0?void 0:Ke.call(i)]),j(Xu,{overlay:kt,trigger:["click"],visible:O.value,onVisibleChange:de,getPopupContainer:Fe,placement:De.value==="rtl"?"bottomLeft":"bottomRight"},{default:function(){return[j("span",{role:"button",tabindex:-1,class:qt("".concat(Le,"-trigger"),{active:C.value}),onClick:function(Be){Be.stopPropagation()}},[It])]}})])}}});function Xb(t,e,r){var i=[];return(t||[]).forEach(function(u,d){var m,o=Py(d,r),_=u.filterDropdown||(u==null||(m=u.slots)===null||m===void 0?void 0:m.filterDropdown)||u.customFilterDropdown;if(u.filters||_||"onFilter"in u)if("filteredValue"in u){var C=u.filteredValue;if(!_){var T,S;C=(T=(S=C)===null||S===void 0?void 0:S.map(String))!==null&&T!==void 0?T:C}i.push({column:u,key:Kd(u,o),filteredKeys:C,forceFiltered:u.filtered})}else i.push({column:u,key:Kd(u,o),filteredKeys:e&&u.defaultFilteredValue?u.defaultFilteredValue:void 0,forceFiltered:u.filtered});"children"in u&&(i=[].concat(bn(i),bn(Xb(u.children,e,o))))}),i}function RR(t,e,r,i,u,d,m,o){return r.map(function(_,C){var T,S=Py(C,o),P=_.filterMultiple,A=P===void 0?!0:P,O=_.filterMode,R=_.filterSearch,z=_,F=_.filterDropdown||(_==null||(T=_.slots)===null||T===void 0?void 0:T.filterDropdown)||_.customFilterDropdown;if(z.filters||F){var N=Kd(z,S),U=i.find(function(G){var q=G.key;return N===q});z=H(H({},z),{},{title:function(q){return j(RQ,{tablePrefixCls:t,prefixCls:"".concat(t,"-filter"),dropdownPrefixCls:e,column:z,columnKey:N,filterState:U,filterMultiple:A,filterMode:O,filterSearch:R,triggerFilter:u,locale:m,getPopupContainer:d},{default:function(){return[cC(_.title,q)]}})}})}return"children"in z&&(z=H(H({},z),{},{children:RR(t,e,z.children,i,u,d,m,S)})),z})}function Ay(t){var e=[];return(t||[]).forEach(function(r){var i=r.value,u=r.children;e.push(i),u&&(e=[].concat(bn(e),bn(Ay(u))))}),e}function OA(t){var e={};return t.forEach(function(r){var i,u=r.key,d=r.filteredKeys,m=r.column,o=m.filterDropdown||(m==null||(i=m.slots)===null||i===void 0?void 0:i.filterDropdown)||m.customFilterDropdown,_=m.filters;if(o)e[u]=d||null;else if(Array.isArray(d)){var C=Ay(_);e[u]=C.filter(function(T){return d.includes(String(T))})}else e[u]=null}),e}function DA(t,e){return e.reduce(function(r,i){var u=i.column,d=u.onFilter,m=u.filters,o=i.filteredKeys;return d&&o&&o.length?r.filter(function(_){return o.some(function(C){var T=Ay(m),S=T.findIndex(function(A){return String(A)===String(C)}),P=S!==-1?T[S]:C;return d(P,_)})}):r},t)}function zQ(t){var e=t.prefixCls,r=t.dropdownPrefixCls,i=t.mergedColumns,u=t.locale,d=t.onFilterChange,m=t.getPopupContainer,o=Ls(Xb(i.value,!0)),_=zn(o,2),C=_[0],T=_[1],S=ue(function(){var R=Xb(i.value,!1),z=R.every(function(N){var U=N.filteredKeys;return U===void 0});if(z)return C.value;var F=R.every(function(N){var U=N.filteredKeys;return U!==void 0});return Ni(z||F,"Table","`FilteredKeys` should all be controlled or not controlled."),R}),P=ue(function(){return OA(S.value)}),A=function(z){var F=S.value.filter(function(N){var U=N.key;return U!==z.key});F.push(z),T(F),d(OA(F),F)},O=function(z){return RR(e.value,r.value,z,S.value,A,m.value,u.value)};return[O,S,P]}function zR(t,e){return t.map(function(r){var i=H({},r);return i.title=cC(i.title,e),"children"in i&&(i.children=zR(i.children,e)),i})}function LQ(t){var e=function(i){return zR(i,t.value)};return[e]}function FQ(t){return function(r){var i,u=r.prefixCls,d=r.onExpand,m=r.record,o=r.expanded,_=r.expandable,C="".concat(u,"-row-expand-icon");return j("button",{type:"button",onClick:function(S){d(m,S),S.stopPropagation()},class:qt(C,(i={},Ie(i,"".concat(C,"-spaced"),!_),Ie(i,"".concat(C,"-expanded"),_&&o),Ie(i,"".concat(C,"-collapsed"),_&&!o),i)),"aria-label":o?t.collapse:t.expand},null)}}function LR(t,e){var r=e.value;return t.map(function(i){var u;if(i===Ds||i===Pl)return i;var d=H({},i),m=d.slots,o=m===void 0?{}:m;return d.__originColumn__=i,Ni(!("slots"in d),"Table","`column.slots` is deprecated. Please use `v-slot:headerCell` `v-slot:bodyCell` instead."),Object.keys(o).forEach(function(_){var C=o[_];d[_]===void 0&&r[C]&&(d[_]=r[C])}),e.value.headerCell&&!((u=i.slots)!==null&&u!==void 0&&u.title)&&(d.title=ck(e.value,"headerCell",{title:i.title,column:i},function(){return[i.title]})),"children"in d&&(d.children=LR(d.children,e)),d})}function BQ(t){var e=function(i){return LR(i,t)};return[e]}var NQ=[],$Q=function(){return{prefixCls:{type:String,default:void 0},columns:{type:Array,default:void 0},rowKey:{type:[String,Function],default:void 0},tableLayout:{type:String,default:void 0},rowClassName:{type:[String,Function],default:void 0},title:{type:Function,default:void 0},footer:{type:Function,default:void 0},id:{type:String,default:void 0},showHeader:{type:Boolean,default:void 0},components:{type:Object,default:void 0},customRow:{type:Function,default:void 0},customHeaderRow:{type:Function,default:void 0},direction:{type:String,default:void 0},expandFixed:{type:[Boolean,String],default:void 0},expandColumnWidth:{type:Number,default:void 0},expandedRowKeys:{type:Array,default:void 0},defaultExpandedRowKeys:{type:Array,default:void 0},expandedRowRender:{type:Function,default:void 0},expandRowByClick:{type:Boolean,default:void 0},expandIcon:{type:Function,default:void 0},onExpand:{type:Function,default:void 0},onExpandedRowsChange:{type:Function,default:void 0},"onUpdate:expandedRowKeys":{type:Function,default:void 0},defaultExpandAllRows:{type:Boolean,default:void 0},indentSize:{type:Number,default:void 0},expandIconColumnIndex:{type:Number,default:void 0},showExpandColumn:{type:Boolean,default:void 0},expandedRowClassName:{type:Function,default:void 0},childrenColumnName:{type:String,default:void 0},rowExpandable:{type:Function,default:void 0},sticky:{type:[Boolean,Object],default:void 0},dropdownPrefixCls:String,dataSource:{type:Array,default:void 0},pagination:{type:[Boolean,Object],default:void 0},loading:{type:[Boolean,Object],default:void 0},size:{type:String,default:void 0},bordered:Boolean,locale:{type:Object,default:void 0},onChange:{type:Function,default:void 0},onResizeColumn:{type:Function,default:void 0},rowSelection:{type:Object,default:void 0},getPopupContainer:{type:Function,default:void 0},scroll:{type:Object,default:void 0},sortDirections:{type:Array,default:void 0},showSorterTooltip:{type:[Boolean,Object],default:!0},contextSlots:{type:Object},transformCellText:{type:Function}}},jQ=jt({name:"InteralTable",inheritAttrs:!1,props:Di($Q(),{rowKey:"key"}),slots:["emptyText","expandIcon","title","footer","summary","expandedRowRender","bodyCell","headerCell","customFilterIcon","customFilterDropdown"],setup:function(e,r){var i=r.attrs,u=r.slots,d=r.expose,m=r.emit;Ni(!(typeof e.rowKey=="function"&&e.rowKey.length>1),"Table","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected."),kY(ue(function(){return e.contextSlots})),OY({onResizeColumn:function(mt,St){m("resizeColumn",mt,St)}});var o=V3(),_=ue(function(){var zt=new Set(Object.keys(o.value).filter(function(mt){return o.value[mt]}));return e.columns.filter(function(mt){return!mt.responsive||mt.responsive.some(function(St){return zt.has(St)})})}),C=hr("table",e),T=C.size,S=C.renderEmpty,P=C.direction,A=C.prefixCls,O=C.configProvider,R=ue(function(){return e.transformCellText||O.transformCellText}),z=Lp("Table",Ld.Table,Nr(e,"locale")),F=zn(z,1),N=F[0],U=ue(function(){return e.dataSource||NQ}),G=ue(function(){return O.getPrefixCls("dropdown",e.dropdownPrefixCls)}),q=ue(function(){return e.childrenColumnName||"children"}),V=ue(function(){return U.value.some(function(zt){return zt==null?void 0:zt[q.value]})?"nest":e.expandedRowRender?"row":null}),Z=Or({body:null}),Q=function(mt){kr(Z,mt)},te=ue(function(){return typeof e.rowKey=="function"?e.rowKey:function(zt){return zt==null?void 0:zt[e.rowKey]}}),ie=TJ(U,q,te),ve=zn(ie,1),ce=ve[0],de={},xe=function(mt,St){var yt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Wt=e.pagination,tn=e.scroll,on=e.onChange,Tt=H(H({},de),mt);yt&&(de.resetPagination(),Tt.pagination.current&&(Tt.pagination.current=1),Wt&&Wt.onChange&&Wt.onChange(1,Tt.pagination.pageSize)),tn&&tn.scrollToFirstRowOnChange!==!1&&Z.body&&uj(0,{getContainer:function(){return Z.body}}),on==null||on(Tt.pagination,Tt.filters,Tt.sorter,{currentDataSource:DA(Wb(U.value,Tt.sorterStates,q.value),Tt.filterStates),action:St})},De=function(mt,St){xe({sorter:mt,sorterStates:St},"sort",!1)},ge=BJ({prefixCls:A,mergedColumns:_,onSorterChange:De,sortDirections:ue(function(){return e.sortDirections||["ascend","descend"]}),tableLocale:N,showSorterTooltip:Nr(e,"showSorterTooltip")}),he=zn(ge,4),me=he[0],Pe=he[1],He=he[2],Ke=he[3],Re=ue(function(){return Wb(U.value,Pe.value,q.value)}),Le=function(mt,St){xe({filters:mt,filterStates:St},"filter",!0)},Te=zQ({prefixCls:A,locale:N,dropdownPrefixCls:G,mergedColumns:_,onFilterChange:Le,getPopupContainer:Nr(e,"getPopupContainer")}),oe=zn(Te,3),ze=oe[0],Fe=oe[1],lt=oe[2],vt=ue(function(){return DA(Re.value,Fe.value)}),kt=BQ(Nr(e,"contextSlots")),It=zn(kt,1),se=It[0],ae=ue(function(){return H({},He.value)}),Be=LQ(ae),st=zn(Be,1),ut=st[0],bt=function(mt,St){xe({pagination:H(H({},de.pagination),{},{current:mt,pageSize:St})},"paginate")},At=SJ(ue(function(){return vt.value.length}),Nr(e,"pagination"),bt),_t=zn(At,2),nt=_t[0],tt=_t[1];vr(function(){de.sorter=Ke.value,de.sorterStates=Pe.value,de.filters=lt.value,de.filterStates=Fe.value,de.pagination=e.pagination===!1?{}:wJ(e.pagination,nt.value),de.resetPagination=tt});var pt=ue(function(){if(e.pagination===!1||!nt.value.pageSize)return vt.value;var zt=nt.value,mt=zt.current,St=mt===void 0?1:mt,yt=zt.total,Wt=zt.pageSize,tn=Wt===void 0?Vb:Wt;return Ni(St>0,"Table","`current` should be positive number."),vt.value.length<yt?vt.value.length>tn?vt.value.slice((St-1)*tn,St*tn):vt.value:vt.value.slice((St-1)*tn,St*tn)});vr(function(){gr(function(){var zt=nt.value,mt=zt.total,St=zt.pageSize,yt=St===void 0?Vb:St;vt.value.length<mt&&vt.value.length>yt&&Ni(!1,"Table","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode.")})},{flush:"post"});var dt=ue(function(){return e.showExpandColumn===!1?-1:V.value==="nest"&&e.expandIconColumnIndex===void 0?e.rowSelection?1:0:e.expandIconColumnIndex>0&&e.rowSelection?e.expandIconColumnIndex-1:e.expandIconColumnIndex}),Ot=qe();an(function(){return e.rowSelection},function(){Ot.value=e.rowSelection?H({},e.rowSelection):e.rowSelection},{deep:!0,immediate:!0});var Kt=IJ(Ot,{prefixCls:A,data:vt,pageData:pt,getRowKey:te,getRecordByKey:ce,expandType:V,childrenColumnName:q,locale:N,getPopupContainer:ue(function(){return e.getPopupContainer})}),cn=zn(Kt,2),Cn=cn[0],Rt=cn[1],ht=function(mt,St,yt){var Wt,tn=e.rowClassName;return typeof tn=="function"?Wt=qt(tn(mt,St,yt)):Wt=qt(tn),qt(Ie({},"".concat(A.value,"-row-selected"),Rt.value.has(te.value(mt,St))),Wt)};d({selectedKeySet:Rt});var Ht=ue(function(){return typeof e.indentSize=="number"?e.indentSize:15}),wn=function(mt){var St=ut(Cn(ze(me(se(mt)))));return St};return function(){var zt,mt,St=e.expandIcon,yt=St===void 0?u.expandIcon||FQ(N.value):St,Wt=e.pagination,tn=e.loading,on=e.bordered,Tt,Et;if(Wt!==!1&&(zt=nt.value)!==null&&zt!==void 0&&zt.total){var sn;nt.value.size?sn=nt.value.size:sn=T.value==="small"||T.value==="middle"?"small":void 0;var xn=function(Oe){return j(uY,H(H({},nt.value),{},{class:["".concat(A.value,"-pagination ").concat(A.value,"-pagination-").concat(Oe),nt.value.class],size:sn}),null)},An=P.value==="rtl"?"left":"right",Mn=nt.value.position;if(Mn!==null&&Array.isArray(Mn)){var ir=Mn.find(function(be){return be.indexOf("top")!==-1}),Dn=Mn.find(function(be){return be.indexOf("bottom")!==-1}),lr=Mn.every(function(be){return"".concat(be)==="none"});!ir&&!Dn&&!lr&&(Et=xn(An)),ir&&(Tt=xn(ir.toLowerCase().replace("top",""))),Dn&&(Et=xn(Dn.toLowerCase().replace("bottom","")))}else Et=xn(An)}var Ce;typeof tn=="boolean"?Ce={spinning:tn}:On(tn)==="object"&&(Ce=H({spinning:!0},tn));var Y=qt("".concat(A.value,"-wrapper"),Ie({},"".concat(A.value,"-wrapper-rtl"),P.value==="rtl"),i.class),ne=hi(e,["columns"]);return j("div",{class:Y,style:i.style},[j(Md,H({spinning:!1},Ce),{default:function(){return[Tt,j(bJ,H(H(H({},i),ne),{},{expandedRowKeys:e.expandedRowKeys,defaultExpandedRowKeys:e.defaultExpandedRowKeys,expandIconColumnIndex:dt.value,indentSize:Ht.value,expandIcon:yt,columns:_.value,direction:P.value,prefixCls:A.value,class:qt((mt={},Ie(mt,"".concat(A.value,"-middle"),T.value==="middle"),Ie(mt,"".concat(A.value,"-small"),T.value==="small"),Ie(mt,"".concat(A.value,"-bordered"),on),Ie(mt,"".concat(A.value,"-empty"),U.value.length===0),mt)),data:pt.value,rowKey:te.value,rowClassName:ht,internalHooks:jb,internalRefs:Z,onUpdateInternalRefs:Q,transformColumns:wn,transformCellText:R.value}),H(H({},u),{},{emptyText:function(){var Ve,it;return((Ve=u.emptyText)===null||Ve===void 0?void 0:Ve.call(u))||((it=e.locale)===null||it===void 0?void 0:it.emptyText)||S.value("Table")}})),Et]}})])}}}),VQ=jt({name:"ATable",inheritAttrs:!1,setup:function(e,r){var i=r.attrs,u=r.slots,d=r.expose,m=qe();return d({table:m}),function(){var o,_=i,C=_.columns||IR((o=u.default)===null||o===void 0?void 0:o.call(u));return j(jQ,H(H({ref:m},i),{},{columns:C||[],expandedRowRender:u.expandedRowRender,contextSlots:H({},u)}),u)}}});const dx=VQ,fx=jt({name:"ATableColumn",slots:["title","filterIcon"],render:function(){return null}}),hx=jt({name:"ATableColumnGroup",slots:["title"],__ANT_TABLE_COLUMN_GROUP:!0,render:function(){return null}});var Yb=jt(H(H({},lJ),{},{name:"ATableSummaryRow"})),Jb=jt(H(H({},dJ),{},{name:"ATableSummaryCell"})),px=kr(fJ,{Cell:Jb,Row:Yb,name:"ATableSummary"});const UQ=kr(dx,{SELECTION_ALL:Ub,SELECTION_INVERT:Kb,SELECTION_NONE:Gb,SELECTION_COLUMN:Ds,EXPAND_COLUMN:Pl,Column:fx,ColumnGroup:hx,Summary:px,install:function(e){return e.component(px.name,px),e.component(Jb.name,Jb),e.component(Yb.name,Yb),e.component(dx.name,dx),e.component(fx.name,fx),e.component(hx.name,hx),e}}),KQ={props:{title:String,msg:String},emits:["emitItem"],setup(t,e){const r=qe(!1),i=qe({}),u=m=>{r.value=!r.value,m&&(i.value=m)},d=()=>{r.value=!1,i&&e.emit("emitItem",{...i.value})};return e.expose({toggleModal:u}),{visible:r,toggleModal:u,handleOk:d}}},$l=(t,e)=>{const r=t.__vccOpts||t;for(const[i,u]of e)r[i]=u;return r};function GQ(t,e,r,i,u,d){const m=Vo;return li(),$o("div",null,[j(m,{visible:i.visible,"onUpdate:visible":e[0]||(e[0]=o=>i.visible=o),title:r.title,onOk:i.handleOk},{default:pr(()=>[oo("p",null,Zv(r.msg),1)]),_:1},8,["visible","title","onOk"])])}const FR=$l(KQ,[["render",GQ]]),rp=/^[a-z0-9]+(-[a-z0-9]+)*$/,My=(t,e,r,i="")=>{const u=t.split(":");if(t.slice(0,1)==="@"){if(u.length<2||u.length>3)return null;i=u.shift().slice(1)}if(u.length>3||!u.length)return null;if(u.length>1){const o=u.pop(),_=u.pop(),C={provider:u.length>0?u[0]:i,prefix:_,name:o};return e&&!fg(C)?null:C}const d=u[0],m=d.split("-");if(m.length>1){const o={provider:i,prefix:m.shift(),name:m.join("-")};return e&&!fg(o)?null:o}if(r&&i===""){const o={provider:i,prefix:"",name:d};return e&&!fg(o,r)?null:o}return null},fg=(t,e)=>t?!!((t.provider===""||t.provider.match(rp))&&(e&&t.prefix===""||t.prefix.match(rp))&&t.name.match(rp)):!1,BR=Object.freeze({left:0,top:0,width:16,height:16}),jg=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ky=Object.freeze({...BR,...jg}),Qb=Object.freeze({...ky,body:"",hidden:!1});function HQ(t,e){const r={};!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0);const i=((t.rotate||0)+(e.rotate||0))%4;return i&&(r.rotate=i),r}function RA(t,e){const r=HQ(t,e);for(const i in Qb)i in jg?i in t&&!(i in r)&&(r[i]=jg[i]):i in e?r[i]=e[i]:i in t&&(r[i]=t[i]);return r}function qQ(t,e){const r=t.icons,i=t.aliases||{},u=Object.create(null);function d(m){if(r[m])return u[m]=[];if(!(m in u)){u[m]=null;const o=i[m]&&i[m].parent,_=o&&d(o);_&&(u[m]=[o].concat(_))}return u[m]}return(e||Object.keys(r).concat(Object.keys(i))).forEach(d),u}function WQ(t,e,r){const i=t.icons,u=t.aliases||{};let d={};function m(o){d=RA(i[o]||u[o],d)}return m(e),r.forEach(m),RA(t,d)}function NR(t,e){const r=[];if(typeof t!="object"||typeof t.icons!="object")return r;t.not_found instanceof Array&&t.not_found.forEach(u=>{e(u,null),r.push(u)});const i=qQ(t);for(const u in i){const d=i[u];d&&(e(u,WQ(t,u,d)),r.push(u))}return r}const ZQ={provider:"",aliases:{},not_found:{},...BR};function mx(t,e){for(const r in e)if(r in t&&typeof t[r]!=typeof e[r])return!1;return!0}function $R(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!mx(t,ZQ))return null;const r=e.icons;for(const u in r){const d=r[u];if(!u.match(rp)||typeof d.body!="string"||!mx(d,Qb))return null}const i=e.aliases||{};for(const u in i){const d=i[u],m=d.parent;if(!u.match(rp)||typeof m!="string"||!r[m]&&!i[m]||!mx(d,Qb))return null}return e}const zA=Object.create(null);function XQ(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function tc(t,e){const r=zA[t]||(zA[t]=Object.create(null));return r[e]||(r[e]=XQ(t,e))}function _C(t,e){return $R(e)?NR(e,(r,i)=>{i?t.icons[r]=i:t.missing.add(r)}):[]}function YQ(t,e,r){try{if(typeof r.body=="string")return t.icons[e]={...r},!0}catch{}return!1}let Ap=!1;function jR(t){return typeof t=="boolean"&&(Ap=t),Ap}function JQ(t){const e=typeof t=="string"?My(t,!0,Ap):t;if(e){const r=tc(e.provider,e.prefix),i=e.name;return r.icons[i]||(r.missing.has(i)?null:void 0)}}function QQ(t,e){const r=My(t,!0,Ap);if(!r)return!1;const i=tc(r.provider,r.prefix);return YQ(i,r.name,e)}function VR(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),Ap&&!e&&!t.prefix){let u=!1;return $R(t)&&(t.prefix="",NR(t,(d,m)=>{m&&QQ(d,m)&&(u=!0)})),u}const r=t.prefix;if(!fg({provider:e,prefix:r,name:"a"}))return!1;const i=tc(e,r);return!!_C(i,t)}const UR=Object.freeze({width:null,height:null}),KR=Object.freeze({...UR,...jg}),eee=/(-?[0-9.]*[0-9]+[0-9.]*)/g,tee=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function LA(t,e,r){if(e===1)return t;if(r=r||100,typeof t=="number")return Math.ceil(t*e*r)/r;if(typeof t!="string")return t;const i=t.split(eee);if(i===null||!i.length)return t;const u=[];let d=i.shift(),m=tee.test(d);for(;;){if(m){const o=parseFloat(d);isNaN(o)?u.push(d):u.push(Math.ceil(o*e*r)/r)}else u.push(d);if(d=i.shift(),d===void 0)return u.join("");m=!m}}function nee(t,e){const r={...ky,...t},i={...KR,...e},u={left:r.left,top:r.top,width:r.width,height:r.height};let d=r.body;[r,i].forEach(A=>{const O=[],R=A.hFlip,z=A.vFlip;let F=A.rotate;R?z?F+=2:(O.push("translate("+(u.width+u.left).toString()+" "+(0-u.top).toString()+")"),O.push("scale(-1 1)"),u.top=u.left=0):z&&(O.push("translate("+(0-u.left).toString()+" "+(u.height+u.top).toString()+")"),O.push("scale(1 -1)"),u.top=u.left=0);let N;switch(F<0&&(F-=Math.floor(F/4)*4),F=F%4,F){case 1:N=u.height/2+u.top,O.unshift("rotate(90 "+N.toString()+" "+N.toString()+")");break;case 2:O.unshift("rotate(180 "+(u.width/2+u.left).toString()+" "+(u.height/2+u.top).toString()+")");break;case 3:N=u.width/2+u.left,O.unshift("rotate(-90 "+N.toString()+" "+N.toString()+")");break}F%2===1&&(u.left!==u.top&&(N=u.left,u.left=u.top,u.top=N),u.width!==u.height&&(N=u.width,u.width=u.height,u.height=N)),O.length&&(d='<g transform="'+O.join(" ")+'">'+d+"</g>")});const m=i.width,o=i.height,_=u.width,C=u.height;let T,S;return m===null?(S=o===null?"1em":o==="auto"?C:o,T=LA(S,_/C)):(T=m==="auto"?_:m,S=o===null?LA(T,C/_):o==="auto"?C:o),{attributes:{width:T.toString(),height:S.toString(),viewBox:u.left.toString()+" "+u.top.toString()+" "+_.toString()+" "+C.toString()},body:d}}const ree=/\sid="(\S+)"/g,iee="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let oee=0;function aee(t,e=iee){const r=[];let i;for(;i=ree.exec(t);)r.push(i[1]);return r.length&&r.forEach(u=>{const d=typeof e=="function"?e(u):e+(oee++).toString(),m=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+m+')([")]|\\.[a-z])',"g"),"$1"+d+"$3")}),t}const e1=Object.create(null);function see(t,e){e1[t]=e}function t1(t){return e1[t]||e1[""]}function xC(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const bC=Object.create(null),Bh=["https://api.simplesvg.com","https://api.unisvg.com"],hg=[];for(;Bh.length>0;)Bh.length===1||Math.random()>.5?hg.push(Bh.shift()):hg.push(Bh.pop());bC[""]=xC({resources:["https://api.iconify.design"].concat(hg)});function lee(t,e){const r=xC(e);return r===null?!1:(bC[t]=r,!0)}function wC(t){return bC[t]}const uee=()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}};let FA=uee();function cee(t,e){const r=wC(t);if(!r)return 0;let i;if(!r.maxURL)i=0;else{let u=0;r.resources.forEach(m=>{u=Math.max(u,m.length)});const d=e+".json?icons=";i=r.maxURL-u-r.path.length-d.length}return i}function dee(t){return t===404}const fee=(t,e,r)=>{const i=[],u=cee(t,e),d="icons";let m={type:d,provider:t,prefix:e,icons:[]},o=0;return r.forEach((_,C)=>{o+=_.length+1,o>=u&&C>0&&(i.push(m),m={type:d,provider:t,prefix:e,icons:[]},o=_.length),m.icons.push(_)}),i.push(m),i};function hee(t){if(typeof t=="string"){const e=wC(t);if(e)return e.path}return"/"}const pee=(t,e,r)=>{if(!FA){r("abort",424);return}let i=hee(e.provider);switch(e.type){case"icons":{const d=e.prefix,o=e.icons.join(","),_=new URLSearchParams({icons:o});i+=d+".json?"+_.toString();break}case"custom":{const d=e.uri;i+=d.slice(0,1)==="/"?d.slice(1):d;break}default:r("abort",400);return}let u=503;FA(t+i).then(d=>{const m=d.status;if(m!==200){setTimeout(()=>{r(dee(m)?"abort":"next",m)});return}return u=501,d.json()}).then(d=>{if(typeof d!="object"||d===null){setTimeout(()=>{r("next",u)});return}setTimeout(()=>{r("success",d)})}).catch(()=>{r("next",u)})},mee={prepare:fee,send:pee};function vee(t){const e={loaded:[],missing:[],pending:[]},r=Object.create(null);t.sort((u,d)=>u.provider!==d.provider?u.provider.localeCompare(d.provider):u.prefix!==d.prefix?u.prefix.localeCompare(d.prefix):u.name.localeCompare(d.name));let i={provider:"",prefix:"",name:""};return t.forEach(u=>{if(i.name===u.name&&i.prefix===u.prefix&&i.provider===u.provider)return;i=u;const d=u.provider,m=u.prefix,o=u.name,_=r[d]||(r[d]=Object.create(null)),C=_[m]||(_[m]=tc(d,m));let T;o in C.icons?T=e.loaded:m===""||C.missing.has(o)?T=e.missing:T=e.pending;const S={provider:d,prefix:m,name:o};T.push(S)}),e}function GR(t,e){t.forEach(r=>{const i=r.loaderCallbacks;i&&(r.loaderCallbacks=i.filter(u=>u.id!==e))})}function gee(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let r=!1;const i=t.provider,u=t.prefix;e.forEach(d=>{const m=d.icons,o=m.pending.length;m.pending=m.pending.filter(_=>{if(_.prefix!==u)return!0;const C=_.name;if(t.icons[C])m.loaded.push({provider:i,prefix:u,name:C});else if(t.missing.has(C))m.missing.push({provider:i,prefix:u,name:C});else return r=!0,!0;return!1}),m.pending.length!==o&&(r||GR([t],d.id),d.callback(m.loaded.slice(0),m.missing.slice(0),m.pending.slice(0),d.abort))})}))}let yee=0;function _ee(t,e,r){const i=yee++,u=GR.bind(null,r,i);if(!e.pending.length)return u;const d={id:i,icons:e,callback:t,abort:u};return r.forEach(m=>{(m.loaderCallbacks||(m.loaderCallbacks=[])).push(d)}),u}function xee(t,e=!0,r=!1){const i=[];return t.forEach(u=>{const d=typeof u=="string"?My(u,e,r):u;d&&i.push(d)}),i}var bee={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function wee(t,e,r,i){const u=t.resources.length,d=t.random?Math.floor(Math.random()*u):t.index;let m;if(t.random){let V=t.resources.slice(0);for(m=[];V.length>1;){const Z=Math.floor(Math.random()*V.length);m.push(V[Z]),V=V.slice(0,Z).concat(V.slice(Z+1))}m=m.concat(V)}else m=t.resources.slice(d).concat(t.resources.slice(0,d));const o=Date.now();let _="pending",C=0,T,S=null,P=[],A=[];typeof i=="function"&&A.push(i);function O(){S&&(clearTimeout(S),S=null)}function R(){_==="pending"&&(_="aborted"),O(),P.forEach(V=>{V.status==="pending"&&(V.status="aborted")}),P=[]}function z(V,Z){Z&&(A=[]),typeof V=="function"&&A.push(V)}function F(){return{startTime:o,payload:e,status:_,queriesSent:C,queriesPending:P.length,subscribe:z,abort:R}}function N(){_="failed",A.forEach(V=>{V(void 0,T)})}function U(){P.forEach(V=>{V.status==="pending"&&(V.status="aborted")}),P=[]}function G(V,Z,Q){const te=Z!=="success";switch(P=P.filter(ie=>ie!==V),_){case"pending":break;case"failed":if(te||!t.dataAfterTimeout)return;break;default:return}if(Z==="abort"){T=Q,N();return}if(te){T=Q,P.length||(m.length?q():N());return}if(O(),U(),!t.random){const ie=t.resources.indexOf(V.resource);ie!==-1&&ie!==t.index&&(t.index=ie)}_="completed",A.forEach(ie=>{ie(Q)})}function q(){if(_!=="pending")return;O();const V=m.shift();if(V===void 0){if(P.length){S=setTimeout(()=>{O(),_==="pending"&&(U(),N())},t.timeout);return}N();return}const Z={status:"pending",resource:V,callback:(Q,te)=>{G(Z,Q,te)}};P.push(Z),C++,S=setTimeout(q,t.rotate),r(V,e,Z.callback)}return setTimeout(q),F}function HR(t){const e={...bee,...t};let r=[];function i(){r=r.filter(o=>o().status==="pending")}function u(o,_,C){const T=wee(e,o,_,(S,P)=>{i(),C&&C(S,P)});return r.push(T),T}function d(o){return r.find(_=>o(_))||null}return{query:u,find:d,setIndex:o=>{e.index=o},getIndex:()=>e.index,cleanup:i}}function BA(){}const vx=Object.create(null);function Cee(t){if(!vx[t]){const e=wC(t);if(!e)return;const r=HR(e),i={config:e,redundancy:r};vx[t]=i}return vx[t]}function See(t,e,r){let i,u;if(typeof t=="string"){const d=t1(t);if(!d)return r(void 0,424),BA;u=d.send;const m=Cee(t);m&&(i=m.redundancy)}else{const d=xC(t);if(d){i=HR(d);const m=t.resources?t.resources[0]:"",o=t1(m);o&&(u=o.send)}}return!i||!u?(r(void 0,424),BA):i.query(e,u,r)().abort}const NA="iconify2",Mp="iconify",qR=Mp+"-count",$A=Mp+"-version",WR=36e5,Tee=168;function n1(t,e){try{return t.getItem(e)}catch{}}function CC(t,e,r){try{return t.setItem(e,r),!0}catch{}}function jA(t,e){try{t.removeItem(e)}catch{}}function r1(t,e){return CC(t,qR,e.toString())}function i1(t){return parseInt(n1(t,qR))||0}const Oy={local:!0,session:!0},ZR={local:new Set,session:new Set};let SC=!1;function Eee(t){SC=t}let Wv=typeof window>"u"?{}:window;function XR(t){const e=t+"Storage";try{if(Wv&&Wv[e]&&typeof Wv[e].length=="number")return Wv[e]}catch{}Oy[t]=!1}function YR(t,e){const r=XR(t);if(!r)return;const i=n1(r,$A);if(i!==NA){if(i){const o=i1(r);for(let _=0;_<o;_++)jA(r,Mp+_.toString())}CC(r,$A,NA),r1(r,0);return}const u=Math.floor(Date.now()/WR)-Tee,d=o=>{const _=Mp+o.toString(),C=n1(r,_);if(typeof C=="string"){try{const T=JSON.parse(C);if(typeof T=="object"&&typeof T.cached=="number"&&T.cached>u&&typeof T.provider=="string"&&typeof T.data=="object"&&typeof T.data.prefix=="string"&&e(T,o))return!0}catch{}jA(r,_)}};let m=i1(r);for(let o=m-1;o>=0;o--)d(o)||(o===m-1?(m--,r1(r,m)):ZR[t].add(o))}function JR(){if(!SC){Eee(!0);for(const t in Oy)YR(t,e=>{const r=e.data,i=e.provider,u=r.prefix,d=tc(i,u);if(!_C(d,r).length)return!1;const m=r.lastModified||-1;return d.lastModifiedCached=d.lastModifiedCached?Math.min(d.lastModifiedCached,m):m,!0})}}function Iee(t,e){const r=t.lastModifiedCached;if(r&&r>=e)return r===e;if(t.lastModifiedCached=e,r)for(const i in Oy)YR(i,u=>{const d=u.data;return u.provider!==t.provider||d.prefix!==t.prefix||d.lastModified===e});return!0}function Pee(t,e){SC||JR();function r(i){let u;if(!Oy[i]||!(u=XR(i)))return;const d=ZR[i];let m;if(d.size)d.delete(m=Array.from(d).shift());else if(m=i1(u),!r1(u,m+1))return;const o={cached:Math.floor(Date.now()/WR),provider:t.provider,data:e};return CC(u,Mp+m.toString(),JSON.stringify(o))}e.lastModified&&!Iee(t,e.lastModified)||!Object.keys(e.icons).length||(e.not_found&&(e=Object.assign({},e),delete e.not_found),r("local")||r("session"))}function VA(){}function Aee(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,gee(t)}))}function Mee(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:r,prefix:i}=t,u=t.iconsToLoad;delete t.iconsToLoad;let d;if(!u||!(d=t1(r)))return;d.prepare(r,i,u).forEach(o=>{See(r,o,(_,C)=>{if(typeof _!="object"){if(C!==404)return;o.icons.forEach(T=>{t.missing.add(T)})}else try{const T=_C(t,_);if(!T.length)return;const S=t.pendingIcons;S&&T.forEach(P=>{S.delete(P)}),Pee(t,_)}catch(T){console.error(T)}Aee(t)})})}))}const kee=(t,e)=>{const r=xee(t,!0,jR()),i=vee(r);if(!i.pending.length){let _=!0;return e&&setTimeout(()=>{_&&e(i.loaded,i.missing,i.pending,VA)}),()=>{_=!1}}const u=Object.create(null),d=[];let m,o;return i.pending.forEach(_=>{const{provider:C,prefix:T}=_;if(T===o&&C===m)return;m=C,o=T,d.push(tc(C,T));const S=u[C]||(u[C]=Object.create(null));S[T]||(S[T]=[])}),i.pending.forEach(_=>{const{provider:C,prefix:T,name:S}=_,P=tc(C,T),A=P.pendingIcons||(P.pendingIcons=new Set);A.has(S)||(A.add(S),u[C][T].push(S))}),d.forEach(_=>{const{provider:C,prefix:T}=_;u[C][T].length&&Mee(_,u[C][T])}),e?_ee(e,i,d):VA};function Oee(t,e){const r={...t};for(const i in e){const u=e[i],d=typeof u;i in UR?(u===null||u&&(d==="string"||d==="number"))&&(r[i]=u):d===typeof r[i]&&(r[i]=i==="rotate"?u%4:u)}return r}const Dee=/[\s,]+/;function Ree(t,e){e.split(Dee).forEach(r=>{switch(r.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function zee(t,e=0){const r=t.replace(/^-?[0-9.]*/,"");function i(u){for(;u<0;)u+=4;return u%4}if(r===""){const u=parseInt(t);return isNaN(u)?0:i(u)}else if(r!==t){let u=0;switch(r){case"%":u=25;break;case"deg":u=90}if(u){let d=parseFloat(t.slice(0,t.length-r.length));return isNaN(d)?0:(d=d/u,d%1===0?i(d):0)}}return e}function Lee(t,e){let r=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)r+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}function Fee(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Bee(t){return'url("data:image/svg+xml,'+Fee(t)+'")'}const UA={...KR,inline:!1},Nee={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},$ee={display:"inline-block"},o1={backgroundColor:"currentColor"},QR={backgroundColor:"transparent"},KA={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},GA={webkitMask:o1,mask:o1,background:QR};for(const t in GA){const e=GA[t];for(const r in KA)e[t+r]=KA[r]}const pg={};["horizontal","vertical"].forEach(t=>{const e=t.slice(0,1)+"Flip";pg[t+"-flip"]=e,pg[t.slice(0,1)+"-flip"]=e,pg[t+"Flip"]=e});function HA(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const qA=(t,e)=>{const r=Oee(UA,e),i={...Nee},u=e.mode||"svg",d={},m=e.style,o=typeof m=="object"&&!(m instanceof Array)?m:{};for(let R in e){const z=e[R];if(z!==void 0)switch(R){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":r[R]=z===!0||z==="true"||z===1;break;case"flip":typeof z=="string"&&Ree(r,z);break;case"color":d.color=z;break;case"rotate":typeof z=="string"?r[R]=zee(z):typeof z=="number"&&(r[R]=z);break;case"ariaHidden":case"aria-hidden":z!==!0&&z!=="true"&&delete i["aria-hidden"];break;default:{const F=pg[R];F?(z===!0||z==="true"||z===1)&&(r[F]=!0):UA[R]===void 0&&(i[R]=z)}}}const _=nee(t,r),C=_.attributes;if(r.inline&&(d.verticalAlign="-0.125em"),u==="svg"){i.style={...d,...o},Object.assign(i,C);let R=0,z=e.id;return typeof z=="string"&&(z=z.replace(/-/g,"_")),i.innerHTML=aee(_.body,z?()=>z+"ID"+R++:"iconifyVue"),Yu("svg",i)}const{body:T,width:S,height:P}=t,A=u==="mask"||(u==="bg"?!1:T.indexOf("currentColor")!==-1),O=Lee(T,{...C,width:S+"",height:P+""});return i.style={...d,"--svg":Bee(O),width:HA(C.width),height:HA(C.height),...$ee,...A?o1:QR,...o},Yu("span",i)};jR(!0);see("",mee);if(typeof document<"u"&&typeof window<"u"){JR();const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,r="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(i=>{try{(typeof i!="object"||i===null||i instanceof Array||typeof i.icons!="object"||typeof i.prefix!="string"||!VR(i))&&console.error(r)}catch{console.error(r)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let r in e){const i="IconifyProviders["+r+"] is invalid.";try{const u=e[r];if(typeof u!="object"||!u||u.resources===void 0)continue;lee(r,u)||console.error(i)}catch{console.error(i)}}}}const jee={...ky,body:""},TC=jt({inheritAttrs:!1,data(){return{iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(t,e){if(typeof t=="object"&&t!==null&&typeof t.body=="string")return this._name="",this.abortLoading(),{data:t};let r;if(typeof t!="string"||(r=My(t,!1,!0))===null)return this.abortLoading(),null;const i=JQ(r);if(!i)return(!this._loadingIcon||this._loadingIcon.name!==t)&&(this.abortLoading(),this._name="",i!==null&&(this._loadingIcon={name:t,abort:kee([r],()=>{this.counter++})})),null;this.abortLoading(),this._name!==t&&(this._name=t,e&&e(t));const u=["iconify"];return r.prefix!==""&&u.push("iconify--"+r.prefix),r.provider!==""&&u.push("iconify--"+r.provider),{data:i,classes:u}}},render(){this.counter;const t=this.$attrs,e=this.iconMounted?this.getIcon(t.icon,t.onLoad):null;if(!e)return qA(jee,t);let r=t;return e.classes&&(r={...t,class:(typeof t.class=="string"?t.class+" ":"")+e.classes.join(" ")}),qA({...ky,...e.data},r)}}),Vee=[{name:"Map",path:"/tracker",icon:"icon:globe"},{name:"List",path:"/tracker/list",icon:"icon:table"},{name:"Setup",icon:"icon:settings",subItems:[{name:"Users",path:"/tracker/users",icon:"icon:globe"},{name:"Sub 2",icon:"icon:globe",path:"/tracker2"},{name:"Sub 3",path:"/tracker3",icon:"icon:globe"}]},{name:"Events",icon:"icon:notification",subItems:[{name:"Sub 1",path:"/tracker4",icon:"icon:globe"},{name:"Sub 2",icon:"icon:globe",path:"/tracker5"},{name:"Sub 3",icon:"icon:globe",path:"/tracker6"}]},{name:"Help",path:"/tracker/help",icon:"icon:help"}];/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const _d=typeof window<"u";function Uee(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Kr=Object.assign;function gx(t,e){const r={};for(const i in e){const u=e[i];r[i]=wa(u)?u.map(t):t(u)}return r}const ip=()=>{},wa=Array.isArray,Kee=/\/$/,Gee=t=>t.replace(Kee,"");function yx(t,e,r="/"){let i,u={},d="",m="";const o=e.indexOf("#");let _=e.indexOf("?");return o<_&&o>=0&&(_=-1),_>-1&&(i=e.slice(0,_),d=e.slice(_+1,o>-1?o:e.length),u=t(d)),o>-1&&(i=i||e.slice(0,o),m=e.slice(o,e.length)),i=Zee(i!=null?i:e,r),{fullPath:i+(d&&"?")+d+m,path:i,query:u,hash:m}}function Hee(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function WA(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function qee(t,e,r){const i=e.matched.length-1,u=r.matched.length-1;return i>-1&&i===u&&Gd(e.matched[i],r.matched[u])&&ez(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function Gd(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function ez(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(!Wee(t[r],e[r]))return!1;return!0}function Wee(t,e){return wa(t)?ZA(t,e):wa(e)?ZA(e,t):t===e}function ZA(t,e){return wa(e)?t.length===e.length&&t.every((r,i)=>r===e[i]):t.length===1&&t[0]===e}function Zee(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),i=t.split("/");let u=r.length-1,d,m;for(d=0;d<i.length;d++)if(m=i[d],m!==".")if(m==="..")u>1&&u--;else break;return r.slice(0,u).join("/")+"/"+i.slice(d-(d===i.length?1:0)).join("/")}var kp;(function(t){t.pop="pop",t.push="push"})(kp||(kp={}));var op;(function(t){t.back="back",t.forward="forward",t.unknown=""})(op||(op={}));function Xee(t){if(!t)if(_d){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Gee(t)}const Yee=/^[^#]+#/;function Jee(t,e){return t.replace(Yee,"#")+e}function Qee(t,e){const r=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-r.left-(e.left||0),top:i.top-r.top-(e.top||0)}}const Dy=()=>({left:window.pageXOffset,top:window.pageYOffset});function ete(t){let e;if("el"in t){const r=t.el,i=typeof r=="string"&&r.startsWith("#"),u=typeof r=="string"?i?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!u)return;e=Qee(u,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function XA(t,e){return(history.state?history.state.position-e:-1)+t}const a1=new Map;function tte(t,e){a1.set(t,e)}function nte(t){const e=a1.get(t);return a1.delete(t),e}let rte=()=>location.protocol+"//"+location.host;function tz(t,e){const{pathname:r,search:i,hash:u}=e,d=t.indexOf("#");if(d>-1){let o=u.includes(t.slice(d))?t.slice(d).length:1,_=u.slice(o);return _[0]!=="/"&&(_="/"+_),WA(_,"")}return WA(r,t)+i+u}function ite(t,e,r,i){let u=[],d=[],m=null;const o=({state:P})=>{const A=tz(t,location),O=r.value,R=e.value;let z=0;if(P){if(r.value=A,e.value=P,m&&m===O){m=null;return}z=R?P.position-R.position:0}else i(A);u.forEach(F=>{F(r.value,O,{delta:z,type:kp.pop,direction:z?z>0?op.forward:op.back:op.unknown})})};function _(){m=r.value}function C(P){u.push(P);const A=()=>{const O=u.indexOf(P);O>-1&&u.splice(O,1)};return d.push(A),A}function T(){const{history:P}=window;!P.state||P.replaceState(Kr({},P.state,{scroll:Dy()}),"")}function S(){for(const P of d)P();d=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",T)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",T),{pauseListeners:_,listen:C,destroy:S}}function YA(t,e,r,i=!1,u=!1){return{back:t,current:e,forward:r,replaced:i,position:window.history.length,scroll:u?Dy():null}}function ote(t){const{history:e,location:r}=window,i={value:tz(t,r)},u={value:e.state};u.value||d(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function d(_,C,T){const S=t.indexOf("#"),P=S>-1?(r.host&&document.querySelector("base")?t:t.slice(S))+_:rte()+t+_;try{e[T?"replaceState":"pushState"](C,"",P),u.value=C}catch(A){console.error(A),r[T?"replace":"assign"](P)}}function m(_,C){const T=Kr({},e.state,YA(u.value.back,_,u.value.forward,!0),C,{position:u.value.position});d(_,T,!0),i.value=_}function o(_,C){const T=Kr({},u.value,e.state,{forward:_,scroll:Dy()});d(T.current,T,!0);const S=Kr({},YA(i.value,_,null),{position:T.position+1},C);d(_,S,!1),i.value=_}return{location:i,state:u,push:o,replace:m}}function ate(t){t=Xee(t);const e=ote(t),r=ite(t,e.state,e.location,e.replace);function i(d,m=!0){m||r.pauseListeners(),history.go(d)}const u=Kr({location:"",base:t,go:i,createHref:Jee.bind(null,t)},e,r);return Object.defineProperty(u,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(u,"state",{enumerable:!0,get:()=>e.state.value}),u}function ste(t){return typeof t=="string"||t&&typeof t=="object"}function nz(t){return typeof t=="string"||typeof t=="symbol"}const Cl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},rz=Symbol("");var JA;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(JA||(JA={}));function Hd(t,e){return Kr(new Error,{type:t,[rz]:!0},e)}function As(t,e){return t instanceof Error&&rz in t&&(e==null||!!(t.type&e))}const QA="[^/]+?",lte={sensitive:!1,strict:!1,start:!0,end:!0},ute=/[.+*?^${}()[\]/\\]/g;function cte(t,e){const r=Kr({},lte,e),i=[];let u=r.start?"^":"";const d=[];for(const C of t){const T=C.length?[]:[90];r.strict&&!C.length&&(u+="/");for(let S=0;S<C.length;S++){const P=C[S];let A=40+(r.sensitive?.25:0);if(P.type===0)S||(u+="/"),u+=P.value.replace(ute,"\\$&"),A+=40;else if(P.type===1){const{value:O,repeatable:R,optional:z,regexp:F}=P;d.push({name:O,repeatable:R,optional:z});const N=F||QA;if(N!==QA){A+=10;try{new RegExp(`(${N})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${O}" (${N}): `+G.message)}}let U=R?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;S||(U=z&&C.length<2?`(?:/${U})`:"/"+U),z&&(U+="?"),u+=U,A+=20,z&&(A+=-8),R&&(A+=-20),N===".*"&&(A+=-50)}T.push(A)}i.push(T)}if(r.strict&&r.end){const C=i.length-1;i[C][i[C].length-1]+=.7000000000000001}r.strict||(u+="/?"),r.end?u+="$":r.strict&&(u+="(?:/|$)");const m=new RegExp(u,r.sensitive?"":"i");function o(C){const T=C.match(m),S={};if(!T)return null;for(let P=1;P<T.length;P++){const A=T[P]||"",O=d[P-1];S[O.name]=A&&O.repeatable?A.split("/"):A}return S}function _(C){let T="",S=!1;for(const P of t){(!S||!T.endsWith("/"))&&(T+="/"),S=!1;for(const A of P)if(A.type===0)T+=A.value;else if(A.type===1){const{value:O,repeatable:R,optional:z}=A,F=O in C?C[O]:"";if(wa(F)&&!R)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const N=wa(F)?F.join("/"):F;if(!N)if(z)P.length<2&&(T.endsWith("/")?T=T.slice(0,-1):S=!0);else throw new Error(`Missing required param "${O}"`);T+=N}}return T||"/"}return{re:m,score:i,keys:d,parse:o,stringify:_}}function dte(t,e){let r=0;for(;r<t.length&&r<e.length;){const i=e[r]-t[r];if(i)return i;r++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function fte(t,e){let r=0;const i=t.score,u=e.score;for(;r<i.length&&r<u.length;){const d=dte(i[r],u[r]);if(d)return d;r++}if(Math.abs(u.length-i.length)===1){if(eM(i))return 1;if(eM(u))return-1}return u.length-i.length}function eM(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const hte={type:0,value:""},pte=/[a-zA-Z0-9_]/;function mte(t){if(!t)return[[]];if(t==="/")return[[hte]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(A){throw new Error(`ERR (${r})/"${C}": ${A}`)}let r=0,i=r;const u=[];let d;function m(){d&&u.push(d),d=[]}let o=0,_,C="",T="";function S(){!C||(r===0?d.push({type:0,value:C}):r===1||r===2||r===3?(d.length>1&&(_==="*"||_==="+")&&e(`A repeatable param (${C}) must be alone in its segment. eg: '/:ids+.`),d.push({type:1,value:C,regexp:T,repeatable:_==="*"||_==="+",optional:_==="*"||_==="?"})):e("Invalid state to consume buffer"),C="")}function P(){C+=_}for(;o<t.length;){if(_=t[o++],_==="\\"&&r!==2){i=r,r=4;continue}switch(r){case 0:_==="/"?(C&&S(),m()):_===":"?(S(),r=1):P();break;case 4:P(),r=i;break;case 1:_==="("?r=2:pte.test(_)?P():(S(),r=0,_!=="*"&&_!=="?"&&_!=="+"&&o--);break;case 2:_===")"?T[T.length-1]=="\\"?T=T.slice(0,-1)+_:r=3:T+=_;break;case 3:S(),r=0,_!=="*"&&_!=="?"&&_!=="+"&&o--,T="";break;default:e("Unknown state");break}}return r===2&&e(`Unfinished custom RegExp for param "${C}"`),S(),m(),u}function vte(t,e,r){const i=cte(mte(t.path),r),u=Kr(i,{record:t,parent:e,children:[],alias:[]});return e&&!u.record.aliasOf==!e.record.aliasOf&&e.children.push(u),u}function gte(t,e){const r=[],i=new Map;e=rM({strict:!1,end:!0,sensitive:!1},e);function u(T){return i.get(T)}function d(T,S,P){const A=!P,O=yte(T);O.aliasOf=P&&P.record;const R=rM(e,T),z=[O];if("alias"in T){const U=typeof T.alias=="string"?[T.alias]:T.alias;for(const G of U)z.push(Kr({},O,{components:P?P.record.components:O.components,path:G,aliasOf:P?P.record:O}))}let F,N;for(const U of z){const{path:G}=U;if(S&&G[0]!=="/"){const q=S.record.path,V=q[q.length-1]==="/"?"":"/";U.path=S.record.path+(G&&V+G)}if(F=vte(U,S,R),P?P.alias.push(F):(N=N||F,N!==F&&N.alias.push(F),A&&T.name&&!nM(F)&&m(T.name)),O.children){const q=O.children;for(let V=0;V<q.length;V++)d(q[V],F,P&&P.children[V])}P=P||F,_(F)}return N?()=>{m(N)}:ip}function m(T){if(nz(T)){const S=i.get(T);S&&(i.delete(T),r.splice(r.indexOf(S),1),S.children.forEach(m),S.alias.forEach(m))}else{const S=r.indexOf(T);S>-1&&(r.splice(S,1),T.record.name&&i.delete(T.record.name),T.children.forEach(m),T.alias.forEach(m))}}function o(){return r}function _(T){let S=0;for(;S<r.length&&fte(T,r[S])>=0&&(T.record.path!==r[S].record.path||!iz(T,r[S]));)S++;r.splice(S,0,T),T.record.name&&!nM(T)&&i.set(T.record.name,T)}function C(T,S){let P,A={},O,R;if("name"in T&&T.name){if(P=i.get(T.name),!P)throw Hd(1,{location:T});R=P.record.name,A=Kr(tM(S.params,P.keys.filter(N=>!N.optional).map(N=>N.name)),T.params&&tM(T.params,P.keys.map(N=>N.name))),O=P.stringify(A)}else if("path"in T)O=T.path,P=r.find(N=>N.re.test(O)),P&&(A=P.parse(O),R=P.record.name);else{if(P=S.name?i.get(S.name):r.find(N=>N.re.test(S.path)),!P)throw Hd(1,{location:T,currentLocation:S});R=P.record.name,A=Kr({},S.params,T.params),O=P.stringify(A)}const z=[];let F=P;for(;F;)z.unshift(F.record),F=F.parent;return{name:R,path:O,params:A,matched:z,meta:xte(z)}}return t.forEach(T=>d(T)),{addRoute:d,resolve:C,removeRoute:m,getRoutes:o,getRecordMatcher:u}}function tM(t,e){const r={};for(const i of e)i in t&&(r[i]=t[i]);return r}function yte(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:_te(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function _te(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const i in t.components)e[i]=typeof r=="boolean"?r:r[i];return e}function nM(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function xte(t){return t.reduce((e,r)=>Kr(e,r.meta),{})}function rM(t,e){const r={};for(const i in t)r[i]=i in e?e[i]:t[i];return r}function iz(t,e){return e.children.some(r=>r===t||iz(t,r))}const oz=/#/g,bte=/&/g,wte=/\//g,Cte=/=/g,Ste=/\?/g,az=/\+/g,Tte=/%5B/g,Ete=/%5D/g,sz=/%5E/g,Ite=/%60/g,lz=/%7B/g,Pte=/%7C/g,uz=/%7D/g,Ate=/%20/g;function EC(t){return encodeURI(""+t).replace(Pte,"|").replace(Tte,"[").replace(Ete,"]")}function Mte(t){return EC(t).replace(lz,"{").replace(uz,"}").replace(sz,"^")}function s1(t){return EC(t).replace(az,"%2B").replace(Ate,"+").replace(oz,"%23").replace(bte,"%26").replace(Ite,"`").replace(lz,"{").replace(uz,"}").replace(sz,"^")}function kte(t){return s1(t).replace(Cte,"%3D")}function Ote(t){return EC(t).replace(oz,"%23").replace(Ste,"%3F")}function Dte(t){return t==null?"":Ote(t).replace(wte,"%2F")}function Vg(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function Rte(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let u=0;u<i.length;++u){const d=i[u].replace(az," "),m=d.indexOf("="),o=Vg(m<0?d:d.slice(0,m)),_=m<0?null:Vg(d.slice(m+1));if(o in e){let C=e[o];wa(C)||(C=e[o]=[C]),C.push(_)}else e[o]=_}return e}function iM(t){let e="";for(let r in t){const i=t[r];if(r=kte(r),i==null){i!==void 0&&(e+=(e.length?"&":"")+r);continue}(wa(i)?i.map(d=>d&&s1(d)):[i&&s1(i)]).forEach(d=>{d!==void 0&&(e+=(e.length?"&":"")+r,d!=null&&(e+="="+d))})}return e}function zte(t){const e={};for(const r in t){const i=t[r];i!==void 0&&(e[r]=wa(i)?i.map(u=>u==null?null:""+u):i==null?i:""+i)}return e}const Lte=Symbol(""),oM=Symbol(""),Ry=Symbol(""),cz=Symbol(""),l1=Symbol("");function Nh(){let t=[];function e(i){return t.push(i),()=>{const u=t.indexOf(i);u>-1&&t.splice(u,1)}}function r(){t=[]}return{add:e,list:()=>t,reset:r}}function Al(t,e,r,i,u){const d=i&&(i.enterCallbacks[u]=i.enterCallbacks[u]||[]);return()=>new Promise((m,o)=>{const _=S=>{S===!1?o(Hd(4,{from:r,to:e})):S instanceof Error?o(S):ste(S)?o(Hd(2,{from:e,to:S})):(d&&i.enterCallbacks[u]===d&&typeof S=="function"&&d.push(S),m())},C=t.call(i&&i.instances[u],e,r,_);let T=Promise.resolve(C);t.length<3&&(T=T.then(_)),T.catch(S=>o(S))})}function _x(t,e,r,i){const u=[];for(const d of t)for(const m in d.components){let o=d.components[m];if(!(e!=="beforeRouteEnter"&&!d.instances[m]))if(Fte(o)){const C=(o.__vccOpts||o)[e];C&&u.push(Al(C,r,i,d,m))}else{let _=o();u.push(()=>_.then(C=>{if(!C)return Promise.reject(new Error(`Couldn't resolve component "${m}" at "${d.path}"`));const T=Uee(C)?C.default:C;d.components[m]=T;const P=(T.__vccOpts||T)[e];return P&&Al(P,r,i,d,m)()}))}}return u}function Fte(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function aM(t){const e=Kn(Ry),r=Kn(cz),i=ue(()=>e.resolve(gi(t.to))),u=ue(()=>{const{matched:_}=i.value,{length:C}=_,T=_[C-1],S=r.matched;if(!T||!S.length)return-1;const P=S.findIndex(Gd.bind(null,T));if(P>-1)return P;const A=sM(_[C-2]);return C>1&&sM(T)===A&&S[S.length-1].path!==A?S.findIndex(Gd.bind(null,_[C-2])):P}),d=ue(()=>u.value>-1&&jte(r.params,i.value.params)),m=ue(()=>u.value>-1&&u.value===r.matched.length-1&&ez(r.params,i.value.params));function o(_={}){return $te(_)?e[gi(t.replace)?"replace":"push"](gi(t.to)).catch(ip):Promise.resolve()}return{route:i,href:ue(()=>i.value.href),isActive:d,isExactActive:m,navigate:o}}const Bte=jt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:aM,setup(t,{slots:e}){const r=Or(aM(t)),{options:i}=Kn(Ry),u=ue(()=>({[lM(t.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[lM(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const d=e.default&&e.default(r);return t.custom?d:Yu("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:u.value},d)}}}),Nte=Bte;function $te(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function jte(t,e){for(const r in e){const i=e[r],u=t[r];if(typeof i=="string"){if(i!==u)return!1}else if(!wa(u)||u.length!==i.length||i.some((d,m)=>d!==u[m]))return!1}return!0}function sM(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const lM=(t,e,r)=>t!=null?t:e!=null?e:r,Vte=jt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const i=Kn(l1),u=ue(()=>t.route||i.value),d=Kn(oM,0),m=ue(()=>{let C=gi(d);const{matched:T}=u.value;let S;for(;(S=T[C])&&!S.components;)C++;return C}),o=ue(()=>u.value.matched[m.value]);sr(oM,ue(()=>m.value+1)),sr(Lte,o),sr(l1,u);const _=qe();return an(()=>[_.value,o.value,t.name],([C,T,S],[P,A,O])=>{T&&(T.instances[S]=C,A&&A!==T&&C&&C===P&&(T.leaveGuards.size||(T.leaveGuards=A.leaveGuards),T.updateGuards.size||(T.updateGuards=A.updateGuards))),C&&T&&(!A||!Gd(T,A)||!P)&&(T.enterCallbacks[S]||[]).forEach(R=>R(C))},{flush:"post"}),()=>{const C=u.value,T=t.name,S=o.value,P=S&&S.components[T];if(!P)return uM(r.default,{Component:P,route:C});const A=S.props[T],O=A?A===!0?C.params:typeof A=="function"?A(C):A:null,z=Yu(P,Kr({},O,e,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(S.instances[T]=null)},ref:_}));return uM(r.default,{Component:z,route:C})||z}}});function uM(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const Ute=Vte;function Kte(t){const e=gte(t.routes,t),r=t.parseQuery||Rte,i=t.stringifyQuery||iM,u=t.history,d=Nh(),m=Nh(),o=Nh(),_=mr(Cl);let C=Cl;_d&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const T=gx.bind(null,oe=>""+oe),S=gx.bind(null,Dte),P=gx.bind(null,Vg);function A(oe,ze){let Fe,lt;return nz(oe)?(Fe=e.getRecordMatcher(oe),lt=ze):lt=oe,e.addRoute(lt,Fe)}function O(oe){const ze=e.getRecordMatcher(oe);ze&&e.removeRoute(ze)}function R(){return e.getRoutes().map(oe=>oe.record)}function z(oe){return!!e.getRecordMatcher(oe)}function F(oe,ze){if(ze=Kr({},ze||_.value),typeof oe=="string"){const se=yx(r,oe,ze.path),ae=e.resolve({path:se.path},ze),Be=u.createHref(se.fullPath);return Kr(se,ae,{params:P(ae.params),hash:Vg(se.hash),redirectedFrom:void 0,href:Be})}let Fe;if("path"in oe)Fe=Kr({},oe,{path:yx(r,oe.path,ze.path).path});else{const se=Kr({},oe.params);for(const ae in se)se[ae]==null&&delete se[ae];Fe=Kr({},oe,{params:S(oe.params)}),ze.params=S(ze.params)}const lt=e.resolve(Fe,ze),vt=oe.hash||"";lt.params=T(P(lt.params));const kt=Hee(i,Kr({},oe,{hash:Mte(vt),path:lt.path})),It=u.createHref(kt);return Kr({fullPath:kt,hash:vt,query:i===iM?zte(oe.query):oe.query||{}},lt,{redirectedFrom:void 0,href:It})}function N(oe){return typeof oe=="string"?yx(r,oe,_.value.path):Kr({},oe)}function U(oe,ze){if(C!==oe)return Hd(8,{from:ze,to:oe})}function G(oe){return Z(oe)}function q(oe){return G(Kr(N(oe),{replace:!0}))}function V(oe){const ze=oe.matched[oe.matched.length-1];if(ze&&ze.redirect){const{redirect:Fe}=ze;let lt=typeof Fe=="function"?Fe(oe):Fe;return typeof lt=="string"&&(lt=lt.includes("?")||lt.includes("#")?lt=N(lt):{path:lt},lt.params={}),Kr({query:oe.query,hash:oe.hash,params:"path"in lt?{}:oe.params},lt)}}function Z(oe,ze){const Fe=C=F(oe),lt=_.value,vt=oe.state,kt=oe.force,It=oe.replace===!0,se=V(Fe);if(se)return Z(Kr(N(se),{state:typeof se=="object"?Kr({},vt,se.state):vt,force:kt,replace:It}),ze||Fe);const ae=Fe;ae.redirectedFrom=ze;let Be;return!kt&&qee(i,lt,Fe)&&(Be=Hd(16,{to:ae,from:lt}),He(lt,lt,!0,!1)),(Be?Promise.resolve(Be):te(ae,lt)).catch(st=>As(st)?As(st,2)?st:Pe(st):he(st,ae,lt)).then(st=>{if(st){if(As(st,2))return Z(Kr({replace:It},N(st.to),{state:typeof st.to=="object"?Kr({},vt,st.to.state):vt,force:kt}),ze||ae)}else st=ve(ae,lt,!0,It,vt);return ie(ae,lt,st),st})}function Q(oe,ze){const Fe=U(oe,ze);return Fe?Promise.reject(Fe):Promise.resolve()}function te(oe,ze){let Fe;const[lt,vt,kt]=Gte(oe,ze);Fe=_x(lt.reverse(),"beforeRouteLeave",oe,ze);for(const se of lt)se.leaveGuards.forEach(ae=>{Fe.push(Al(ae,oe,ze))});const It=Q.bind(null,oe,ze);return Fe.push(It),hd(Fe).then(()=>{Fe=[];for(const se of d.list())Fe.push(Al(se,oe,ze));return Fe.push(It),hd(Fe)}).then(()=>{Fe=_x(vt,"beforeRouteUpdate",oe,ze);for(const se of vt)se.updateGuards.forEach(ae=>{Fe.push(Al(ae,oe,ze))});return Fe.push(It),hd(Fe)}).then(()=>{Fe=[];for(const se of oe.matched)if(se.beforeEnter&&!ze.matched.includes(se))if(wa(se.beforeEnter))for(const ae of se.beforeEnter)Fe.push(Al(ae,oe,ze));else Fe.push(Al(se.beforeEnter,oe,ze));return Fe.push(It),hd(Fe)}).then(()=>(oe.matched.forEach(se=>se.enterCallbacks={}),Fe=_x(kt,"beforeRouteEnter",oe,ze),Fe.push(It),hd(Fe))).then(()=>{Fe=[];for(const se of m.list())Fe.push(Al(se,oe,ze));return Fe.push(It),hd(Fe)}).catch(se=>As(se,8)?se:Promise.reject(se))}function ie(oe,ze,Fe){for(const lt of o.list())lt(oe,ze,Fe)}function ve(oe,ze,Fe,lt,vt){const kt=U(oe,ze);if(kt)return kt;const It=ze===Cl,se=_d?history.state:{};Fe&&(lt||It?u.replace(oe.fullPath,Kr({scroll:It&&se&&se.scroll},vt)):u.push(oe.fullPath,vt)),_.value=oe,He(oe,ze,Fe,It),Pe()}let ce;function de(){ce||(ce=u.listen((oe,ze,Fe)=>{if(!Te.listening)return;const lt=F(oe),vt=V(lt);if(vt){Z(Kr(vt,{replace:!0}),lt).catch(ip);return}C=lt;const kt=_.value;_d&&tte(XA(kt.fullPath,Fe.delta),Dy()),te(lt,kt).catch(It=>As(It,12)?It:As(It,2)?(Z(It.to,lt).then(se=>{As(se,20)&&!Fe.delta&&Fe.type===kp.pop&&u.go(-1,!1)}).catch(ip),Promise.reject()):(Fe.delta&&u.go(-Fe.delta,!1),he(It,lt,kt))).then(It=>{It=It||ve(lt,kt,!1),It&&(Fe.delta&&!As(It,8)?u.go(-Fe.delta,!1):Fe.type===kp.pop&&As(It,20)&&u.go(-1,!1)),ie(lt,kt,It)}).catch(ip)}))}let xe=Nh(),De=Nh(),ge;function he(oe,ze,Fe){Pe(oe);const lt=De.list();return lt.length?lt.forEach(vt=>vt(oe,ze,Fe)):console.error(oe),Promise.reject(oe)}function me(){return ge&&_.value!==Cl?Promise.resolve():new Promise((oe,ze)=>{xe.add([oe,ze])})}function Pe(oe){return ge||(ge=!oe,de(),xe.list().forEach(([ze,Fe])=>oe?Fe(oe):ze()),xe.reset()),oe}function He(oe,ze,Fe,lt){const{scrollBehavior:vt}=t;if(!_d||!vt)return Promise.resolve();const kt=!Fe&&nte(XA(oe.fullPath,0))||(lt||!Fe)&&history.state&&history.state.scroll||null;return gr().then(()=>vt(oe,ze,kt)).then(It=>It&&ete(It)).catch(It=>he(It,oe,ze))}const Ke=oe=>u.go(oe);let Re;const Le=new Set,Te={currentRoute:_,listening:!0,addRoute:A,removeRoute:O,hasRoute:z,getRoutes:R,resolve:F,options:t,push:G,replace:q,go:Ke,back:()=>Ke(-1),forward:()=>Ke(1),beforeEach:d.add,beforeResolve:m.add,afterEach:o.add,onError:De.add,isReady:me,install(oe){const ze=this;oe.component("RouterLink",Nte),oe.component("RouterView",Ute),oe.config.globalProperties.$router=ze,Object.defineProperty(oe.config.globalProperties,"$route",{enumerable:!0,get:()=>gi(_)}),_d&&!Re&&_.value===Cl&&(Re=!0,G(u.location).catch(vt=>{}));const Fe={};for(const vt in Cl)Fe[vt]=ue(()=>_.value[vt]);oe.provide(Ry,ze),oe.provide(cz,Or(Fe)),oe.provide(l1,_);const lt=oe.unmount;Le.add(oe),oe.unmount=function(){Le.delete(oe),Le.size<1&&(C=Cl,ce&&ce(),ce=null,_.value=Cl,Re=!1,ge=!1),lt()}}};return Te}function hd(t){return t.reduce((e,r)=>e.then(()=>r()),Promise.resolve())}function Gte(t,e){const r=[],i=[],u=[],d=Math.max(e.matched.length,t.matched.length);for(let m=0;m<d;m++){const o=e.matched[m];o&&(t.matched.find(C=>Gd(C,o))?i.push(o):r.push(o));const _=t.matched[m];_&&(e.matched.find(C=>Gd(C,_))||u.push(_))}return[r,i,u]}function Hte(){return Kn(Ry)}var qte=!1;/*!
  * pinia v2.0.23
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let dz;const zy=t=>dz=t,fz=Symbol();function u1(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ap;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ap||(ap={}));function Wte(){const t=kM(!0),e=t.run(()=>qe({}));let r=[],i=[];const u=Dd({install(d){zy(u),u._a=d,d.provide(fz,u),d.config.globalProperties.$pinia=u,i.forEach(m=>r.push(m)),i=[]},use(d){return!this._a&&!qte?i.push(d):r.push(d),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return u}const hz=()=>{};function cM(t,e,r,i=hz){t.push(e);const u=()=>{const d=t.indexOf(e);d>-1&&(t.splice(d,1),i())};return!r&&Ji()&&is(u),u}function pd(t,...e){t.slice().forEach(r=>{r(...e)})}function c1(t,e){t instanceof Map&&e instanceof Map&&e.forEach((r,i)=>t.set(i,r)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const r in e){if(!e.hasOwnProperty(r))continue;const i=e[r],u=t[r];u1(u)&&u1(i)&&t.hasOwnProperty(r)&&!di(i)&&!Rl(i)?t[r]=c1(u,i):t[r]=i}return t}const Zte=Symbol();function Xte(t){return!u1(t)||!t.hasOwnProperty(Zte)}const{assign:Ml}=Object;function Yte(t){return!!(di(t)&&t.effect)}function Jte(t,e,r,i){const{state:u,actions:d,getters:m}=e,o=r.state.value[t];let _;function C(){o||(r.state.value[t]=u?u():{});const T=Wu(r.state.value[t]);return Ml(T,d,Object.keys(m||{}).reduce((S,P)=>(S[P]=Dd(ue(()=>{zy(r);const A=r._s.get(t);return m[P].call(A,A)})),S),{}))}return _=pz(t,C,e,r,i,!0),_.$reset=function(){const S=u?u():{};this.$patch(P=>{Ml(P,S)})},_}function pz(t,e,r={},i,u,d){let m;const o=Ml({actions:{}},r),_={deep:!0};let C,T,S=Dd([]),P=Dd([]),A;const O=i.state.value[t];!d&&!O&&(i.state.value[t]={}),qe({});let R;function z(Z){let Q;C=T=!1,typeof Z=="function"?(Z(i.state.value[t]),Q={type:ap.patchFunction,storeId:t,events:A}):(c1(i.state.value[t],Z),Q={type:ap.patchObject,payload:Z,storeId:t,events:A});const te=R=Symbol();gr().then(()=>{R===te&&(C=!0)}),T=!0,pd(S,Q,i.state.value[t])}const F=hz;function N(){m.stop(),S=[],P=[],i._s.delete(t)}function U(Z,Q){return function(){zy(i);const te=Array.from(arguments),ie=[],ve=[];function ce(De){ie.push(De)}function de(De){ve.push(De)}pd(P,{args:te,name:Z,store:q,after:ce,onError:de});let xe;try{xe=Q.apply(this&&this.$id===t?this:q,te)}catch(De){throw pd(ve,De),De}return xe instanceof Promise?xe.then(De=>(pd(ie,De),De)).catch(De=>(pd(ve,De),Promise.reject(De))):(pd(ie,xe),xe)}}const G={_p:i,$id:t,$onAction:cM.bind(null,P),$patch:z,$reset:F,$subscribe(Z,Q={}){const te=cM(S,Z,Q.detached,()=>ie()),ie=m.run(()=>an(()=>i.state.value[t],ve=>{(Q.flush==="sync"?T:C)&&Z({storeId:t,type:ap.direct,events:A},ve)},Ml({},_,Q)));return te},$dispose:N},q=Or(G);i._s.set(t,q);const V=i._e.run(()=>(m=kM(),m.run(()=>e())));for(const Z in V){const Q=V[Z];if(di(Q)&&!Yte(Q)||Rl(Q))d||(O&&Xte(Q)&&(di(Q)?Q.value=O[Z]:c1(Q,O[Z])),i.state.value[t][Z]=Q);else if(typeof Q=="function"){const te=U(Z,Q);V[Z]=te,o.actions[Z]=Q}}return Ml(q,V),Ml(Yn(q),V),Object.defineProperty(q,"$state",{get:()=>i.state.value[t],set:Z=>{z(Q=>{Ml(Q,Z)})}}),i._p.forEach(Z=>{Ml(q,m.run(()=>Z({store:q,app:i._a,pinia:i,options:o})))}),O&&d&&r.hydrate&&r.hydrate(q.$state,O),C=!0,T=!0,q}function IC(t,e,r){let i,u;const d=typeof e=="function";typeof t=="string"?(i=t,u=d?r:e):(u=t,i=t.id);function m(o,_){const C=Ji();return o=o||C&&Kn(fz),o&&zy(o),o=dz,o._s.has(i)||(d?pz(i,e,u,o):Jte(i,u,o)),o._s.get(i)}return m.$id=i,m}function mz(t,e){return function(){return t.apply(e,arguments)}}const{toString:vz}=Object.prototype,{getPrototypeOf:PC}=Object,AC=(t=>e=>{const r=vz.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Gs=t=>(t=t.toLowerCase(),e=>AC(e)===t),Ly=t=>e=>typeof e===t,{isArray:tf}=Array,Op=Ly("undefined");function Qte(t){return t!==null&&!Op(t)&&t.constructor!==null&&!Op(t.constructor)&&nc(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const gz=Gs("ArrayBuffer");function ene(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&gz(t.buffer),e}const tne=Ly("string"),nc=Ly("function"),yz=Ly("number"),MC=t=>t!==null&&typeof t=="object",nne=t=>t===!0||t===!1,mg=t=>{if(AC(t)!=="object")return!1;const e=PC(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},rne=Gs("Date"),ine=Gs("File"),one=Gs("Blob"),ane=Gs("FileList"),sne=t=>MC(t)&&nc(t.pipe),lne=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||vz.call(t)===e||nc(t.toString)&&t.toString()===e)},une=Gs("URLSearchParams"),cne=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hp(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let i,u;if(typeof t!="object"&&(t=[t]),tf(t))for(i=0,u=t.length;i<u;i++)e.call(null,t[i],i,t);else{const d=r?Object.getOwnPropertyNames(t):Object.keys(t),m=d.length;let o;for(i=0;i<m;i++)o=d[i],e.call(null,t[o],o,t)}}function _z(t,e){e=e.toLowerCase();const r=Object.keys(t);let i=r.length,u;for(;i-- >0;)if(u=r[i],e===u.toLowerCase())return u;return null}const xz=typeof self>"u"?typeof global>"u"?globalThis:global:self,bz=t=>!Op(t)&&t!==xz;function d1(){const{caseless:t}=bz(this)&&this||{},e={},r=(i,u)=>{const d=t&&_z(e,u)||u;mg(e[d])&&mg(i)?e[d]=d1(e[d],i):mg(i)?e[d]=d1({},i):tf(i)?e[d]=i.slice():e[d]=i};for(let i=0,u=arguments.length;i<u;i++)arguments[i]&&Hp(arguments[i],r);return e}const dne=(t,e,r,{allOwnKeys:i}={})=>(Hp(e,(u,d)=>{r&&nc(u)?t[d]=mz(u,r):t[d]=u},{allOwnKeys:i}),t),fne=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),hne=(t,e,r,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},pne=(t,e,r,i)=>{let u,d,m;const o={};if(e=e||{},t==null)return e;do{for(u=Object.getOwnPropertyNames(t),d=u.length;d-- >0;)m=u[d],(!i||i(m,t,e))&&!o[m]&&(e[m]=t[m],o[m]=!0);t=r!==!1&&PC(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},mne=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const i=t.indexOf(e,r);return i!==-1&&i===r},vne=t=>{if(!t)return null;if(tf(t))return t;let e=t.length;if(!yz(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},gne=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&PC(Uint8Array)),yne=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let u;for(;(u=i.next())&&!u.done;){const d=u.value;e.call(t,d[0],d[1])}},_ne=(t,e)=>{let r;const i=[];for(;(r=t.exec(e))!==null;)i.push(r);return i},xne=Gs("HTMLFormElement"),bne=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,i,u){return i.toUpperCase()+u}),dM=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),wne=Gs("RegExp"),wz=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),i={};Hp(r,(u,d)=>{e(u,d,t)!==!1&&(i[d]=u)}),Object.defineProperties(t,i)},Cne=t=>{wz(t,(e,r)=>{if(nc(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=t[r];if(!!nc(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Sne=(t,e)=>{const r={},i=u=>{u.forEach(d=>{r[d]=!0})};return tf(t)?i(t):i(String(t).split(e)),r},Tne=()=>{},Ene=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Ine=t=>{const e=new Array(10),r=(i,u)=>{if(MC(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[u]=i;const d=tf(i)?[]:{};return Hp(i,(m,o)=>{const _=r(m,u+1);!Op(_)&&(d[o]=_)}),e[u]=void 0,d}}return i};return r(t,0)},Gt={isArray:tf,isArrayBuffer:gz,isBuffer:Qte,isFormData:lne,isArrayBufferView:ene,isString:tne,isNumber:yz,isBoolean:nne,isObject:MC,isPlainObject:mg,isUndefined:Op,isDate:rne,isFile:ine,isBlob:one,isRegExp:wne,isFunction:nc,isStream:sne,isURLSearchParams:une,isTypedArray:gne,isFileList:ane,forEach:Hp,merge:d1,extend:dne,trim:cne,stripBOM:fne,inherits:hne,toFlatObject:pne,kindOf:AC,kindOfTest:Gs,endsWith:mne,toArray:vne,forEachEntry:yne,matchAll:_ne,isHTMLForm:xne,hasOwnProperty:dM,hasOwnProp:dM,reduceDescriptors:wz,freezeMethods:Cne,toObjectSet:Sne,toCamelCase:bne,noop:Tne,toFiniteNumber:Ene,findKey:_z,global:xz,isContextDefined:bz,toJSONObject:Ine};function Mr(t,e,r,i,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),i&&(this.request=i),u&&(this.response=u)}Gt.inherits(Mr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Gt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Cz=Mr.prototype,Sz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Sz[t]={value:t}});Object.defineProperties(Mr,Sz);Object.defineProperty(Cz,"isAxiosError",{value:!0});Mr.from=(t,e,r,i,u,d)=>{const m=Object.create(Cz);return Gt.toFlatObject(t,m,function(_){return _!==Error.prototype},o=>o!=="isAxiosError"),Mr.call(m,t.message,e,r,i,u),m.cause=t,m.name=t.name,d&&Object.assign(m,d),m};var Pne=typeof self=="object"?self.FormData:window.FormData;const Ane=Pne;function f1(t){return Gt.isPlainObject(t)||Gt.isArray(t)}function Tz(t){return Gt.endsWith(t,"[]")?t.slice(0,-2):t}function fM(t,e,r){return t?t.concat(e).map(function(u,d){return u=Tz(u),!r&&d?"["+u+"]":u}).join(r?".":""):e}function Mne(t){return Gt.isArray(t)&&!t.some(f1)}const kne=Gt.toFlatObject(Gt,{},null,function(e){return/^is[A-Z]/.test(e)});function One(t){return t&&Gt.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function Fy(t,e,r){if(!Gt.isObject(t))throw new TypeError("target must be an object");e=e||new(Ane||FormData),r=Gt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,z){return!Gt.isUndefined(z[R])});const i=r.metaTokens,u=r.visitor||T,d=r.dots,m=r.indexes,_=(r.Blob||typeof Blob<"u"&&Blob)&&One(e);if(!Gt.isFunction(u))throw new TypeError("visitor must be a function");function C(O){if(O===null)return"";if(Gt.isDate(O))return O.toISOString();if(!_&&Gt.isBlob(O))throw new Mr("Blob is not supported. Use a Buffer instead.");return Gt.isArrayBuffer(O)||Gt.isTypedArray(O)?_&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function T(O,R,z){let F=O;if(O&&!z&&typeof O=="object"){if(Gt.endsWith(R,"{}"))R=i?R:R.slice(0,-2),O=JSON.stringify(O);else if(Gt.isArray(O)&&Mne(O)||Gt.isFileList(O)||Gt.endsWith(R,"[]")&&(F=Gt.toArray(O)))return R=Tz(R),F.forEach(function(U,G){!(Gt.isUndefined(U)||U===null)&&e.append(m===!0?fM([R],G,d):m===null?R:R+"[]",C(U))}),!1}return f1(O)?!0:(e.append(fM(z,R,d),C(O)),!1)}const S=[],P=Object.assign(kne,{defaultVisitor:T,convertValue:C,isVisitable:f1});function A(O,R){if(!Gt.isUndefined(O)){if(S.indexOf(O)!==-1)throw Error("Circular reference detected in "+R.join("."));S.push(O),Gt.forEach(O,function(F,N){(!(Gt.isUndefined(F)||F===null)&&u.call(e,F,Gt.isString(N)?N.trim():N,R,P))===!0&&A(F,R?R.concat(N):[N])}),S.pop()}}if(!Gt.isObject(t))throw new TypeError("data must be an object");return A(t),e}function hM(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function kC(t,e){this._pairs=[],t&&Fy(t,this,e)}const Ez=kC.prototype;Ez.append=function(e,r){this._pairs.push([e,r])};Ez.toString=function(e){const r=e?function(i){return e.call(this,i,hM)}:hM;return this._pairs.map(function(u){return r(u[0])+"="+r(u[1])},"").join("&")};function Dne(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Iz(t,e,r){if(!e)return t;const i=r&&r.encode||Dne,u=r&&r.serialize;let d;if(u?d=u(e,r):d=Gt.isURLSearchParams(e)?e.toString():new kC(e,r).toString(i),d){const m=t.indexOf("#");m!==-1&&(t=t.slice(0,m)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class Rne{constructor(){this.handlers=[]}use(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Gt.forEach(this.handlers,function(i){i!==null&&e(i)})}}const pM=Rne,Pz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zne=typeof URLSearchParams<"u"?URLSearchParams:kC,Lne=FormData,Fne=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Fs={isBrowser:!0,classes:{URLSearchParams:zne,FormData:Lne,Blob},isStandardBrowserEnv:Fne,protocols:["http","https","file","blob","url","data"]};function Bne(t,e){return Fy(t,new Fs.classes.URLSearchParams,Object.assign({visitor:function(r,i,u,d){return Fs.isNode&&Gt.isBuffer(r)?(this.append(i,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},e))}function Nne(t){return Gt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $ne(t){const e={},r=Object.keys(t);let i;const u=r.length;let d;for(i=0;i<u;i++)d=r[i],e[d]=t[d];return e}function Az(t){function e(r,i,u,d){let m=r[d++];const o=Number.isFinite(+m),_=d>=r.length;return m=!m&&Gt.isArray(u)?u.length:m,_?(Gt.hasOwnProp(u,m)?u[m]=[u[m],i]:u[m]=i,!o):((!u[m]||!Gt.isObject(u[m]))&&(u[m]=[]),e(r,i,u[m],d)&&Gt.isArray(u[m])&&(u[m]=$ne(u[m])),!o)}if(Gt.isFormData(t)&&Gt.isFunction(t.entries)){const r={};return Gt.forEachEntry(t,(i,u)=>{e(Nne(i),u,r,0)}),r}return null}const jne={"Content-Type":void 0};function Vne(t,e,r){if(Gt.isString(t))try{return(e||JSON.parse)(t),Gt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}const By={transitional:Pz,adapter:["xhr","http"],transformRequest:[function(e,r){const i=r.getContentType()||"",u=i.indexOf("application/json")>-1,d=Gt.isObject(e);if(d&&Gt.isHTMLForm(e)&&(e=new FormData(e)),Gt.isFormData(e))return u&&u?JSON.stringify(Az(e)):e;if(Gt.isArrayBuffer(e)||Gt.isBuffer(e)||Gt.isStream(e)||Gt.isFile(e)||Gt.isBlob(e))return e;if(Gt.isArrayBufferView(e))return e.buffer;if(Gt.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Bne(e,this.formSerializer).toString();if((o=Gt.isFileList(e))||i.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return Fy(o?{"files[]":e}:e,_&&new _,this.formSerializer)}}return d||u?(r.setContentType("application/json",!1),Vne(e)):e}],transformResponse:[function(e){const r=this.transitional||By.transitional,i=r&&r.forcedJSONParsing,u=this.responseType==="json";if(e&&Gt.isString(e)&&(i&&!this.responseType||u)){const m=!(r&&r.silentJSONParsing)&&u;try{return JSON.parse(e)}catch(o){if(m)throw o.name==="SyntaxError"?Mr.from(o,Mr.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fs.classes.FormData,Blob:Fs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Gt.forEach(["delete","get","head"],function(e){By.headers[e]={}});Gt.forEach(["post","put","patch"],function(e){By.headers[e]=Gt.merge(jne)});const OC=By,Une=Gt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kne=t=>{const e={};let r,i,u;return t&&t.split(`
`).forEach(function(m){u=m.indexOf(":"),r=m.substring(0,u).trim().toLowerCase(),i=m.substring(u+1).trim(),!(!r||e[r]&&Une[r])&&(r==="set-cookie"?e[r]?e[r].push(i):e[r]=[i]:e[r]=e[r]?e[r]+", "+i:i)}),e},mM=Symbol("internals");function $h(t){return t&&String(t).trim().toLowerCase()}function vg(t){return t===!1||t==null?t:Gt.isArray(t)?t.map(vg):String(t)}function Gne(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)e[i[1]]=i[2];return e}function Hne(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function vM(t,e,r,i){if(Gt.isFunction(i))return i.call(this,e,r);if(!!Gt.isString(e)){if(Gt.isString(i))return e.indexOf(i)!==-1;if(Gt.isRegExp(i))return i.test(e)}}function qne(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,i)=>r.toUpperCase()+i)}function Wne(t,e){const r=Gt.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+r,{value:function(u,d,m){return this[i].call(this,e,u,d,m)},configurable:!0})})}class Ny{constructor(e){e&&this.set(e)}set(e,r,i){const u=this;function d(o,_,C){const T=$h(_);if(!T)throw new Error("header name must be a non-empty string");const S=Gt.findKey(u,T);(!S||u[S]===void 0||C===!0||C===void 0&&u[S]!==!1)&&(u[S||_]=vg(o))}const m=(o,_)=>Gt.forEach(o,(C,T)=>d(C,T,_));return Gt.isPlainObject(e)||e instanceof this.constructor?m(e,r):Gt.isString(e)&&(e=e.trim())&&!Hne(e)?m(Kne(e),r):e!=null&&d(r,e,i),this}get(e,r){if(e=$h(e),e){const i=Gt.findKey(this,e);if(i){const u=this[i];if(!r)return u;if(r===!0)return Gne(u);if(Gt.isFunction(r))return r.call(this,u,i);if(Gt.isRegExp(r))return r.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=$h(e),e){const i=Gt.findKey(this,e);return!!(i&&(!r||vM(this,this[i],i,r)))}return!1}delete(e,r){const i=this;let u=!1;function d(m){if(m=$h(m),m){const o=Gt.findKey(i,m);o&&(!r||vM(i,i[o],o,r))&&(delete i[o],u=!0)}}return Gt.isArray(e)?e.forEach(d):d(e),u}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const r=this,i={};return Gt.forEach(this,(u,d)=>{const m=Gt.findKey(i,d);if(m){r[m]=vg(u),delete r[d];return}const o=e?qne(d):String(d).trim();o!==d&&delete r[d],r[o]=vg(u),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Gt.forEach(this,(i,u)=>{i!=null&&i!==!1&&(r[u]=e&&Gt.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const i=new this(e);return r.forEach(u=>i.set(u)),i}static accessor(e){const i=(this[mM]=this[mM]={accessors:{}}).accessors,u=this.prototype;function d(m){const o=$h(m);i[o]||(Wne(u,m),i[o]=!0)}return Gt.isArray(e)?e.forEach(d):d(e),this}}Ny.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);Gt.freezeMethods(Ny.prototype);Gt.freezeMethods(Ny);const Bs=Ny;function xx(t,e){const r=this||OC,i=e||r,u=Bs.from(i.headers);let d=i.data;return Gt.forEach(t,function(o){d=o.call(r,d,u.normalize(),e?e.status:void 0)}),u.normalize(),d}function Mz(t){return!!(t&&t.__CANCEL__)}function qp(t,e,r){Mr.call(this,t==null?"canceled":t,Mr.ERR_CANCELED,e,r),this.name="CanceledError"}Gt.inherits(qp,Mr,{__CANCEL__:!0});const Zne=null;function Xne(t,e,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):e(new Mr("Request failed with status code "+r.status,[Mr.ERR_BAD_REQUEST,Mr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Yne=Fs.isStandardBrowserEnv?function(){return{write:function(r,i,u,d,m,o){const _=[];_.push(r+"="+encodeURIComponent(i)),Gt.isNumber(u)&&_.push("expires="+new Date(u).toGMTString()),Gt.isString(d)&&_.push("path="+d),Gt.isString(m)&&_.push("domain="+m),o===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(r){const i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Jne(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Qne(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function kz(t,e){return t&&!Jne(e)?Qne(t,e):e}const ere=Fs.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let i;function u(d){let m=d;return e&&(r.setAttribute("href",m),m=r.href),r.setAttribute("href",m),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=u(window.location.href),function(m){const o=Gt.isString(m)?u(m):m;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function tre(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function nre(t,e){t=t||10;const r=new Array(t),i=new Array(t);let u=0,d=0,m;return e=e!==void 0?e:1e3,function(_){const C=Date.now(),T=i[d];m||(m=C),r[u]=_,i[u]=C;let S=d,P=0;for(;S!==u;)P+=r[S++],S=S%t;if(u=(u+1)%t,u===d&&(d=(d+1)%t),C-m<e)return;const A=T&&C-T;return A?Math.round(P*1e3/A):void 0}}function gM(t,e){let r=0;const i=nre(50,250);return u=>{const d=u.loaded,m=u.lengthComputable?u.total:void 0,o=d-r,_=i(o),C=d<=m;r=d;const T={loaded:d,total:m,progress:m?d/m:void 0,bytes:o,rate:_||void 0,estimated:_&&m&&C?(m-d)/_:void 0,event:u};T[e?"download":"upload"]=!0,t(T)}}const rre=typeof XMLHttpRequest<"u",ire=rre&&function(t){return new Promise(function(r,i){let u=t.data;const d=Bs.from(t.headers).normalize(),m=t.responseType;let o;function _(){t.cancelToken&&t.cancelToken.unsubscribe(o),t.signal&&t.signal.removeEventListener("abort",o)}Gt.isFormData(u)&&Fs.isStandardBrowserEnv&&d.setContentType(!1);let C=new XMLHttpRequest;if(t.auth){const A=t.auth.username||"",O=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";d.set("Authorization","Basic "+btoa(A+":"+O))}const T=kz(t.baseURL,t.url);C.open(t.method.toUpperCase(),Iz(T,t.params,t.paramsSerializer),!0),C.timeout=t.timeout;function S(){if(!C)return;const A=Bs.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),R={data:!m||m==="text"||m==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:A,config:t,request:C};Xne(function(F){r(F),_()},function(F){i(F),_()},R),C=null}if("onloadend"in C?C.onloadend=S:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(S)},C.onabort=function(){!C||(i(new Mr("Request aborted",Mr.ECONNABORTED,t,C)),C=null)},C.onerror=function(){i(new Mr("Network Error",Mr.ERR_NETWORK,t,C)),C=null},C.ontimeout=function(){let O=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const R=t.transitional||Pz;t.timeoutErrorMessage&&(O=t.timeoutErrorMessage),i(new Mr(O,R.clarifyTimeoutError?Mr.ETIMEDOUT:Mr.ECONNABORTED,t,C)),C=null},Fs.isStandardBrowserEnv){const A=(t.withCredentials||ere(T))&&t.xsrfCookieName&&Yne.read(t.xsrfCookieName);A&&d.set(t.xsrfHeaderName,A)}u===void 0&&d.setContentType(null),"setRequestHeader"in C&&Gt.forEach(d.toJSON(),function(O,R){C.setRequestHeader(R,O)}),Gt.isUndefined(t.withCredentials)||(C.withCredentials=!!t.withCredentials),m&&m!=="json"&&(C.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&C.addEventListener("progress",gM(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",gM(t.onUploadProgress)),(t.cancelToken||t.signal)&&(o=A=>{!C||(i(!A||A.type?new qp(null,t,C):A),C.abort(),C=null)},t.cancelToken&&t.cancelToken.subscribe(o),t.signal&&(t.signal.aborted?o():t.signal.addEventListener("abort",o)));const P=tre(T);if(P&&Fs.protocols.indexOf(P)===-1){i(new Mr("Unsupported protocol "+P+":",Mr.ERR_BAD_REQUEST,t));return}C.send(u||null)})},gg={http:Zne,xhr:ire};Gt.forEach(gg,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ore={getAdapter:t=>{t=Gt.isArray(t)?t:[t];const{length:e}=t;let r,i;for(let u=0;u<e&&(r=t[u],!(i=Gt.isString(r)?gg[r.toLowerCase()]:r));u++);if(!i)throw i===!1?new Mr(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Gt.hasOwnProp(gg,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!Gt.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:gg};function bx(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qp}function yM(t){return bx(t),t.headers=Bs.from(t.headers),t.data=xx.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ore.getAdapter(t.adapter||OC.adapter)(t).then(function(i){return bx(t),i.data=xx.call(t,t.transformResponse,i),i.headers=Bs.from(i.headers),i},function(i){return Mz(i)||(bx(t),i&&i.response&&(i.response.data=xx.call(t,t.transformResponse,i.response),i.response.headers=Bs.from(i.response.headers))),Promise.reject(i)})}const _M=t=>t instanceof Bs?t.toJSON():t;function Dp(t,e){e=e||{};const r={};function i(C,T,S){return Gt.isPlainObject(C)&&Gt.isPlainObject(T)?Gt.merge.call({caseless:S},C,T):Gt.isPlainObject(T)?Gt.merge({},T):Gt.isArray(T)?T.slice():T}function u(C,T,S){if(Gt.isUndefined(T)){if(!Gt.isUndefined(C))return i(void 0,C,S)}else return i(C,T,S)}function d(C,T){if(!Gt.isUndefined(T))return i(void 0,T)}function m(C,T){if(Gt.isUndefined(T)){if(!Gt.isUndefined(C))return i(void 0,C)}else return i(void 0,T)}function o(C,T,S){if(S in e)return i(C,T);if(S in t)return i(void 0,C)}const _={url:d,method:d,data:d,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:o,headers:(C,T)=>u(_M(C),_M(T),!0)};return Gt.forEach(Object.keys(t).concat(Object.keys(e)),function(T){const S=_[T]||u,P=S(t[T],e[T],T);Gt.isUndefined(P)&&S!==o||(r[T]=P)}),r}const Oz="1.2.0",DC={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{DC[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const xM={};DC.transitional=function(e,r,i){function u(d,m){return"[Axios v"+Oz+"] Transitional option '"+d+"'"+m+(i?". "+i:"")}return(d,m,o)=>{if(e===!1)throw new Mr(u(m," has been removed"+(r?" in "+r:"")),Mr.ERR_DEPRECATED);return r&&!xM[m]&&(xM[m]=!0,console.warn(u(m," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(d,m,o):!0}};function are(t,e,r){if(typeof t!="object")throw new Mr("options must be an object",Mr.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let u=i.length;for(;u-- >0;){const d=i[u],m=e[d];if(m){const o=t[d],_=o===void 0||m(o,d,t);if(_!==!0)throw new Mr("option "+d+" must be "+_,Mr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Mr("Unknown option "+d,Mr.ERR_BAD_OPTION)}}const h1={assertOptions:are,validators:DC},Sl=h1.validators;class Ug{constructor(e){this.defaults=e,this.interceptors={request:new pM,response:new pM}}request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Dp(this.defaults,r);const{transitional:i,paramsSerializer:u,headers:d}=r;i!==void 0&&h1.assertOptions(i,{silentJSONParsing:Sl.transitional(Sl.boolean),forcedJSONParsing:Sl.transitional(Sl.boolean),clarifyTimeoutError:Sl.transitional(Sl.boolean)},!1),u!==void 0&&h1.assertOptions(u,{encode:Sl.function,serialize:Sl.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let m;m=d&&Gt.merge(d.common,d[r.method]),m&&Gt.forEach(["delete","get","head","post","put","patch","common"],O=>{delete d[O]}),r.headers=Bs.concat(m,d);const o=[];let _=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(_=_&&R.synchronous,o.unshift(R.fulfilled,R.rejected))});const C=[];this.interceptors.response.forEach(function(R){C.push(R.fulfilled,R.rejected)});let T,S=0,P;if(!_){const O=[yM.bind(this),void 0];for(O.unshift.apply(O,o),O.push.apply(O,C),P=O.length,T=Promise.resolve(r);S<P;)T=T.then(O[S++],O[S++]);return T}P=o.length;let A=r;for(S=0;S<P;){const O=o[S++],R=o[S++];try{A=O(A)}catch(z){R.call(this,z);break}}try{T=yM.call(this,A)}catch(O){return Promise.reject(O)}for(S=0,P=C.length;S<P;)T=T.then(C[S++],C[S++]);return T}getUri(e){e=Dp(this.defaults,e);const r=kz(e.baseURL,e.url);return Iz(r,e.params,e.paramsSerializer)}}Gt.forEach(["delete","get","head","options"],function(e){Ug.prototype[e]=function(r,i){return this.request(Dp(i||{},{method:e,url:r,data:(i||{}).data}))}});Gt.forEach(["post","put","patch"],function(e){function r(i){return function(d,m,o){return this.request(Dp(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:m}))}}Ug.prototype[e]=r(),Ug.prototype[e+"Form"]=r(!0)});const yg=Ug;class RC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const i=this;this.promise.then(u=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](u);i._listeners=null}),this.promise.then=u=>{let d;const m=new Promise(o=>{i.subscribe(o),d=o}).then(u);return m.cancel=function(){i.unsubscribe(d)},m},e(function(d,m,o){i.reason||(i.reason=new qp(d,m,o),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new RC(function(u){e=u}),cancel:e}}}const sre=RC;function lre(t){return function(r){return t.apply(null,r)}}function ure(t){return Gt.isObject(t)&&t.isAxiosError===!0}function Dz(t){const e=new yg(t),r=mz(yg.prototype.request,e);return Gt.extend(r,yg.prototype,e,{allOwnKeys:!0}),Gt.extend(r,e,null,{allOwnKeys:!0}),r.create=function(u){return Dz(Dp(t,u))},r}const $i=Dz(OC);$i.Axios=yg;$i.CanceledError=qp;$i.CancelToken=sre;$i.isCancel=Mz;$i.VERSION=Oz;$i.toFormData=Fy;$i.AxiosError=Mr;$i.Cancel=$i.CanceledError;$i.all=function(e){return Promise.all(e)};$i.spread=lre;$i.isAxiosError=ure;$i.AxiosHeaders=Bs;$i.formToJSON=t=>Az(Gt.isHTMLForm(t)?new FormData(t):t);$i.default=$i;const Kg=$i,Rz="https://tracker-api-opn6.onrender.com/",cre=Rz+"token",dre=Rz+"users",fre=async t=>await Kg.post(cre,t),zC=IC("auth",{state:()=>({authenticated:!1}),getters:{isAuthenticated:t=>t.authenticated},actions:{async login(t){try{const e=await fre(t);this.authenticated=e}catch(e){console.error(e)}},logout(){this.authenticated=!1}}}),hre={components:{Icon:TC},setup(t,e){const r=Hte(),i=zC(),u=Or({selectedKeys:[],openKeys:[],logoutModal:{},collapsed:!1,sidebarElements:Vee}),d=()=>{u.collapsed=!u.collapsed},m=_=>{!_||setTimeout(()=>{r.push({path:_})},300)},o=()=>{var _;(_=u.logoutModal)==null||_.toggleModal()};return e.expose({toggleCollapsed:d,state:u}),{...Wu(u),toggleCollapsed:d,handleLogoutClick:o,authStore:i,navigate:m}}},pre={class:"select-none"},mre={class:"select-none"},vre={class:"logout-menu p-absolute bottom-0"},gre={class:"select-none"};function yre(t,e,r,i,u,d){const m=qh("Icon"),o=Tp,_=Vd,C=jo,T=FR,S=BX,P=O1("wave-animation");return li(),Ya(S,{collapsed:t.collapsed,"onUpdate:collapsed":e[2]||(e[2]=A=>t.collapsed=A),trigger:null,collapsible:""},{default:pr(()=>[j(C,{mode:"inline",openKeys:t.openKeys,"onUpdate:openKeys":e[0]||(e[0]=A=>t.openKeys=A),selectedKeys:t.selectedKeys,"onUpdate:selectedKeys":e[1]||(e[1]=A=>t.selectedKeys=A)},{default:pr(()=>[(li(!0),$o(Hn,null,ST(t.sidebarElements,A=>(li(),$o(Hn,null,[A.subItems&&A.subItems.length?(li(),Ya(_,{key:A.path},{title:pr(()=>[oo("span",pre,[j(m,{class:"inline-block sidebar-icon",icon:A.icon,height:"20",width:"50"},null,8,["icon"]),Zi(Zv(A.name),1)])]),default:pr(()=>[(li(!0),$o(Hn,null,ST(A.subItems,O=>(li(),Ya(o,{key:O.path,onClick:R=>i.navigate(O.path)},{default:pr(()=>[uo(oo("div",null,null,512),[[P]]),Zi(" "+Zv(O.name),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)):(li(),Ya(o,{key:A.name,onClick:O=>i.navigate(A.path)},{default:pr(()=>[oo("span",mre,[uo(oo("div",null,null,512),[[P]]),j(m,{class:"inline-block sidebar-icon",icon:A.icon,height:"20",width:"50"},null,8,["icon"]),Zi(Zv(A.name),1)])]),_:2},1032,["onClick"]))],64))),256))]),_:1},8,["openKeys","selectedKeys"]),oo("div",vre,[j(C,{mode:"inline"},{default:pr(()=>[j(o,{onClick:i.handleLogoutClick},{default:pr(()=>[oo("span",gre,[uo(oo("div",null,null,512),[[P]]),j(m,{class:"inline-block sidebar-icon",icon:"icon:logout",height:"20",width:"50"}),Zi("Logout ")])]),_:1},8,["onClick"])]),_:1})]),j(T,{msg:"Are you sure you want to logout?",title:"Logout",onHandleOk:i.authStore.logout,ref:"logoutModal"},null,8,["onHandleOk"])]),_:1},8,["collapsed"])}const _re=$l(hre,[["render",yre]]),zz=IC("main",{state:()=>({count:0,loading:!1}),getters:{doubleCount:t=>t.count*2,getCount:t=>t.count,getLoading:t=>t.loading},actions:{increment(){this.count++},startLoading(){this.loading=!0},stopLoading(){this.loading=!1}}}),xre={number:{value:85,density:{enable:!0,value_area:789.1476416322727}},color:{value:"#1890ff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:1,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:5,random:!0,anim:{enable:!0,speed:2,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:140,color:"#ffffff",opacity:.3,width:1},move:{enable:!0,speed:1,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}},array:[]},bre={detect_on:"canvas",events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:150,size:10,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},wre=!0,Cre={particles:xre,interactivity:bre,retina_detect:wre},Sre={number:{value:85,density:{enable:!0,value_area:789.1476416322727}},color:{value:"#1890ff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:1,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:5,random:!0,anim:{enable:!0,speed:2,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:140,color:"#ffffff",opacity:.3,width:1},move:{enable:!0,speed:1,direction:"none",random:!0,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}},array:[]},Tre={detect_on:"canvas",events:{onhover:{enable:!0,mode:"bubble"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:150,size:10,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:1},remove:{particles_nb:2}},mouse:{}},Ere=!0,Ire={particles:Sre,interactivity:Tre,retina_detect:Ere};var Pre=function(t,e){console.log("run script");var r=document.querySelector("#"+t+" > .particles-js-canvas-el");this.pJS={canvas:{el:r,w:r.offsetWidth,h:r.offsetHeight},particles:{number:{value:400,density:{enable:!0,value_area:800}},color:{value:"#fff"},shape:{type:"circle",stroke:{width:0,color:"#ff0000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:1,random:!1,anim:{enable:!1,speed:2,opacity_min:0,sync:!1}},size:{value:20,random:!1,anim:{enable:!1,speed:20,size_min:0,sync:!1}},line_linked:{enable:!0,distance:100,color:"#fff",opacity:1,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:3e3,rotateY:3e3}},array:[]},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:100,line_linked:{opacity:1}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!1,fn:{interact:{},modes:{},vendors:{}},tmp:{}};var i=this.pJS;!e||!e.interactivity||!e.particles||!e.retina_detect||(i.interactivity=e.interactivity,i.particles=e.particles,i.retina_detect=e.retina_detect,i.tmp.obj={size_value:i.particles.size.value,size_anim_speed:i.particles.size.anim.speed,move_speed:i.particles.move.speed,line_linked_distance:i.particles.line_linked.distance,line_linked_width:i.particles.line_linked.width,mode_grab_distance:i.interactivity.modes.grab.distance,mode_bubble_distance:i.interactivity.modes.bubble.distance,mode_bubble_size:i.interactivity.modes.bubble.size,mode_repulse_distance:i.interactivity.modes.repulse.distance},i.fn.retinaInit=function(){i.retina_detect&&window.devicePixelRatio>1?(i.canvas.pxratio=window.devicePixelRatio,i.tmp.retina=!0):(i.canvas.pxratio=1,i.tmp.retina=!1),i.canvas.w=i.canvas.el.offsetWidth*i.canvas.pxratio,i.canvas.h=i.canvas.el.offsetHeight*i.canvas.pxratio,i.particles.size.value=i.tmp.obj.size_value*i.canvas.pxratio,i.particles.size.anim.speed=i.tmp.obj.size_anim_speed*i.canvas.pxratio,i.particles.move.speed=i.tmp.obj.move_speed*i.canvas.pxratio,i.particles.line_linked.distance=i.tmp.obj.line_linked_distance*i.canvas.pxratio,i.interactivity.modes.grab.distance=i.tmp.obj.mode_grab_distance*i.canvas.pxratio,i.interactivity.modes.bubble.distance=i.tmp.obj.mode_bubble_distance*i.canvas.pxratio,i.particles.line_linked.width=i.tmp.obj.line_linked_width*i.canvas.pxratio,i.interactivity.modes.bubble.size=i.tmp.obj.mode_bubble_size*i.canvas.pxratio,i.interactivity.modes.repulse.distance=i.tmp.obj.mode_repulse_distance*i.canvas.pxratio},i.fn.canvasInit=function(){i.canvas.ctx=i.canvas.el.getContext("2d")},i.fn.canvasSize=function(){i.canvas.el.width=i.canvas.w,i.canvas.el.height=i.canvas.h,i&&i.interactivity.events.resize&&window.addEventListener("resize",function(){i.canvas.w=i.canvas.el.offsetWidth,i.canvas.h=i.canvas.el.offsetHeight,i.tmp.retina&&(i.canvas.w*=i.canvas.pxratio,i.canvas.h*=i.canvas.pxratio),i.canvas.el.width=i.canvas.w,i.canvas.el.height=i.canvas.h,i.particles.move.enable||(i.fn.particlesEmpty(),i.fn.particlesCreate(),i.fn.particlesDraw(),i.fn.vendors.densityAutoParticles()),i.fn.vendors.densityAutoParticles()})},i.fn.canvasPaint=function(){i.canvas.ctx.fillRect(0,0,i.canvas.w,i.canvas.h)},i.fn.canvasClear=function(){i.canvas.ctx.clearRect(0,0,i.canvas.w,i.canvas.h)},i.fn.particle=function(u,d,m){if(this.radius=(i.particles.size.random?Math.random():1)*i.particles.size.value,i.particles.size.anim.enable&&(this.size_status=!1,this.vs=i.particles.size.anim.speed/100,i.particles.size.anim.sync||(this.vs=this.vs*Math.random())),this.x=m?m.x:Math.random()*i.canvas.w,this.y=m?m.y:Math.random()*i.canvas.h,this.x>i.canvas.w-this.radius*2?this.x=this.x-this.radius:this.x<this.radius*2&&(this.x=this.x+this.radius),this.y>i.canvas.h-this.radius*2?this.y=this.y-this.radius:this.y<this.radius*2&&(this.y=this.y+this.radius),i.particles.move.bounce&&i.fn.vendors.checkOverlap(this,m),this.color={},typeof u.value=="object")if(u.value instanceof Array){var o=u.value[Math.floor(Math.random()*i.particles.color.value.length)];this.color.rgb=wx(o)}else u.value.r!=null&&u.value.g!=null&&u.value.b!=null&&(this.color.rgb={r:u.value.r,g:u.value.g,b:u.value.b}),u.value.h!=null&&u.value.s!=null&&u.value.l!=null&&(this.color.hsl={h:u.value.h,s:u.value.s,l:u.value.l});else u.value=="random"?this.color.rgb={r:Math.floor(Math.random()*(255-0+1))+0,g:Math.floor(Math.random()*(255-0+1))+0,b:Math.floor(Math.random()*(255-0+1))+0}:typeof u.value=="string"&&(this.color=u,this.color.rgb=wx(this.color.value));this.opacity=(i.particles.opacity.random?Math.random():1)*i.particles.opacity.value,i.particles.opacity.anim.enable&&(this.opacity_status=!1,this.vo=i.particles.opacity.anim.speed/100,i.particles.opacity.anim.sync||(this.vo=this.vo*Math.random()));var _={};switch(i.particles.move.direction){case"top":_={x:0,y:-1};break;case"top-right":_={x:.5,y:-.5};break;case"right":_={x:1,y:-0};break;case"bottom-right":_={x:.5,y:.5};break;case"bottom":_={x:0,y:1};break;case"bottom-left":_={x:-.5,y:1};break;case"left":_={x:-1,y:0};break;case"top-left":_={x:-.5,y:-.5};break;default:_={x:0,y:0};break}i.particles.move.straight?(this.vx=_.x,this.vy=_.y,i.particles.move.random&&(this.vx=this.vx*Math.random(),this.vy=this.vy*Math.random())):(this.vx=_.x+Math.random()-.5,this.vy=_.y+Math.random()-.5),this.vx_i=this.vx,this.vy_i=this.vy;var C=i.particles.shape.type;if(typeof C=="object"){if(C instanceof Array){var T=C[Math.floor(Math.random()*C.length)];this.shape=T}}else this.shape=C;if(this.shape=="image"){var S=i.particles.shape;this.img={src:S.image.src,ratio:S.image.width/S.image.height},this.img.ratio||(this.img.ratio=1),i.tmp.img_type=="svg"&&i.tmp.source_svg!=null&&(i.fn.vendors.createSvgImg(this),i.tmp.pushing&&(this.img.loaded=!1))}},i.fn.particle.prototype.draw=function(){var u=this;if(u.radius_bubble!=null)var d=u.radius_bubble;else var d=u.radius;if(u.opacity_bubble!=null)var m=u.opacity_bubble;else var m=u.opacity;if(u.color.rgb)var o="rgba("+u.color.rgb.r+","+u.color.rgb.g+","+u.color.rgb.b+","+m+")";else var o="hsla("+u.color.hsl.h+","+u.color.hsl.s+"%,"+u.color.hsl.l+"%,"+m+")";switch(i.canvas.ctx.fillStyle=o,i.canvas.ctx.beginPath(),u.shape){case"circle":i.canvas.ctx.arc(u.x,u.y,d,0,Math.PI*2,!1);break;case"edge":i.canvas.ctx.rect(u.x-d,u.y-d,d*2,d*2);break;case"triangle":i.fn.vendors.drawShape(i.canvas.ctx,u.x-d,u.y+d/1.66,d*2,3,2);break;case"polygon":i.fn.vendors.drawShape(i.canvas.ctx,u.x-d/(i.particles.shape.polygon.nb_sides/3.5),u.y-d/(2.66/3.5),d*2.66/(i.particles.shape.polygon.nb_sides/3),i.particles.shape.polygon.nb_sides,1);break;case"star":i.fn.vendors.drawShape(i.canvas.ctx,u.x-d*2/(i.particles.shape.polygon.nb_sides/4),u.y-d/(2*2.66/3.5),d*2*2.66/(i.particles.shape.polygon.nb_sides/3),i.particles.shape.polygon.nb_sides,2);break;case"image":let T=function(){i.canvas.ctx.drawImage(_,u.x-d,u.y-d,d*2,d*2/u.img.ratio)};var C=T;if(i.tmp.img_type=="svg")var _=u.img.obj;else var _=i.tmp.img_obj;_&&T();break}i.canvas.ctx.closePath(),i.particles.shape.stroke.width>0&&(i.canvas.ctx.strokeStyle=i.particles.shape.stroke.color,i.canvas.ctx.lineWidth=i.particles.shape.stroke.width,i.canvas.ctx.stroke()),i.canvas.ctx.fill()},i.fn.particlesCreate=function(){for(var u=0;u<i.particles.number.value;u++)i.particles.array.push(new i.fn.particle(i.particles.color,i.particles.opacity.value))},i.fn.particlesUpdate=function(){for(var u=0;u<i.particles.array.length;u++){var d=i.particles.array[u];if(i.particles.move.enable){var m=i.particles.move.speed/2;d.x+=d.vx*m,d.y+=d.vy*m}if(i.particles.opacity.anim.enable&&(d.opacity_status==!0?(d.opacity>=i.particles.opacity.value&&(d.opacity_status=!1),d.opacity+=d.vo):(d.opacity<=i.particles.opacity.anim.opacity_min&&(d.opacity_status=!0),d.opacity-=d.vo),d.opacity<0&&(d.opacity=0)),i.particles.size.anim.enable&&(d.size_status==!0?(d.radius>=i.particles.size.value&&(d.size_status=!1),d.radius+=d.vs):(d.radius<=i.particles.size.anim.size_min&&(d.size_status=!0),d.radius-=d.vs),d.radius<0&&(d.radius=0)),i.particles.move.out_mode=="bounce")var o={x_left:d.radius,x_right:i.canvas.w,y_top:d.radius,y_bottom:i.canvas.h};else var o={x_left:-d.radius,x_right:i.canvas.w+d.radius,y_top:-d.radius,y_bottom:i.canvas.h+d.radius};switch(d.x-d.radius>i.canvas.w?(d.x=o.x_left,d.y=Math.random()*i.canvas.h):d.x+d.radius<0&&(d.x=o.x_right,d.y=Math.random()*i.canvas.h),d.y-d.radius>i.canvas.h?(d.y=o.y_top,d.x=Math.random()*i.canvas.w):d.y+d.radius<0&&(d.y=o.y_bottom,d.x=Math.random()*i.canvas.w),i.particles.move.out_mode){case"bounce":(d.x+d.radius>i.canvas.w||d.x-d.radius<0)&&(d.vx=-d.vx),(d.y+d.radius>i.canvas.h||d.y-d.radius<0)&&(d.vy=-d.vy);break}if(Ka("grab",i.interactivity.events.onhover.mode)&&i.fn.modes.grabParticle(d),(Ka("bubble",i.interactivity.events.onhover.mode)||Ka("bubble",i.interactivity.events.onclick.mode))&&i.fn.modes.bubbleParticle(d),(Ka("repulse",i.interactivity.events.onhover.mode)||Ka("repulse",i.interactivity.events.onclick.mode))&&i.fn.modes.repulseParticle(d),i.particles.line_linked.enable||i.particles.move.attract.enable)for(var _=u+1;_<i.particles.array.length;_++){var C=i.particles.array[_];i.particles.line_linked.enable&&i.fn.interact.linkParticles(d,C),i.particles.move.attract.enable&&i.fn.interact.attractParticles(d,C),i.particles.move.bounce&&i.fn.interact.bounceParticles(d,C)}}},i.fn.particlesDraw=function(){i.canvas.ctx.clearRect(0,0,i.canvas.w,i.canvas.h),i.fn.particlesUpdate();for(var u=0;u<i.particles.array.length;u++){var d=i.particles.array[u];d.draw()}},i.fn.particlesEmpty=function(){i.particles.array=[]},i.fn.particlesRefresh=function(){cancelRequestAnimFrame(i.fn.checkAnimFrame),cancelRequestAnimFrame(i.fn.drawAnimFrame),i.tmp.source_svg=void 0,i.tmp.img_obj=void 0,i.tmp.count_svg=0,i.fn.particlesEmpty(),i.fn.canvasClear(),i.fn.vendors.start()},i.fn.interact.linkParticles=function(u,d){var m=u.x-d.x,o=u.y-d.y,_=Math.sqrt(m*m+o*o);if(_<=i.particles.line_linked.distance){var C=i.particles.line_linked.opacity-_/(1/i.particles.line_linked.opacity)/i.particles.line_linked.distance;if(C>0){var T=i.particles.line_linked.color_rgb_line;i.canvas.ctx.strokeStyle="rgba("+T.r+","+T.g+","+T.b+","+C+")",i.canvas.ctx.lineWidth=i.particles.line_linked.width,i.canvas.ctx.beginPath(),i.canvas.ctx.moveTo(u.x,u.y),i.canvas.ctx.lineTo(d.x,d.y),i.canvas.ctx.stroke(),i.canvas.ctx.closePath()}}},i.fn.interact.attractParticles=function(u,d){var m=u.x-d.x,o=u.y-d.y,_=Math.sqrt(m*m+o*o);if(_<=i.particles.line_linked.distance){var C=m/(i.particles.move.attract.rotateX*1e3),T=o/(i.particles.move.attract.rotateY*1e3);u.vx-=C,u.vy-=T,d.vx+=C,d.vy+=T}},i.fn.interact.bounceParticles=function(u,d){var m=u.x-d.x,o=u.y-d.y,_=Math.sqrt(m*m+o*o),C=u.radius+d.radius;_<=C&&(u.vx=-u.vx,u.vy=-u.vy,d.vx=-d.vx,d.vy=-d.vy)},i.fn.modes.pushParticles=function(u,d){i.tmp.pushing=!0;for(var m=0;m<u;m++)i.particles.array.push(new i.fn.particle(i.particles.color,i.particles.opacity.value,{x:d?d.pos_x:Math.random()*i.canvas.w,y:d?d.pos_y:Math.random()*i.canvas.h})),m==u-1&&(i.particles.move.enable||i.fn.particlesDraw(),i.tmp.pushing=!1)},i.fn.modes.removeParticles=function(u){i.particles.array.splice(0,u),i.particles.move.enable||i.fn.particlesDraw()},i.fn.modes.bubbleParticle=function(u){if(i.interactivity.events.onhover.enable&&Ka("bubble",i.interactivity.events.onhover.mode)){let R=function(){u.opacity_bubble=u.opacity,u.radius_bubble=u.radius};var A=R,d=u.x-i.interactivity.mouse.pos_x,m=u.y-i.interactivity.mouse.pos_y,o=Math.sqrt(d*d+m*m),_=1-o/i.interactivity.modes.bubble.distance;if(o<=i.interactivity.modes.bubble.distance){if(_>=0&&i.interactivity.status=="mousemove"){if(i.interactivity.modes.bubble.size!=i.particles.size.value)if(i.interactivity.modes.bubble.size>i.particles.size.value){var C=u.radius+i.interactivity.modes.bubble.size*_;C>=0&&(u.radius_bubble=C)}else{var T=u.radius-i.interactivity.modes.bubble.size,C=u.radius-T*_;C>0?u.radius_bubble=C:u.radius_bubble=0}if(i.interactivity.modes.bubble.opacity!=i.particles.opacity.value)if(i.interactivity.modes.bubble.opacity>i.particles.opacity.value){var S=i.interactivity.modes.bubble.opacity*_;S>u.opacity&&S<=i.interactivity.modes.bubble.opacity&&(u.opacity_bubble=S)}else{var S=u.opacity-(i.particles.opacity.value-i.interactivity.modes.bubble.opacity)*_;S<u.opacity&&S>=i.interactivity.modes.bubble.opacity&&(u.opacity_bubble=S)}}}else R();i.interactivity.status=="mouseleave"&&R()}else if(i.interactivity.events.onclick.enable&&Ka("bubble",i.interactivity.events.onclick.mode)){let R=function(z,F,N,U,G){if(z!=F)if(i.tmp.bubble_duration_end){if(N!=null){var Z=U-P*(U-z)/i.interactivity.modes.bubble.duration,Q=z-Z;V=z+Q,G=="size"&&(u.radius_bubble=V),G=="opacity"&&(u.opacity_bubble=V)}}else if(o<=i.interactivity.modes.bubble.distance){if(N!=null)var q=N;else var q=U;if(q!=z){var V=U-P*(U-z)/i.interactivity.modes.bubble.duration;G=="size"&&(u.radius_bubble=V),G=="opacity"&&(u.opacity_bubble=V)}}else G=="size"&&(u.radius_bubble=void 0),G=="opacity"&&(u.opacity_bubble=void 0)};var O=R;if(i.tmp.bubble_clicking){var d=u.x-i.interactivity.mouse.click_pos_x,m=u.y-i.interactivity.mouse.click_pos_y,o=Math.sqrt(d*d+m*m),P=(new Date().getTime()-i.interactivity.mouse.click_time)/1e3;P>i.interactivity.modes.bubble.duration&&(i.tmp.bubble_duration_end=!0),P>i.interactivity.modes.bubble.duration*2&&(i.tmp.bubble_clicking=!1,i.tmp.bubble_duration_end=!1)}i.tmp.bubble_clicking&&(R(i.interactivity.modes.bubble.size,i.particles.size.value,u.radius_bubble,u.radius,"size"),R(i.interactivity.modes.bubble.opacity,i.particles.opacity.value,u.opacity_bubble,u.opacity,"opacity"))}},i.fn.modes.repulseParticle=function(u){if(i.interactivity.events.onhover.enable&&Ka("repulse",i.interactivity.events.onhover.mode)&&i.interactivity.status=="mousemove"){var d=u.x-i.interactivity.mouse.pos_x,m=u.y-i.interactivity.mouse.pos_y,o=Math.sqrt(d*d+m*m),_={x:d/o,y:m/o},C=i.interactivity.modes.repulse.distance,T=100,S=Are(1/C*(-1*Math.pow(o/C,2)+1)*C*T,0,50),P={x:u.x+_.x*S,y:u.y+_.y*S};i.particles.move.out_mode=="bounce"?(P.x-u.radius>0&&P.x+u.radius<i.canvas.w&&(u.x=P.x),P.y-u.radius>0&&P.y+u.radius<i.canvas.h&&(u.y=P.y)):(u.x=P.x,u.y=P.y)}else if(i.interactivity.events.onclick.enable&&Ka("repulse",i.interactivity.events.onclick.mode))if(i.tmp.repulse_finish||(i.tmp.repulse_count++,i.tmp.repulse_count==i.particles.array.length&&(i.tmp.repulse_finish=!0)),i.tmp.repulse_clicking){let U=function(){var G=Math.atan2(O,A);if(u.vx=z*Math.cos(G),u.vy=z*Math.sin(G),i.particles.move.out_mode=="bounce"){var q={x:u.x+u.vx,y:u.y+u.vy};(q.x+u.radius>i.canvas.w||q.x-u.radius<0)&&(u.vx=-u.vx),(q.y+u.radius>i.canvas.h||q.y-u.radius<0)&&(u.vy=-u.vy)}};var F=U,C=Math.pow(i.interactivity.modes.repulse.distance/6,3),A=i.interactivity.mouse.click_pos_x-u.x,O=i.interactivity.mouse.click_pos_y-u.y,R=A*A+O*O,z=-C/R*1;R<=C&&U()}else i.tmp.repulse_clicking==!1&&(u.vx=u.vx_i,u.vy=u.vy_i)},i.fn.modes.grabParticle=function(u){if(i.interactivity.events.onhover.enable&&i.interactivity.status=="mousemove"){var d=u.x-i.interactivity.mouse.pos_x,m=u.y-i.interactivity.mouse.pos_y,o=Math.sqrt(d*d+m*m);if(o<=i.interactivity.modes.grab.distance){var _=i.interactivity.modes.grab.line_linked.opacity-o/(1/i.interactivity.modes.grab.line_linked.opacity)/i.interactivity.modes.grab.distance;if(_>0){var C=i.particles.line_linked.color_rgb_line;i.canvas.ctx.strokeStyle="rgba("+C.r+","+C.g+","+C.b+","+_+")",i.canvas.ctx.lineWidth=i.particles.line_linked.width,i.canvas.ctx.beginPath(),i.canvas.ctx.moveTo(u.x,u.y),i.canvas.ctx.lineTo(i.interactivity.mouse.pos_x,i.interactivity.mouse.pos_y),i.canvas.ctx.stroke(),i.canvas.ctx.closePath()}}}},i.fn.vendors.eventsListeners=function(){i.interactivity.detect_on=="window"?i.interactivity.el=window:i.interactivity.el=i.canvas.el,(i.interactivity.events.onhover.enable||i.interactivity.events.onclick.enable)&&(i.interactivity.el.addEventListener("mousemove",function(u){if(i.interactivity.el==window)var d=u.clientX,m=u.clientY;else var d=u.offsetX||u.clientX,m=u.offsetY||u.clientY;i.interactivity.mouse.pos_x=d,i.interactivity.mouse.pos_y=m,i.tmp.retina&&(i.interactivity.mouse.pos_x*=i.canvas.pxratio,i.interactivity.mouse.pos_y*=i.canvas.pxratio),i.interactivity.status="mousemove"}),i.interactivity.el.addEventListener("mouseleave",function(u){i.interactivity.mouse.pos_x=null,i.interactivity.mouse.pos_y=null,i.interactivity.status="mouseleave"})),i.interactivity.events.onclick.enable&&i.interactivity.el.addEventListener("click",function(){if(i.interactivity.mouse.click_pos_x=i.interactivity.mouse.pos_x,i.interactivity.mouse.click_pos_y=i.interactivity.mouse.pos_y,i.interactivity.mouse.click_time=new Date().getTime(),i.interactivity.events.onclick.enable)switch(i.interactivity.events.onclick.mode){case"push":i.particles.move.enable||i.interactivity.modes.push.particles_nb==1?i.fn.modes.pushParticles(i.interactivity.modes.push.particles_nb,i.interactivity.mouse):i.interactivity.modes.push.particles_nb>1&&i.fn.modes.pushParticles(i.interactivity.modes.push.particles_nb);break;case"remove":i.fn.modes.removeParticles(i.interactivity.modes.remove.particles_nb);break;case"bubble":i.tmp.bubble_clicking=!0;break;case"repulse":i.tmp.repulse_clicking=!0,i.tmp.repulse_count=0,i.tmp.repulse_finish=!1,setTimeout(function(){i.tmp.repulse_clicking=!1},i.interactivity.modes.repulse.duration*1e3);break}})},i.fn.vendors.densityAutoParticles=function(){if(i.particles.number.density.enable){var u=i.canvas.el.width*i.canvas.el.height/1e3;i.tmp.retina&&(u=u/(i.canvas.pxratio*2));var d=u*i.particles.number.value/i.particles.number.density.value_area,m=i.particles.array.length-d;m<0?i.fn.modes.pushParticles(Math.abs(m)):i.fn.modes.removeParticles(m)}},i.fn.vendors.checkOverlap=function(u,d){for(var m=0;m<i.particles.array.length;m++){var o=i.particles.array[m],_=u.x-o.x,C=u.y-o.y,T=Math.sqrt(_*_+C*C);T<=u.radius+o.radius&&(u.x=d?d.x:Math.random()*i.canvas.w,u.y=d?d.y:Math.random()*i.canvas.h,i.fn.vendors.checkOverlap(u))}},i.fn.vendors.createSvgImg=function(u){var d=i.tmp.source_svg,m=/#([0-9A-F]{3,6})/gi,o=d.replace(m,function(P,A,O,R){if(u.color.rgb)var z="rgba("+u.color.rgb.r+","+u.color.rgb.g+","+u.color.rgb.b+","+u.opacity+")";else var z="hsla("+u.color.hsl.h+","+u.color.hsl.s+"%,"+u.color.hsl.l+"%,"+u.opacity+")";return z}),_=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),C=window.URL||window.webkitURL||window,T=C.createObjectURL(_),S=new Image;S.addEventListener("load",function(){u.img.obj=S,u.img.loaded=!0,C.revokeObjectURL(T),i.tmp.count_svg++}),S.src=T},i.fn.vendors.destroypJS=function(){cancelAnimationFrame(i.fn.drawAnimFrame),r.remove(),pJSDom=null},i.fn.vendors.drawShape=function(u,d,m,o,_,C){var T=_*C,S=_/C,P=180*(S-2)/S,A=Math.PI-Math.PI*P/180;u.save(),u.beginPath(),u.translate(d,m),u.moveTo(0,0);for(var O=0;O<T;O++)u.lineTo(o,0),u.translate(o,0),u.rotate(A);u.fill(),u.restore()},i.fn.vendors.exportImg=function(){window.open(i.canvas.el.toDataURL("image/png"),"_blank")},i.fn.vendors.loadImg=function(u){if(i.tmp.img_error=void 0,i.particles.shape.image.src!="")if(u=="svg"){var d=new XMLHttpRequest;d.open("GET",i.particles.shape.image.src),d.onreadystatechange=function(o){d.readyState==4&&(d.status==200?(i.tmp.source_svg=o.currentTarget.response,i.fn.vendors.checkBeforeDraw()):(console.log("Error pJS - Image not found"),i.tmp.img_error=!0))},d.send()}else{var m=new Image;m.addEventListener("load",function(){i.tmp.img_obj=m,i.fn.vendors.checkBeforeDraw()}),m.src=i.particles.shape.image.src}else console.log("Error pJS - No image.src"),i.tmp.img_error=!0},i.fn.vendors.draw=function(){i.particles.shape.type=="image"?i.tmp.img_type=="svg"?i.tmp.count_svg>=i.particles.number.value?(i.fn.particlesDraw(),i.particles.move.enable?i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw):cancelRequestAnimFrame(i.fn.drawAnimFrame)):i.tmp.img_error||(i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw)):i.tmp.img_obj!=null?(i.fn.particlesDraw(),i.particles.move.enable?i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw):cancelRequestAnimFrame(i.fn.drawAnimFrame)):i.tmp.img_error||(i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw)):(i.fn.particlesDraw(),i.particles.move.enable?i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw):cancelRequestAnimFrame(i.fn.drawAnimFrame))},i.fn.vendors.checkBeforeDraw=function(){i.particles.shape.type=="image"?i.tmp.img_type=="svg"&&i.tmp.source_svg==null?i.tmp.checkAnimFrame=requestAnimFrame(check):(cancelRequestAnimFrame(i.tmp.checkAnimFrame),i.tmp.img_error||(i.fn.vendors.init(),i.fn.vendors.draw())):(i.fn.vendors.init(),i.fn.vendors.draw())},i.fn.vendors.init=function(){i.fn.retinaInit(),i.fn.canvasInit(),i.fn.canvasSize(),i.fn.canvasPaint(),i.fn.particlesCreate(),i.fn.vendors.densityAutoParticles(),i.particles.line_linked.color_rgb_line=wx(i.particles.line_linked.color)},i.fn.vendors.start=function(){Ka("image",i.particles.shape.type)?(i.tmp.img_type=i.particles.shape.image.src.substr(i.particles.shape.image.src.length-3),i.fn.vendors.loadImg(i.tmp.img_type)):i.fn.vendors.checkBeforeDraw()},i.fn.vendors.eventsListeners(),i.fn.vendors.start())};Object.deepExtend=function(t,e){for(var r in e)e[r]&&e[r].constructor&&e[r].constructor===Object?(t[r]=t[r]||{},arguments.callee(t[r],e[r])):t[r]=e[r];return t};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();function wx(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,u,d,m){return u+u+d+d+m+m});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function Are(t,e,r){return Math.min(Math.max(t,e),r)}function Ka(t,e){return e.indexOf(t)>-1}window.pJSDom=[];window.particlesJS=function(t,e){typeof t!="string"&&(e=t,t="particles-js"),t||(t="particles-js");var r=document.getElementById(t),i="particles-js-canvas-el",u=r.getElementsByClassName(i);if(u.length)for(;u.length>0;)r.removeChild(u[0]);var d=document.createElement("canvas");d.className=i,d.style.width="100%",d.style.height="100%";var m=document.getElementById(t).appendChild(d);m!=null&&pJSDom.push(new Pre(t,e))};window.particlesJS.load=function(t,e,r){var i=new XMLHttpRequest;i.open("GET",e),i.onreadystatechange=function(u){if(i.readyState==4)if(i.status==200){var d=JSON.parse(u.currentTarget.response);window.particlesJS(t,d),r&&r()}else console.log("Error pJS - XMLHttpRequest status: "+i.status),console.log("Error pJS - File config not found")},i.send()};const Mre={mounted(){this.startParticles()},data(){return{clickCounts:0}},methods:{startParticles(){!window.particlesJS||window.particlesJS("particles-js",Cre)},startInteractiveParticles(){!window.particlesJS||window.particlesJS("particles-js",Ire)},handleCanvasClick(){this.clickCounts++,this.clickCounts===10&&this.startInteractiveParticles()}},setup(){const t=zC(),e=Or({username:"",password:"",remember:!0});return{formState:e,onFinish:u=>{console.log("Success:",u),t.login({username:e.username,password:e.password})},onFinishFailed:u=>{console.log("Failed:",u),t.logout()}}}},kre={class:"card"};function Ore(t,e,r,i,u,d){const m=qw,o=vi,_=sR,C=es,T=Xi,S=zs;return li(),$o(Hn,null,[oo("div",{onClick:e[0]||(e[0]=(...P)=>d.handleCanvasClick&&d.handleCanvasClick(...P)),id:"particles-js"}),oo("div",kre,[j(S,{class:"formClass select-none",model:i.formState,name:"basic","label-col":{span:8},"wrapper-col":{span:16},autocomplete:"off",onFinish:i.onFinish,onFinishFailed:i.onFinishFailed},{default:pr(()=>[j(m,{class:"title"},{default:pr(()=>[Zi("Asset Tracker Login")]),_:1}),j(m,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}]},{default:pr(()=>[j(o,{value:i.formState.username,"onUpdate:value":e[1]||(e[1]=P=>i.formState.username=P)},null,8,["value"])]),_:1}),j(m,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},{default:pr(()=>[j(_,{value:i.formState.password,"onUpdate:value":e[2]||(e[2]=P=>i.formState.password=P)},null,8,["value"])]),_:1}),j(m,{name:"remember","wrapper-col":{offset:0,span:16}},{default:pr(()=>[j(C,{checked:i.formState.remember,"onUpdate:checked":e[3]||(e[3]=P=>i.formState.remember=P)},{default:pr(()=>[Zi("Remember me")]),_:1},8,["checked"])]),_:1}),j(m,{"wrapper-col":{offset:8,span:16}},{default:pr(()=>[j(T,{type:"primary","html-type":"submit"},{default:pr(()=>[Zi("Submit")]),_:1})]),_:1})]),_:1},8,["model","onFinish","onFinishFailed"])])],64)}const Dre=$l(Mre,[["render",Ore],["__scopeId","data-v-3ff93541"]]),Rre={components:{Icon:TC,Login:Dre},setup(){const t=zz(),e=zC(),r=qe(),i=()=>{var d;(d=r.value)==null||d.toggleCollapsed()},u=ue(()=>{var d;return(d=r.value)==null?void 0:d.state.collapsed});return{store:t,authStore:e,sidebar:r,isCollapsed:u,handleCollapse:i}}},zre="/tracker/assets/logo.21cfc95e.png",Lre=oo("img",{src:zre,class:"logo inline-block",alt:""},null,-1),Fre={key:2,class:"overlay"};function Bre(t,e,r,i,u,d){const m=qh("Icon"),o=FX,_=_re,C=qh("router-view"),T=NX,S=$X,P=qh("Login"),A=Md,O=IY,R=O1("wave-animation");return li(),$o(Hn,null,[i.authStore.isAuthenticated?(li(),Ya(S,{key:0,class:"h-full"},{default:pr(()=>[j(o,null,{default:pr(()=>[Lre,uo((li(),$o("div",{class:"inline-block relative collapse-button",onClick:e[0]||(e[0]=(...z)=>i.handleCollapse&&i.handleCollapse(...z))},[i.isCollapsed?(li(),Ya(m,{key:0,icon:"icon:sidebaropen",height:"25",width:"25"})):(li(),Ya(m,{key:1,icon:"icon:sidebarclose",height:"25",width:"25"}))])),[[R]])]),_:1}),j(S,null,{default:pr(()=>[j(_,{ref:"sidebar"},null,512),j(T,{style:{height:"100%"}},{default:pr(()=>[j(C)]),_:1})]),_:1})]),_:1})):(li(),Ya(S,{key:1},{default:pr(()=>[j(T,null,{default:pr(()=>[j(P)]),_:1})]),_:1})),i.store.getLoading?(li(),$o("div",Fre,[j(O,null,{default:pr(()=>[j(A,{size:"large"})]),_:1})])):bk("",!0)],64)}const Nre=$l(Rre,[["render",Bre]]);var Lz={exports:{}};(function(t,e){(function(r,i){t.exports=i()})(E$,function(){var r,i,u;function d(o,_){if(!r)r=_;else if(!i)i=_;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",T={};r(T),u=_(T),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(u.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}d(["exports"],function(o){var _=typeof self<"u"?self:{},C=T;function T(s,n,a,c){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=c,this.p2x=a,this.p2y=c}T.prototype.sampleCurveX=function(s){return((this.ax*s+this.bx)*s+this.cx)*s},T.prototype.sampleCurveY=function(s){return((this.ay*s+this.by)*s+this.cy)*s},T.prototype.sampleCurveDerivativeX=function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},T.prototype.solveCurveX=function(s,n){var a,c,h,v,y;for(n===void 0&&(n=1e-6),h=s,y=0;y<8;y++){if(v=this.sampleCurveX(h)-s,Math.abs(v)<n)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=v/x}if((h=s)<(a=0))return a;if(h>(c=1))return c;for(;a<c;){if(v=this.sampleCurveX(h),Math.abs(v-s)<n)return h;s>v?a=h:c=h,h=.5*(c-a)+a}return h},T.prototype.solve=function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))};var S=P;function P(s,n){this.x=s,this.y=n}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,a=s.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),a=Math.sin(s),c=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=c,this},_rotateAround:function(s,n){var a=Math.cos(s),c=Math.sin(s),h=n.y+c*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-c*(this.y-n.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(s){return s instanceof P?s:Array.isArray(s)?new P(s[0],s[1]):s};const A=Math.PI/180,O=180/Math.PI;function R(s){return s*A}function z(s){return s*O}const F=[[0,0],[1,0],[1,1],[0,1]];function N(s){if(s<=0)return 0;if(s>=1)return 1;const n=s*s,a=n*s;return 4*(s<.5?a:3*(s-n)+a-.75)}function U(s,n,a,c){const h=new C(s,n,a,c);return function(v){return h.solve(v)}}const G=U(.25,.1,.25,1);function q(s,n,a){return Math.min(a,Math.max(n,s))}function V(s,n,a){return(a=q((a-s)/(n-s),0,1))*a*(3-2*a)}function Z(s,n,a){const c=a-n,h=((s-n)%c+c)%c+n;return h===n?a:h}function Q(s,n,a){if(!s.length)return a(null,[]);let c=s.length;const h=new Array(s.length);let v=null;s.forEach((y,x)=>{n(y,(E,I)=>{E&&(v=E),h[x]=I,--c==0&&a(v,h)})})}function te(s){const n=[];for(const a in s)n.push(s[a]);return n}function ie(s,...n){for(const a of n)for(const c in a)s[c]=a[c];return s}let ve=1;function ce(){return ve++}function de(){return function s(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function xe(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function De(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function ge(s,n){s.forEach(a=>{n[a]&&(n[a]=n[a].bind(n))})}function he(s,n){return s.indexOf(n,s.length-n.length)!==-1}function me(s,n,a){const c={};for(const h in s)c[h]=n.call(a||this,s[h],h,s);return c}function Pe(s,n,a){const c={};for(const h in s)n.call(a||this,s[h],h,s)&&(c[h]=s[h]);return c}function He(s){return Array.isArray(s)?s.map(He):typeof s=="object"&&s?me(s,He):s}const Ke={};function Re(s){Ke[s]||(typeof console<"u"&&console.warn(s),Ke[s]=!0)}function Le(s,n,a){return(a.y-s.y)*(n.x-s.x)>(n.y-s.y)*(a.x-s.x)}function Te(s){let n=0;for(let a,c,h=0,v=s.length,y=v-1;h<v;y=h++)a=s[h],c=s[y],n+=(c.x-a.x)*(a.y+c.y);return n}function oe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ze(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,c,h,v)=>{const y=h||v;return n[c]=!y||y.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n}let Fe=null;function lt(s){if(Fe==null){const n=s.navigator?s.navigator.userAgent:null;Fe=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Fe}function vt(s){try{const n=_[s];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function kt(s,n){return[s[4*n],s[4*n+1],s[4*n+2],s[4*n+3]]}const It=_.performance;function se(s){const n=s?s.url.toString():void 0;return It.getEntriesByName(n)}var ae="2.10.0";let Be,st,ut,bt;const At={now:()=>ut!==void 0?ut:_.performance.now(),setNow(s){ut=s},restoreNow(){ut=void 0},frame(s){const n=_.requestAnimationFrame(s);return{cancel:()=>_.cancelAnimationFrame(n)}},getImageData(s,n=0){const{width:a,height:c}=s;bt||(bt=_.document.createElement("canvas"));const h=bt.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return(a>bt.width||c>bt.height)&&(bt.width=a,bt.height=c),h.clearRect(-n,-n,a+2*n,c+2*n),h.drawImage(s,0,0,a,c),h.getImageData(-n,-n,a+2*n,c+2*n)},resolveURL:s=>(Be||(Be=_.document.createElement("a")),Be.href=s,Be.href),get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return!!_.matchMedia&&(st==null&&(st=_.matchMedia("(prefers-reduced-motion: reduce)")),st.matches)}};let _t;const nt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(_t==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{_t=process.env.API_URL_REGEX!=null?new RegExp(process.env.API_URL_REGEX):s}catch{_t=s}}return _t},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},tt={supported:!1,testSupport:function(s){!Ot&&dt&&(Kt?cn(s):pt=s)}};let pt,dt,Ot=!1,Kt=!1;function cn(s){const n=s.createTexture();s.bindTexture(s.TEXTURE_2D,n);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,dt),s.isContextLost())return;tt.supported=!0}catch{}s.deleteTexture(n),Ot=!0}_.document&&(dt=_.document.createElement("img"),dt.onload=function(){pt&&cn(pt),pt=null,Kt=!0},dt.onerror=function(){Ot=!0,pt=null},dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Cn="01",Rt="NO_ACCESS_TOKEN";function ht(s){return s.indexOf("mapbox:")===0}function Ht(s){return nt.API_URL_REGEX.test(s)}const wn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function zt(s){const n=s.match(wn);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function mt(s){const n=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${n}`}function St(s){if(!s)return null;const n=s.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(_.atob(n[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class yt{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const a=St(nt.ACCESS_TOKEN);let c="";return c=a&&a.u?_.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(h,v)=>String.fromCharCode(Number("0x"+v)))):nt.ACCESS_TOKEN||"",n?`mapbox.eventData.${n}:${c}`:`mapbox.eventData:${c}`}fetchEventData(){const n=vt("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{const h=_.localStorage.getItem(a);h&&(this.eventData=JSON.parse(h));const v=_.localStorage.getItem(c);v&&(this.anonId=v)}catch{Re("Unable to read from LocalStorage")}}saveEventData(){const n=vt("localStorage"),a=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{_.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{Re("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,a,c,h){if(!nt.EVENTS_URL)return;const v=zt(nt.EVENTS_URL);v.params.push(`access_token=${h||nt.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(n).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:ae,skuId:Cn,userId:this.anonId},x=a?ie(y,a):y,E={url:mt(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=Pt(E,I=>{this.pendingRequest=null,c(I),this.saveEventData(),this.processRequests(h)})}queueRequest(n,a){this.queue.push(n),this.processRequests(a)}}const Wt=new class extends yt{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,n){nt.EVENTS_URL&&nt.ACCESS_TOKEN&&Array.isArray(s)&&s.some(a=>ht(a)||Ht(a))&&this.queueRequest(Date.now(),n)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=St(nt.ACCESS_TOKEN),a=n?n.u:nt.ACCESS_TOKEN;let c=a!==this.eventData.tokenU;De(this.anonId)||(this.anonId=de(),c=!0);const h=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),y=new Date(h),x=(h-this.eventData.lastSuccess)/864e5;c=c||x>=1||x<-1||v.getDate()!==y.getDate()}else c=!0;c?this.postEvent(h,{"enabled.telemetry":!1},v=>{v||(this.eventData.lastSuccess=h,this.eventData.tokenU=a)},s):this.processRequests()}},tn=Wt.postTurnstileEvent.bind(Wt),on=new class extends yt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,n,a,c){this.skuToken=n,this.errorCb=c,nt.EVENTS_URL&&(a||nt.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},a):this.errorCb(new Error(Rt)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),De(this.anonId)||(this.anonId=de()),this.postEvent(a,{skuToken:this.skuToken},c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},s))}},Tt=on.postMapLoadEvent.bind(on),Et=new class extends yt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,n,a,c){if(!nt.API_URL||!nt.SESSION_PATH)return;const h=zt(nt.API_URL+nt.SESSION_PATH);h.params.push(`sku=${n||""}`),h.params.push(`access_token=${c||nt.ACCESS_TOKEN||""}`);const v={url:mt(h),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Qt(v,y=>{this.pendingRequest=null,a(y),this.saveEventData(),this.processRequests(c)})}getSessionAPI(s,n,a,c){this.skuToken=n,this.errorCb=c,nt.SESSION_PATH&&nt.API_URL&&(a||nt.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},a):this.errorCb(new Error(Rt)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:a}=this.queue.shift();n&&this.success[n]||this.getSession(a,this.skuToken,c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},s)}},sn=Et.getSessionAPI.bind(Et),xn=new Set;let An,Mn=500,ir=50,Dn={};function lr(s){const n=ne(s);let a,c;n&&n.forEach(v=>{const y=v.split("=");y[0]==="language"?a=y[1]:y[0]==="worldview"&&(c=y[1])});let h="mapbox-tiles";return a&&(h+=`-${a}`),c&&(h+=`-${c}`),h}function Ce(){try{return _.caches}catch{}}function Y(s){const n=Ce();n&&!Dn[s]&&(Dn[s]=n.open(s))}function ne(s){const n=s.indexOf("?");return n>0?s.slice(n+1).split("&"):[]}function be(s){const n=s.indexOf("?");if(n<0)return s;const a=ne(s).filter(c=>{const h=c.split("=");return h[0]==="language"||h[0]==="worldview"});return a.length?`${s.slice(0,n)}?${a.join("&")}`:s.slice(0,n)}let Oe=1/0;const Ve={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ve);class it extends Error{constructor(n,a,c){a===401&&Ht(c)&&(n+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(n),this.status=a,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const rt=oe()?()=>self.worker&&self.worker.referrer:()=>(_.location.protocol==="blob:"?_.parent:_).location.href,Xe=function(s,n){if(!(/^file:/.test(a=s.url)||/^file:/.test(rt())&&!/^\w+:/.test(a))){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return function(c,h){const v=new _.AbortController,y=new _.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:rt(),signal:v.signal});let x=!1,E=!1;const I=(D=y.url).indexOf("sku=")>0&&Ht(D);var D;c.type==="json"&&y.headers.set("Accept","application/json");const B=(X,J,re)=>{if(E)return;if(X&&X.message!=="SecurityError"&&Re(X),J&&re)return $(J);const fe=Date.now();_.fetch(y).then(Ae=>{if(Ae.ok){const je=I?Ae.clone():null;return $(Ae,je,fe)}return h(new it(Ae.statusText,Ae.status,c.url))}).catch(Ae=>{Ae.code!==20&&h(new Error(Ae.message))})},$=(X,J,re)=>{(c.type==="arrayBuffer"?X.arrayBuffer():c.type==="json"?X.json():X.text()).then(fe=>{E||(J&&re&&function(Ae,je,ke){const Ne=lr(Ae.url);if(Y(Ne),!Dn[Ne])return;const Je={status:je.status,statusText:je.statusText,headers:new _.Headers};je.headers.forEach((ft,Mt)=>Je.headers.set(Mt,ft));const Ue=ze(je.headers.get("Cache-Control")||"");if(Ue["no-store"])return;Ue["max-age"]&&Je.headers.set("Expires",new Date(ke+1e3*Ue["max-age"]).toUTCString());const gt=Je.headers.get("Expires");gt&&(new Date(gt).getTime()-ke<42e4||function(ft,Mt){if(An===void 0)try{new Response(new ReadableStream),An=!0}catch{An=!1}An?Mt(ft.body):ft.blob().then(Mt)}(je,ft=>{const Mt=new _.Response(ft,Je);Y(Ne),Dn[Ne]&&Dn[Ne].then(Jt=>Jt.put(be(Ae.url),Mt)).catch(Jt=>Re(Jt.message))}))}(y,J,re),x=!0,h(null,fe,X.headers.get("Cache-Control"),X.headers.get("Expires")))}).catch(fe=>{E||h(new Error(fe.message))})};return I?function(X,J){const re=lr(X.url);if(Y(re),!Dn[re])return J(null);const fe=be(X.url);Dn[re].then(Ae=>{Ae.match(fe).then(je=>{const ke=function(Ne){if(!Ne)return!1;const Je=new Date(Ne.headers.get("Expires")||0),Ue=ze(Ne.headers.get("Cache-Control")||"");return Je>Date.now()&&!Ue["no-cache"]}(je);Ae.delete(fe),ke&&Ae.put(fe,je.clone()),J(null,je,ke)}).catch(J)}).catch(J)}(y,B):B(null,null),{cancel:()=>{E=!0,x||v.abort()}}}(s,n);if(oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n,void 0,!0)}var a;return function(c,h){const v=new _.XMLHttpRequest;v.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const y in c.headers)v.setRequestHeader(y,c.headers[y]);return c.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=c.credentials==="include",v.onerror=()=>{h(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let y=v.response;if(c.type==="json")try{y=JSON.parse(v.response)}catch(x){return h(x)}h(null,y,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else h(new it(v.statusText,v.status,c.url))},v.send(c.body),{cancel:()=>v.abort()}}(s,n)},ot=function(s,n){return Xe(ie(s,{type:"arrayBuffer"}),n)},Pt=function(s,n){return Xe(ie(s,{method:"POST"}),n)},Qt=function(s,n){return Xe(ie(s,{method:"GET"}),n)};function Bt(s){const n=_.document.createElement("a");return n.href=s,n.protocol===_.document.location.protocol&&n.host===_.document.location.host}const Sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let mn,vn;mn=[],vn=0;const In=function(s,n){if(tt.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),vn>=nt.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:s,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return mn.push(v),v}vn++;let a=!1;const c=()=>{if(!a)for(a=!0,vn--;mn.length&&vn<nt.MAX_PARALLEL_IMAGE_REQUESTS;){const v=mn.shift(),{requestParameters:y,callback:x,cancelled:E}=v;E||(v.cancel=In(y,x).cancel)}},h=ot(s,(v,y,x,E)=>{c(),v?n(v):y&&(_.createImageBitmap?function(I,D){const B=new _.Blob([new Uint8Array(I)],{type:"image/png"});_.createImageBitmap(B).then($=>{D(null,$)}).catch($=>{D(new Error(`Could not load image because of ${$.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(I,D)=>n(I,D,x,E)):function(I,D){const B=new _.Image,$=_.URL;B.onload=()=>{D(null,B),$.revokeObjectURL(B.src),B.onload=null,_.requestAnimationFrame(()=>{B.src=Sn})},B.onerror=()=>D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const X=new _.Blob([new Uint8Array(I)],{type:"image/png"});B.src=I.byteLength?$.createObjectURL(X):Sn}(y,(I,D)=>n(I,D,x,E)))});return{cancel:()=>{h.cancel(),c()}}};function Nn(s,n,a){a[s]&&a[s].indexOf(n)!==-1||(a[s]=a[s]||[],a[s].push(n))}function nr(s,n,a){if(a&&a[s]){const c=a[s].indexOf(n);c!==-1&&a[s].splice(c,1)}}class rr{constructor(n,a={}){ie(this,a),this.type=n}}class Ln extends rr{constructor(n,a={}){super("error",ie({error:n},a))}}class gn{on(n,a){return this._listeners=this._listeners||{},Nn(n,a,this._listeners),this}off(n,a){return nr(n,a,this._listeners),nr(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Nn(n,a,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,a){typeof n=="string"&&(n=new rr(n,a||{}));const c=n.type;if(this.listens(c)){n.target=this;const h=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const x of h)x.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const x of v)nr(c,x,this._oneTimeListeners),x.call(this,n);const y=this._eventedParent;y&&(ie(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(n))}else n instanceof Ln&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var wt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Qi(s,...n){for(const a of n)for(const c in a)s[c]=a[c];return s}function Jr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Ta(s){if(Array.isArray(s))return s.map(Ta);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const a in s)n[a]=Ta(s[a]);return n}return Jr(s)}class uc extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}var So=uc;class cc{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[c,h]of a)this.bindings[c]=h}concat(n){return new cc(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var $y=cc;const Hs={kind:"null"},dn={kind:"number"},Zn={kind:"string"},Xn={kind:"boolean"},To={kind:"color"},Eo={kind:"object"},jn={kind:"value"},jl={kind:"collator"},Vl={kind:"formatted"},Ul={kind:"resolvedImage"};function eo(s,n){return{kind:"array",itemType:s,N:n}}function Wr(s){if(s.kind==="array"){const n=Wr(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const Wp=[Hs,dn,Zn,Xn,To,Vl,Eo,eo(jn),Ul];function qs(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!qs(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const a of Wp)if(!qs(a,n))return null}}return`Expected ${Wr(s)} but found ${Wr(n)} instead.`}function dc(s,n){return n.some(a=>a.kind===s.kind)}function Ea(s,n){return n.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function nf(s){var n={exports:{}};return s(n,n.exports),n.exports}var Ia=nf(function(s,n){var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(x){return(x=Math.round(x))<0?0:x>255?255:x}function h(x){return c(x[x.length-1]==="%"?parseFloat(x)/100*255:parseInt(x))}function v(x){return(E=x[x.length-1]==="%"?parseFloat(x)/100:parseFloat(x))<0?0:E>1?1:E;var E}function y(x,E,I){return I<0?I+=1:I>1&&(I-=1),6*I<1?x+(E-x)*I*6:2*I<1?E:3*I<2?x+(E-x)*(2/3-I)*6:x}try{n.parseCSSColor=function(x){var E,I=x.replace(/ /g,"").toLowerCase();if(I in a)return a[I].slice();if(I[0]==="#")return I.length===4?(E=parseInt(I.substr(1),16))>=0&&E<=4095?[(3840&E)>>4|(3840&E)>>8,240&E|(240&E)>>4,15&E|(15&E)<<4,1]:null:I.length===7&&(E=parseInt(I.substr(1),16))>=0&&E<=16777215?[(16711680&E)>>16,(65280&E)>>8,255&E,1]:null;var D=I.indexOf("("),B=I.indexOf(")");if(D!==-1&&B+1===I.length){var $=I.substr(0,D),X=I.substr(D+1,B-(D+1)).split(","),J=1;switch($){case"rgba":if(X.length!==4)return null;J=v(X.pop());case"rgb":return X.length!==3?null:[h(X[0]),h(X[1]),h(X[2]),J];case"hsla":if(X.length!==4)return null;J=v(X.pop());case"hsl":if(X.length!==3)return null;var re=(parseFloat(X[0])%360+360)%360/360,fe=v(X[1]),Ae=v(X[2]),je=Ae<=.5?Ae*(fe+1):Ae+fe-Ae*fe,ke=2*Ae-je;return[c(255*y(ke,je,re+1/3)),c(255*y(ke,je,re)),c(255*y(ke,je,re-1/3)),J];default:return null}}return null}}catch{}});class Ri{constructor(n,a,c,h=1){this.r=n,this.g=a,this.b=c,this.a=h}static parse(n){if(!n)return;if(n instanceof Ri)return n;if(typeof n!="string")return;const a=Ia.parseCSSColor(n);return a?new Ri(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[n,a,c,h]=this.toArray();return`rgba(${Math.round(n)},${Math.round(a)},${Math.round(c)},${h})`}toArray(){const{r:n,g:a,b:c,a:h}=this;return h===0?[0,0,0,0]:[255*n/h,255*a/h,255*c/h,h]}toArray01(){const{r:n,g:a,b:c,a:h}=this;return h===0?[0,0,0,0]:[n/h,a/h,c/h,h]}toArray01PremultipliedAlpha(){const{r:n,g:a,b:c,a:h}=this;return[n,a,c,h]}}Ri.black=new Ri(0,0,0,1),Ri.white=new Ri(1,1,1,1),Ri.transparent=new Ri(0,0,0,0),Ri.red=new Ri(1,0,0,1),Ri.blue=new Ri(0,0,1,1);var Ir=Ri;class rf{constructor(n,a,c){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Kl{constructor(n,a,c,h,v){this.text=n.normalize?n.normalize():n,this.image=a,this.scale=c,this.fontStack=h,this.textColor=v}}class ji{constructor(n){this.sections=n}static fromString(n){return new ji([new Kl(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof ji?n:ji.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const a of this.sections){if(a.image){n.push(["image",a.image.name]);continue}n.push(a.text);const c={};a.fontStack&&(c["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(c["font-scale"]=a.scale),a.textColor&&(c["text-color"]=["rgba"].concat(a.textColor.toArray())),n.push(c)}return n}}class Vi{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new Vi({name:n,available:!1}):null}serialize(){return["image",this.name]}}function of(s,n,a,c){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[s,n,a,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[s,n,a,c]:[s,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Pa(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Ir||s instanceof rf||s instanceof ji||s instanceof Vi)return!0;if(Array.isArray(s)){for(const n of s)if(!Pa(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Pa(s[n]))return!1;return!0}return!1}function ii(s){if(s===null)return Hs;if(typeof s=="string")return Zn;if(typeof s=="boolean")return Xn;if(typeof s=="number")return dn;if(s instanceof Ir)return To;if(s instanceof rf)return jl;if(s instanceof ji)return Vl;if(s instanceof Vi)return Ul;if(Array.isArray(s)){const n=s.length;let a;for(const c of s){const h=ii(c);if(a){if(a===h)continue;a=jn;break}a=h}return eo(a||jn,n)}return Eo}function Gl(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof Ir||s instanceof ji||s instanceof Vi?s.toString():JSON.stringify(s)}class af{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Pa(n[1]))return a.error("invalid value");const c=n[1];let h=ii(c);const v=a.expectedType;return h.kind!=="array"||h.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(h=v),new af(h,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ir?["rgba"].concat(this.value.toArray()):this.value instanceof ji?this.value.serialize():this.value}}var Hl=af,pi=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const ql={string:Zn,number:dn,boolean:Xn,object:Eo};class sf{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let c,h=1;const v=n[0];if(v==="array"){let x,E;if(n.length>2){const I=n[1];if(typeof I!="string"||!(I in ql)||I==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);x=ql[I],h++}else x=jn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);E=n[2],h++}c=eo(x,E)}else c=ql[v];const y=[];for(;h<n.length;h++){const x=a.parse(n[h],h,jn);if(!x)return null;y.push(x)}return new sf(c,y)}evaluate(n){for(let a=0;a<this.args.length;a++){const c=this.args[a].evaluate(n);if(!qs(this.type,ii(c)))return c;if(a===this.args.length-1)throw new pi(`Expected value to be of type ${Wr(this.type)}, but found ${Wr(ii(c))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,a=[n.kind];if(n.kind==="array"){const c=n.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){a.push(c.kind);const h=n.N;(typeof h=="number"||this.args.length>1)&&a.push(h)}}return a.concat(this.args.map(c=>c.serialize()))}}var ho=sf;class Wl{constructor(n){this.type=Vl,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return a.error("First argument must be an image or text section.");const h=[];let v=!1;for(let y=1;y<=n.length-1;++y){const x=n[y];if(v&&typeof x=="object"&&!Array.isArray(x)){v=!1;let E=null;if(x["font-scale"]&&(E=a.parse(x["font-scale"],1,dn),!E))return null;let I=null;if(x["text-font"]&&(I=a.parse(x["text-font"],1,eo(Zn)),!I))return null;let D=null;if(x["text-color"]&&(D=a.parse(x["text-color"],1,To),!D))return null;const B=h[h.length-1];B.scale=E,B.font=I,B.textColor=D}else{const E=a.parse(n[y],1,jn);if(!E)return null;const I=E.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,h.push({content:E,scale:null,font:null,textColor:null})}}return new Wl(h)}evaluate(n){return new ji(this.sections.map(a=>{const c=a.content.evaluate(n);return ii(c)===Ul?new Kl("",c,null,null,null):new Kl(Gl(c),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const a of this.sections){n.push(a.content.serialize());const c={};a.scale&&(c["font-scale"]=a.scale.serialize()),a.font&&(c["text-font"]=a.font.serialize()),a.textColor&&(c["text-color"]=a.textColor.serialize()),n.push(c)}return n}}class fc{constructor(n){this.type=Ul,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const c=a.parse(n[1],1,Zn);return c?new fc(c):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),c=Vi.fromString(a);return c&&n.availableImages&&(c.available=n.availableImages.indexOf(a)>-1),c}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const jy={"to-boolean":Xn,"to-color":To,"to-number":dn,"to-string":Zn};class lf{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const c=n[0];if((c==="to-boolean"||c==="to-string")&&n.length!==2)return a.error("Expected one argument.");const h=jy[c],v=[];for(let y=1;y<n.length;y++){const x=a.parse(n[y],y,jn);if(!x)return null;v.push(x)}return new lf(h,v)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let a,c;for(const h of this.args){if(a=h.evaluate(n),c=null,a instanceof Ir)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(c=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:of(a[0],a[1],a[2],a[3]),!c))return new Ir(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new pi(c||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const c of this.args){if(a=c.evaluate(n),a===null)return 0;const h=Number(a);if(!isNaN(h))return h}throw new pi(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?ji.fromString(Gl(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?Vi.fromString(Gl(this.args[0].evaluate(n))):Gl(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Wl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new fc(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(a=>{n.push(a.serialize())}),n}}var Ws=lf;const Vy=["Unknown","Point","LineString","Polygon"];var Zp=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vy[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:a,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*n-s[0])+this.featureDistanceData.bearing[1]*(c*n-s[1])}return 0}parseColor(s){let n=this._parseColorCache[s];return n||(n=this._parseColorCache[s]=Ir.parse(s)),n}};class ss{constructor(n,a,c,h){this.name=n,this.type=a,this._evaluate=c,this.args=h}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,a){const c=n[0],h=ss.definitions[c];if(!h)return a.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,x=y.filter(([I])=>!Array.isArray(I)||I.length===n.length-1);let E=null;for(const[I,D]of x){E=new us(a.registry,a.path,null,a.scope);const B=[];let $=!1;for(let X=1;X<n.length;X++){const J=n[X],re=Array.isArray(I)?I[X-1]:I.type,fe=E.parse(J,1+B.length,re);if(!fe){$=!0;break}B.push(fe)}if(!$)if(Array.isArray(I)&&I.length!==B.length)E.error(`Expected ${I.length} arguments, but found ${B.length} instead.`);else{for(let X=0;X<B.length;X++){const J=Array.isArray(I)?I[X]:I.type,re=B[X];E.concat(X+1).checkSubtype(J,re.type)}if(E.errors.length===0)return new ss(c,v,D,B)}}if(x.length===1)a.errors.push(...E.errors);else{const I=(x.length?x:y).map(([B])=>{return $=B,Array.isArray($)?`(${$.map(Wr).join(", ")})`:`(${Wr($.type)}...)`;var $}).join(" | "),D=[];for(let B=1;B<n.length;B++){const $=a.parse(n[B],1+D.length);if(!$)return null;D.push(Wr($.type))}a.error(`Expected arguments of type ${I}, but found (${D.join(", ")}) instead.`)}return null}static register(n,a){ss.definitions=a;for(const c in a)n[c]=ss}}var Io=ss;class hc{constructor(n,a,c){this.type=jl,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return a.error("Collator options argument must be an object.");const h=a.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Xn);if(!h)return null;const v=a.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Xn);if(!v)return null;let y=null;return c.locale&&(y=a.parse(c.locale,1,Zn),!y)?null:new hc(h,v,y)}evaluate(n){return new rf(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const Aa=8192;function uf(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function pc(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function Uy(s,n){const a=(180+s[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,h=Math.pow(2,n.z);return[Math.round(a*h*Aa),Math.round(c*h*Aa)]}function Ky(s,n,a){const c=s[0]-n[0],h=s[1]-n[1],v=s[0]-a[0],y=s[1]-a[1];return c*y-v*h==0&&c*v<=0&&h*y<=0}function mc(s,n){let a=!1;for(let y=0,x=n.length;y<x;y++){const E=n[y];for(let I=0,D=E.length;I<D-1;I++){if(Ky(s,E[I],E[I+1]))return!1;(h=E[I])[1]>(c=s)[1]!=(v=E[I+1])[1]>c[1]&&c[0]<(v[0]-h[0])*(c[1]-h[1])/(v[1]-h[1])+h[0]&&(a=!a)}}var c,h,v;return a}function vc(s,n){for(let a=0;a<n.length;a++)if(mc(s,n[a]))return!0;return!1}function Xp(s,n,a,c){const h=c[0]-a[0],v=c[1]-a[1],y=(s[0]-a[0])*v-h*(s[1]-a[1]),x=(n[0]-a[0])*v-h*(n[1]-a[1]);return y>0&&x<0||y<0&&x>0}function Gy(s,n,a){for(const I of a)for(let D=0;D<I.length-1;++D)if((x=[(y=I[D+1])[0]-(v=I[D])[0],y[1]-v[1]])[0]*(E=[(h=n)[0]-(c=s)[0],h[1]-c[1]])[1]-x[1]*E[0]!=0&&Xp(c,h,v,y)&&Xp(v,y,c,h))return!0;var c,h,v,y,x,E;return!1}function Yp(s,n){for(let a=0;a<s.length;++a)if(!mc(s[a],n))return!1;for(let a=0;a<s.length-1;++a)if(Gy(s[a],s[a+1],n))return!1;return!0}function Hy(s,n){for(let a=0;a<n.length;a++)if(Yp(s,n[a]))return!0;return!1}function po(s,n,a){const c=[];for(let h=0;h<s.length;h++){const v=[];for(let y=0;y<s[h].length;y++){const x=Uy(s[h][y],a);uf(n,x),v.push(x)}c.push(v)}return c}function cf(s,n,a){const c=[];for(let h=0;h<s.length;h++){const v=po(s[h],n,a);c.push(v)}return c}function df(s,n,a,c){if(s[0]<a[0]||s[0]>a[2]){const h=.5*c;let v=s[0]-a[0]>h?-c:a[0]-s[0]>h?c:0;v===0&&(v=s[0]-a[2]>h?-c:a[2]-s[0]>h?c:0),s[0]+=v}uf(n,s)}function ff(s,n,a,c){const h=Math.pow(2,c.z)*Aa,v=[c.x*Aa,c.y*Aa],y=[];if(!s)return y;for(const x of s)for(const E of x){const I=[E.x+v[0],E.y+v[1]];df(I,n,a,h),y.push(I)}return y}function hf(s,n,a,c){const h=Math.pow(2,c.z)*Aa,v=[c.x*Aa,c.y*Aa],y=[];if(!s)return y;for(const E of s){const I=[];for(const D of E){const B=[D.x+v[0],D.y+v[1]];uf(n,B),I.push(B)}y.push(I)}if(n[2]-n[0]<=h/2){(x=n)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const E of y)for(const I of E)df(I,n,a,h)}var x;return y}class Zs{constructor(n,a){this.type=Xn,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Pa(n[1])){const c=n[1];if(c.type==="FeatureCollection")for(let h=0;h<c.features.length;++h){const v=c.features[h].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Zs(c,c.features[h].geometry)}else if(c.type==="Feature"){const h=c.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new Zs(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Zs(c,c)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,c){const h=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const x=po(c.coordinates,v,y),E=ff(a.geometry(),h,v,y);if(!pc(h,v))return!1;for(const I of E)if(!mc(I,x))return!1}if(c.type==="MultiPolygon"){const x=cf(c.coordinates,v,y),E=ff(a.geometry(),h,v,y);if(!pc(h,v))return!1;for(const I of E)if(!vc(I,x))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,c){const h=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],y=a.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const x=po(c.coordinates,v,y),E=hf(a.geometry(),h,v,y);if(!pc(h,v))return!1;for(const I of E)if(!Yp(I,x))return!1}if(c.type==="MultiPolygon"){const x=cf(c.coordinates,v,y),E=hf(a.geometry(),h,v,y);if(!pc(h,v))return!1;for(const I of E)if(!Hy(I,x))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var gc=Zs;function ls(s){if(s instanceof Io&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof gc)return!1;let n=!0;return s.eachChild(a=>{n&&!ls(a)&&(n=!1)}),n}function Ma(s){if(s instanceof Io&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(a=>{n&&!Ma(a)&&(n=!1)}),n}function Zl(s,n){if(s instanceof Io&&n.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(c=>{a&&!Zl(c,n)&&(a=!1)}),a}class yc{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const c=n[1];return a.scope.has(c)?new yc(c,a.scope.get(c)):a.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var _c=yc;class xc{constructor(n,a=[],c,h=new $y,v=[]){this.registry=n,this.path=a,this.key=a.map(y=>`[${y}]`).join(""),this.scope=h,this.errors=v,this.expectedType=c}parse(n,a,c,h,v={}){return a?this.concat(a,c,h)._parse(n,v):this._parse(n,v)}_parse(n,a){function c(h,v,y){return y==="assert"?new ho(v,[h]):y==="coerce"?new Ws(v,[h]):h}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=n[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[h];if(v){let y=v.parse(n,this);if(!y)return null;if(this.expectedType){const x=this.expectedType,E=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||E.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(x,E))return null}else y=c(y,x,a.typeAnnotation||"coerce");else y=c(y,x,a.typeAnnotation||"assert")}if(!(y instanceof Hl)&&y.type.kind!=="resolvedImage"&&yr(y)){const x=new Zp;try{y=new Hl(y.type,y.evaluate(x))}catch(E){return this.error(E.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,c){const h=typeof n=="number"?this.path.concat(n):this.path,v=c?this.scope.concat(c):this.scope;return new xc(this.registry,h,a||null,v,this.errors)}error(n,...a){const c=`${this.key}${a.map(h=>`[${h}]`).join("")}`;this.errors.push(new So(c,n))}checkSubtype(n,a){const c=qs(n,a);return c&&this.error(c),c}}var us=xc;function yr(s){if(s instanceof _c)return yr(s.boundExpression);if(s instanceof Io&&s.name==="error"||s instanceof hc||s instanceof gc)return!1;const n=s instanceof Ws||s instanceof ho;let a=!0;return s.eachChild(c=>{a=n?a&&yr(c):a&&c instanceof Hl}),!!a&&ls(s)&&Zl(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function bc(s,n){const a=s.length-1;let c,h,v=0,y=a,x=0;for(;v<=y;)if(x=Math.floor((v+y)/2),c=s[x],h=s[x+1],c<=n){if(x===a||n<h)return x;v=x+1}else{if(!(c>n))throw new pi("Input is not a number.");y=x-1}return 0}class pf{constructor(n,a,c){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[h,v]of c)this.labels.push(h),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const c=a.parse(n[1],1,dn);if(!c)return null;const h=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let y=1;y<n.length;y+=2){const x=y===1?-1/0:n[y],E=n[y+1],I=y,D=y+1;if(typeof x!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(h.length&&h[h.length-1][0]>=x)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const B=a.parse(E,D,v);if(!B)return null;v=v||B.type,h.push([x,B])}return new pf(v,c,h)}evaluate(n){const a=this.labels,c=this.outputs;if(a.length===1)return c[0].evaluate(n);const h=this.input.evaluate(n);if(h<=a[0])return c[0].evaluate(n);const v=a.length;return h>=a[v-1]?c[v-1].evaluate(n):c[bc(a,h)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n}}var mf=pf;function ur(s,n,a){return s*(1-a)+n*a}function Xs(s,n,a){return s.map((c,h)=>ur(c,n[h],a))}var Xl=Object.freeze({__proto__:null,number:ur,color:function(s,n,a){return new Ir(ur(s.r,n.r,a),ur(s.g,n.g,a),ur(s.b,n.b,a),ur(s.a,n.a,a))},array:Xs});const vf=.95047,gf=1.08883,yf=4/29,ka=6/29,Yl=3*ka*ka,qy=Math.PI/180,_f=180/Math.PI;function wc(s){return s>.008856451679035631?Math.pow(s,1/3):s/Yl+yf}function xf(s){return s>ka?s*s*s:Yl*(s-yf)}function bf(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Cc(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Jp(s){const n=Cc(s.r),a=Cc(s.g),c=Cc(s.b),h=wc((.4124564*n+.3575761*a+.1804375*c)/vf),v=wc((.2126729*n+.7151522*a+.072175*c)/1);return{l:116*v-16,a:500*(h-v),b:200*(v-wc((.0193339*n+.119192*a+.9503041*c)/gf)),alpha:s.a}}function wf(s){let n=(s.l+16)/116,a=isNaN(s.a)?n:n+s.a/500,c=isNaN(s.b)?n:n-s.b/200;return n=1*xf(n),a=vf*xf(a),c=gf*xf(c),new Ir(bf(3.2404542*a-1.5371385*n-.4985314*c),bf(-.969266*a+1.8760108*n+.041556*c),bf(.0556434*a-.2040259*n+1.0572252*c),s.alpha)}function Qp(s,n,a){const c=n-s;return s+a*(c>180||c<-180?c-360*Math.round(c/360):c)}const Jl={forward:Jp,reverse:wf,interpolate:function(s,n,a){return{l:ur(s.l,n.l,a),a:ur(s.a,n.a,a),b:ur(s.b,n.b,a),alpha:ur(s.alpha,n.alpha,a)}}},Ys={forward:function(s){const{l:n,a,b:c}=Jp(s),h=Math.atan2(c,a)*_f;return{h:h<0?h+360:h,c:Math.sqrt(a*a+c*c),l:n,alpha:s.a}},reverse:function(s){const n=s.h*qy,a=s.c;return wf({l:s.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:s.alpha})},interpolate:function(s,n,a){return{h:Qp(s.h,n.h,a),c:ur(s.c,n.c,a),l:ur(s.l,n.l,a),alpha:ur(s.alpha,n.alpha,a)}}};var em=Object.freeze({__proto__:null,lab:Jl,hcl:Ys});class Ql{constructor(n,a,c,h,v){this.type=n,this.operator=a,this.interpolation=c,this.input=h,this.labels=[],this.outputs=[];for(const[y,x]of v)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(n,a,c,h){let v=0;if(n.name==="exponential")v=Sc(a,n.base,c,h);else if(n.name==="linear")v=Sc(a,1,c,h);else if(n.name==="cubic-bezier"){const y=n.controlPoints;v=new C(y[0],y[1],y[2],y[3]).solve(Sc(a,1,c,h))}return v}static parse(n,a){let[c,h,v,...y]=n;if(!Array.isArray(h)||h.length===0)return a.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const I=h[1];if(typeof I!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:I}}else{if(h[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const I=h.slice(1);if(I.length!==4||I.some(D=>typeof D!="number"||D<0||D>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:I}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,dn),!v)return null;const x=[];let E=null;c==="interpolate-hcl"||c==="interpolate-lab"?E=To:a.expectedType&&a.expectedType.kind!=="value"&&(E=a.expectedType);for(let I=0;I<y.length;I+=2){const D=y[I],B=y[I+1],$=I+3,X=I+4;if(typeof D!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(x.length&&x[x.length-1][0]>=D)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const J=a.parse(B,X,E);if(!J)return null;E=E||J.type,x.push([D,J])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Ql(E,c,h,v,x):a.error(`Type ${Wr(E)} is not interpolatable.`)}evaluate(n){const a=this.labels,c=this.outputs;if(a.length===1)return c[0].evaluate(n);const h=this.input.evaluate(n);if(h<=a[0])return c[0].evaluate(n);const v=a.length;if(h>=a[v-1])return c[v-1].evaluate(n);const y=bc(a,h),x=Ql.interpolationFactor(this.interpolation,h,a[y],a[y+1]),E=c[y].evaluate(n),I=c[y+1].evaluate(n);return this.operator==="interpolate"?Xl[this.type.kind.toLowerCase()](E,I,x):this.operator==="interpolate-hcl"?Ys.reverse(Ys.interpolate(Ys.forward(E),Ys.forward(I),x)):Jl.reverse(Jl.interpolate(Jl.forward(E),Jl.forward(I),x))}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,n,this.input.serialize()];for(let c=0;c<this.labels.length;c++)a.push(this.labels[c],this.outputs[c].serialize());return a}}function Sc(s,n,a,c){const h=c-a,v=s-a;return h===0?0:n===1?v/h:(Math.pow(n,v)-1)/(Math.pow(n,h)-1)}var Ho=Ql;class Cf{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let c=null;const h=a.expectedType;h&&h.kind!=="value"&&(c=h);const v=[];for(const x of n.slice(1)){const E=a.parse(x,1+v.length,c,void 0,{typeAnnotation:"omit"});if(!E)return null;c=c||E.type,v.push(E)}const y=h&&v.some(x=>qs(h,x.type));return new Cf(y?jn:c,v)}evaluate(n){let a,c=null,h=0;for(const v of this.args){if(h++,c=v.evaluate(n),c&&c instanceof Vi&&!c.available&&(a||(a=c),c=null,h===this.args.length))return a;if(c!==null)break}return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var tm=Cf;class Sf{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let v=1;v<n.length-1;v+=2){const y=n[v];if(typeof y!="string")return a.error(`Expected string, but found ${typeof y} instead.`,v);if(/[^a-zA-Z0-9_]/.test(y))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const x=a.parse(n[v+1],v+1);if(!x)return null;c.push([y,x])}const h=a.parse(n[n.length-1],n.length-1,a.expectedType,c);return h?new Sf(c,h):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[a,c]of this.bindings)n.push(a,c.serialize());return n.push(this.result.serialize()),n}}var nm=Sf;class Tf{constructor(n,a,c){this.type=n,this.index=a,this.input=c}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,dn),h=a.parse(n[2],2,eo(a.expectedType||jn));return c&&h?new Tf(h.type.itemType,c,h):null}evaluate(n){const a=this.index.evaluate(n),c=this.input.evaluate(n);if(a<0)throw new pi(`Array index out of bounds: ${a} < 0.`);if(a>=c.length)throw new pi(`Array index out of bounds: ${a} > ${c.length-1}.`);if(a!==Math.floor(a))throw new pi(`Array index must be an integer, but found ${a} instead.`);return c[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var rm=Tf;class Ef{constructor(n,a){this.type=Xn,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,jn),h=a.parse(n[2],2,jn);return c&&h?dc(c.type,[Xn,Zn,dn,Hs,jn])?new Ef(c,h):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wr(c.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(c==null)return!1;if(!Ea(a,["boolean","string","number","null"]))throw new pi(`Expected first argument to be of type boolean, string, number or null, but found ${Wr(ii(a))} instead.`);if(!Ea(c,["string","array"]))throw new pi(`Expected second argument to be of type array or string, but found ${Wr(ii(c))} instead.`);return c.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Wy=Ef;class Tc{constructor(n,a,c){this.type=dn,this.needle=n,this.haystack=a,this.fromIndex=c}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,jn),h=a.parse(n[2],2,jn);if(!c||!h)return null;if(!dc(c.type,[Xn,Zn,dn,Hs,jn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wr(c.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,dn);return v?new Tc(c,h,v):null}return new Tc(c,h)}evaluate(n){const a=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!Ea(a,["boolean","string","number","null"]))throw new pi(`Expected first argument to be of type boolean, string, number or null, but found ${Wr(ii(a))} instead.`);if(!Ea(c,["string","array"]))throw new pi(`Expected second argument to be of type array or string, but found ${Wr(ii(c))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(n);return c.indexOf(a,h)}return c.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Zy=Tc;class Ec{constructor(n,a,c,h,v,y){this.inputType=n,this.type=a,this.input=c,this.cases=h,this.outputs=v,this.otherwise=y}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let c,h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const v={},y=[];for(let I=2;I<n.length-1;I+=2){let D=n[I];const B=n[I+1];Array.isArray(D)||(D=[D]);const $=a.concat(I);if(D.length===0)return $.error("Expected at least one branch label.");for(const J of D){if(typeof J!="number"&&typeof J!="string")return $.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return $.error("Numeric branch labels must be integer values.");if(c){if($.checkSubtype(c,ii(J)))return null}else c=ii(J);if(v[String(J)]!==void 0)return $.error("Branch labels must be unique.");v[String(J)]=y.length}const X=a.parse(B,I,h);if(!X)return null;h=h||X.type,y.push(X)}const x=a.parse(n[1],1,jn);if(!x)return null;const E=a.parse(n[n.length-1],n.length-1,h);return E?x.type.kind!=="value"&&a.concat(1).checkSubtype(c,x.type)?null:new Ec(c,h,x,v,y,E):null}evaluate(n){const a=this.input.evaluate(n);return(ii(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),c=[],h={};for(const y of a){const x=h[this.cases[y]];x===void 0?(h[this.cases[y]]=c.length,c.push([this.cases[y],[y]])):c[x][1].push(y)}const v=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,x]of c)n.push(x.length===1?v(x[0]):x.map(v)),n.push(this.outputs[y].serialize());return n.push(this.otherwise.serialize()),n}}var im=Ec;class Ic{constructor(n,a,c){this.type=n,this.branches=a,this.otherwise=c}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let c;a.expectedType&&a.expectedType.kind!=="value"&&(c=a.expectedType);const h=[];for(let y=1;y<n.length-1;y+=2){const x=a.parse(n[y],y,Xn);if(!x)return null;const E=a.parse(n[y+1],y+1,c);if(!E)return null;h.push([x,E]),c=c||E.type}const v=a.parse(n[n.length-1],n.length-1,c);return v?new Ic(c,h,v):null}evaluate(n){for(const[a,c]of this.branches)if(a.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,c]of this.branches)n(a),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(a=>{n.push(a.serialize())}),n}}var Xy=Ic;class Pc{constructor(n,a,c,h){this.type=n,this.input=a,this.beginIndex=c,this.endIndex=h}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=a.parse(n[1],1,jn),h=a.parse(n[2],2,dn);if(!c||!h)return null;if(!dc(c.type,[eo(jn),Zn,jn]))return a.error(`Expected first argument to be of type array or string, but found ${Wr(c.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,dn);return v?new Pc(c.type,c,h,v):null}return new Pc(c.type,c,h)}evaluate(n){const a=this.input.evaluate(n),c=this.beginIndex.evaluate(n);if(!Ea(a,["string","array"]))throw new pi(`Expected first argument to be of type array or string, but found ${Wr(ii(a))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(n);return a.slice(c,h)}return a.slice(c)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var om=Pc;function If(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Pf(s,n,a,c){return c.compare(n,a)===0}function Js(s,n,a){const c=s!=="=="&&s!=="!=";return class Fz{constructor(v,y,x){this.type=Xn,this.lhs=v,this.rhs=y,this.collator=x,this.hasUntypedArgument=v.type.kind==="value"||y.type.kind==="value"}static parse(v,y){if(v.length!==3&&v.length!==4)return y.error("Expected two or three arguments.");const x=v[0];let E=y.parse(v[1],1,jn);if(!E)return null;if(!If(x,E.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${Wr(E.type)}'.`);let I=y.parse(v[2],2,jn);if(!I)return null;if(!If(x,I.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${Wr(I.type)}'.`);if(E.type.kind!==I.type.kind&&E.type.kind!=="value"&&I.type.kind!=="value")return y.error(`Cannot compare types '${Wr(E.type)}' and '${Wr(I.type)}'.`);c&&(E.type.kind==="value"&&I.type.kind!=="value"?E=new ho(I.type,[E]):E.type.kind!=="value"&&I.type.kind==="value"&&(I=new ho(E.type,[I])));let D=null;if(v.length===4){if(E.type.kind!=="string"&&I.type.kind!=="string"&&E.type.kind!=="value"&&I.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(D=y.parse(v[3],3,jl),!D)return null}return new Fz(E,I,D)}evaluate(v){const y=this.lhs.evaluate(v),x=this.rhs.evaluate(v);if(c&&this.hasUntypedArgument){const E=ii(y),I=ii(x);if(E.kind!==I.kind||E.kind!=="string"&&E.kind!=="number")throw new pi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const E=ii(y),I=ii(x);if(E.kind!=="string"||I.kind!=="string")return n(v,y,x)}return this.collator?a(v,y,x,this.collator.evaluate(v)):n(v,y,x)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[s];return this.eachChild(y=>{v.push(y.serialize())}),v}}}const Yy=Js("==",function(s,n,a){return n===a},Pf),Jy=Js("!=",function(s,n,a){return n!==a},function(s,n,a,c){return!Pf(0,n,a,c)}),Qy=Js("<",function(s,n,a){return n<a},function(s,n,a,c){return c.compare(n,a)<0}),Ac=Js(">",function(s,n,a){return n>a},function(s,n,a,c){return c.compare(n,a)>0}),am=Js("<=",function(s,n,a){return n<=a},function(s,n,a,c){return c.compare(n,a)<=0}),sm=Js(">=",function(s,n,a){return n>=a},function(s,n,a,c){return c.compare(n,a)>=0});class Af{constructor(n,a,c,h,v,y){this.type=Zn,this.number=n,this.locale=a,this.currency=c,this.unit=h,this.minFractionDigits=v,this.maxFractionDigits=y}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const c=a.parse(n[1],1,dn);if(!c)return null;const h=n[2];if(typeof h!="object"||Array.isArray(h))return a.error("NumberFormat options argument must be an object.");let v=null;if(h.locale&&(v=a.parse(h.locale,1,Zn),!v))return null;let y=null;if(h.currency&&(y=a.parse(h.currency,1,Zn),!y))return null;let x=null;if(h.unit&&(x=a.parse(h.unit,1,Zn),!x))return null;let E=null;if(h["min-fraction-digits"]&&(E=a.parse(h["min-fraction-digits"],1,dn),!E))return null;let I=null;return h["max-fraction-digits"]&&(I=a.parse(h["max-fraction-digits"],1,dn),!I)?null:new Af(c,v,y,x,E,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Mf{constructor(n){this.type=dn,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=a.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Wr(c.type)} instead.`):new Mf(c):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new pi(`Expected value to be of type string or array, but found ${Wr(ii(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(a=>{n.push(a.serialize())}),n}}const lm={"==":Yy,"!=":Jy,">":Ac,"<":Qy,">=":sm,"<=":am,array:ho,at:rm,boolean:ho,case:Xy,coalesce:tm,collator:hc,format:Wl,image:fc,in:Wy,"index-of":Zy,interpolate:Ho,"interpolate-hcl":Ho,"interpolate-lab":Ho,length:Mf,let:nm,literal:Hl,match:im,number:ho,"number-format":Af,object:ho,slice:om,step:mf,string:ho,"to-boolean":Ws,"to-color":Ws,"to-number":Ws,"to-string":Ws,var:_c,within:gc};function kf(s,[n,a,c,h]){n=n.evaluate(s),a=a.evaluate(s),c=c.evaluate(s);const v=h?h.evaluate(s):1,y=of(n,a,c,v);if(y)throw new pi(y);return new Ir(n/255*v,a/255*v,c/255*v,v)}function Of(s,n){return s in n}function Mc(s,n){const a=n[s];return a===void 0?null:a}function oa(s){return{type:s}}Io.register(lm,{error:[{kind:"error"},[Zn],(s,[n])=>{throw new pi(n.evaluate(s))}],typeof:[Zn,[jn],(s,[n])=>Wr(ii(n.evaluate(s)))],"to-rgba":[eo(dn,4),[To],(s,[n])=>n.evaluate(s).toArray()],rgb:[To,[dn,dn,dn],kf],rgba:[To,[dn,dn,dn,dn],kf],has:{type:Xn,overloads:[[[Zn],(s,[n])=>Of(n.evaluate(s),s.properties())],[[Zn,Eo],(s,[n,a])=>Of(n.evaluate(s),a.evaluate(s))]]},get:{type:jn,overloads:[[[Zn],(s,[n])=>Mc(n.evaluate(s),s.properties())],[[Zn,Eo],(s,[n,a])=>Mc(n.evaluate(s),a.evaluate(s))]]},"feature-state":[jn,[Zn],(s,[n])=>Mc(n.evaluate(s),s.featureState||{})],properties:[Eo,[],s=>s.properties()],"geometry-type":[Zn,[],s=>s.geometryType()],id:[jn,[],s=>s.id()],zoom:[dn,[],s=>s.globals.zoom],pitch:[dn,[],s=>s.globals.pitch||0],"distance-from-center":[dn,[],s=>s.distanceFromCenter()],"heatmap-density":[dn,[],s=>s.globals.heatmapDensity||0],"line-progress":[dn,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[dn,[],s=>s.globals.skyRadialProgress||0],accumulated:[jn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[dn,oa(dn),(s,n)=>{let a=0;for(const c of n)a+=c.evaluate(s);return a}],"*":[dn,oa(dn),(s,n)=>{let a=1;for(const c of n)a*=c.evaluate(s);return a}],"-":{type:dn,overloads:[[[dn,dn],(s,[n,a])=>n.evaluate(s)-a.evaluate(s)],[[dn],(s,[n])=>-n.evaluate(s)]]},"/":[dn,[dn,dn],(s,[n,a])=>n.evaluate(s)/a.evaluate(s)],"%":[dn,[dn,dn],(s,[n,a])=>n.evaluate(s)%a.evaluate(s)],ln2:[dn,[],()=>Math.LN2],pi:[dn,[],()=>Math.PI],e:[dn,[],()=>Math.E],"^":[dn,[dn,dn],(s,[n,a])=>Math.pow(n.evaluate(s),a.evaluate(s))],sqrt:[dn,[dn],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[dn,[dn],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[dn,[dn],(s,[n])=>Math.log(n.evaluate(s))],log2:[dn,[dn],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[dn,[dn],(s,[n])=>Math.sin(n.evaluate(s))],cos:[dn,[dn],(s,[n])=>Math.cos(n.evaluate(s))],tan:[dn,[dn],(s,[n])=>Math.tan(n.evaluate(s))],asin:[dn,[dn],(s,[n])=>Math.asin(n.evaluate(s))],acos:[dn,[dn],(s,[n])=>Math.acos(n.evaluate(s))],atan:[dn,[dn],(s,[n])=>Math.atan(n.evaluate(s))],min:[dn,oa(dn),(s,n)=>Math.min(...n.map(a=>a.evaluate(s)))],max:[dn,oa(dn),(s,n)=>Math.max(...n.map(a=>a.evaluate(s)))],abs:[dn,[dn],(s,[n])=>Math.abs(n.evaluate(s))],round:[dn,[dn],(s,[n])=>{const a=n.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[dn,[dn],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[dn,[dn],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[Xn,[Zn,jn],(s,[n,a])=>s.properties()[n.value]===a.value],"filter-id-==":[Xn,[jn],(s,[n])=>s.id()===n.value],"filter-type-==":[Xn,[Zn],(s,[n])=>s.geometryType()===n.value],"filter-<":[Xn,[Zn,jn],(s,[n,a])=>{const c=s.properties()[n.value],h=a.value;return typeof c==typeof h&&c<h}],"filter-id-<":[Xn,[jn],(s,[n])=>{const a=s.id(),c=n.value;return typeof a==typeof c&&a<c}],"filter->":[Xn,[Zn,jn],(s,[n,a])=>{const c=s.properties()[n.value],h=a.value;return typeof c==typeof h&&c>h}],"filter-id->":[Xn,[jn],(s,[n])=>{const a=s.id(),c=n.value;return typeof a==typeof c&&a>c}],"filter-<=":[Xn,[Zn,jn],(s,[n,a])=>{const c=s.properties()[n.value],h=a.value;return typeof c==typeof h&&c<=h}],"filter-id-<=":[Xn,[jn],(s,[n])=>{const a=s.id(),c=n.value;return typeof a==typeof c&&a<=c}],"filter->=":[Xn,[Zn,jn],(s,[n,a])=>{const c=s.properties()[n.value],h=a.value;return typeof c==typeof h&&c>=h}],"filter-id->=":[Xn,[jn],(s,[n])=>{const a=s.id(),c=n.value;return typeof a==typeof c&&a>=c}],"filter-has":[Xn,[jn],(s,[n])=>n.value in s.properties()],"filter-has-id":[Xn,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Xn,[eo(Zn)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[Xn,[eo(jn)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[Xn,[Zn,eo(jn)],(s,[n,a])=>a.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[Xn,[Zn,eo(jn)],(s,[n,a])=>function(c,h,v,y){for(;v<=y;){const x=v+y>>1;if(h[x]===c)return!0;h[x]>c?y=x-1:v=x+1}return!1}(s.properties()[n.value],a.value,0,a.value.length-1)],all:{type:Xn,overloads:[[[Xn,Xn],(s,[n,a])=>n.evaluate(s)&&a.evaluate(s)],[oa(Xn),(s,n)=>{for(const a of n)if(!a.evaluate(s))return!1;return!0}]]},any:{type:Xn,overloads:[[[Xn,Xn],(s,[n,a])=>n.evaluate(s)||a.evaluate(s)],[oa(Xn),(s,n)=>{for(const a of n)if(a.evaluate(s))return!0;return!1}]]},"!":[Xn,[Xn],(s,[n])=>!n.evaluate(s)],"is-supported-script":[Xn,[Zn],(s,[n])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(n.evaluate(s))}],upcase:[Zn,[Zn],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Zn,[Zn],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Zn,oa(jn),(s,n)=>n.map(a=>Gl(a.evaluate(s))).join("")],"resolved-locale":[Zn,[jl],(s,[n])=>n.evaluate(s).resolvedLocale()]});var eu=lm;function um(s){return{result:"success",value:s}}function Qs(s){return{result:"error",value:s}}function el(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function cm(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Df(s){return!!s.expression&&s.expression.interpolated}function _r(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function tu(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function dm(s){return s}function nu(s,n){const a=n.type==="color",c=s.stops&&typeof s.stops[0][0]=="object",h=c||!(c||s.property!==void 0),v=s.type||(Df(n)?"exponential":"interval");if(a&&((s=Qi({},s)).stops&&(s.stops=s.stops.map(I=>[I[0],Ir.parse(I[1])])),s.default=Ir.parse(s.default?s.default:n.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!em[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let y,x,E;if(v==="exponential")y=Rf;else if(v==="interval")y=Oa;else if(v==="categorical"){y=e_,x=Object.create(null);for(const I of s.stops)x[I[0]]=I[1];E=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);y=tl}if(c){const I={},D=[];for(let X=0;X<s.stops.length;X++){const J=s.stops[X],re=J[0].zoom;I[re]===void 0&&(I[re]={zoom:re,type:s.type,property:s.property,default:s.default,stops:[]},D.push(re)),I[re].stops.push([J[0].value,J[1]])}const B=[];for(const X of D)B.push([I[X].zoom,nu(I[X],n)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Ho.interpolationFactor.bind(void 0,$),zoomStops:B.map(X=>X[0]),evaluate:({zoom:X},J)=>Rf({stops:B,base:s.base},n,X).evaluate(X,J)}}if(h){const I=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:I,interpolationFactor:Ho.interpolationFactor.bind(void 0,I),zoomStops:s.stops.map(D=>D[0]),evaluate:({zoom:D})=>y(s,n,D,x,E)}}return{kind:"source",evaluate(I,D){const B=D&&D.properties?D.properties[s.property]:void 0;return B===void 0?ru(s.default,n.default):y(s,n,B,x,E)}}}function ru(s,n,a){return s!==void 0?s:n!==void 0?n:a!==void 0?a:void 0}function e_(s,n,a,c,h){return ru(typeof a===h?c[a]:void 0,s.default,n.default)}function Oa(s,n,a){if(_r(a)!=="number")return ru(s.default,n.default);const c=s.stops.length;if(c===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[c-1][0])return s.stops[c-1][1];const h=bc(s.stops.map(v=>v[0]),a);return s.stops[h][1]}function Rf(s,n,a){const c=s.base!==void 0?s.base:1;if(_r(a)!=="number")return ru(s.default,n.default);const h=s.stops.length;if(h===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[h-1][0])return s.stops[h-1][1];const v=bc(s.stops.map(D=>D[0]),a),y=function(D,B,$,X){const J=X-$,re=D-$;return J===0?0:B===1?re/J:(Math.pow(B,re)-1)/(Math.pow(B,J)-1)}(a,c,s.stops[v][0],s.stops[v+1][0]),x=s.stops[v][1],E=s.stops[v+1][1];let I=Xl[n.type]||dm;if(s.colorSpace&&s.colorSpace!=="rgb"){const D=em[s.colorSpace];I=(B,$)=>D.reverse(D.interpolate(D.forward(B),D.forward($),y))}return typeof x.evaluate=="function"?{evaluate(...D){const B=x.evaluate.apply(void 0,D),$=E.evaluate.apply(void 0,D);if(B!==void 0&&$!==void 0)return I(B,$,y)}}:I(x,E,y)}function tl(s,n,a){return n.type==="color"?a=Ir.parse(a):n.type==="formatted"?a=ji.fromString(a.toString()):n.type==="resolvedImage"?a=Vi.fromString(a.toString()):_r(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0),ru(a,s.default,n.default)}class zf{constructor(n,a){this.expression=n,this._warningHistory={},this._evaluator=new Zp,this._defaultValue=a?function(c){return c.type==="color"&&(tu(c.default)||Array.isArray(c.default))?new Ir(0,0,0,0):c.type==="color"?Ir.parse(c.default)||null:c.default===void 0?null:c.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,c,h,v,y,x,E){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=c,this._evaluator.canonical=h||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(n,a,c,h,v,y,x,E){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=c||null,this._evaluator.canonical=h||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=E||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new pi(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function kc(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in eu}function nl(s,n){const a=new us(eu,[],n?function(h){const v={color:To,string:Zn,number:dn,enum:Zn,boolean:Xn,formatted:Vl,resolvedImage:Ul};return h.type==="array"?eo(v[h.value]||jn,h.length):v[h.type]}(n):void 0),c=a.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?um(new zf(c,n)):Qs(a.errors)}class Lf{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!Ma(a.expression)}evaluateWithoutErrorHandling(n,a,c,h,v,y){return this._styleExpression.evaluateWithoutErrorHandling(n,a,c,h,v,y)}evaluate(n,a,c,h,v,y){return this._styleExpression.evaluate(n,a,c,h,v,y)}}class iu{constructor(n,a,c,h){this.kind=n,this.zoomStops=c,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Ma(a.expression),this.interpolationType=h}evaluateWithoutErrorHandling(n,a,c,h,v,y){return this._styleExpression.evaluateWithoutErrorHandling(n,a,c,h,v,y)}evaluate(n,a,c,h,v,y){return this._styleExpression.evaluate(n,a,c,h,v,y)}interpolationFactor(n,a,c){return this.interpolationType?Ho.interpolationFactor(this.interpolationType,n,a,c):0}}function Ff(s,n){if((s=nl(s,n)).result==="error")return s;const a=s.value.expression,c=ls(a);if(!c&&!el(n))return Qs([new So("","data expressions not supported")]);const h=Zl(a,["zoom","pitch","distance-from-center"]);if(!h&&!cm(n))return Qs([new So("","zoom expressions not supported")]);const v=il(a);return v||h?v instanceof So?Qs([v]):v instanceof Ho&&!Df(n)?Qs([new So("",'"interpolate" expressions cannot be used with this property')]):um(v?new iu(c?"camera":"composite",s.value,v.labels,v instanceof Ho?v.interpolation:void 0):new Lf(c?"constant":"source",s.value)):Qs([new So("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rl{constructor(n,a){this._parameters=n,this._specification=a,Qi(this,nu(this._parameters,this._specification))}static deserialize(n){return new rl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function il(s){let n=null;if(s instanceof nm)n=il(s.result);else if(s instanceof tm){for(const a of s.args)if(n=il(a),n)break}else(s instanceof mf||s instanceof Ho)&&s.input instanceof Io&&s.input.name==="zoom"&&(n=s);return n instanceof So||s.eachChild(a=>{const c=il(a);c instanceof So?n=c:!n&&c?n=new So("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&c&&n!==c&&(n=new So("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class fn{constructor(n,a,c,h){this.message=(n?`${n}: `:"")+c,h&&(this.identifier=h),a!=null&&a.__line__&&(this.line=a.__line__)}}function to(s){const n=s.key,a=s.value,c=s.valueSpec||{},h=s.objectElementValidators||{},v=s.style,y=s.styleSpec;let x=[];const E=_r(a);if(E!=="object")return[new fn(n,a,`object expected, ${E} found`)];for(const I in a){const D=I.split(".")[0],B=c[D]||c["*"];let $;h[D]?$=h[D]:c[D]?$=yi:h["*"]?$=h["*"]:c["*"]&&($=yi),$?x=x.concat($({key:(n&&`${n}.`)+I,value:a[I],valueSpec:B,style:v,styleSpec:y,object:a,objectKey:I},a)):x.push(new fn(n,a[I],`unknown property "${I}"`))}for(const I in c)h[I]||c[I].required&&c[I].default===void 0&&a[I]===void 0&&x.push(new fn(n,a,`missing required property "${I}"`));return x}function Bf(s){const n=s.value,a=s.valueSpec,c=s.style,h=s.styleSpec,v=s.key,y=s.arrayElementValidator||yi;if(_r(n)!=="array")return[new fn(v,n,`array expected, ${_r(n)} found`)];if(a.length&&n.length!==a.length)return[new fn(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new fn(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let x={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};h.$version<7&&(x.function=a.function),_r(a.value)==="object"&&(x=a.value);let E=[];for(let I=0;I<n.length;I++)E=E.concat(y({array:n,arrayIndex:I,value:n[I],valueSpec:x,style:c,styleSpec:h,key:`${v}[${I}]`}));return E}function Nf(s){const n=s.key,a=s.value,c=s.valueSpec;let h=_r(a);if(h==="number"&&a!=a&&(h="NaN"),h!=="number")return[new fn(n,a,`number expected, ${h} found`)];if("minimum"in c){let v=c.minimum;if(_r(c.minimum)==="array"&&(v=c.minimum[s.arrayIndex]),a<v)return[new fn(n,a,`${a} is less than the minimum value ${v}`)]}if("maximum"in c){let v=c.maximum;if(_r(c.maximum)==="array"&&(v=c.maximum[s.arrayIndex]),a>v)return[new fn(n,a,`${a} is greater than the maximum value ${v}`)]}return[]}function ou(s){const n=s.valueSpec,a=Jr(s.value.type);let c,h,v,y={};const x=a!=="categorical"&&s.value.property===void 0,E=!x,I=_r(s.value.stops)==="array"&&_r(s.value.stops[0])==="array"&&_r(s.value.stops[0][0])==="object",D=to({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(X){if(a==="identity")return[new fn(X.key,X.value,'identity function may not have a "stops" property')];let J=[];const re=X.value;return J=J.concat(Bf({key:X.key,value:re,valueSpec:X.valueSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:B})),_r(re)==="array"&&re.length===0&&J.push(new fn(X.key,re,"array must have at least one stop")),J},default:function(X){return yi({key:X.key,value:X.value,valueSpec:n,style:X.style,styleSpec:X.styleSpec})}}});return a==="identity"&&x&&D.push(new fn(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||D.push(new fn(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!Df(s.valueSpec)&&D.push(new fn(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(E&&!el(s.valueSpec)?D.push(new fn(s.key,s.value,"property functions not supported")):x&&!cm(s.valueSpec)&&D.push(new fn(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!I||s.value.property!==void 0||D.push(new fn(s.key,s.value,'"property" property is required')),D;function B(X){let J=[];const re=X.value,fe=X.key;if(_r(re)!=="array")return[new fn(fe,re,`array expected, ${_r(re)} found`)];if(re.length!==2)return[new fn(fe,re,`array length 2 expected, length ${re.length} found`)];if(I){if(_r(re[0])!=="object")return[new fn(fe,re,`object expected, ${_r(re[0])} found`)];if(re[0].zoom===void 0)return[new fn(fe,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new fn(fe,re,"object stop key must have value")];const Ae=Jr(re[0].zoom);if(typeof Ae!="number")return[new fn(fe,re[0].zoom,"stop zoom values must be numbers")];if(v&&v>Ae)return[new fn(fe,re[0].zoom,"stop zoom values must appear in ascending order")];Ae!==v&&(v=Ae,h=void 0,y={}),J=J.concat(to({key:`${fe}[0]`,value:re[0],valueSpec:{zoom:{}},style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:Nf,value:$}}))}else J=J.concat($({key:`${fe}[0]`,value:re[0],valueSpec:{},style:X.style,styleSpec:X.styleSpec},re));return kc(Ta(re[1]))?J.concat([new fn(`${fe}[1]`,re[1],"expressions are not allowed in function stops.")]):J.concat(yi({key:`${fe}[1]`,value:re[1],valueSpec:n,style:X.style,styleSpec:X.styleSpec}))}function $(X,J){const re=_r(X.value),fe=Jr(X.value),Ae=X.value!==null?X.value:J;if(c){if(re!==c)return[new fn(X.key,Ae,`${re} stop domain type must match previous stop domain type ${c}`)]}else c=re;if(re!=="number"&&re!=="string"&&re!=="boolean"&&typeof fe!="number"&&typeof fe!="string"&&typeof fe!="boolean")return[new fn(X.key,Ae,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&a!=="categorical"){let je=`number expected, ${re} found`;return el(n)&&a===void 0&&(je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new fn(X.key,Ae,je)]}return a!=="categorical"||re!=="number"||typeof fe=="number"&&isFinite(fe)&&Math.floor(fe)===fe?a!=="categorical"&&re==="number"&&typeof fe=="number"&&typeof h=="number"&&h!==void 0&&fe<h?[new fn(X.key,Ae,"stop domain values must appear in ascending order")]:(h=fe,a==="categorical"&&fe in y?[new fn(X.key,Ae,"stop domain values must be unique")]:(y[fe]=!0,[])):[new fn(X.key,Ae,`integer expected, found ${String(fe)}`)]}}function Po(s){const n=(s.expressionContext==="property"?Ff:nl)(Ta(s.value),s.valueSpec);if(n.result==="error")return n.value.map(c=>new fn(`${s.key}${c.key}`,s.value,c.message));const a=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new fn(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Ma(a))return[new fn(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return $f(a,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Zl(a,["zoom","feature-state"]))return[new fn(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!ls(a))return[new fn(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $f(s,n){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const h of n.valueSpec.expression.parameters)a.delete(h);if(a.size===0)return[];const c=[];return s instanceof Io&&a.has(s.name)?[new fn(n.key,n.value,`["${s.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(s.eachChild(h=>{c.push(...$f(h,n))}),c)}function au(s){const n=s.key,a=s.value,c=s.valueSpec,h=[];return Array.isArray(c.values)?c.values.indexOf(Jr(a))===-1&&h.push(new fn(n,a,`expected one of [${c.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(c.values).indexOf(Jr(a))===-1&&h.push(new fn(n,a,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(a)} found`)),h}function su(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!su(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function lu(s,n="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};su(s)||(s=Oc(s));const a=s;let c=!0;try{c=function(I){if(!aa(I))return I;let D=Ta(I);return jf(D),D=fm(D),D}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const h=wt[`filter_${n}`],v=nl(c,h);let y=null;if(v.result==="error")throw new Error(v.value.map(I=>`${I.key}: ${I.message}`).join(", "));y=(I,D,B)=>v.value.evaluate(I,D,{},B);let x=null,E=null;if(c!==a){const I=nl(a,h);if(I.result==="error")throw new Error(I.value.map(D=>`${D.key}: ${D.message}`).join(", "));x=(D,B,$,X,J)=>I.value.evaluate(D,B,{},$,void 0,void 0,X,J),E=!ls(I.value.expression)}return y=y,{filter:y,dynamicFilter:x||void 0,needGeometry:hm(c),needFeature:!!E}}function fm(s){if(!Array.isArray(s))return s;const n=function(a){if(t_.has(a[0])){for(let c=1;c<a.length;c++)if(aa(a[c]))return!0}return a}(s);return n===!0?n:n.map(a=>fm(a))}function jf(s){let n=!1;const a=[];if(s[0]==="case"){for(let c=1;c<s.length-1;c+=2)n=n||aa(s[c]),a.push(s[c+1]);a.push(s[s.length-1])}else if(s[0]==="match"){n=n||aa(s[1]);for(let c=2;c<s.length-1;c+=2)a.push(s[c+1]);a.push(s[s.length-1])}else if(s[0]==="step"){n=n||aa(s[1]);for(let c=1;c<s.length-1;c+=2)a.push(s[c+1])}n&&(s.length=0,s.push("any",...a));for(let c=1;c<s.length;c++)jf(s[c])}function aa(s){if(!Array.isArray(s))return!1;if((n=s[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let a=1;a<s.length;a++)if(aa(s[a]))return!0;return!1}const t_=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function n_(s,n){return s<n?-1:s>n?1:0}function hm(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let n=1;n<s.length;n++)if(hm(s[n]))return!0;return!1}function Oc(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?Vf(s[1],s[2],"=="):n==="!="?Ti(Vf(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Vf(s[1],s[2],n):n==="any"?(a=s.slice(1),["any"].concat(a.map(Oc))):n==="all"?["all"].concat(s.slice(1).map(Oc)):n==="none"?["all"].concat(s.slice(1).map(Oc).map(Ti)):n==="in"?uu(s[1],s.slice(2)):n==="!in"?Ti(uu(s[1],s.slice(2))):n==="has"?cu(s[1]):n==="!has"?Ti(cu(s[1])):n!=="within"||s;var a}function Vf(s,n,a){switch(s){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,s,n]}}function uu(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",s,["literal",n.sort(n_)]]:["filter-in-small",s,["literal",n]]}}function cu(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Ti(s){return["!",s]}function ol(s){return su(Ta(s.value))?Po(Qi({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):pm(s)}function pm(s){const n=s.value,a=s.key;if(_r(n)!=="array")return[new fn(a,n,`array expected, ${_r(n)} found`)];const c=s.styleSpec;let h,v=[];if(n.length<1)return[new fn(a,n,"filter array must have at least 1 element")];switch(v=v.concat(au({key:`${a}[0]`,value:n[0],valueSpec:c.filter_operator,style:s.style,styleSpec:s.styleSpec})),Jr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Jr(n[1])==="$type"&&v.push(new fn(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new fn(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(h=_r(n[1]),h!=="string"&&v.push(new fn(`${a}[1]`,n[1],`string expected, ${h} found`)));for(let y=2;y<n.length;y++)h=_r(n[y]),Jr(n[1])==="$type"?v=v.concat(au({key:`${a}[${y}]`,value:n[y],valueSpec:c.geometry_type,style:s.style,styleSpec:s.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&v.push(new fn(`${a}[${y}]`,n[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<n.length;y++)v=v.concat(pm({key:`${a}[${y}]`,value:n[y],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":h=_r(n[1]),n.length!==2?v.push(new fn(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="string"&&v.push(new fn(`${a}[1]`,n[1],`string expected, ${h} found`));break;case"within":h=_r(n[1]),n.length!==2?v.push(new fn(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):h!=="object"&&v.push(new fn(`${a}[1]`,n[1],`object expected, ${h} found`))}return v}function mm(s,n){const a=s.key,c=s.style,h=s.styleSpec,v=s.value,y=s.objectKey,x=h[`${n}_${s.layerType}`];if(!x)return[];const E=y.match(/^(.*)-transition$/);if(n==="paint"&&E&&x[E[1]]&&x[E[1]].transition)return yi({key:a,value:v,valueSpec:h.transition,style:c,styleSpec:h});const I=s.valueSpec||x[y];if(!I)return[new fn(a,v,`unknown property "${y}"`)];let D;if(_r(v)==="string"&&el(I)&&!I.tokens&&(D=/^{([^}]+)}$/.exec(v)))return[new fn(a,v,`"${y}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const B=[];return s.layerType==="symbol"&&(y==="text-field"&&c&&!c.glyphs&&B.push(new fn(a,v,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&tu(Ta(v))&&Jr(v.type)==="identity"&&B.push(new fn(a,v,'"text-font" does not support identity functions'))),B.concat(yi({key:s.key,value:v,valueSpec:I,style:c,styleSpec:h,expressionContext:"property",propertyType:n,propertyKey:y}))}function vm(s){return mm(s,"paint")}function gm(s){return mm(s,"layout")}function Dc(s){let n=[];const a=s.value,c=s.key,h=s.style,v=s.styleSpec;a.type||a.ref||n.push(new fn(c,a,'either "type" or "ref" is required'));let y=Jr(a.type);const x=Jr(a.ref);if(a.id){const E=Jr(a.id);for(let I=0;I<s.arrayIndex;I++){const D=h.layers[I];Jr(D.id)===E&&n.push(new fn(c,a.id,`duplicate layer id "${a.id}", previously used at line ${D.id.__line__}`))}}if("ref"in a){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in a&&n.push(new fn(c,a[I],`"${I}" is prohibited for ref layers`))}),h.layers.forEach(I=>{Jr(I.id)===x&&(E=I)}),E?E.ref?n.push(new fn(c,a.ref,"ref cannot reference another ref layer")):y=Jr(E.type):typeof x=="string"&&n.push(new fn(c,a.ref,`ref layer "${x}" not found`))}else if(y!=="background"&&y!=="sky")if(a.source){const E=h.sources&&h.sources[a.source],I=E&&Jr(E.type);E?I==="vector"&&y==="raster"?n.push(new fn(c,a.source,`layer "${a.id}" requires a raster source`)):I==="raster"&&y!=="raster"?n.push(new fn(c,a.source,`layer "${a.id}" requires a vector source`)):I!=="vector"||a["source-layer"]?I==="raster-dem"&&y!=="hillshade"?n.push(new fn(c,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||I==="geojson"&&E.lineMetrics||n.push(new fn(c,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new fn(c,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new fn(c,a.source,`source "${a.source}" not found`))}else n.push(new fn(c,a,'missing required property "source"'));return n=n.concat(to({key:c,value:a,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>yi({key:`${c}.type`,value:a.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,object:a,objectKey:"type"}),filter:E=>ol(Qi({layerType:y},E)),layout:E=>to({layer:a,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":I=>gm(Qi({layerType:y},I))}}),paint:E=>to({layer:a,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":I=>vm(Qi({layerType:y},I))}})}})),n}function al(s){const n=s.value,a=s.key,c=_r(n);return c!=="string"?[new fn(a,n,`string expected, ${c} found`)]:[]}const Rc={promoteId:function({key:s,value:n}){if(_r(n)==="string")return al({key:s,value:n});{const a=[];for(const c in n)a.push(...al({key:`${s}.${c}`,value:n[c]}));return a}}};function ym(s){const n=s.value,a=s.key,c=s.styleSpec,h=s.style;if(!n.type)return[new fn(a,n,'"type" is required')];const v=Jr(n.type);let y;switch(v){case"vector":case"raster":case"raster-dem":return y=to({key:a,value:n,valueSpec:c[`source_${v.replace("-","_")}`],style:s.style,styleSpec:c,objectElementValidators:Rc}),y;case"geojson":if(y=to({key:a,value:n,valueSpec:c.source_geojson,style:h,styleSpec:c,objectElementValidators:Rc}),n.cluster)for(const x in n.clusterProperties){const[E,I]=n.clusterProperties[x],D=typeof E=="string"?[E,["accumulated"],["get",x]]:E;y.push(...Po({key:`${a}.${x}.map`,value:I,expressionContext:"cluster-map"})),y.push(...Po({key:`${a}.${x}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return y;case"video":return to({key:a,value:n,valueSpec:c.source_video,style:h,styleSpec:c});case"image":return to({key:a,value:n,valueSpec:c.source_image,style:h,styleSpec:c});case"canvas":return[new fn(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return au({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,styleSpec:c})}}function _m(s){const n=s.value,a=s.styleSpec,c=a.light,h=s.style;let v=[];const y=_r(n);if(n===void 0)return v;if(y!=="object")return v=v.concat([new fn("light",n,`object expected, ${y} found`)]),v;for(const x in n){const E=x.match(/^(.*)-transition$/);v=v.concat(E&&c[E[1]]&&c[E[1]].transition?yi({key:x,value:n[x],valueSpec:a.transition,style:h,styleSpec:a}):c[x]?yi({key:x,value:n[x],valueSpec:c[x],style:h,styleSpec:a}):[new fn(x,n[x],`unknown property "${x}"`)])}return v}function zc(s){const n=s.value,a=s.key,c=s.style,h=s.styleSpec,v=h.terrain;let y=[];const x=_r(n);if(n===void 0)return y;if(x!=="object")return y=y.concat([new fn("terrain",n,`object expected, ${x} found`)]),y;for(const E in n){const I=E.match(/^(.*)-transition$/);y=y.concat(I&&v[I[1]]&&v[I[1]].transition?yi({key:E,value:n[E],valueSpec:h.transition,style:c,styleSpec:h}):v[E]?yi({key:E,value:n[E],valueSpec:v[E],style:c,styleSpec:h}):[new fn(E,n[E],`unknown property "${E}"`)])}if(n.source){const E=c.sources&&c.sources[n.source],I=E&&Jr(E.type);E?I!=="raster-dem"&&y.push(new fn(a,n.source,`terrain cannot be used with a source of type ${String(I)}, it only be used with a "raster-dem" source type`)):y.push(new fn(a,n.source,`source "${n.source}" not found`))}else y.push(new fn(a,n,'terrain is missing required property "source"'));return y}function xm(s){const n=s.value,a=s.style,c=s.styleSpec,h=c.fog;let v=[];const y=_r(n);if(n===void 0)return v;if(y!=="object")return v=v.concat([new fn("fog",n,`object expected, ${y} found`)]),v;for(const x in n){const E=x.match(/^(.*)-transition$/);v=v.concat(E&&h[E[1]]&&h[E[1]].transition?yi({key:x,value:n[x],valueSpec:c.transition,style:a,styleSpec:c}):h[x]?yi({key:x,value:n[x],valueSpec:h[x],style:a,styleSpec:c}):[new fn(x,n[x],`unknown property "${x}"`)])}return v}const Uf={"*":()=>[],array:Bf,boolean:function(s){const n=s.value,a=s.key,c=_r(n);return c!=="boolean"?[new fn(a,n,`boolean expected, ${c} found`)]:[]},number:Nf,color:function(s){const n=s.key,a=s.value,c=_r(a);return c!=="string"?[new fn(n,a,`color expected, ${c} found`)]:Ia.parseCSSColor(a)===null?[new fn(n,a,`color expected, "${a}" found`)]:[]},enum:au,filter:ol,function:ou,layer:Dc,object:to,source:ym,light:_m,terrain:zc,fog:xm,string:al,formatted:function(s){return al(s).length===0?[]:Po(s)},resolvedImage:function(s){return al(s).length===0?[]:Po(s)},projection:function(s){const n=s.value,a=s.styleSpec,c=a.projection,h=s.style;let v=[];const y=_r(n);if(y==="object")for(const x in n)v=v.concat(yi({key:x,value:n[x],valueSpec:c[x],style:h,styleSpec:a}));else y!=="string"&&(v=v.concat([new fn("projection",n,`object or string expected, ${y} found`)]));return v}};function yi(s){const n=s.value,a=s.valueSpec,c=s.styleSpec;return a.expression&&tu(Jr(n))?ou(s):a.expression&&kc(Ta(n))?Po(s):a.type&&Uf[a.type]?Uf[a.type](s):to(Qi({},s,{valueSpec:a.type?c[a.type]:a}))}function r_(s){const n=s.value,a=s.key,c=al(s);return c.length||(n.indexOf("{fontstack}")===-1&&c.push(new fn(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&c.push(new fn(a,n,'"glyphs" url must include a "{range}" token'))),c}function Lc(s,n=wt){return sa(yi({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,objectElementValidators:{glyphs:r_,"*":()=>[]}}))}const Fc=s=>sa(vm(s)),bm=s=>sa(gm(s));function sa(s){return s.slice().sort((n,a)=>n.line&&a.line?n.line-a.line:0)}function Kf(s,n){let a=!1;if(n&&n.length)for(const c of n)s.fire(new Ln(new Error(c.message))),a=!0;return a}var sl=mo;function mo(s,n,a){var c=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var h=new Int32Array(this.arrayBuffer);s=h[0],this.d=(n=h[1])+2*(a=h[2]);for(var v=0;v<this.d*this.d;v++){var y=h[3+v],x=h[3+v+1];c.push(y===x?null:h.subarray(y,x))}var E=h[3+c.length+1];this.keys=h.subarray(h[3+c.length],E),this.bboxes=h.subarray(E),this.insert=this._insertReadonly}else{this.d=n+2*a;for(var I=0;I<this.d*this.d;I++)c.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=s,this.padding=a,this.scale=n/s,this.uid=0;var D=a/n*s;this.min=-D,this.max=s+D}mo.prototype.insert=function(s,n,a,c,h){this._forEachCell(n,a,c,h,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(n),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(h)},mo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},mo.prototype._insertCell=function(s,n,a,c,h,v){this.cells[h].push(v)},mo.prototype.query=function(s,n,a,c,h){var v=this.min,y=this.max;if(s<=v&&n<=v&&y<=a&&y<=c&&!h)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(s,n,a,c,this._queryCell,x,{},h),x},mo.prototype._queryCell=function(s,n,a,c,h,v,y,x){var E=this.cells[h];if(E!==null)for(var I=this.keys,D=this.bboxes,B=0;B<E.length;B++){var $=E[B];if(y[$]===void 0){var X=4*$;(x?x(D[X+0],D[X+1],D[X+2],D[X+3]):s<=D[X+2]&&n<=D[X+3]&&a>=D[X+0]&&c>=D[X+1])?(y[$]=!0,v.push(I[$])):y[$]=!1}}},mo.prototype._forEachCell=function(s,n,a,c,h,v,y,x){for(var E=this._convertToCellCoord(s),I=this._convertToCellCoord(n),D=this._convertToCellCoord(a),B=this._convertToCellCoord(c),$=E;$<=D;$++)for(var X=I;X<=B;X++){var J=this.d*X+$;if((!x||x(this._convertFromCellCoord($),this._convertFromCellCoord(X),this._convertFromCellCoord($+1),this._convertFromCellCoord(X+1)))&&h.call(this,s,n,a,c,J,v,y,x))return}},mo.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},mo.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},mo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,n=3+this.cells.length+1+1,a=0,c=0;c<this.cells.length;c++)a+=this.cells[c].length;var h=new Int32Array(n+a+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;for(var v=n,y=0;y<s.length;y++){var x=s[y];h[3+y]=v,h.set(x,v),v+=x.length}return h[3+s.length]=v,h.set(this.keys,v),h[3+s.length+1]=v+=this.keys.length,h.set(this.bboxes,v),v+=this.bboxes.length,h.buffer};const Bc={};function pn(s,n,a={}){Object.defineProperty(s,"_classRegistryKey",{value:n,writeable:!1}),Bc[n]={klass:s,omit:a.omit||[]}}pn(Object,"Object"),sl.serialize=function(s,n){const a=s.toArrayBuffer();return n&&n.push(a),{buffer:a}},sl.deserialize=function(s){return new sl(s.buffer)},Object.defineProperty(sl,"name",{value:"Grid"}),pn(sl,"Grid"),pn(Ir,"Color"),pn(Error,"Error"),pn(it,"AJAXError"),pn(Vi,"ResolvedImage"),pn(rl,"StylePropertyFunction"),pn(zf,"StyleExpression",{omit:["_evaluator"]}),pn(iu,"ZoomDependentExpression"),pn(Lf,"ZoomConstantExpression"),pn(Io,"CompoundExpression",{omit:["_evaluate"]});for(const s in eu)Bc[eu[s]._classRegistryKey]||pn(eu[s],`Expression${s}`);function wm(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Cm(s){return _.ImageBitmap&&s instanceof _.ImageBitmap}function ll(s,n){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(wm(s)||Cm(s))return n&&n.push(s),s;if(ArrayBuffer.isView(s)){const a=s;return n&&n.push(a.buffer),a}if(s instanceof _.ImageData)return n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const a=[];for(const c of s)a.push(ll(c,n));return a}if(typeof s=="object"){const a=s.constructor,c=a._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const h=a.serialize?a.serialize(s,n):{};if(!a.serialize){for(const v in s)s.hasOwnProperty(v)&&(Bc[c].omit.indexOf(v)>=0||(h[v]=ll(s[v],n)));s instanceof Error&&(h.message=s.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(h.$name=c),h}throw new Error("can't serialize object of type "+typeof s)}function du(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||wm(s)||Cm(s)||ArrayBuffer.isView(s)||s instanceof _.ImageData)return s;if(Array.isArray(s))return s.map(du);if(typeof s=="object"){const n=s.$name||"Object",{klass:a}=Bc[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(s);const c=Object.create(a.prototype);for(const h of Object.keys(s))h!=="$name"&&(c[h]=du(s[h]));return c}throw new Error("can't deserialize object of type "+typeof s)}class Sm{constructor(){this.first=!0}update(n,a){const c=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=c,!0))}}const Tm=s=>s>=1536&&s<=1791,Em=s=>s>=1872&&s<=1919,Im=s=>s>=2208&&s<=2303,Pm=s=>s>=11904&&s<=12031,Am=s=>s>=12032&&s<=12255,fu=s=>s>=12272&&s<=12287,Nc=s=>s>=12288&&s<=12351,Gf=s=>s>=12352&&s<=12447,cs=s=>s>=12448&&s<=12543,Mm=s=>s>=12544&&s<=12591,Hf=s=>s>=12704&&s<=12735,km=s=>s>=12736&&s<=12783,qf=s=>s>=12784&&s<=12799,Wf=s=>s>=12800&&s<=13055,Zf=s=>s>=13056&&s<=13311,Xf=s=>s>=13312&&s<=19903,hu=s=>s>=19968&&s<=40959,$c=s=>s>=40960&&s<=42127,Om=s=>s>=42128&&s<=42191,Dm=s=>s>=44032&&s<=55215,Rm=s=>s>=63744&&s<=64255,pu=s=>s>=64336&&s<=65023,zm=s=>s>=65040&&s<=65055,Yf=s=>s>=65072&&s<=65103,Lm=s=>s>=65104&&s<=65135,Jf=s=>s>=65136&&s<=65279,Qf=s=>s>=65280&&s<=65519;function jc(s){for(const n of s)if(Vc(n.charCodeAt(0)))return!0;return!1}function i_(s){for(const n of s)if(!o_(n.charCodeAt(0)))return!1;return!0}function o_(s){return!(Tm(s)||Em(s)||Im(s)||pu(s)||Jf(s))}function Vc(s){return!(s!==746&&s!==747&&(s<4352||!(Hf(s)||Mm(s)||Yf(s)&&!(s>=65097&&s<=65103)||Rm(s)||Zf(s)||Pm(s)||km(s)||!(!Nc(s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Xf(s)||hu(s)||Wf(s)||(n=>n>=12592&&n<=12687)(s)||(n=>n>=43360&&n<=43391)(s)||(n=>n>=55216&&n<=55295)(s)||(n=>n>=4352&&n<=4607)(s)||Dm(s)||Gf(s)||fu(s)||(n=>n>=12688&&n<=12703)(s)||Am(s)||qf(s)||cs(s)&&s!==12540||!(!Qf(s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Lm(s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||(n=>n>=5120&&n<=5759)(s)||(n=>n>=6320&&n<=6399)(s)||zm(s)||(n=>n>=19904&&n<=19967)(s)||$c(s)||Om(s))))}function mu(s){return!(Vc(s)||function(n){return!!((a=>a>=128&&a<=255)(n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||(a=>a>=8192&&a<=8303)(n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||(a=>a>=8448&&a<=8527)(n)||(a=>a>=8528&&a<=8591)(n)||(a=>a>=8960&&a<=9215)(n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||(a=>a>=9216&&a<=9279)(n)&&n!==9251||(a=>a>=9280&&a<=9311)(n)||(a=>a>=9312&&a<=9471)(n)||(a=>a>=9632&&a<=9727)(n)||(a=>a>=9728&&a<=9983)(n)&&!(n>=9754&&n<=9759)||(a=>a>=11008&&a<=11263)(n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Nc(n)||cs(n)||(a=>a>=57344&&a<=63743)(n)||Yf(n)||Lm(n)||Qf(n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}function p(s){return s>=1424&&s<=2303||pu(s)||Jf(s)}function l(s,n){return!(!n&&p(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||(a=>a>=6016&&a<=6143)(s))}function f(s){for(const n of s)if(p(n.charCodeAt(0)))return!0;return!1}const g="deferred",b="loading",w="loaded";let M=null,k="unavailable",L=null;const K=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(k="error"),M&&M(s)};function W(){ee.fire(new rr("pluginStateChange",{pluginStatus:k,pluginURL:L}))}const ee=new gn,le=function(){return k},Se=function(){if(k!==g||!L)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");k=b,W(),L&&ot({url:L},s=>{s?K(s):(k=w,W())})},ye={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>k===w||ye.applyArabicShaping!=null,isLoading:()=>k===b,setState(s){k=s.pluginStatus,L=s.pluginURL},isParsed:()=>ye.applyArabicShaping!=null&&ye.processBidirectionalText!=null&&ye.processStyledBidirectionalText!=null,getPluginURL:()=>L};class _e{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sm,this.transition={},this.pitch=0)}isSupportedScript(n){return function(a,c){for(const h of a)if(!l(h.charCodeAt(0),c))return!1;return!0}(n,ye.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),c=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*a}}}class we{constructor(n,a){this.property=n,this.value=a,this.expression=function(c,h){if(tu(c))return new rl(c,h);if(kc(c)){const v=Ff(c,h);if(v.result==="error")throw new Error(v.value.map(y=>`${y.key}: ${y.message}`).join(", "));return v.value}{let v=c;return typeof c=="string"&&h.type==="color"&&(v=Ir.parse(c)),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,c){return this.property.possiblyEvaluate(this,n,a,c)}}class pe{constructor(n){this.property=n,this.value=new we(n,void 0)}transitioned(n,a){return new Ee(this.property,this.value,a,ie({},n.transition,this.transition),n.now)}untransitioned(){return new Ee(this.property,this.value,null,{},0)}}class Me{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return He(this._values[n].value.value)}setValue(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new pe(this._values[n].property)),this._values[n].value=new we(this._values[n].property,a===null?void 0:He(a))}getTransition(n){return He(this._values[n].transition)}setTransition(n,a){this._values.hasOwnProperty(n)||(this._values[n]=new pe(this._values[n].property)),this._values[n].transition=He(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const c=this.getValue(a);c!==void 0&&(n[a]=c);const h=this.getTransition(a);h!==void 0&&(n[`${a}-transition`]=h)}return n}transitioned(n,a){const c=new Ye(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].transitioned(n,a._values[h]);return c}untransitioned(){const n=new Ye(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class Ee{constructor(n,a,c,h,v){const y=h.delay||0,x=h.duration||0;v=v||0,this.property=n,this.value=a,this.begin=v+y,this.end=this.begin+x,n.specification.transition&&(h.delay||h.duration)&&(this.prior=c)}possiblyEvaluate(n,a,c){const h=n.now||0,v=this.value.possiblyEvaluate(n,a,c),y=this.prior;if(y){if(h>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(h<this.begin)return y.possiblyEvaluate(n,a,c);{const x=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(n,a,c),v,N(x))}}return v}}class Ye{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,c){const h=new Ze(this._properties);for(const v of Object.keys(this._values))h._values[v]=this._values[v].possiblyEvaluate(n,a,c);return h}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class We{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return He(this._values[n].value)}setValue(n,a){this._values[n]=new we(this._values[n].property,a===null?void 0:He(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const c=this.getValue(a);c!==void 0&&(n[a]=c)}return n}possiblyEvaluate(n,a,c){const h=new Ze(this._properties);for(const v of Object.keys(this._values))h._values[v]=this._values[v].possiblyEvaluate(n,a,c);return h}}class $e{constructor(n,a,c){this.property=n,this.value=a,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,c,h){return this.property.evaluate(this.value,this.parameters,n,a,c,h)}}class Ze{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Ge{constructor(n){this.specification=n}possiblyEvaluate(n,a){return n.expression.evaluate(a)}interpolate(n,a,c){const h=Xl[this.specification.type];return h?h(n,a,c):n}}class Qe{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,c,h){return new $e(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},c,h)}:n.expression,a)}interpolate(n,a,c){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new $e(this,{kind:"constant",value:void 0},n.parameters);const h=Xl[this.specification.type];return h?new $e(this,{kind:"constant",value:h(n.value.value,a.value.value,c)},n.parameters):n}evaluate(n,a,c,h,v,y){return n.kind==="constant"?n.value:n.evaluate(a,c,h,v,y)}}class ct extends Qe{possiblyEvaluate(n,a,c,h){if(n.value===void 0)return new $e(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},c,h),y=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,x=this._calculate(y,y,y,a);return new $e(this,{kind:"constant",value:x},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new $e(this,{kind:"constant",value:v},a)}return new $e(this,n.expression,a)}evaluate(n,a,c,h,v,y){if(n.kind==="source"){const x=n.evaluate(a,c,h,v,y);return this._calculate(x,x,x,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},c,h),n.evaluate({zoom:Math.floor(a.zoom)},c,h),n.evaluate({zoom:Math.floor(a.zoom)+1},c,h),a):n.value}_calculate(n,a,c,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:n,to:a,other:c}:{from:c,to:a,other:n}}interpolate(n){return n}}class Zt{constructor(n){this.specification=n}possiblyEvaluate(n,a,c,h){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},c,h);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new _e(Math.floor(a.zoom-1),a)),n.expression.evaluate(new _e(Math.floor(a.zoom),a)),n.expression.evaluate(new _e(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,c,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:c,to:a}}interpolate(n){return n}}class at{constructor(n){this.specification=n}possiblyEvaluate(n,a,c,h){return!!n.expression.evaluate(a,null,{},c,h)}interpolate(){return!1}}class Dt{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new _e(0,{});for(const c in n){const h=n[c];h.specification.overridable&&this.overridableProperties.push(c);const v=this.defaultPropertyValues[c]=new we(h,void 0),y=this.defaultTransitionablePropertyValues[c]=new pe(h);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=v.possiblyEvaluate(a)}}}function $t(s,n){return 256*(s=q(Math.floor(s),0,255))+q(Math.floor(n),0,255)}pn(Qe,"DataDrivenProperty"),pn(Ge,"DataConstantProperty"),pn(ct,"CrossFadedDataDrivenProperty"),pn(Zt,"CrossFadedProperty"),pn(at,"ColorRampProperty");const en={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ct{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Yt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Nt(s,n=1){let a=0,c=0;return{members:s.map(h=>{const v=en[h.type].BYTES_PER_ELEMENT,y=a=ln(a,Math.max(n,v)),x=h.components||1;return c=Math.max(c,v),a+=v*x,{name:h.name,type:h.type,components:x,offset:y}}),size:ln(a,Math.max(c,n)),alignment:n}}function ln(s,n){return Math.ceil(s/n)*n}class rn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const c=this.length;return this.resize(c+1),this.emplace(c,n,a)}emplace(n,a,c){const h=2*n;return this.int16[h+0]=a,this.int16[h+1]=c,n}}rn.prototype.bytesPerElement=4,pn(rn,"StructArrayLayout2i4");class yn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,n,a,c)}emplace(n,a,c,h){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=c,this.int16[v+2]=h,n}}yn.prototype.bytesPerElement=6,pn(yn,"StructArrayLayout3i6");class En extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,h){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,c,h)}emplace(n,a,c,h,v){const y=4*n;return this.int16[y+0]=a,this.int16[y+1]=c,this.int16[y+2]=h,this.int16[y+3]=v,n}}En.prototype.bytesPerElement=8,pn(En,"StructArrayLayout4i8");class kn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,a,c,h,v,y,x)}emplace(n,a,c,h,v,y,x,E){const I=6*n,D=12*n,B=3*n;return this.int16[I+0]=a,this.int16[I+1]=c,this.uint8[D+4]=h,this.uint8[D+5]=v,this.uint8[D+6]=y,this.uint8[D+7]=x,this.float32[B+2]=E,n}}kn.prototype.bytesPerElement=12,pn(kn,"StructArrayLayout2i4ub1f12");class Jn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,h){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,c,h)}emplace(n,a,c,h,v){const y=4*n;return this.float32[y+0]=a,this.float32[y+1]=c,this.float32[y+2]=h,this.float32[y+3]=v,n}}Jn.prototype.bytesPerElement=16,pn(Jn,"StructArrayLayout4f16");class _n extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x,E,I,D){const B=this.length;return this.resize(B+1),this.emplace(B,n,a,c,h,v,y,x,E,I,D)}emplace(n,a,c,h,v,y,x,E,I,D,B){const $=10*n;return this.uint16[$+0]=a,this.uint16[$+1]=c,this.uint16[$+2]=h,this.uint16[$+3]=v,this.uint16[$+4]=y,this.uint16[$+5]=x,this.uint16[$+6]=E,this.uint16[$+7]=I,this.uint16[$+8]=D,this.uint16[$+9]=B,n}}_n.prototype.bytesPerElement=20,pn(_n,"StructArrayLayout10ui20");class Bn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x,E){const I=this.length;return this.resize(I+1),this.emplace(I,n,a,c,h,v,y,x,E)}emplace(n,a,c,h,v,y,x,E,I){const D=8*n;return this.uint16[D+0]=a,this.uint16[D+1]=c,this.uint16[D+2]=h,this.uint16[D+3]=v,this.uint16[D+4]=y,this.uint16[D+5]=x,this.uint16[D+6]=E,this.uint16[D+7]=I,n}}Bn.prototype.bytesPerElement=16,pn(Bn,"StructArrayLayout8ui16");class cr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,c,h,v,y)}emplace(n,a,c,h,v,y,x){const E=6*n;return this.int16[E+0]=a,this.int16[E+1]=c,this.int16[E+2]=h,this.int16[E+3]=v,this.int16[E+4]=y,this.int16[E+5]=x,n}}cr.prototype.bytesPerElement=12,pn(cr,"StructArrayLayout6i12");class jr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x,E,I,D,B,$){const X=this.length;return this.resize(X+1),this.emplace(X,n,a,c,h,v,y,x,E,I,D,B,$)}emplace(n,a,c,h,v,y,x,E,I,D,B,$,X){const J=12*n;return this.int16[J+0]=a,this.int16[J+1]=c,this.int16[J+2]=h,this.int16[J+3]=v,this.uint16[J+4]=y,this.uint16[J+5]=x,this.uint16[J+6]=E,this.uint16[J+7]=I,this.int16[J+8]=D,this.int16[J+9]=B,this.int16[J+10]=$,this.int16[J+11]=X,n}}jr.prototype.bytesPerElement=24,pn(jr,"StructArrayLayout4i4ui4i24");class Qr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,c,h,v,y)}emplace(n,a,c,h,v,y,x){const E=10*n,I=5*n;return this.int16[E+0]=a,this.int16[E+1]=c,this.int16[E+2]=h,this.float32[I+2]=v,this.float32[I+3]=y,this.float32[I+4]=x,n}}Qr.prototype.bytesPerElement=20,pn(Qr,"StructArrayLayout3i3f20");class Pr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}Pr.prototype.bytesPerElement=4,pn(Pr,"StructArrayLayout1ul4");class _i extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x,E,I,D,B,$,X){const J=this.length;return this.resize(J+1),this.emplace(J,n,a,c,h,v,y,x,E,I,D,B,$,X)}emplace(n,a,c,h,v,y,x,E,I,D,B,$,X,J){const re=20*n,fe=10*n;return this.int16[re+0]=a,this.int16[re+1]=c,this.int16[re+2]=h,this.int16[re+3]=v,this.int16[re+4]=y,this.float32[fe+3]=x,this.float32[fe+4]=E,this.float32[fe+5]=I,this.float32[fe+6]=D,this.int16[re+14]=B,this.uint32[fe+8]=$,this.uint16[re+18]=X,this.uint16[re+19]=J,n}}_i.prototype.bytesPerElement=40,pn(_i,"StructArrayLayout5i4f1i1ul2ui40");class Ao extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,n,a,c,h,v,y,x)}emplace(n,a,c,h,v,y,x,E){const I=8*n;return this.int16[I+0]=a,this.int16[I+1]=c,this.int16[I+2]=h,this.int16[I+4]=v,this.int16[I+5]=y,this.int16[I+6]=x,this.int16[I+7]=E,n}}Ao.prototype.bytesPerElement=16,pn(Ao,"StructArrayLayout3i2i2i16");class la extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,c,h,v)}emplace(n,a,c,h,v,y){const x=4*n,E=8*n;return this.float32[x+0]=a,this.float32[x+1]=c,this.float32[x+2]=h,this.int16[E+6]=v,this.int16[E+7]=y,n}}la.prototype.bytesPerElement=16,pn(la,"StructArrayLayout2f1f2i16");class Vr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,h){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,c,h)}emplace(n,a,c,h,v){const y=12*n,x=3*n;return this.uint8[y+0]=a,this.uint8[y+1]=c,this.float32[x+1]=h,this.float32[x+2]=v,n}}Vr.prototype.bytesPerElement=12,pn(Vr,"StructArrayLayout2ub2f12");class Gr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,n,a,c)}emplace(n,a,c,h){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=c,this.float32[v+2]=h,n}}Gr.prototype.bytesPerElement=12,pn(Gr,"StructArrayLayout3f12");class qn extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c){const h=this.length;return this.resize(h+1),this.emplace(h,n,a,c)}emplace(n,a,c,h){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=c,this.uint16[v+2]=h,n}}qn.prototype.bytesPerElement=6,pn(qn,"StructArrayLayout3ui6");class ai extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x,E,I,D,B,$,X,J,re,fe,Ae,je,ke,Ne,Je){const Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,n,a,c,h,v,y,x,E,I,D,B,$,X,J,re,fe,Ae,je,ke,Ne,Je)}emplace(n,a,c,h,v,y,x,E,I,D,B,$,X,J,re,fe,Ae,je,ke,Ne,Je,Ue){const gt=30*n,ft=15*n,Mt=60*n;return this.int16[gt+0]=a,this.int16[gt+1]=c,this.int16[gt+2]=h,this.float32[ft+2]=v,this.float32[ft+3]=y,this.uint16[gt+8]=x,this.uint16[gt+9]=E,this.uint32[ft+5]=I,this.uint32[ft+6]=D,this.uint32[ft+7]=B,this.uint16[gt+16]=$,this.uint16[gt+17]=X,this.uint16[gt+18]=J,this.float32[ft+10]=re,this.float32[ft+11]=fe,this.uint8[Mt+48]=Ae,this.uint8[Mt+49]=je,this.uint8[Mt+50]=ke,this.uint32[ft+13]=Ne,this.int16[gt+28]=Je,this.uint8[Mt+58]=Ue,n}}ai.prototype.bytesPerElement=60,pn(ai,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ei extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v,y,x,E,I,D,B,$,X,J,re,fe,Ae,je,ke,Ne,Je,Ue,gt,ft,Mt,Jt,xt,Lt,Vt,Ft){const Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,n,a,c,h,v,y,x,E,I,D,B,$,X,J,re,fe,Ae,je,ke,Ne,Je,Ue,gt,ft,Mt,Jt,xt,Lt,Vt,Ft)}emplace(n,a,c,h,v,y,x,E,I,D,B,$,X,J,re,fe,Ae,je,ke,Ne,Je,Ue,gt,ft,Mt,Jt,xt,Lt,Vt,Ft,Xt){const Ut=38*n,un=19*n;return this.int16[Ut+0]=a,this.int16[Ut+1]=c,this.int16[Ut+2]=h,this.float32[un+2]=v,this.float32[un+3]=y,this.int16[Ut+8]=x,this.int16[Ut+9]=E,this.int16[Ut+10]=I,this.int16[Ut+11]=D,this.int16[Ut+12]=B,this.int16[Ut+13]=$,this.uint16[Ut+14]=X,this.uint16[Ut+15]=J,this.uint16[Ut+16]=re,this.uint16[Ut+17]=fe,this.uint16[Ut+18]=Ae,this.uint16[Ut+19]=je,this.uint16[Ut+20]=ke,this.uint16[Ut+21]=Ne,this.uint16[Ut+22]=Je,this.uint16[Ut+23]=Ue,this.uint16[Ut+24]=gt,this.uint16[Ut+25]=ft,this.uint16[Ut+26]=Mt,this.uint16[Ut+27]=Jt,this.uint16[Ut+28]=xt,this.uint32[un+15]=Lt,this.float32[un+16]=Vt,this.float32[un+17]=Ft,this.float32[un+18]=Xt,n}}Ei.prototype.bytesPerElement=76,pn(Ei,"StructArrayLayout3i2f6i15ui1ul3f76");class zr extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}zr.prototype.bytesPerElement=4,pn(zr,"StructArrayLayout1f4");class Ii extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,c,h,v){const y=this.length;return this.resize(y+1),this.emplace(y,n,a,c,h,v)}emplace(n,a,c,h,v,y){const x=5*n;return this.float32[x+0]=a,this.float32[x+1]=c,this.float32[x+2]=h,this.float32[x+3]=v,this.float32[x+4]=y,n}}Ii.prototype.bytesPerElement=20,pn(Ii,"StructArrayLayout5f20");class ds extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,c,h){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,c,h)}emplace(n,a,c,h,v){const y=6*n;return this.uint32[3*n+0]=a,this.uint16[y+2]=c,this.uint16[y+3]=h,this.uint16[y+4]=v,n}}ds.prototype.bytesPerElement=12,pn(ds,"StructArrayLayout1ul3ui12");class zi extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const c=this.length;return this.resize(c+1),this.emplace(c,n,a)}emplace(n,a,c){const h=2*n;return this.uint16[h+0]=a,this.uint16[h+1]=c,n}}zi.prototype.bytesPerElement=4,pn(zi,"StructArrayLayout2ui4");class fs extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}fs.prototype.bytesPerElement=2,pn(fs,"StructArrayLayout1ui2");class hs extends Yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const c=this.length;return this.resize(c+1),this.emplace(c,n,a)}emplace(n,a,c){const h=2*n;return this.float32[h+0]=a,this.float32[h+1]=c,n}}hs.prototype.bytesPerElement=8,pn(hs,"StructArrayLayout2f8");class ps extends Ct{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}ps.prototype.size=12;class Li extends cr{get(n){return new ps(this,n)}}pn(Li,"FillExtrusionExtArray");class ms extends Ct{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}ms.prototype.size=40;class Da extends _i{get(n){return new ms(this,n)}}pn(Da,"CollisionBoxArray");class vu extends Ct{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}vu.prototype.size=60;class FC extends ai{get(n){return new vu(this,n)}}pn(FC,"PlacedSymbolArray");class BC extends Ct{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}BC.prototype.size=76;class NC extends Ei{get(n){return new BC(this,n)}}pn(NC,"SymbolInstanceArray");class $C extends zr{getoffsetX(n){return this.float32[1*n+0]}}pn($C,"GlyphOffsetArray");class jC extends yn{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}pn(jC,"SymbolLineVertexArray");class VC extends Ct{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}VC.prototype.size=12;class UC extends ds{get(n){return new VC(this,n)}}pn(UC,"FeatureIndexArray");class KC extends Ct{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}KC.prototype.size=4;class GC extends zi{get(n){return new KC(this,n)}}pn(GC,"FillExtrusionCentroidArray");class HC extends Ct{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}HC.prototype.size=12;class qC extends cr{get(n){return new HC(this,n)}}pn(qC,"CircleGlobeExtArray");const Bz=Nt([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Nz=Nt([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var WC=nf(function(s){s.exports=function(n,a){var c,h,v,y,x,E,I,D;for(h=n.length-(c=3&n.length),v=a,x=3432918353,E=461845907,D=0;D<h;)I=255&n.charCodeAt(D)|(255&n.charCodeAt(++D))<<8|(255&n.charCodeAt(++D))<<16|(255&n.charCodeAt(++D))<<24,++D,v=27492+(65535&(y=5*(65535&(v=(v^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(I=0,c){case 3:I^=(255&n.charCodeAt(D+2))<<16;case 2:I^=(255&n.charCodeAt(D+1))<<8;case 1:v^=I=(65535&(I=(I=(65535&(I^=255&n.charCodeAt(D)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*E+(((I>>>16)*E&65535)<<16)&4294967295}return v^=n.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}}),$z=nf(function(s){s.exports=function(n,a){for(var c,h=n.length,v=a^h,y=0;h>=4;)c=1540483477*(65535&(c=255&n.charCodeAt(y)|(255&n.charCodeAt(++y))<<8|(255&n.charCodeAt(++y))<<16|(255&n.charCodeAt(++y))<<24))+((1540483477*(c>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:v^=(255&n.charCodeAt(y+2))<<16;case 2:v^=(255&n.charCodeAt(y+1))<<8;case 1:v=1540483477*(65535&(v^=255&n.charCodeAt(y)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}}),eh=WC,jz=$z;eh.murmur3=WC,eh.murmur2=jz;class Fm{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,c,h){this.ids.push(ZC(n)),this.positions.push(a,c,h)}getPositions(n){const a=ZC(n);let c=0,h=this.ids.length-1;for(;c<h;){const y=c+h>>1;this.ids[y]>=a?h=y:c=y+1}const v=[];for(;this.ids[c]===a;)v.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return v}static serialize(n,a){const c=new Float64Array(n.ids),h=new Uint32Array(n.positions);return a_(c,h,0,c.length-1),a&&a.push(c.buffer,h.buffer),{ids:c,positions:h}}static deserialize(n){const a=new Fm;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function ZC(s){const n=+s;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:eh(String(s))}function a_(s,n,a,c){for(;a<c;){const h=s[a+c>>1];let v=a-1,y=c+1;for(;;){do v++;while(s[v]<h);do y--;while(s[y]>h);if(v>=y)break;Bm(s,v,y),Bm(n,3*v,3*y),Bm(n,3*v+1,3*y+1),Bm(n,3*v+2,3*y+2)}y-a<c-y?(a_(s,n,a,y),a=y+1):(a_(s,n,y+1,c),c=y)}}function Bm(s,n,a){const c=s[n];s[n]=s[a],s[a]=c}pn(Fm,"FeaturePositionMap");class vs{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,a),this.initialized=!0),!!this.location}}class Nm extends vs{constructor(n){super(n),this.current=0}set(n,a,c){this.fetchUniformLocation(n,a)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class XC extends vs{constructor(n){super(n),this.current=[0,0,0,0]}set(n,a,c){this.fetchUniformLocation(n,a)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class YC extends vs{constructor(n){super(n),this.current=Ir.transparent}set(n,a,c){this.fetchUniformLocation(n,a)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const Vz=new Float32Array(16),Uz=new Float32Array(9),Kz=new Float32Array(4);function s_(s){return[$t(255*s.r,255*s.g),$t(255*s.b,255*s.a)]}class th{constructor(n,a,c){this.value=n,this.uniformNames=a.map(h=>`u_${h}`),this.type=c}setUniform(n,a,c,h,v){a.set(n,v,h.constantOr(this.value))}getBinding(n,a){return this.type==="color"?new YC(n):new Nm(n)}}class Uc{constructor(n,a){this.uniformNames=a.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio||1,this.pixelRatioTo=n.pixelRatio||1,this.patternFrom=a.tl.concat(a.br),this.patternTo=n.tl.concat(n.br)}setUniform(n,a,c,h,v){const y=v==="u_pattern_to"||v==="u_dash_to"?this.patternTo:v==="u_pattern_from"||v==="u_dash_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&a.set(n,v,y)}getBinding(n,a){return a==="u_pattern_from"||a==="u_pattern_to"||a==="u_dash_from"||a==="u_dash_to"?new XC(n):new Nm(n)}}class gs{constructor(n,a,c,h){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(n,a,c,h,v,y){const x=this.paintVertexArray.length,E=this.expression.evaluate(new _e(0),a,{},v,h,y);this.paintVertexArray.resize(n),this._setPaintValue(x,n,E)}updatePaintArray(n,a,c,h,v){const y=this.expression.evaluate({zoom:0},c,h,void 0,v);this._setPaintValue(n,a,y)}_setPaintValue(n,a,c){if(this.type==="color"){const h=s_(c);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,h[0],h[1])}else{for(let h=n;h<a;h++)this.paintVertexArray.emplace(h,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ua{constructor(n,a,c,h,v,y){this.expression=n,this.uniformNames=a.map(x=>`u_${x}_t`),this.type=c,this.useIntegerZoom=h,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,a,c,h,v,y){const x=this.expression.evaluate(new _e(this.zoom),a,{},v,h,y),E=this.expression.evaluate(new _e(this.zoom+1),a,{},v,h,y),I=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(I,n,x,E)}updatePaintArray(n,a,c,h,v){const y=this.expression.evaluate({zoom:this.zoom},c,h,void 0,v),x=this.expression.evaluate({zoom:this.zoom+1},c,h,void 0,v);this._setPaintValue(n,a,y,x)}_setPaintValue(n,a,c,h){if(this.type==="color"){const v=s_(c),y=s_(h);for(let x=n;x<a;x++)this.paintVertexArray.emplace(x,v[0],v[1],y[0],y[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,c,h);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a,c,h,v){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,x=q(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);a.set(n,v,x)}getBinding(n,a){return new Nm(n)}}class ul{constructor(n,a,c,h,v,y,x){this.expression=n,this.type=c,this.useIntegerZoom=h,this.zoom=v,this.layerId=x,this.paintVertexAttributes=(c==="array"?Nz:Bz).members;for(let E=0;E<a.length;++E);this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(n,a,c){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(h,n,a.patterns&&a.patterns[this.layerId],c)}updatePaintArray(n,a,c,h,v,y){this._setPaintValues(n,a,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(n,a,c,h){if(!h||!c)return;const{min:v,mid:y,max:x}=c,E=h[v],I=h[y],D=h[x];if(E&&I&&D)for(let B=n;B<a;B++)this._setPaintValue(this.zoomInPaintVertexArray,B,I,E),this._setPaintValue(this.zoomOutPaintVertexArray,B,I,D)}_setPaintValue(n,a,c,h){n.emplace(a,c.tl[0],c.tl[1],c.br[0],c.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1],c.pixelRatio,h.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cl{constructor(n,a,c=()=>!0){this.binders={},this._buffers=[];const h=[];for(const v in n.paint._values){if(!c(v))continue;const y=n.paint.get(v);if(!(y instanceof $e&&el(y.property.specification)))continue;const x=Hz(v,n.type),E=y.value,I=y.property.specification.type,D=y.property.useIntegerZoom,B=y.property.specification["property-type"],$=B==="cross-faded"||B==="cross-faded-data-driven",X=String(v)==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||X)if(E.kind==="source"||X||$){const J=JC(v,I,"source");this.binders[v]=$?new ul(E,x,I,D,a,J,n.id):new gs(E,x,I,J),h.push(`/a_${v}`)}else{const J=JC(v,I,"composite");this.binders[v]=new ua(E,x,I,D,a,J),h.push(`/z_${v}`)}else this.binders[v]=$?new Uc(E.value,x):new th(E.value,x,I),h.push(`/u_${v}`)}this.cacheKey=h.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof gs||a instanceof ua?a.maxValue:0}populatePaintArrays(n,a,c,h,v,y){for(const x in this.binders){const E=this.binders[x];(E instanceof gs||E instanceof ua||E instanceof ul)&&E.populatePaintArray(n,a,c,h,v,y)}}setConstantPatternPositions(n,a){for(const c in this.binders){const h=this.binders[c];h instanceof Uc&&h.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,c,h,v,y){let x=!1;for(const E in n){const I=a.getPositions(E);for(const D of I){const B=c.feature(D.index);for(const $ in this.binders){const X=this.binders[$];if((X instanceof gs||X instanceof ua||X instanceof ul)&&X.expression.isStateDependent===!0){const J=h.paint.get($);X.expression=J.value,X.updatePaintArray(D.start,D.end,B,n[E],v,y),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const c=this.binders[a];(c instanceof th||c instanceof Uc)&&n.push(...c.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof gs||c instanceof ua||c instanceof ul)for(let h=0;h<c.paintVertexAttributes.length;h++)n.push(c.paintVertexAttributes[h].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const c=this.binders[a];if(c instanceof th||c instanceof Uc||c instanceof ua)for(const h of c.uniformNames)n.push(h)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const a=[];for(const c in this.binders){const h=this.binders[c];if(h instanceof th||h instanceof Uc||h instanceof ua)for(const v of h.uniformNames)a.push({name:v,property:c,binding:h.getBinding(n,v)})}return a}setUniforms(n,a,c,h,v){for(const{name:y,property:x,binding:E}of c)this.binders[x].setUniform(n,E,v,h.get(x),y)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const c=this.binders[a];if(n&&c instanceof ul){const h=n.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(c instanceof gs||c instanceof ua)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(n){for(const a in this.binders){const c=this.binders[a];(c instanceof gs||c instanceof ua||c instanceof ul)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof gs||a instanceof ua||a instanceof ul)&&a.destroy()}}}class gu{constructor(n,a,c=()=>!0){this.programConfigurations={};for(const h of n)this.programConfigurations[h.id]=new cl(h,a,c);this.needsUpload=!1,this._featureMap=new Fm,this._bufferOffset=0}populatePaintArrays(n,a,c,h,v,y,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(n,a,h,v,y,x);a.id!==void 0&&this._featureMap.add(a.id,c,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,c,h,v){for(const y of c)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,a,y,h,v)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const Gz={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Hz(s,n){return Gz[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}const qz={"line-pattern":{source:_n,composite:_n},"fill-pattern":{source:_n,composite:_n},"fill-extrusion-pattern":{source:_n,composite:_n},"line-dasharray":{source:Bn,composite:Bn}},Wz={color:{source:hs,composite:Jn},number:{source:zr,composite:hs}};function JC(s,n,a){const c=qz[s];return c&&c[a]||Wz[n][a]}pn(th,"ConstantBinder"),pn(Uc,"CrossFadedConstantBinder"),pn(gs,"SourceExpressionBinder"),pn(ul,"CrossFadedCompositeBinder"),pn(ua,"CompositeExpressionBinder"),pn(cl,"ProgramConfiguration",{omit:["_buffers"]}),pn(gu,"ProgramConfigurationSet");const $m="-transition";class ca extends gn{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=(n=n).metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new We(a.layout)),a.paint)){this._transitionablePaint=new Me(a.paint);for(const c in n.paint)this.setPaintProperty(c,n.paint[c],{validate:!1});for(const c in n.layout)this.setLayoutProperty(c,n.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ze(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,c={}){a!=null&&this._validate(bm,`layers.${this.id}.layout.${n}`,n,a,c)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return he(n,$m)?this._transitionablePaint.getTransition(n.slice(0,-$m.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,c={}){if(a!=null&&this._validate(Fc,`layers.${this.id}.paint.${n}`,n,a,c))return!1;if(he(n,$m))return this._transitionablePaint.setTransition(n.slice(0,-$m.length),a||void 0),!1;{const h=this._transitionablePaint._values[n],v=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),x=h.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const E=this._transitionablePaint._values[n].value;return E.isDataDriven()||y||v||this._handleOverridablePaintPropertyUpdate(n,x,E)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,a,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Pe(n,(a,c)=>!(a===void 0||c==="layout"&&!Object.keys(a).length||c==="paint"&&!Object.keys(a).length))}_validate(n,a,c,h,v={}){return(!v||v.validate!==!1)&&Kf(this,n.call(Lc,{key:a,layerType:this.type,objectKey:c,value:h,styleSpec:wt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof $e&&el(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=lu(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Zz=Nt([{name:"a_pos",components:2,type:"Int16"}],4),Xz=Nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ci{constructor(n=[]){this.segments=n}prepareSegment(n,a,c,h){let v=this.segments[this.segments.length-1];return n>ci.MAX_VERTEX_ARRAY_LENGTH&&Re(`Max vertices per segment is ${ci.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>ci.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==h)&&(v={vertexOffset:a.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},h!==void 0&&(v.sortKey=h),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,c,h){return new ci([{vertexOffset:n,primitiveOffset:a,vertexLength:c,primitiveLength:h,vaos:{},sortKey:0}])}}ci.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,pn(ci,"SegmentVector");var Pn=8192;class dl{constructor(n,a){n&&(a?this.setSouthWest(n).setNorthEast(a):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Sr?new Sr(n.lng,n.lat):Sr.convert(n),this}setSouthWest(n){return this._sw=n instanceof Sr?new Sr(n.lng,n.lat):Sr.convert(n),this}extend(n){const a=this._sw,c=this._ne;let h,v;if(n instanceof Sr)h=n,v=n;else{if(!(n instanceof dl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(dl.convert(n)):this.extend(Sr.convert(n)):this;if(h=n._sw,v=n._ne,!h||!v)return this}return a||c?(a.lng=Math.min(h.lng,a.lng),a.lat=Math.min(h.lat,a.lat),c.lng=Math.max(v.lng,c.lng),c.lat=Math.max(v.lat,c.lat)):(this._sw=new Sr(h.lng,h.lat),this._ne=new Sr(v.lng,v.lat)),this}getCenter(){return new Sr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Sr(this.getWest(),this.getNorth())}getSouthEast(){return new Sr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:a,lat:c}=Sr.convert(n);let h=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(h=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&h}static convert(n){return!n||n instanceof dl?n:new dl(n)}}const l_=63710088e-1;class Sr{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Sr(Z(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,c=this.lat*a,h=n.lat*a,v=Math.sin(c)*Math.sin(h)+Math.cos(c)*Math.cos(h)*Math.cos((n.lng-this.lng)*a);return l_*Math.acos(Math.min(v,1))}toBounds(n=0){const a=360*n/40075017,c=a/Math.cos(Math.PI/180*this.lat);return new dl(new Sr(this.lng-c,this.lat-a),new Sr(this.lng+c,this.lat+a))}static convert(n){if(n instanceof Sr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Sr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Sr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const QC=2*Math.PI*l_;function u_(s){return QC*Math.cos(s*Math.PI/180)}function Ra(s){return(180+s)/360}function ys(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function qo(s,n){return s/u_(n)}function Wo(s){return 360*s-180}function Pi(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function eS(s,n){return s*u_(Pi(n))}const za=85.051129;function tS(s){return 1/Math.cos(s*Math.PI/180)}class Kc{constructor(n,a,c=0){this.x=+n,this.y=+a,this.z=+c}static fromLngLat(n,a=0){const c=Sr.convert(n);return new Kc(Ra(c.lng),ys(c.lat),qo(a,c.lat))}toLngLat(){return new Sr(Wo(this.x),Pi(this.y))}toAltitude(){return eS(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/QC*tS(Pi(this.y))}}function c_(s,n,a,c,h,v,y,x,E){const I=(n+c)/2,D=(a+h)/2,B=new S(I,D);x(B),function($,X,J,re,fe,Ae){const je=J-fe,ke=re-Ae;return Math.abs((re-X)*je-(J-$)*ke)/Math.hypot(je,ke)}(B.x,B.y,v.x,v.y,y.x,y.y)>=E?(c_(s,n,a,I,D,v,B,x,E),c_(s,I,D,c,h,B,y,x,E)):s.push(y)}function nS(s,n,a){let c=s[0],h=c.x,v=c.y;n(c);const y=[c];for(let x=1;x<s.length;x++){const E=s[x],{x:I,y:D}=E;n(E),c_(y,h,v,I,D,c,E,n,a),h=I,v=D,c=E}return y}function d_(s,n,a,c,h){if(h(n,a)){const v=n.add(a).mult(.5);c(v),d_(s,n,v,c,h),d_(s,v,a,c,h)}else s.push(a)}function Yz(s,n,a){let c=s[0];n(c);const h=[c];for(let v=1;v<s.length;v++){const y=s[v];n(y),d_(h,c,y,n,a),c=y}return h}const f_=Math.pow(2,14)-1,rS=-f_-1;function Jz(s,n){const a=Math.round(s.x*n),c=Math.round(s.y*n);return s.x=q(a,rS,f_),s.y=q(c,rS,f_),(a<s.x||a>s.x+1||c<s.y||c>s.y+1)&&Re("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function _s(s,n,a){const c=s.loadGeometry(),h=s.extent,v=Pn/h;if(n&&a&&a.projection.isReprojectedInTileSpace){const y=1<<n.z,{scale:x,x:E,y:I,projection:D}=a,B=$=>{const X=Wo((n.x+$.x/h)/y),J=Pi((n.y+$.y/h)/y),re=D.project(X,J);$.x=(re.x*x-E)*h,$.y=(re.y*x-I)*h};for(let $=0;$<c.length;$++)if(s.type!==1)c[$]=nS(c[$],B,1);else{const X=[];for(const J of c[$])J.x<0||J.x>=h||J.y<0||J.y>=h||(B(J),X.push(J));c[$]=X}}for(const y of c)for(const x of y)Jz(x,v);return c}function yu(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?_s(s):[]}}function jm(s,n,a,c,h){s.emplaceBack(2*n+(c+1)/2,2*a+(h+1)/2)}function Vm(s,n,a){s.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class h_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new rn,this.indexArray=new qn,this.segments=new ci,this.programConfigurations=new gu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,c,h){const v=this.layers[0],y=[];let x=null;v.type==="circle"&&(x=v.layout.get("circle-sort-key"));for(const{feature:I,id:D,index:B,sourceLayerIndex:$}of n){const X=this.layers[0]._featureFilter.needGeometry,J=yu(I,X);if(!this.layers[0]._featureFilter.filter(new _e(this.zoom),J,c))continue;const re=x?x.evaluate(J,{},c):void 0,fe={id:D,properties:I.properties,type:I.type,sourceLayerIndex:$,index:B,geometry:X?J.geometry:_s(I,c,h),patterns:{},sortKey:re};y.push(fe)}x&&y.sort((I,D)=>I.sortKey-D.sortKey);let E=null;h.projection.name==="globe"&&(this.globeExtVertexArray=new qC,E=h.projection);for(const I of y){const{geometry:D,index:B,sourceLayerIndex:$}=I,X=n[B].feature;this.addFeature(I,D,B,a.availableImages,c,E),a.featureIndex.insert(X,D,B,$,this.index)}}update(n,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Zz.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,Xz.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,a,c,h,v,y){for(const x of a)for(const E of x){const I=E.x,D=E.y;if(I<0||I>=Pn||D<0||D>=Pn)continue;if(y){const X=y.projectTilePoint(I,D,v),J=y.upVector(v,I,D),re=this.globeExtVertexArray;Vm(re,X,J),Vm(re,X,J),Vm(re,X,J),Vm(re,X,J)}const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),$=B.vertexLength;jm(this.layoutVertexArray,I,D,-1,-1),jm(this.layoutVertexArray,I,D,1,-1),jm(this.layoutVertexArray,I,D,1,1),jm(this.layoutVertexArray,I,D,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+2,$+3),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},h,v)}}function iS(s,n){for(let a=0;a<s.length;a++)if(_u(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(_u(s,n[a]))return!0;return!!p_(s,n)}function Qz(s,n,a){return!!_u(s,n)||!!m_(n,s,a)}function oS(s,n){if(s.length===1)return sS(n,s[0]);for(let a=0;a<n.length;a++){const c=n[a];for(let h=0;h<c.length;h++)if(_u(s,c[h]))return!0}for(let a=0;a<s.length;a++)if(sS(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(p_(s,n[a]))return!0;return!1}function eL(s,n,a){if(s.length>1){if(p_(s,n))return!0;for(let c=0;c<n.length;c++)if(m_(n[c],s,a))return!0}for(let c=0;c<s.length;c++)if(m_(s[c],n,a))return!0;return!1}function p_(s,n){if(s.length===0||n.length===0)return!1;for(let a=0;a<s.length-1;a++){const c=s[a],h=s[a+1];for(let v=0;v<n.length-1;v++)if(tL(c,h,n[v],n[v+1]))return!0}return!1}function tL(s,n,a,c){return Le(s,a,c)!==Le(n,a,c)&&Le(s,n,a)!==Le(s,n,c)}function m_(s,n,a){const c=a*a;if(n.length===1)return s.distSqr(n[0])<c;for(let h=1;h<n.length;h++)if(aS(s,n[h-1],n[h])<c)return!0;return!1}function aS(s,n,a){const c=n.distSqr(a);if(c===0)return s.distSqr(n);const h=((s.x-n.x)*(a.x-n.x)+(s.y-n.y)*(a.y-n.y))/c;return s.distSqr(h<0?n:h>1?a:a.sub(n)._mult(h)._add(n))}function sS(s,n){let a,c,h,v=!1;for(let y=0;y<s.length;y++){a=s[y];for(let x=0,E=a.length-1;x<a.length;E=x++)c=a[x],h=a[E],c.y>n.y!=h.y>n.y&&n.x<(h.x-c.x)*(n.y-c.y)/(h.y-c.y)+c.x&&(v=!v)}return v}function _u(s,n){let a=!1;for(let c=0,h=s.length-1;c<s.length;h=c++){const v=s[c],y=s[h];v.y>n.y!=y.y>n.y&&n.x<(y.x-v.x)*(n.y-v.y)/(y.y-v.y)+v.x&&(a=!a)}return a}function lS(s,n,a,c,h){for(const y of s)if(n<=y.x&&a<=y.y&&c>=y.x&&h>=y.y)return!0;const v=[new S(n,a),new S(n,h),new S(c,h),new S(c,a)];if(s.length>2){for(const y of v)if(_u(s,y))return!0}for(let y=0;y<s.length-1;y++)if(nL(s[y],s[y+1],v))return!0;return!1}function nL(s,n,a){const c=a[0],h=a[2];if(s.x<c.x&&n.x<c.x||s.x>h.x&&n.x>h.x||s.y<c.y&&n.y<c.y||s.y>h.y&&n.y>h.y)return!1;const v=Le(s,n,a[0]);return v!==Le(s,n,a[1])||v!==Le(s,n,a[2])||v!==Le(s,n,a[3])}function Gc(s,n,a){const c=n.paint.get(s).value;return c.kind==="constant"?c.value:a.programConfigurations.get(n.id).getMaxValue(s)}function Um(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function uS(s,n,a,c,h){if(!n[0]&&!n[1])return s;const v=S.convert(n)._mult(h);a==="viewport"&&v._rotate(-c);const y=[];for(let x=0;x<s.length;x++)y.push(s[x].sub(v));return y}function cS(s,n,a,c){const h=S.convert(s)._mult(c);return n==="viewport"&&h._rotate(-a),h}pn(h_,"CircleBucket",{omit:["layers"]});const rL=new Dt({"circle-sort-key":new Qe(wt.layout_circle["circle-sort-key"])});var iL={paint:new Dt({"circle-radius":new Qe(wt.paint_circle["circle-radius"]),"circle-color":new Qe(wt.paint_circle["circle-color"]),"circle-blur":new Qe(wt.paint_circle["circle-blur"]),"circle-opacity":new Qe(wt.paint_circle["circle-opacity"]),"circle-translate":new Ge(wt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ge(wt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ge(wt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ge(wt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qe(wt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qe(wt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qe(wt.paint_circle["circle-stroke-opacity"])}),layout:rL},Km=1e-6,vo=typeof Float32Array<"u"?Float32Array:Array;function dS(){var s=new vo(9);return vo!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function La(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function v_(s,n){var a=n[0],c=n[1],h=n[2],v=n[3],y=n[4],x=n[5],E=n[6],I=n[7],D=n[8],B=n[9],$=n[10],X=n[11],J=n[12],re=n[13],fe=n[14],Ae=n[15],je=a*x-c*y,ke=a*E-h*y,Ne=a*I-v*y,Je=c*E-h*x,Ue=c*I-v*x,gt=h*I-v*E,ft=D*re-B*J,Mt=D*fe-$*J,Jt=D*Ae-X*J,xt=B*fe-$*re,Lt=B*Ae-X*re,Vt=$*Ae-X*fe,Ft=je*Vt-ke*Lt+Ne*xt+Je*Jt-Ue*Mt+gt*ft;return Ft?(s[0]=(x*Vt-E*Lt+I*xt)*(Ft=1/Ft),s[1]=(h*Lt-c*Vt-v*xt)*Ft,s[2]=(re*gt-fe*Ue+Ae*Je)*Ft,s[3]=($*Ue-B*gt-X*Je)*Ft,s[4]=(E*Jt-y*Vt-I*Mt)*Ft,s[5]=(a*Vt-h*Jt+v*Mt)*Ft,s[6]=(fe*Ne-J*gt-Ae*ke)*Ft,s[7]=(D*gt-$*Ne+X*ke)*Ft,s[8]=(y*Lt-x*Jt+I*ft)*Ft,s[9]=(c*Jt-a*Lt-v*ft)*Ft,s[10]=(J*Ue-re*Ne+Ae*je)*Ft,s[11]=(B*Ne-D*Ue-X*je)*Ft,s[12]=(x*Mt-y*xt-E*ft)*Ft,s[13]=(a*xt-c*Mt+h*ft)*Ft,s[14]=(re*ke-J*Je-fe*je)*Ft,s[15]=(D*Je-B*ke+$*je)*Ft,s):null}function Hc(s,n,a){var c=n[0],h=n[1],v=n[2],y=n[3],x=n[4],E=n[5],I=n[6],D=n[7],B=n[8],$=n[9],X=n[10],J=n[11],re=n[12],fe=n[13],Ae=n[14],je=n[15],ke=a[0],Ne=a[1],Je=a[2],Ue=a[3];return s[0]=ke*c+Ne*x+Je*B+Ue*re,s[1]=ke*h+Ne*E+Je*$+Ue*fe,s[2]=ke*v+Ne*I+Je*X+Ue*Ae,s[3]=ke*y+Ne*D+Je*J+Ue*je,s[4]=(ke=a[4])*c+(Ne=a[5])*x+(Je=a[6])*B+(Ue=a[7])*re,s[5]=ke*h+Ne*E+Je*$+Ue*fe,s[6]=ke*v+Ne*I+Je*X+Ue*Ae,s[7]=ke*y+Ne*D+Je*J+Ue*je,s[8]=(ke=a[8])*c+(Ne=a[9])*x+(Je=a[10])*B+(Ue=a[11])*re,s[9]=ke*h+Ne*E+Je*$+Ue*fe,s[10]=ke*v+Ne*I+Je*X+Ue*Ae,s[11]=ke*y+Ne*D+Je*J+Ue*je,s[12]=(ke=a[12])*c+(Ne=a[13])*x+(Je=a[14])*B+(Ue=a[15])*re,s[13]=ke*h+Ne*E+Je*$+Ue*fe,s[14]=ke*v+Ne*I+Je*X+Ue*Ae,s[15]=ke*y+Ne*D+Je*J+Ue*je,s}function nh(s,n,a){var c,h,v,y,x,E,I,D,B,$,X,J,re=a[0],fe=a[1],Ae=a[2];return n===s?(s[12]=n[0]*re+n[4]*fe+n[8]*Ae+n[12],s[13]=n[1]*re+n[5]*fe+n[9]*Ae+n[13],s[14]=n[2]*re+n[6]*fe+n[10]*Ae+n[14],s[15]=n[3]*re+n[7]*fe+n[11]*Ae+n[15]):(h=n[1],v=n[2],y=n[3],x=n[4],E=n[5],I=n[6],D=n[7],B=n[8],$=n[9],X=n[10],J=n[11],s[0]=c=n[0],s[1]=h,s[2]=v,s[3]=y,s[4]=x,s[5]=E,s[6]=I,s[7]=D,s[8]=B,s[9]=$,s[10]=X,s[11]=J,s[12]=c*re+x*fe+B*Ae+n[12],s[13]=h*re+E*fe+$*Ae+n[13],s[14]=v*re+I*fe+X*Ae+n[14],s[15]=y*re+D*fe+J*Ae+n[15]),s}function xu(s,n,a){var c=a[0],h=a[1],v=a[2];return s[0]=n[0]*c,s[1]=n[1]*c,s[2]=n[2]*c,s[3]=n[3]*c,s[4]=n[4]*h,s[5]=n[5]*h,s[6]=n[6]*h,s[7]=n[7]*h,s[8]=n[8]*v,s[9]=n[9]*v,s[10]=n[10]*v,s[11]=n[11]*v,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s}function g_(s,n,a){var c=Math.sin(a),h=Math.cos(a),v=n[4],y=n[5],x=n[6],E=n[7],I=n[8],D=n[9],B=n[10],$=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=v*h+I*c,s[5]=y*h+D*c,s[6]=x*h+B*c,s[7]=E*h+$*c,s[8]=I*h-v*c,s[9]=D*h-y*c,s[10]=B*h-x*c,s[11]=$*h-E*c,s}function Gm(s,n,a){var c=Math.sin(a),h=Math.cos(a),v=n[0],y=n[1],x=n[2],E=n[3],I=n[8],D=n[9],B=n[10],$=n[11];return n!==s&&(s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=v*h-I*c,s[1]=y*h-D*c,s[2]=x*h-B*c,s[3]=E*h-$*c,s[8]=v*c+I*h,s[9]=y*c+D*h,s[10]=x*c+B*h,s[11]=E*c+$*h,s}function fS(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function hS(s,n,a){var c,h,v,y=a[0],x=a[1],E=a[2],I=Math.hypot(y,x,E);return I<Km?null:(y*=I=1/I,x*=I,E*=I,c=Math.sin(n),h=Math.cos(n),s[0]=y*y*(v=1-h)+h,s[1]=x*y*v+E*c,s[2]=E*y*v-x*c,s[3]=0,s[4]=y*x*v-E*c,s[5]=x*x*v+h,s[6]=E*x*v+y*c,s[7]=0,s[8]=y*E*v+x*c,s[9]=x*E*v-y*c,s[10]=E*E*v+h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var oL=Hc;function y_(){var s=new vo(3);return vo!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function pS(s){var n=new vo(3);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n}function rh(s){return Math.hypot(s[0],s[1],s[2])}function qc(s,n,a){var c=new vo(3);return c[0]=s,c[1]=n,c[2]=a,c}function fl(s,n,a){return s[0]=n[0]+a[0],s[1]=n[1]+a[1],s[2]=n[2]+a[2],s}function __(s,n,a){return s[0]=n[0]-a[0],s[1]=n[1]-a[1],s[2]=n[2]-a[2],s}function mS(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s}function x_(s,n,a){return s[0]=Math.min(n[0],a[0]),s[1]=Math.min(n[1],a[1]),s[2]=Math.min(n[2],a[2]),s}function b_(s,n,a){return s[0]=Math.max(n[0],a[0]),s[1]=Math.max(n[1],a[1]),s[2]=Math.max(n[2],a[2]),s}function da(s,n,a){return s[0]=n[0]*a,s[1]=n[1]*a,s[2]=n[2]*a,s}function Hm(s,n,a,c){return s[0]=n[0]+a[0]*c,s[1]=n[1]+a[1]*c,s[2]=n[2]+a[2]*c,s}function Ui(s,n){var a=n[0],c=n[1],h=n[2],v=a*a+c*c+h*h;return v>0&&(v=1/Math.sqrt(v)),s[0]=n[0]*v,s[1]=n[1]*v,s[2]=n[2]*v,s}function Zo(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]}function w_(s,n,a){var c=n[0],h=n[1],v=n[2],y=a[0],x=a[1],E=a[2];return s[0]=h*E-v*x,s[1]=v*y-c*E,s[2]=c*x-h*y,s}function fi(s,n,a){var c=n[0],h=n[1],v=n[2],y=a[3]*c+a[7]*h+a[11]*v+a[15];return s[0]=(a[0]*c+a[4]*h+a[8]*v+a[12])/(y=y||1),s[1]=(a[1]*c+a[5]*h+a[9]*v+a[13])/y,s[2]=(a[2]*c+a[6]*h+a[10]*v+a[14])/y,s}function vS(s,n,a){var c=a[0],h=a[1],v=a[2],y=n[0],x=n[1],E=n[2],I=h*E-v*x,D=v*y-c*E,B=c*x-h*y,$=h*B-v*D,X=v*I-c*B,J=c*D-h*I,re=2*a[3];return D*=re,B*=re,X*=2,J*=2,s[0]=y+(I*=re)+($*=2),s[1]=x+D+X,s[2]=E+B+J,s}var ih,fa=__,aL=mS,sL=rh;function gS(s,n,a){return s[0]=n[0]*a,s[1]=n[1]*a,s[2]=n[2]*a,s[3]=n[3]*a,s}function bu(s,n,a){var c=n[0],h=n[1],v=n[2],y=n[3];return s[0]=a[0]*c+a[4]*h+a[8]*v+a[12]*y,s[1]=a[1]*c+a[5]*h+a[9]*v+a[13]*y,s[2]=a[2]*c+a[6]*h+a[10]*v+a[14]*y,s[3]=a[3]*c+a[7]*h+a[11]*v+a[15]*y,s}function yS(){var s=new vo(4);return vo!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function _S(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function xS(s,n,a){a*=.5;var c=n[0],h=n[1],v=n[2],y=n[3],x=Math.sin(a),E=Math.cos(a);return s[0]=c*E+y*x,s[1]=h*E+v*x,s[2]=v*E-h*x,s[3]=y*E-c*x,s}function bS(s,n,a){a*=.5;var c=n[0],h=n[1],v=n[2],y=n[3],x=Math.sin(a),E=Math.cos(a);return s[0]=c*E-v*x,s[1]=h*E+y*x,s[2]=v*E+c*x,s[3]=y*E-h*x,s}y_(),ih=new vo(4),vo!=Float32Array&&(ih[0]=0,ih[1]=0,ih[2]=0,ih[3]=0),y_(),qc(1,0,0),qc(0,1,0),yS(),yS(),dS();class C_{constructor(n,a){this.pos=n,this.dir=a}intersectsPlane(n,a,c){const h=Zo(a,this.dir);if(Math.abs(h)<1e-6)return!1;const v=((n[0]-this.pos[0])*a[0]+(n[1]-this.pos[1])*a[1]+(n[2]-this.pos[2])*a[2])/h;return c[0]=this.pos[0]+this.dir[0]*v,c[1]=this.pos[1]+this.dir[1]*v,c[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(n,a,c){if(function(X,J){var re=X[0],fe=X[1],Ae=X[2],je=J[0],ke=J[1],Ne=J[2];return Math.abs(re-je)<=Km*Math.max(1,Math.abs(re),Math.abs(je))&&Math.abs(fe-ke)<=Km*Math.max(1,Math.abs(fe),Math.abs(ke))&&Math.abs(Ae-Ne)<=Km*Math.max(1,Math.abs(Ae),Math.abs(Ne))}(this.pos,n)||a===0)return c[0]=c[1]=c[2]=0,!1;const[h,v,y]=this.dir,x=this.pos[0]-n[0],E=this.pos[1]-n[1],I=this.pos[2]-n[2],D=h*h+v*v+y*y,B=2*(x*h+E*v+I*y),$=B*B-4*D*(x*x+E*E+I*I-a*a);if($<0){const X=Math.max(-B/2,0),J=x+h*X,re=E+v*X,fe=I+y*X,Ae=Math.hypot(J,re,fe);return c[0]=J*a/Ae,c[1]=re*a/Ae,c[2]=fe*a/Ae,!1}{const X=(-B-Math.sqrt($))/(2*D);if(X<0){const J=Math.hypot(x,E,I);return c[0]=x*a/J,c[1]=E*a/J,c[2]=I*a/J,!1}return c[0]=x+h*X,c[1]=E+v*X,c[2]=I+y*X,!0}}}class S_{constructor(n,a,c,h,v){this.TL=n,this.TR=a,this.BR=c,this.BL=h,this.horizon=v}static fromInvProjectionMatrix(n,a,c){const h=[-1,1,1],v=[1,1,1],y=[1,-1,1],x=[-1,-1,1],E=fi(h,h,n),I=fi(v,v,n),D=fi(y,y,n),B=fi(x,x,n);return new S_(E,I,D,B,a/c)}}class T_{constructor(n,a){this.points=n,this.planes=a}static fromInvProjectionMatrix(n,a,c,h){const v=Math.pow(2,c),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const I=bu([],E,n),D=1/I[3]/a*v;return function(B,$,X){return B[0]=$[0]*X[0],B[1]=$[1]*X[1],B[2]=$[2]*X[2],B[3]=$[3]*X[3],B}(I,I,[D,D,h?1/I[3]:D,D])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const I=Ui([],w_([],fa([],y[E[0]],y[E[1]]),fa([],y[E[2]],y[E[1]]))),D=-Zo(I,y[E[1]]);return I.concat(D)});return new T_(y,x)}}class no{static fromPoints(n){const a=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],c=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const h of n)a[0]=Math.min(a[0],h[0]),a[1]=Math.min(a[1],h[1]),a[2]=Math.min(a[2],h[2]),c[0]=Math.max(c[0],h[0]),c[1]=Math.max(c[1],h[1]),c[2]=Math.max(c[2],h[2]);return new no(a,c)}constructor(n,a){this.min=n,this.max=a,this.center=da([],fl([],this.min,this.max),.5)}quadrant(n){const a=[n%2==0,n<2],c=pS(this.min),h=pS(this.max);for(let v=0;v<a.length;v++)c[v]=a[v]?this.min[v]:this.center[v],h[v]=a[v]?this.center[v]:this.max[v];return h[2]=this.max[2],new no(c,h)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,a=this.max;return[[n[0],n[1],n[2]],[a[0],n[1],n[2]],[a[0],a[1],n[2]],[n[0],a[1],n[2]],[n[0],n[1],a[2]],[a[0],n[1],a[2]],[a[0],a[1],a[2]],[n[0],a[1],a[2]]]}intersects(n){const a=this.getCorners();let c=!0;for(let h=0;h<n.planes.length;h++){const v=n.planes[h];let y=0;for(let x=0;x<a.length;x++)y+=Zo(v,a[x])+v[3]>=0;if(y===0)return 0;y!==a.length&&(c=!1)}if(c)return 2;for(let h=0;h<3;h++){let v=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let x=0;x<n.points.length;x++){const E=n.points[x][h]-this.min[h];v=Math.min(v,E),y=Math.max(y,E)}if(y<0||v>this.max[h]-this.min[h])return 0}return 1}}function wS(s,n,a,c,h,v,y,x,E){if(v&&s.queryGeometry.isAboveHorizon)return!1;v&&(E*=s.pixelToTileUnitsFactor);const I=s.tileID.canonical,D=a.projection.upVectorScale(I,a.center.lat,a.worldSize).metersToTile;for(const B of n)for(const $ of B){const X=$.add(x),J=h&&a.elevation?a.elevation.exaggeration()*h.getElevationAt(X.x,X.y,!0):0,re=a.projection.projectTilePoint(X.x,X.y,I);if(J>0){const ke=a.projection.upVector(I,X.x,X.y);re.x+=ke[0]*D*J,re.y+=ke[1]*D*J,re.z+=ke[2]*D*J}const fe=v?X:lL(re.x,re.y,re.z,c),Ae=v?s.tilespaceRays.map(ke=>cL(ke,J)):s.queryGeometry.screenGeometry,je=bu([],[re.x,re.y,re.z,1],c);if(!y&&v?E*=je[3]/a.cameraToCenterDistance:y&&!v&&(E*=a.cameraToCenterDistance/je[3]),v){const ke=Pi(($.y/Pn+I.y)/(1<<I.z));E/=a.projection.pixelsPerMeter(ke,1)/qo(1,ke)}if(Qz(Ae,fe,E))return!0}return!1}function lL(s,n,a,c){const h=bu([],[s,n,a,1],c);return new S(h[0]/h[3],h[1]/h[3])}const CS=qc(0,0,0),uL=qc(0,0,1);function cL(s,n){const a=y_();return CS[2]=n,s.intersectsPlane(CS,uL,a),new S(a[0],a[1])}class SS extends h_{}function TS(s,{width:n,height:a},c,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==n*a*c)throw new RangeError("mismatched image size")}else h=new Uint8Array(n*a*c);return s.width=n,s.height=a,s.data=h,s}function ES(s,n,a){const{width:c,height:h}=n;c===s.width&&h===s.height||(E_(s,n,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,c),height:Math.min(s.height,h)},a),s.width=c,s.height=h,s.data=n.data)}function E_(s,n,a,c,h,v){if(h.width===0||h.height===0)return n;if(h.width>s.width||h.height>s.height||a.x>s.width-h.width||a.y>s.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>n.width||h.height>n.height||c.x>n.width-h.width||c.y>n.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=s.data,x=n.data;for(let E=0;E<h.height;E++){const I=((a.y+E)*s.width+a.x)*v,D=((c.y+E)*n.width+c.x)*v;for(let B=0;B<h.width*v;B++)x[D+B]=y[I+B]}return n}pn(SS,"HeatmapBucket",{omit:["layers"]});class xs{constructor(n,a){TS(this,n,1,a)}resize(n){ES(this,new xs(n),1)}clone(){return new xs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,c,h,v){E_(n,a,c,h,v,1)}}class go{constructor(n,a){TS(this,n,4,a)}resize(n){ES(this,new go(n),4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new go({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,c,h,v){E_(n,a,c,h,v,4)}}pn(xs,"AlphaImage"),pn(go,"RGBAImage");var dL={paint:new Dt({"heatmap-radius":new Qe(wt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qe(wt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ge(wt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new at(wt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ge(wt.paint_heatmap["heatmap-opacity"])})};function I_(s){const n={},a=s.resolution||256,c=s.clips?s.clips.length:1,h=s.image||new go({width:a,height:c}),v=(y,x,E)=>{n[s.evaluationKey]=E;const I=s.expression.evaluate(n);h.data[y+x+0]=Math.floor(255*I.r/I.a),h.data[y+x+1]=Math.floor(255*I.g/I.a),h.data[y+x+2]=Math.floor(255*I.b/I.a),h.data[y+x+3]=Math.floor(255*I.a)};if(s.clips)for(let y=0,x=0;y<c;++y,x+=4*a)for(let E=0,I=0;E<a;E++,I+=4){const D=E/(a-1),{start:B,end:$}=s.clips[y];v(x,I,B*(1-D)+$*D)}else for(let y=0,x=0;y<a;y++,x+=4)v(0,x,y/(a-1));return h}var fL={paint:new Dt({"hillshade-illumination-direction":new Ge(wt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ge(wt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ge(wt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ge(wt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ge(wt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ge(wt.paint_hillshade["hillshade-accent-color"])})};const hL=Nt([{name:"a_pos",components:2,type:"Int16"}],4),{members:pL}=hL;var qm=Wm,mL=Wm;function Wm(s,n,a){a=a||2;var c,h,v,y,x,E,I,D=n&&n.length,B=D?n[0]*a:s.length,$=IS(s,0,B,a,!0),X=[];if(!$||$.next===$.prev)return X;if(D&&($=function(re,fe,Ae,je){var ke,Ne,Je,Ue=[];for(ke=0,Ne=fe.length;ke<Ne;ke++)(Je=IS(re,fe[ke]*je,ke<Ne-1?fe[ke+1]*je:re.length,je,!1))===Je.next&&(Je.steiner=!0),Ue.push(CL(Je));for(Ue.sort(xL),ke=0;ke<Ue.length;ke++)Ae=bL(Ue[ke],Ae);return Ae}(s,n,$,a)),s.length>80*a){c=v=s[0],h=y=s[1];for(var J=a;J<B;J+=a)(x=s[J])<c&&(c=x),(E=s[J+1])<h&&(h=E),x>v&&(v=x),E>y&&(y=E);I=(I=Math.max(v-c,y-h))!==0?32767/I:0}return oh($,X,a,c,h,I,0),X}function IS(s,n,a,c,h){var v,y;if(h===M_(s,n,a,c)>0)for(v=n;v<a;v+=c)y=MS(v,s[v],s[v+1],y);else for(v=a-c;v>=n;v-=c)y=MS(v,s[v],s[v+1],y);return y&&Zm(y,y.next)&&(sh(y),y=y.next),y}function wu(s,n){if(!s)return s;n||(n=s);var a,c=s;do if(a=!1,c.steiner||!Zm(c,c.next)&&si(c.prev,c,c.next)!==0)c=c.next;else{if(sh(c),(c=n=c.prev)===c.next)break;a=!0}while(a||c!==n);return n}function oh(s,n,a,c,h,v,y){if(s){!y&&v&&function(D,B,$,X){var J=D;do J.z===0&&(J.z=P_(J.x,J.y,B,$,X)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==D);J.prevZ.nextZ=null,J.prevZ=null,function(re){var fe,Ae,je,ke,Ne,Je,Ue,gt,ft=1;do{for(Ae=re,re=null,Ne=null,Je=0;Ae;){for(Je++,je=Ae,Ue=0,fe=0;fe<ft&&(Ue++,je=je.nextZ);fe++);for(gt=ft;Ue>0||gt>0&&je;)Ue!==0&&(gt===0||!je||Ae.z<=je.z)?(ke=Ae,Ae=Ae.nextZ,Ue--):(ke=je,je=je.nextZ,gt--),Ne?Ne.nextZ=ke:re=ke,ke.prevZ=Ne,Ne=ke;Ae=je}Ne.nextZ=null,ft*=2}while(Je>1)}(J)}(s,c,h,v);for(var x,E,I=s;s.prev!==s.next;)if(x=s.prev,E=s.next,v?gL(s,c,h,v):vL(s))n.push(x.i/a|0),n.push(s.i/a|0),n.push(E.i/a|0),sh(s),s=E.next,I=E.next;else if((s=E)===I){y?y===1?oh(s=yL(wu(s),n,a),n,a,c,h,v,2):y===2&&_L(s,n,a,c,h,v):oh(wu(s),n,a,c,h,v,1);break}}}function vL(s){var n=s.prev,a=s,c=s.next;if(si(n,a,c)>=0)return!1;for(var h=n.x,v=a.x,y=c.x,x=n.y,E=a.y,I=c.y,D=h<v?h<y?h:y:v<y?v:y,B=x<E?x<I?x:I:E<I?E:I,$=h>v?h>y?h:y:v>y?v:y,X=x>E?x>I?x:I:E>I?E:I,J=c.next;J!==n;){if(J.x>=D&&J.x<=$&&J.y>=B&&J.y<=X&&Wc(h,x,v,E,y,I,J.x,J.y)&&si(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function gL(s,n,a,c){var h=s.prev,v=s,y=s.next;if(si(h,v,y)>=0)return!1;for(var x=h.x,E=v.x,I=y.x,D=h.y,B=v.y,$=y.y,X=x<E?x<I?x:I:E<I?E:I,J=D<B?D<$?D:$:B<$?B:$,re=x>E?x>I?x:I:E>I?E:I,fe=D>B?D>$?D:$:B>$?B:$,Ae=P_(X,J,n,a,c),je=P_(re,fe,n,a,c),ke=s.prevZ,Ne=s.nextZ;ke&&ke.z>=Ae&&Ne&&Ne.z<=je;){if(ke.x>=X&&ke.x<=re&&ke.y>=J&&ke.y<=fe&&ke!==h&&ke!==y&&Wc(x,D,E,B,I,$,ke.x,ke.y)&&si(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,Ne.x>=X&&Ne.x<=re&&Ne.y>=J&&Ne.y<=fe&&Ne!==h&&Ne!==y&&Wc(x,D,E,B,I,$,Ne.x,Ne.y)&&si(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;ke&&ke.z>=Ae;){if(ke.x>=X&&ke.x<=re&&ke.y>=J&&ke.y<=fe&&ke!==h&&ke!==y&&Wc(x,D,E,B,I,$,ke.x,ke.y)&&si(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;Ne&&Ne.z<=je;){if(Ne.x>=X&&Ne.x<=re&&Ne.y>=J&&Ne.y<=fe&&Ne!==h&&Ne!==y&&Wc(x,D,E,B,I,$,Ne.x,Ne.y)&&si(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function yL(s,n,a){var c=s;do{var h=c.prev,v=c.next.next;!Zm(h,v)&&PS(h,c,c.next,v)&&ah(h,v)&&ah(v,h)&&(n.push(h.i/a|0),n.push(c.i/a|0),n.push(v.i/a|0),sh(c),sh(c.next),c=s=v),c=c.next}while(c!==s);return wu(c)}function _L(s,n,a,c,h,v){var y=s;do{for(var x=y.next.next;x!==y.prev;){if(y.i!==x.i&&SL(y,x)){var E=AS(y,x);return y=wu(y,y.next),E=wu(E,E.next),oh(y,n,a,c,h,v,0),void oh(E,n,a,c,h,v,0)}x=x.next}y=y.next}while(y!==s)}function xL(s,n){return s.x-n.x}function bL(s,n){var a=function(h,v){var y,x=v,E=h.x,I=h.y,D=-1/0;do{if(I<=x.y&&I>=x.next.y&&x.next.y!==x.y){var B=x.x+(I-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(B<=E&&B>D&&(D=B,y=x.x<x.next.x?x:x.next,B===E))return y}x=x.next}while(x!==v);if(!y)return null;var $,X=y,J=y.x,re=y.y,fe=1/0;x=y;do E>=x.x&&x.x>=J&&E!==x.x&&Wc(I<re?E:D,I,J,re,I<re?D:E,I,x.x,x.y)&&($=Math.abs(I-x.y)/(E-x.x),ah(x,h)&&($<fe||$===fe&&(x.x>y.x||x.x===y.x&&wL(y,x)))&&(y=x,fe=$)),x=x.next;while(x!==X);return y}(s,n);if(!a)return n;var c=AS(a,s);return wu(c,c.next),wu(a,a.next)}function wL(s,n){return si(s.prev,s,n.prev)<0&&si(n.next,s,s.next)<0}function P_(s,n,a,c,h){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*h|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*h|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function CL(s){var n=s,a=s;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==s);return a}function Wc(s,n,a,c,h,v,y,x){return(h-y)*(n-x)>=(s-y)*(v-x)&&(s-y)*(c-x)>=(a-y)*(n-x)&&(a-y)*(v-x)>=(h-y)*(c-x)}function SL(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(a,c){var h=a;do{if(h.i!==a.i&&h.next.i!==a.i&&h.i!==c.i&&h.next.i!==c.i&&PS(h,h.next,a,c))return!0;h=h.next}while(h!==a);return!1}(s,n)&&(ah(s,n)&&ah(n,s)&&function(a,c){var h=a,v=!1,y=(a.x+c.x)/2,x=(a.y+c.y)/2;do h.y>x!=h.next.y>x&&h.next.y!==h.y&&y<(h.next.x-h.x)*(x-h.y)/(h.next.y-h.y)+h.x&&(v=!v),h=h.next;while(h!==a);return v}(s,n)&&(si(s.prev,s,n.prev)||si(s,n.prev,n))||Zm(s,n)&&si(s.prev,s,s.next)>0&&si(n.prev,n,n.next)>0)}function si(s,n,a){return(n.y-s.y)*(a.x-n.x)-(n.x-s.x)*(a.y-n.y)}function Zm(s,n){return s.x===n.x&&s.y===n.y}function PS(s,n,a,c){var h=Ym(si(s,n,a)),v=Ym(si(s,n,c)),y=Ym(si(a,c,s)),x=Ym(si(a,c,n));return h!==v&&y!==x||!(h!==0||!Xm(s,a,n))||!(v!==0||!Xm(s,c,n))||!(y!==0||!Xm(a,s,c))||!(x!==0||!Xm(a,n,c))}function Xm(s,n,a){return n.x<=Math.max(s.x,a.x)&&n.x>=Math.min(s.x,a.x)&&n.y<=Math.max(s.y,a.y)&&n.y>=Math.min(s.y,a.y)}function Ym(s){return s>0?1:s<0?-1:0}function ah(s,n){return si(s.prev,s,s.next)<0?si(s,n,s.next)>=0&&si(s,s.prev,n)>=0:si(s,n,s.prev)<0||si(s,s.next,n)<0}function AS(s,n){var a=new A_(s.i,s.x,s.y),c=new A_(n.i,n.x,n.y),h=s.next,v=n.prev;return s.next=n,n.prev=s,a.next=h,h.prev=a,c.next=a,a.prev=c,v.next=c,c.prev=v,c}function MS(s,n,a,c){var h=new A_(s,n,a);return c?(h.next=c.next,h.prev=c,c.next.prev=h,c.next=h):(h.prev=h,h.next=h),h}function sh(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function A_(s,n,a){this.i=s,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M_(s,n,a,c){for(var h=0,v=n,y=a-c;v<a;v+=c)h+=(s[y]-s[v])*(s[v+1]+s[y+1]),y=v;return h}function TL(s,n,a,c,h){kS(s,n,a||0,c||s.length-1,h||EL)}function kS(s,n,a,c,h){for(;c>a;){if(c-a>600){var v=c-a+1,y=n-a+1,x=Math.log(v),E=.5*Math.exp(2*x/3),I=.5*Math.sqrt(x*E*(v-E)/v)*(y-v/2<0?-1:1);kS(s,n,Math.max(a,Math.floor(n-y*E/v+I)),Math.min(c,Math.floor(n+(v-y)*E/v+I)),h)}var D=s[n],B=a,$=c;for(lh(s,a,n),h(s[c],D)>0&&lh(s,a,c);B<$;){for(lh(s,B,$),B++,$--;h(s[B],D)<0;)B++;for(;h(s[$],D)>0;)$--}h(s[a],D)===0?lh(s,a,$):lh(s,++$,c),$<=n&&(a=$+1),n<=$&&(c=$-1)}}function lh(s,n,a){var c=s[n];s[n]=s[a],s[a]=c}function EL(s,n){return s<n?-1:s>n?1:0}function k_(s,n){const a=s.length;if(a<=1)return[s];const c=[];let h,v;for(let y=0;y<a;y++){const x=Te(s[y]);x!==0&&(s[y].area=Math.abs(x),v===void 0&&(v=x<0),v===x<0?(h&&c.push(h),h=[s[y]]):h.push(s[y]))}if(h&&c.push(h),n>1)for(let y=0;y<c.length;y++)c[y].length<=n||(TL(c[y],n,1,c[y].length-1,IL),c[y]=c[y].slice(0,n));return c}function IL(s,n){return n.area-s.area}function O_(s,n,a){const c=a.patternDependencies;let h=!1;for(const v of n){const y=v.paint.get(`${s}-pattern`);y.isConstant()||(h=!0);const x=y.constantOr(null);x&&(h=!0,c[x.to]=!0,c[x.from]=!0)}return h}function D_(s,n,a,c,h){const v=h.patternDependencies;for(const y of n){const x=y.paint.get(`${s}-pattern`).value;if(x.kind!=="constant"){let E=x.evaluate({zoom:c-1},a,{},h.availableImages),I=x.evaluate({zoom:c},a,{},h.availableImages),D=x.evaluate({zoom:c+1},a,{},h.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,D=D&&D.name?D.name:D,v[E]=!0,v[I]=!0,v[D]=!0,a.patterns[y.id]={min:E,mid:I,max:D}}}return a}Wm.deviation=function(s,n,a,c){var h=n&&n.length,v=Math.abs(M_(s,0,h?n[0]*a:s.length,a));if(h)for(var y=0,x=n.length;y<x;y++)v-=Math.abs(M_(s,n[y]*a,y<x-1?n[y+1]*a:s.length,a));var E=0;for(y=0;y<c.length;y+=3){var I=c[y]*a,D=c[y+1]*a,B=c[y+2]*a;E+=Math.abs((s[I]-s[B])*(s[D+1]-s[I+1])-(s[I]-s[D])*(s[B+1]-s[I+1]))}return v===0&&E===0?0:Math.abs((E-v)/v)},Wm.flatten=function(s){for(var n=s[0][0].length,a={vertices:[],holes:[],dimensions:n},c=0,h=0;h<s.length;h++){for(var v=0;v<s[h].length;v++)for(var y=0;y<n;y++)a.vertices.push(s[h][v][y]);h>0&&a.holes.push(c+=s[h-1].length)}return a},qm.default=mL;class Jm{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rn,this.indexArray=new qn,this.indexArray2=new zi,this.programConfigurations=new gu(n.layers,n.zoom),this.segments=new ci,this.segments2=new ci,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=n.projection}populate(n,a,c,h){this.hasPattern=O_("fill",this.layers,a);const v=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:x,id:E,index:I,sourceLayerIndex:D}of n){const B=this.layers[0]._featureFilter.needGeometry,$=yu(x,B);if(!this.layers[0]._featureFilter.filter(new _e(this.zoom),$,c))continue;const X=v?v.evaluate($,{},c,a.availableImages):void 0,J={id:E,properties:x.properties,type:x.type,sourceLayerIndex:D,index:I,geometry:B?$.geometry:_s(x,c,h),patterns:{},sortKey:X};y.push(J)}v&&y.sort((x,E)=>x.sortKey-E.sortKey);for(const x of y){const{geometry:E,index:I,sourceLayerIndex:D}=x;if(this.hasPattern){const B=D_("fill",this.layers,x,this.zoom,a);this.patternFeatures.push(B)}else this.addFeature(x,E,I,c,{},a.availableImages);a.featureIndex.insert(n[I].feature,E,I,D,this.index)}}update(n,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,c,h)}addFeatures(n,a,c,h,v){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pL),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,c,h,v,y=[]){for(const x of k_(a,500)){let E=0;for(const J of x)E+=J.length;const I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),D=I.vertexLength,B=[],$=[];for(const J of x){if(J.length===0)continue;J!==x[0]&&$.push(B.length/2);const re=this.segments2.prepareSegment(J.length,this.layoutVertexArray,this.indexArray2),fe=re.vertexLength;this.layoutVertexArray.emplaceBack(J[0].x,J[0].y),this.indexArray2.emplaceBack(fe+J.length-1,fe),B.push(J[0].x),B.push(J[0].y);for(let Ae=1;Ae<J.length;Ae++)this.layoutVertexArray.emplaceBack(J[Ae].x,J[Ae].y),this.indexArray2.emplaceBack(fe+Ae-1,fe+Ae),B.push(J[Ae].x),B.push(J[Ae].y);re.vertexLength+=J.length,re.primitiveLength+=J.length}const X=qm(B,$);for(let J=0;J<X.length;J+=3)this.indexArray.emplaceBack(D+X[J],D+X[J+1],D+X[J+2]);I.vertexLength+=E,I.primitiveLength+=X.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,y,h)}}pn(Jm,"FillBucket",{omit:["layers","patternFeatures"]});const PL=new Dt({"fill-sort-key":new Qe(wt.layout_fill["fill-sort-key"])});var AL={paint:new Dt({"fill-antialias":new Ge(wt.paint_fill["fill-antialias"]),"fill-opacity":new Qe(wt.paint_fill["fill-opacity"]),"fill-color":new Qe(wt.paint_fill["fill-color"]),"fill-outline-color":new Qe(wt.paint_fill["fill-outline-color"]),"fill-translate":new Ge(wt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ge(wt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ct(wt.paint_fill["fill-pattern"])}),layout:PL};const ML=Nt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),kL=Nt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),OL=Nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:DL}=ML;var OS=Zc;function Zc(s,n,a,c,h){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=c,this._values=h,s.readFields(RL,this,n)}function RL(s,n,a){s==1?n.id=a.readVarint():s==2?function(c,h){for(var v=c.readVarint()+c.pos;c.pos<v;){var y=h._keys[c.readVarint()],x=h._values[c.readVarint()];h.properties[y]=x}}(a,n):s==3?n.type=a.readVarint():s==4&&(n._geometry=a.pos)}function zL(s){for(var n,a,c=0,h=0,v=s.length,y=v-1;h<v;y=h++)c+=((a=s[y]).x-(n=s[h]).x)*(n.y+a.y);return c}Zc.types=["Unknown","Point","LineString","Polygon"],Zc.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,a=s.readVarint()+s.pos,c=1,h=0,v=0,y=0,x=[];s.pos<a;){if(h<=0){var E=s.readVarint();c=7&E,h=E>>3}if(h--,c===1||c===2)v+=s.readSVarint(),y+=s.readSVarint(),c===1&&(n&&x.push(n),n=[]),n.push(new S(v,y));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&x.push(n),x},Zc.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,a=1,c=0,h=0,v=0,y=1/0,x=-1/0,E=1/0,I=-1/0;s.pos<n;){if(c<=0){var D=s.readVarint();a=7&D,c=D>>3}if(c--,a===1||a===2)(h+=s.readSVarint())<y&&(y=h),h>x&&(x=h),(v+=s.readSVarint())<E&&(E=v),v>I&&(I=v);else if(a!==7)throw new Error("unknown command "+a)}return[y,E,x,I]},Zc.prototype.toGeoJSON=function(s,n,a){var c,h,v=this.extent*Math.pow(2,a),y=this.extent*s,x=this.extent*n,E=this.loadGeometry(),I=Zc.types[this.type];function D(X){for(var J=0;J<X.length;J++){var re=X[J];X[J]=[360*(re.x+y)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(re.y+x)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(c=0;c<E.length;c++)B[c]=E[c][0];D(E=B);break;case 2:for(c=0;c<E.length;c++)D(E[c]);break;case 3:for(E=function(X){var J=X.length;if(J<=1)return[X];for(var re,fe,Ae=[],je=0;je<J;je++){var ke=zL(X[je]);ke!==0&&(fe===void 0&&(fe=ke<0),fe===ke<0?(re&&Ae.push(re),re=[X[je]]):re.push(X[je]))}return re&&Ae.push(re),Ae}(E),c=0;c<E.length;c++)for(h=0;h<E[c].length;h++)D(E[c][h])}E.length===1?E=E[0]:I="Multi"+I;var $={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&($.id=this.id),$};var DS=RS;function RS(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(LL,this,n),this.length=this._features.length}function LL(s,n,a){s===15?n.version=a.readVarint():s===1?n.name=a.readString():s===5?n.extent=a.readVarint():s===2?n._features.push(a.pos):s===3?n._keys.push(a.readString()):s===4&&n._values.push(function(c){for(var h=null,v=c.readVarint()+c.pos;c.pos<v;){var y=c.readVarint()>>3;h=y===1?c.readString():y===2?c.readFloat():y===3?c.readDouble():y===4?c.readVarint64():y===5?c.readVarint():y===6?c.readSVarint():y===7?c.readBoolean():null}return h}(a))}function FL(s,n,a){if(s===3){var c=new DS(a,a.readVarint()+a.pos);c.length&&(n[c.name]=c)}}RS.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new OS(this._pbf,n,this.extent,this._keys,this._values)};var Cu={VectorTile:function(s,n){this.layers=s.readFields(FL,{},n)},VectorTileFeature:OS,VectorTileLayer:DS};function Qm(s,n,a,c){const h=[],v=c===0?(y,x,E,I,D,B)=>{y.push(new S(B,E+(B-x)/(I-x)*(D-E)))}:(y,x,E,I,D,B)=>{y.push(new S(x+(B-E)/(D-E)*(I-x),B))};for(const y of s){const x=[];for(const E of y){if(E.length<=2)continue;const I=[];for(let $=0;$<E.length-1;$++){const X=E[$].x,J=E[$].y,re=E[$+1].x,fe=E[$+1].y,Ae=c===0?X:J,je=c===0?re:fe;Ae<n?je>n&&v(I,X,J,re,fe,n):Ae>a?je<a&&v(I,X,J,re,fe,a):I.push(E[$]),je<n&&Ae>=n&&v(I,X,J,re,fe,n),je>a&&Ae<=a&&v(I,X,J,re,fe,a)}let D=E[E.length-1];const B=c===0?D.x:D.y;B>=n&&B<=a&&I.push(D),I.length&&(D=I[I.length-1],I[0].x===D.x&&I[0].y===D.y||I.push(I[0]),x.push(I))}x.length&&h.push(x)}return h}const BL=Cu.VectorTileFeature.types,NL=Math.pow(2,13);function uh(s,n,a,c,h,v,y,x){s.emplaceBack((n<<1)+y,(a<<1)+v,(Math.floor(c*NL)<<1)+h,Math.round(x))}function ch(s,n,a){s.emplaceBack(n.x,n.y,n.z,a[0]*16384,a[1]*16384,a[2]*16384)}class zS{constructor(){this.acc=new S(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new S(n.x,n.y),this.max=new S(n.x,n.y))}append(n,a){this.currentPolyCount.edges++,this.acc._add(n);const c=this.min,h=this.max;n.x<c.x?c.x=n.x:n.x>h.x&&(h.x=n.x),n.y<c.y?c.y=n.y:n.y>h.y&&(h.y=n.y),((n.x===0||n.x===Pn)&&n.x===a.x)!=((n.y===0||n.y===Pn)&&n.y===a.y)&&this.processBorderOverlap(n,a),a.x<0!=n.x<0&&this.addBorderIntersection(0,ur(a.y,n.y,(0-a.x)/(n.x-a.x))),a.x>Pn!=n.x>Pn&&this.addBorderIntersection(1,ur(a.y,n.y,(Pn-a.x)/(n.x-a.x))),a.y<0!=n.y<0&&this.addBorderIntersection(2,ur(a.x,n.x,(0-a.y)/(n.y-a.y))),a.y>Pn!=n.y>Pn&&this.addBorderIntersection(3,ur(a.x,n.x,(Pn-a.y)/(n.y-a.y)))}addBorderIntersection(n,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[n];a<c[0]&&(c[0]=a),a>c[1]&&(c[1]=a)}processBorderOverlap(n,a){if(n.x===a.x){if(n.y===a.y)return;const c=n.x===0?0:1;this.addBorderIntersection(c,a.y),this.addBorderIntersection(c,n.y)}else{const c=n.y===0?2:3;this.addBorderIntersection(c,a.x),this.addBorderIntersection(c,n.x)}}centroid(){const n=this.polyCount.reduce((a,c)=>a+c.edges,0);return n!==0?this.acc.div(n)._round():new S(0,0)}span(){return new S(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,a)=>n+ +(a[0]!==Number.MAX_VALUE),0)}}class dh{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new En,this.centroidVertexArray=new GC,this.indexArray=new qn,this.programConfigurations=new gu(n.layers,n.zoom),this.segments=new ci,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=n.enableTerrain}populate(n,a,c,h){this.features=[],this.hasPattern=O_("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(v){const y=Math.exp(Math.PI*(1-v.y/(1<<v.z)*2));return 80150034*y/(y*y+1)/Pn/(1<<v.z)}(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:v,id:y,index:x,sourceLayerIndex:E}of n){const I=this.layers[0]._featureFilter.needGeometry,D=yu(v,I);if(!this.layers[0]._featureFilter.filter(new _e(this.zoom),D,c))continue;const B={id:y,sourceLayerIndex:E,index:x,geometry:I?D.geometry:_s(v,c,h),properties:v.properties,type:v.type,patterns:{}},$=this.layoutVertexArray.length;this.hasPattern?this.features.push(D_("fill-extrusion",this.layers,B,this.zoom,a)):this.addFeature(B,B.geometry,x,c,{},a.availableImages,h),a.featureIndex.insert(v,B.geometry,x,E,this.index,$)}this.sortBorders()}addFeatures(n,a,c,h,v){for(const y of this.features){const{geometry:x}=y;this.addFeature(y,x,y.index,a,c,h,v)}this.sortBorders()}update(n,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,DL),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,OL.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,kL.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,c,h,v,y,x){const E=[new S(0,0),new S(Pn,Pn)],I=x.projection,D=I.name==="globe",B=this.enableTerrain&&!D?new zS:null,$=BL[n.type]==="Polygon";D&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Li);const X=k_(a,500);for(let Ae=X.length-1;Ae>=0;Ae--){const je=X[Ae];(je.length===0||(J=je[0]).every(ke=>ke.x<=0)||J.every(ke=>ke.x>=Pn)||J.every(ke=>ke.y<=0)||J.every(ke=>ke.y>=Pn))&&X.splice(Ae,1)}var J;let re;if(D)re=VS(X,E,h);else{re=[];for(const Ae of X)re.push({polygon:Ae,bounds:E})}const fe=$?this.edgeRadius:0;for(const{polygon:Ae,bounds:je}of re){let ke=0,Ne=0;for(const Ue of Ae)$&&!Ue[0].equals(Ue[Ue.length-1])&&Ue.push(Ue[0]),Ne+=$?Ue.length-1:Ue.length;const Je=this.segments.prepareSegment(($?5:4)*Ne,this.layoutVertexArray,this.indexArray);if($){const Ue=[],gt=[];ke=Je.vertexLength;for(const Mt of Ae){let Jt,xt;Mt.length&&Mt!==Ae[0]&&gt.push(Ue.length/2),Jt=Mt[1].sub(Mt[0])._perp()._unit();for(let Lt=1;Lt<Mt.length;Lt++){const Vt=Mt[Lt],Ft=Mt[Lt===Mt.length-1?1:Lt+1];let{x:Xt,y:Ut}=Vt;if(fe){xt=Ft.sub(Vt)._perp()._unit();const un=Jt.add(xt)._unit(),$n=fe*Math.min(4,1/(Jt.x*un.x+Jt.y*un.y));Xt+=$n*un.x,Ut+=$n*un.y,Jt=xt}uh(this.layoutVertexArray,Xt,Ut,0,0,1,1,0),Je.vertexLength++,Ue.push(Vt.x,Vt.y),D&&ch(this.layoutVertexExtArray,I.projectTilePoint(Xt,Ut,h),I.upVector(h,Xt,Ut))}}const ft=qm(Ue,gt);for(let Mt=0;Mt<ft.length;Mt+=3)this.indexArray.emplaceBack(ke+ft[Mt],ke+ft[Mt+2],ke+ft[Mt+1]),Je.primitiveLength++}for(const Ue of Ae){B&&Ue.length&&B.startRing(Ue[0]);let gt,ft,Mt,Jt=Ue.length>4&&NS(Ue[Ue.length-2],Ue[0],Ue[1]),xt=fe?$L(Ue[Ue.length-2],Ue[0],Ue[1],fe):0;ft=Ue[1].sub(Ue[0])._perp()._unit();for(let Lt=1,Vt=0;Lt<Ue.length;Lt++){let Ft=Ue[Lt-1],Xt=Ue[Lt];const Ut=Ue[Lt===Ue.length-1?1:Lt+1];if(B&&$&&B.currentPolyCount.top++,BS(Xt,Ft,je)){fe&&(ft=Ut.sub(Xt)._perp()._unit());continue}B&&B.append(Xt,Ft);const un=Xt.sub(Ft)._perp(),$n=un.x/(Math.abs(un.x)+Math.abs(un.y)),Vn=un.y>0?1:0,Tn=Ft.dist(Xt);if(Vt+Tn>32768&&(Vt=0),fe){Mt=Ut.sub(Xt)._perp()._unit();let hn=FS(Ft,Xt,Ut,LS(ft,Mt),fe);isNaN(hn)&&(hn=0);const Fr=Xt.sub(Ft)._unit();Ft=Ft.add(Fr.mult(xt))._round(),Xt=Xt.add(Fr.mult(-hn))._round(),xt=hn,ft=Mt}const nn=Je.vertexLength,Qn=Ue.length>4&&NS(Ft,Xt,Ut);let Rn=$S(Vt,Jt,!0);if(uh(this.layoutVertexArray,Ft.x,Ft.y,$n,Vn,0,0,Rn),uh(this.layoutVertexArray,Ft.x,Ft.y,$n,Vn,0,1,Rn),Vt+=Tn,Rn=$S(Vt,Qn,!1),Jt=Qn,uh(this.layoutVertexArray,Xt.x,Xt.y,$n,Vn,0,0,Rn),uh(this.layoutVertexArray,Xt.x,Xt.y,$n,Vn,0,1,Rn),Je.vertexLength+=4,this.indexArray.emplaceBack(nn+0,nn+1,nn+2),this.indexArray.emplaceBack(nn+1,nn+3,nn+2),Je.primitiveLength+=2,fe){const hn=ke+(Lt===1?Ue.length-2:Lt-2),Fr=Lt===1?ke:hn+1;if(this.indexArray.emplaceBack(nn+1,hn,nn+3),this.indexArray.emplaceBack(hn,Fr,nn+3),Je.primitiveLength+=2,gt===void 0&&(gt=nn),!BS(Ut,Ue[Lt],je)){const Dr=Lt===Ue.length-1?gt:Je.vertexLength;this.indexArray.emplaceBack(nn+2,nn+3,Dr),this.indexArray.emplaceBack(nn+3,Dr+1,Dr),this.indexArray.emplaceBack(nn+3,Fr,Dr+1),Je.primitiveLength+=3}}if(D){const hn=this.layoutVertexExtArray,Fr=I.projectTilePoint(Ft.x,Ft.y,h),Dr=I.projectTilePoint(Xt.x,Xt.y,h),Hr=I.upVector(h,Ft.x,Ft.y),Gn=I.upVector(h,Xt.x,Xt.y);ch(hn,Fr,Hr),ch(hn,Fr,Hr),ch(hn,Dr,Gn),ch(hn,Dr,Gn)}}$&&(ke+=Ue.length-1)}}if(B&&B.polyCount.length>0){if(B.borders){B.vertexArrayOffset=this.centroidVertexArray.length;const Ae=B.borders,je=this.featuresOnBorder.push(B)-1;for(let ke=0;ke<4;ke++)Ae[ke][0]!==Number.MAX_VALUE&&this.borders[ke].push(je)}this.encodeCentroid(B.borders?void 0:B.centroid(),B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,y,h)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((a,c)=>this.featuresOnBorder[a].borders[n][0]-this.featuresOnBorder[c].borders[n][0])}encodeCentroid(n,a,c=!0){let h,v;if(n)if(n.y!==0){const x=a.span()._mult(this.tileToMeter);h=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(x.x/10)),v=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else h=Math.ceil(7*(n.x+450)),v=0;else h=0,v=+c;let y=c?this.centroidVertexArray.length:a.vertexArrayOffset;for(const x of a.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let E=0;E<x.top;E++)this.centroidVertexArray.emplace(y++,h,v);for(let E=0;E<2*x.edges;E++)this.centroidVertexArray.emplace(y++,0,v),this.centroidVertexArray.emplace(y++,h,v)}}}function LS(s,n){const a=s.add(n)._unit();return s.x*a.x+s.y*a.y}function $L(s,n,a,c){const h=n.sub(s)._perp()._unit(),v=a.sub(n)._perp()._unit();return FS(s,n,a,LS(h,v),c)}function FS(s,n,a,c,h){const v=Math.sqrt(1-c*c);return Math.min(s.dist(n)/3,n.dist(a)/3,h*v/c)}function BS(s,n,a){return s.x<a[0].x&&n.x<a[0].x||s.x>a[1].x&&n.x>a[1].x||s.y<a[0].y&&n.y<a[0].y||s.y>a[1].y&&n.y>a[1].y}function NS(s,n,a){if(s.x<0||s.x>=Pn||n.x<0||n.x>=Pn||a.x<0||a.x>=Pn)return!1;const c=a.sub(n),h=c.perp(),v=s.sub(n);return(c.x*v.x+c.y*v.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(v.x*v.x+v.y*v.y))>-.866&&h.x*v.x+h.y*v.y<0}function $S(s,n,a){const c=n?2|s:-3&s;return a?1|c:-2&c}function jS(){const s=Math.PI/32,n=Math.tan(s),a=l_;return a*Math.sqrt(1+2*n*n)-a}function VS(s,n,a){const c=1<<a.z,h=Wo(a.x/c),v=Wo((a.x+1)/c),y=Pi(a.y/c),x=Pi((a.y+1)/c);return function(E,I,D,B,$=0,X){const J=[];if(!E.length||!D||!B)return J;const re=(Ue,gt)=>{for(const ft of Ue)J.push({polygon:ft,bounds:gt})},fe=Math.ceil(Math.log2(D)),Ae=Math.ceil(Math.log2(B)),je=fe-Ae,ke=[];for(let Ue=0;Ue<Math.abs(je);Ue++)ke.push(je>0?0:1);for(let Ue=0;Ue<Math.min(fe,Ae);Ue++)ke.push(0),ke.push(1);let Ne=E;if(Ne=Qm(Ne,I[0].y-$,I[1].y+$,1),Ne=Qm(Ne,I[0].x-$,I[1].x+$,0),!Ne.length)return J;const Je=[];for(ke.length?Je.push({polygons:Ne,bounds:I,depth:0}):re(Ne,I);Je.length;){const Ue=Je.pop(),gt=Ue.depth,ft=ke[gt],Mt=Ue.bounds[0],Jt=Ue.bounds[1],xt=ft===0?Mt.x:Mt.y,Lt=ft===0?Jt.x:Jt.y,Vt=X?X(ft,xt,Lt):.5*(xt+Lt),Ft=Qm(Ue.polygons,xt-$,Vt+$,ft),Xt=Qm(Ue.polygons,Vt-$,Lt+$,ft);if(Ft.length){const Ut=[Mt,new S(ft===0?Vt:Jt.x,ft===1?Vt:Jt.y)];ke.length>gt+1?Je.push({polygons:Ft,bounds:Ut,depth:gt+1}):re(Ft,Ut)}if(Xt.length){const Ut=[new S(ft===0?Vt:Mt.x,ft===1?Vt:Mt.y),Jt];ke.length>gt+1?Je.push({polygons:Xt,bounds:Ut,depth:gt+1}):re(Xt,Ut)}}return J}(s,n,Math.ceil((v-h)/11.25),Math.ceil((y-x)/11.25),1,(E,I,D)=>{if(E===0)return .5*(I+D);{const B=Pi((a.y+I/Pn)/c);return(ys(.5*(Pi((a.y+D/Pn)/c)+B))*c-a.y)*Pn}})}pn(dh,"FillExtrusionBucket",{omit:["layers","features"]}),pn(zS,"PartMetadata");const jL=new Dt({"fill-extrusion-edge-radius":new Ge(wt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var VL={paint:new Dt({"fill-extrusion-opacity":new Ge(wt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qe(wt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ge(wt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ge(wt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ct(wt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qe(wt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qe(wt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ge(wt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ge(wt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ge(wt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:jL};function US(s,n,a){var c=2*Math.PI*6378137/256/Math.pow(2,a);return[s*c-2*Math.PI*6378137/2,n*c-2*Math.PI*6378137/2]}class ev{constructor(n,a,c){this.z=n,this.x=a,this.y=c,this.key=fh(0,n,n,a,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a){const c=function(v,y,x){var E=US(256*v,256*(y=Math.pow(2,x)-y-1),x),I=US(256*(v+1),256*(y+1),x);return E[0]+","+E[1]+","+I[0]+","+I[1]}(this.x,this.y,this.z),h=function(v,y,x){let E,I="";for(let D=v;D>0;D--)E=1<<D-1,I+=(y&E?1:0)+(x&E?2:0);return I}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",h).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class KS{constructor(n,a){this.wrap=n,this.canonical=a,this.key=fh(n,a.z,a.z,a.x,a.y)}}class Ki{constructor(n,a,c,h,v){this.overscaledZ=n,this.wrap=a,this.canonical=new ev(c,+h,+v),this.key=a===0&&n===c?this.canonical.key:fh(a,n,c,h,v)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const a=this.canonical.z-n;return n>this.canonical.z?new Ki(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ki(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a=!0){if(this.overscaledZ===n&&a)return this.key;if(n>this.canonical.z)return fh(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-n;return fh(this.wrap*+a,n,n,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new Ki(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,c=2*this.canonical.x,h=2*this.canonical.y;return[new Ki(a,this.wrap,a,c,h),new Ki(a,this.wrap,a,c+1,h),new Ki(a,this.wrap,a,c,h+1),new Ki(a,this.wrap,a,c+1,h+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Ki(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Ki(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new KS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function fh(s,n,a,c,h){const v=1<<Math.min(a,22);let y=v*(h%v)+c%v;return s&&a<22&&(y+=v*v*((s<0?-2*s-1:2*s)%(1<<2*(22-a)))),16*(32*y+a)+(n-a)}function hh(s,n){return s.x*n.x+s.y*n.y}function GS(s,n){if(s.length===1){let a=0;const c=n[a++];let h;for(;!h||c.equals(h);)if(h=n[a++],!h)return 1/0;for(;a<n.length;a++){const v=n[a],y=s[0],x=h.sub(c),E=v.sub(c),I=y.sub(c),D=hh(x,x),B=hh(x,E),$=hh(E,E),X=hh(I,x),J=hh(I,E),re=D*$-B*B,fe=($*X-B*J)/re,Ae=(D*J-B*X)/re,je=c.z*(1-fe-Ae)+h.z*fe+v.z*Ae;if(isFinite(je))return je}return 1/0}{let a=1/0;for(const c of n)a=Math.min(a,c.z);return a}}function tv(s){const n=new S(s[0],s[1]);return n.z=s[2],n}function HS(s,n,a,c,h,v,y,x){const E=y*h.getElevationAt(s,n,!0,!0),I=v[0]!==0,D=I?v[1]===0?y*(v[0]/7-450):y*function(B,$,X){const J=Math.floor($[0]/8),re=Math.floor($[1]/8),fe=10*($[0]-8*J),Ae=10*($[1]-8*re),je=B.getElevationAt(J,re,!0,!0),ke=B.getMeterToDEM(X),Ne=Math.floor(.5*(fe*ke-1)),Je=Math.floor(.5*(Ae*ke-1)),Ue=B.tileCoordToPixel(J,re),gt=2*Ne+1,ft=2*Je+1,Mt=function(Xt,Ut,un,$n,Vn){return[Xt.getElevationAtPixel(Ut,un,!0),Xt.getElevationAtPixel(Ut+Vn,un,!0),Xt.getElevationAtPixel(Ut,un+Vn,!0),Xt.getElevationAtPixel(Ut+$n,un+Vn,!0)]}(B,Ue.x-Ne,Ue.y-Je,gt,ft),Jt=Math.abs(Mt[0]-Mt[1]),xt=Math.abs(Mt[2]-Mt[3]),Lt=Math.abs(Mt[0]-Mt[2])+Math.abs(Mt[1]-Mt[3]),Vt=Math.min(.25,.5*ke*(Jt+xt)/gt),Ft=Math.min(.25,.5*ke*Lt/ft);return je+Math.max(Vt*fe,Ft*Ae)}(h,v,x):E;return{base:E+(a===0)?-1:a,top:I?Math.max(D+c,E+a+2):E+c}}pn(ev,"CanonicalTileID"),pn(Ki,"OverscaledTileID",{omit:["projMatrix"]});const UL=Nt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:KL}=UL,GL=Nt([{name:"a_packed",components:4,type:"Float32"}]),{members:HL}=GL,qL=Cu.VectorTileFeature.types,WL=Math.cos(Math.PI/180*37.5);class nv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new kn,this.layoutVertexArray2=new Jn,this.indexArray=new qn,this.programConfigurations=new gu(n.layers,n.zoom),this.segments=new ci,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,c,h){this.hasPattern=O_("line",this.layers,a);const v=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:D,id:B,index:$,sourceLayerIndex:X}of n){const J=this.layers[0]._featureFilter.needGeometry,re=yu(D,J);if(!this.layers[0]._featureFilter.filter(new _e(this.zoom),re,c))continue;const fe=v?v.evaluate(re,{},c):void 0,Ae={id:B,properties:D.properties,type:D.type,sourceLayerIndex:X,index:$,geometry:J?re.geometry:_s(D,c,h),patterns:{},sortKey:fe};y.push(Ae)}v&&y.sort((D,B)=>D.sortKey-B.sortKey);const{lineAtlas:x,featureIndex:E}=a,I=this.addConstantDashes(x);for(const D of y){const{geometry:B,index:$,sourceLayerIndex:X}=D;if(I&&this.addFeatureDashes(D,x),this.hasPattern){const J=D_("line",this.layers,D,this.zoom,a);this.patternFeatures.push(J)}else this.addFeature(D,B,$,c,x.positions,a.availableImages);E.insert(n[$].feature,B,$,X,this.index)}}addConstantDashes(n){let a=!1;for(const c of this.layers){const h=c.paint.get("line-dasharray").value,v=c.layout.get("line-cap").value;if(h.kind!=="constant"||v.kind!=="constant")a=!0;else{const y=v.value,x=h.value;if(!x)continue;n.addDash(x.from,y),n.addDash(x.to,y),x.other&&n.addDash(x.other,y)}}return a}addFeatureDashes(n,a){const c=this.zoom;for(const h of this.layers){const v=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if(v.kind==="constant"&&y.kind==="constant")continue;let x,E,I,D,B,$;if(v.kind==="constant"){const fe=v.value;if(!fe)continue;x=fe.other||fe.to,E=fe.to,I=fe.from}else x=v.evaluate({zoom:c-1},n),E=v.evaluate({zoom:c},n),I=v.evaluate({zoom:c+1},n);y.kind==="constant"?D=B=$=y.value:(D=y.evaluate({zoom:c-1},n),B=y.evaluate({zoom:c},n),$=y.evaluate({zoom:c+1},n)),a.addDash(x,D),a.addDash(E,B),a.addDash(I,$);const X=a.getKey(x,D),J=a.getKey(E,B),re=a.getKey(I,$);n.patterns[h.id]={min:X,mid:J,max:re}}}update(n,a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,c,h)}addFeatures(n,a,c,h,v){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,a,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,HL)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,KL),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,c,h,v,y){const x=this.layers[0].layout,E=x.get("line-join").evaluate(n,{}),I=x.get("line-cap").evaluate(n,{}),D=x.get("line-miter-limit"),B=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const $ of a)this.addLine($,n,E,I,D,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,v,y,h)}addLine(n,a,c,h,v,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ae=0;Ae<n.length-1;Ae++)this.totalDistance+=n[Ae].dist(n[Ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=qL[a.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let I=0;for(;I<E-1&&n[I].equals(n[I+1]);)I++;if(E<(x?3:2))return;c==="bevel"&&(v=1.05);const D=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let $,X,J,re,fe;this.e1=this.e2=-1,x&&($=n[E-2],fe=n[I].sub($)._unit()._perp());for(let Ae=I;Ae<E;Ae++){if(J=Ae===E-1?x?n[I+1]:void 0:n[Ae+1],J&&n[Ae].equals(J))continue;fe&&(re=fe),$&&(X=$),$=n[Ae],fe=J?J.sub($)._unit()._perp():re,re=re||fe;let je=re.add(fe);je.x===0&&je.y===0||je._unit();const ke=re.x*fe.x+re.y*fe.y,Ne=je.x*fe.x+je.y*fe.y,Je=Ne!==0?1/Ne:1/0,Ue=2*Math.sqrt(2-2*Ne),gt=Ne<WL&&X&&J,ft=re.x*fe.y-re.y*fe.x>0;if(gt&&Ae>I){const xt=$.dist(X);if(xt>2*D){const Lt=$.sub($.sub(X)._mult(D/xt)._round());this.updateDistance(X,Lt),this.addCurrentVertex(Lt,re,0,0,B),X=Lt}}const Mt=X&&J;let Jt=Mt?c:x?"butt":h;if(Mt&&Jt==="round"&&(Je<y?Jt="miter":Je<=2&&(Jt="fakeround")),Jt==="miter"&&Je>v&&(Jt="bevel"),Jt==="bevel"&&(Je>2&&(Jt="flipbevel"),Je<v&&(Jt="miter")),X&&this.updateDistance(X,$),Jt==="miter")je._mult(Je),this.addCurrentVertex($,je,0,0,B);else if(Jt==="flipbevel"){if(Je>100)je=fe.mult(-1);else{const xt=Je*re.add(fe).mag()/re.sub(fe).mag();je._perp()._mult(xt*(ft?-1:1))}this.addCurrentVertex($,je,0,0,B),this.addCurrentVertex($,je.mult(-1),0,0,B)}else if(Jt==="bevel"||Jt==="fakeround"){const xt=-Math.sqrt(Je*Je-1),Lt=ft?xt:0,Vt=ft?0:xt;if(X&&this.addCurrentVertex($,re,Lt,Vt,B),Jt==="fakeround"){const Ft=Math.round(180*Ue/Math.PI/20);for(let Xt=1;Xt<Ft;Xt++){let Ut=Xt/Ft;if(Ut!==.5){const $n=Ut-.5;Ut+=Ut*$n*(Ut-1)*((1.0904+ke*(ke*(3.55645-1.43519*ke)-3.2452))*$n*$n+(.848013+ke*(.215638*ke-1.06021)))}const un=fe.sub(re)._mult(Ut)._add(re)._unit()._mult(ft?-1:1);this.addHalfVertex($,un.x,un.y,!1,ft,0,B)}}J&&this.addCurrentVertex($,fe,-Lt,-Vt,B)}else if(Jt==="butt")this.addCurrentVertex($,je,0,0,B);else if(Jt==="square"){const xt=X?1:-1;X||this.addCurrentVertex($,je,xt,xt,B),this.addCurrentVertex($,je,0,0,B),X&&this.addCurrentVertex($,je,xt,xt,B)}else Jt==="round"&&(X&&(this.addCurrentVertex($,re,0,0,B),this.addCurrentVertex($,re,1,1,B,!0)),J&&(this.addCurrentVertex($,fe,-1,-1,B,!0),this.addCurrentVertex($,fe,0,0,B)));if(gt&&Ae<E-1){const xt=$.dist(J);if(xt>2*D){const Lt=$.add(J.sub($)._mult(D/xt)._round());this.updateDistance($,Lt),this.addCurrentVertex(Lt,fe,0,0,B),$=Lt}}}}addCurrentVertex(n,a,c,h,v,y=!1){const x=a.y*h-a.x,E=-a.y-a.x*h;this.addHalfVertex(n,a.x+a.y*c,a.y-a.x*c,y,!1,c,v),this.addHalfVertex(n,x,E,y,!0,-h,v)}addHalfVertex({x:n,y:a},c,h,v,y,x,E){this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(y?1:0),Math.round(63*c)+128,Math.round(63*h)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const I=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,I),E.primitiveLength++),y?this.e2=I:this.e1=I}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}pn(nv,"LineBucket",{omit:["layers","patternFeatures"]});const ZL=new Dt({"line-cap":new Qe(wt.layout_line["line-cap"]),"line-join":new Qe(wt.layout_line["line-join"]),"line-miter-limit":new Ge(wt.layout_line["line-miter-limit"]),"line-round-limit":new Ge(wt.layout_line["line-round-limit"]),"line-sort-key":new Qe(wt.layout_line["line-sort-key"])});var qS={paint:new Dt({"line-opacity":new Qe(wt.paint_line["line-opacity"]),"line-color":new Qe(wt.paint_line["line-color"]),"line-translate":new Ge(wt.paint_line["line-translate"]),"line-translate-anchor":new Ge(wt.paint_line["line-translate-anchor"]),"line-width":new Qe(wt.paint_line["line-width"]),"line-gap-width":new Qe(wt.paint_line["line-gap-width"]),"line-offset":new Qe(wt.paint_line["line-offset"]),"line-blur":new Qe(wt.paint_line["line-blur"]),"line-dasharray":new ct(wt.paint_line["line-dasharray"]),"line-pattern":new ct(wt.paint_line["line-pattern"]),"line-gradient":new at(wt.paint_line["line-gradient"]),"line-trim-offset":new Ge(wt.paint_line["line-trim-offset"])}),layout:ZL};const WS=new class extends Qe{possiblyEvaluate(s,n){return n=new _e(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(s,n)}evaluate(s,n,a,c){return n=ie({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(s,n,a,c)}}(qS.paint.properties["line-width"].specification);function ZS(s,n){return n>0?n+2*s:s}WS.useIntegerZoom=!0;const XL=Nt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),YL=Nt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),JL=Nt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Nt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const QL=Nt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),eF=Nt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const XS=Nt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),tF=Nt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Nt([{name:"triangle",components:3,type:"Uint16"}]),Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Nt([{type:"Float32",name:"offsetX"}]),Nt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ai=24;const Fa=128;function R_(s,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new _e(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:h}=a;let v=0;for(;v<c.length&&c[v]<=s;)v++;v=Math.max(0,v-1);let y=v;for(;y<c.length&&c[y]<s+1;)y++;y=Math.min(c.length-1,y);const x=c[v],E=c[y];return a.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:E,interpolationType:h}:{kind:"camera",minZoom:x,maxZoom:E,minSize:a.evaluate(new _e(x)),maxSize:a.evaluate(new _e(E)),interpolationType:h}}}function rv(s,{uSize:n,uSizeT:a},{lowerSize:c,upperSize:h}){return s.kind==="source"?c/Fa:s.kind==="composite"?ur(c/Fa,h/Fa,a):n}function Xc(s,n){let a=0,c=0;if(s.kind==="constant")c=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:h,minZoom:v,maxZoom:y}=s,x=h?q(Ho.interpolationFactor(h,n,v,y),0,1):0;s.kind==="camera"?c=ur(s.minSize,s.maxSize,x):a=x}return{uSizeT:a,uSize:c}}var nF=Object.freeze({__proto__:null,getSizeData:R_,evaluateSizeForFeature:rv,evaluateSizeForZoom:Xc,SIZE_PACK_FACTOR:Fa});function rF(s,n,a){return s.sections.forEach(c=>{c.text=function(h,v,y){const x=v.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?h=h.toLocaleUpperCase():x==="lowercase"&&(h=h.toLocaleLowerCase()),ye.applyArabicShaping&&(h=ye.applyArabicShaping(h)),h}(c.text,n,a)}),s}const ph={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function iF(s){return s==="\uFE36"||s==="\uFE48"||s==="\uFE38"||s==="\uFE44"||s==="\uFE42"||s==="\uFE3E"||s==="\uFE3C"||s==="\uFE3A"||s==="\uFE18"||s==="\uFE40"||s==="\uFE10"||s==="\uFE13"||s==="\uFE14"||s==="\uFF40"||s==="\uFFE3"||s==="\uFE11"||s==="\uFE12"}function oF(s){return s==="\uFE35"||s==="\uFE47"||s==="\uFE37"||s==="\uFE43"||s==="\uFE41"||s==="\uFE3D"||s==="\uFE3B"||s==="\uFE39"||s==="\uFE17"||s==="\uFE3F"}var YS=function(s,n,a,c,h){var v,y,x=8*h-c-1,E=(1<<x)-1,I=E>>1,D=-7,B=a?h-1:0,$=a?-1:1,X=s[n+B];for(B+=$,v=X&(1<<-D)-1,X>>=-D,D+=x;D>0;v=256*v+s[n+B],B+=$,D-=8);for(y=v&(1<<-D)-1,v>>=-D,D+=c;D>0;y=256*y+s[n+B],B+=$,D-=8);if(v===0)v=1-I;else{if(v===E)return y?NaN:1/0*(X?-1:1);y+=Math.pow(2,c),v-=I}return(X?-1:1)*y*Math.pow(2,v-c)},JS=function(s,n,a,c,h,v){var y,x,E,I=8*v-h-1,D=(1<<I)-1,B=D>>1,$=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=c?0:v-1,J=c?1:-1,re=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(x=isNaN(n)?1:0,y=D):(y=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-y))<1&&(y--,E*=2),(n+=y+B>=1?$/E:$*Math.pow(2,1-B))*E>=2&&(y++,E/=2),y+B>=D?(x=0,y=D):y+B>=1?(x=(n*E-1)*Math.pow(2,h),y+=B):(x=n*Math.pow(2,B-1)*Math.pow(2,h),y=0));h>=8;s[a+X]=255&x,X+=J,x/=256,h-=8);for(y=y<<h|x,I+=h;I>0;s[a+X]=255&y,X+=J,y/=256,I-=8);s[a+X-J]|=128*re},mh=Lr;function Lr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Lr.Varint=0,Lr.Fixed64=1,Lr.Bytes=2,Lr.Fixed32=5;var z_=4294967296,QS=1/z_,e2=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function bs(s){return s.type===Lr.Bytes?s.readVarint()+s.pos:s.pos+1}function Yc(s,n,a){return a?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function t2(s,n,a){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(c);for(var h=a.pos-1;h>=s;h--)a.buf[h+c]=a.buf[h]}function aF(s,n){for(var a=0;a<s.length;a++)n.writeVarint(s[a])}function sF(s,n){for(var a=0;a<s.length;a++)n.writeSVarint(s[a])}function lF(s,n){for(var a=0;a<s.length;a++)n.writeFloat(s[a])}function uF(s,n){for(var a=0;a<s.length;a++)n.writeDouble(s[a])}function cF(s,n){for(var a=0;a<s.length;a++)n.writeBoolean(s[a])}function dF(s,n){for(var a=0;a<s.length;a++)n.writeFixed32(s[a])}function fF(s,n){for(var a=0;a<s.length;a++)n.writeSFixed32(s[a])}function hF(s,n){for(var a=0;a<s.length;a++)n.writeFixed64(s[a])}function pF(s,n){for(var a=0;a<s.length;a++)n.writeSFixed64(s[a])}function iv(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function Jc(s,n,a){s[a]=n,s[a+1]=n>>>8,s[a+2]=n>>>16,s[a+3]=n>>>24}function n2(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}function mF(s,n,a){n.glyphs=[],s===1&&a.readMessage(vF,n)}function vF(s,n,a){if(s===3){const{id:c,bitmap:h,width:v,height:y,left:x,top:E,advance:I}=a.readMessage(gF,{});n.glyphs.push({id:c,bitmap:new xs({width:v+6,height:y+6},h),metrics:{width:v,height:y,left:x,top:E,advance:I}})}else s===4?n.ascender=a.readSVarint():s===5&&(n.descender=a.readSVarint())}function gF(s,n,a){s===1?n.id=a.readVarint():s===2?n.bitmap=a.readBytes():s===3?n.width=a.readVarint():s===4?n.height=a.readVarint():s===5?n.left=a.readSVarint():s===6?n.top=a.readSVarint():s===7&&(n.advance=a.readVarint())}function L_(s){let n=0,a=0;for(const y of s)n+=y.w*y.h,a=Math.max(a,y.w);s.sort((y,x)=>x.h-y.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let h=0,v=0;for(const y of s)for(let x=c.length-1;x>=0;x--){const E=c[x];if(!(y.w>E.w||y.h>E.h)){if(y.x=E.x,y.y=E.y,v=Math.max(v,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===E.w&&y.h===E.h){const I=c.pop();x<c.length&&(c[x]=I)}else y.h===E.h?(E.x+=y.w,E.w-=y.w):y.w===E.w?(E.y+=y.h,E.h-=y.h):(c.push({x:E.x+y.w,y:E.y,w:E.w-y.w,h:y.h}),E.y+=y.h,E.h-=y.h);break}}return{w:h,h:v,fill:n/(h*v)||0}}Lr.prototype={destroy:function(){this.buf=null},readFields:function(s,n,a){for(a=a||this.length;this.pos<a;){var c=this.readVarint(),h=c>>3,v=this.pos;this.type=7&c,s(h,n,this),this.pos===v&&this.skip(c)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=iv(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=n2(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=iv(this.buf,this.pos)+iv(this.buf,this.pos+4)*z_;return this.pos+=8,s},readSFixed64:function(){var s=iv(this.buf,this.pos)+n2(this.buf,this.pos+4)*z_;return this.pos+=8,s},readFloat:function(){var s=YS(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=YS(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,a,c=this.buf;return n=127&(a=c[this.pos++]),a<128?n:(n|=(127&(a=c[this.pos++]))<<7,a<128?n:(n|=(127&(a=c[this.pos++]))<<14,a<128?n:(n|=(127&(a=c[this.pos++]))<<21,a<128?n:function(h,v,y){var x,E,I=y.buf;if(x=(112&(E=I[y.pos++]))>>4,E<128||(x|=(127&(E=I[y.pos++]))<<3,E<128)||(x|=(127&(E=I[y.pos++]))<<10,E<128)||(x|=(127&(E=I[y.pos++]))<<17,E<128)||(x|=(127&(E=I[y.pos++]))<<24,E<128)||(x|=(1&(E=I[y.pos++]))<<31,E<128))return Yc(h,x,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=c[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&e2?function(a,c,h){return e2.decode(a.subarray(c,h))}(this.buf,n,s):function(a,c,h){for(var v="",y=c;y<h;){var x,E,I,D=a[y],B=null,$=D>239?4:D>223?3:D>191?2:1;if(y+$>h)break;$===1?D<128&&(B=D):$===2?(192&(x=a[y+1]))==128&&(B=(31&D)<<6|63&x)<=127&&(B=null):$===3?(E=a[y+2],(192&(x=a[y+1]))==128&&(192&E)==128&&((B=(15&D)<<12|(63&x)<<6|63&E)<=2047||B>=55296&&B<=57343)&&(B=null)):$===4&&(E=a[y+2],I=a[y+3],(192&(x=a[y+1]))==128&&(192&E)==128&&(192&I)==128&&((B=(15&D)<<18|(63&x)<<12|(63&E)<<6|63&I)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,$=1):B>65535&&(B-=65536,v+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),v+=String.fromCharCode(B),y+=$}return v}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==Lr.Bytes)return s.push(this.readVarint(n));var a=bs(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSVarint());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Lr.Bytes)return s.push(this.readBoolean());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFloat());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Lr.Bytes)return s.push(this.readDouble());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFixed32());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSFixed32());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFixed64());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSFixed64());var n=bs(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===Lr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Lr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Lr.Fixed32)this.pos+=4;else{if(n!==Lr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Jc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Jc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Jc(this.buf,-1&s,this.pos),Jc(this.buf,Math.floor(s*QS),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Jc(this.buf,-1&s,this.pos),Jc(this.buf,Math.floor(s*QS),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,a){var c,h;if(n>=0?(c=n%4294967296|0,h=n/4294967296|0):(h=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,h=h+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,y,x){x.buf[x.pos++]=127&v|128,v>>>=7,x.buf[x.pos++]=127&v|128,v>>>=7,x.buf[x.pos++]=127&v|128,v>>>=7,x.buf[x.pos++]=127&v|128,x.buf[x.pos]=127&(v>>>=7)}(c,0,a),function(v,y){var x=(7&v)<<4;y.buf[y.pos++]|=x|((v>>>=3)?128:0),v&&(y.buf[y.pos++]=127&v|((v>>>=7)?128:0),v&&(y.buf[y.pos++]=127&v|((v>>>=7)?128:0),v&&(y.buf[y.pos++]=127&v|((v>>>=7)?128:0),v&&(y.buf[y.pos++]=127&v|((v>>>=7)?128:0),v&&(y.buf[y.pos++]=127&v)))))}(h,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(c,h,v){for(var y,x,E=0;E<h.length;E++){if((y=h.charCodeAt(E))>55295&&y<57344){if(!x){y>56319||E+1===h.length?(c[v++]=239,c[v++]=191,c[v++]=189):x=y;continue}if(y<56320){c[v++]=239,c[v++]=191,c[v++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(c[v++]=239,c[v++]=191,c[v++]=189,x=null);y<128?c[v++]=y:(y<2048?c[v++]=y>>6|192:(y<65536?c[v++]=y>>12|224:(c[v++]=y>>18|240,c[v++]=y>>12&63|128),c[v++]=y>>6&63|128),c[v++]=63&y|128)}return v}(this.buf,s,this.pos);var a=this.pos-n;a>=128&&t2(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),JS(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),JS(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,n){this.pos++;var a=this.pos;s(n,this);var c=this.pos-a;c>=128&&t2(a,c,this),this.pos=a-1,this.writeVarint(c),this.pos+=c},writeMessage:function(s,n,a){this.writeTag(s,Lr.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,aF,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,sF,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,cF,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,lF,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,uF,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,dF,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,fF,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,hF,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,pF,n)},writeBytesField:function(s,n){this.writeTag(s,Lr.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,Lr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,Lr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,Lr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,Lr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,Lr.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,Lr.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,Lr.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,Lr.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,Lr.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,Boolean(n))}};class F_{constructor(n,{pixelRatio:a,version:c,stretchX:h,stretchY:v,content:y}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=h,this.stretchY=v,this.content=y,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class r2{constructor(n,a){const c={},h={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,c,v),this.addImages(a,h,v);const{w:y,h:x}=L_(v),E=new go({width:y||1,height:x||1});for(const I in n){const D=n[I],B=c[I].paddedRect;go.copy(D.data,E,{x:0,y:0},{x:B.x+1,y:B.y+1},D.data)}for(const I in a){const D=a[I],B=h[I].paddedRect,$=B.x+1,X=B.y+1,J=D.data.width,re=D.data.height;go.copy(D.data,E,{x:0,y:0},{x:$,y:X},D.data),go.copy(D.data,E,{x:0,y:re-1},{x:$,y:X-1},{width:J,height:1}),go.copy(D.data,E,{x:0,y:0},{x:$,y:X+re},{width:J,height:1}),go.copy(D.data,E,{x:J-1,y:0},{x:$-1,y:X},{width:1,height:re}),go.copy(D.data,E,{x:0,y:0},{x:$+J,y:X},{width:1,height:re})}this.image=E,this.iconPositions=c,this.patternPositions=h}addImages(n,a,c){for(const h in n){const v=n[h],y={x:0,y:0,w:v.data.width+2,h:v.data.height+2};c.push(y),a[h]=new F_(y,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(n,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(c=>n.hasImage(c)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in n.updatedImages)this.patchUpdatedImage(this.iconPositions[c],n.getImage(c),a),this.patchUpdatedImage(this.patternPositions[c],n.getImage(c),a)}patchUpdatedImage(n,a,c){if(!n||!a||n.version===a.version)return;n.version=a.version;const[h,v]=n.tl;c.update(a.data,void 0,{x:h,y:v})}}pn(F_,"ImagePosition"),pn(r2,"ImageAtlas");const Mo={horizontal:1,vertical:2,horizontalOnly:3};class vh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const c=new vh;return c.scale=n||1,c.fontStack=a,c}static forImage(n){const a=new vh;return a.imageName=n,a}}class Qc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const c=new Qc;for(let h=0;h<n.sections.length;h++){const v=n.sections[h];v.image?c.addImageSection(v):c.addTextSection(v,a)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(a,c){let h="";for(let v=0;v<a.length;v++){const y=a.charCodeAt(v+1)||null,x=a.charCodeAt(v-1)||null;h+=!c&&(y&&mu(y)&&!ph[a[v+1]]||x&&mu(x)&&!ph[a[v-1]])||!ph[a[v]]?a[v]:ph[a[v]]}return h}(this.text,n)}trim(){let n=0;for(let c=0;c<this.text.length&&ov[this.text.charCodeAt(c)];c++)n++;let a=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&ov[this.text.charCodeAt(c)];c--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const c=new Qc;return c.text=this.text.substring(n,a),c.sectionIndex=this.sectionIndex.slice(n,a),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(vh.forText(n.scale,n.fontStack||a));const c=this.sections.length-1;for(let h=0;h<n.text.length;++h)this.sectionIndex.push(c)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void Re("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(vh.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Re("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function B_(s,n,a,c,h,v,y,x,E,I,D,B,$,X,J,re){const fe=Qc.fromFeature(s,h);let Ae;B===Mo.vertical&&fe.verticalizePunctuation($);const{processBidirectionalText:je,processStyledBidirectionalText:ke}=ye;if(je&&fe.sections.length===1){Ae=[];const Ue=je(fe.toString(),N_(fe,I,v,n,c,X,J));for(const gt of Ue){const ft=new Qc;ft.text=gt,ft.sections=fe.sections;for(let Mt=0;Mt<gt.length;Mt++)ft.sectionIndex.push(0);Ae.push(ft)}}else if(ke){Ae=[];const Ue=ke(fe.text,fe.sectionIndex,N_(fe,I,v,n,c,X,J));for(const gt of Ue){const ft=new Qc;ft.text=gt[0],ft.sectionIndex=gt[1],ft.sections=fe.sections,Ae.push(ft)}}else Ae=function(Ue,gt){const ft=[],Mt=Ue.text;let Jt=0;for(const xt of gt)ft.push(Ue.substring(Jt,xt)),Jt=xt;return Jt<Mt.length&&ft.push(Ue.substring(Jt,Mt.length)),ft}(fe,N_(fe,I,v,n,c,X,J));const Ne=[],Je={positionedLines:Ne,text:fe.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:B,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ue,gt,ft,Mt,Jt,xt,Lt,Vt,Ft,Xt,Ut,un){let $n=0,Vn=0,Tn=0;const nn=Vt==="right"?1:Vt==="left"?0:.5;let Qn=!1;for(const Gn of Jt){const dr=Gn.getSections();for(const Br of dr){if(Br.imageName)continue;const Rr=gt[Br.fontStack];if(Rr&&(Qn=Rr.ascender!==void 0&&Rr.descender!==void 0,!Qn))break}if(!Qn)break}let Rn=0;for(const Gn of Jt){Gn.trim();const dr=Gn.getMaxScale(),Br=(dr-1)*Ai,Rr={positionedGlyphs:[],lineOffset:0};Ue.positionedLines[Rn]=Rr;const Ar=Rr.positionedGlyphs;let Ur=0;if(!Gn.length()){Vn+=xt,++Rn;continue}let Zr=0,xi=0;for(let or=0;or<Gn.length();or++){const ti=Gn.getSection(or),Fi=Gn.getSectionIndex(or),xr=Gn.getCharCode(or);let Xr=ti.scale,Gi=null,qr=null,oi=null,bi=Ai,mi=0;const Mi=!(Ft===Mo.horizontal||!Ut&&!Vc(xr)||Ut&&(ov[xr]||(hn=xr,Tm(hn)||Em(hn)||Im(hn)||pu(hn)||Jf(hn))));if(ti.imageName){const Hi=Mt[ti.imageName];if(!Hi)continue;oi=ti.imageName,Ue.iconsInText=Ue.iconsInText||!0,qr=Hi.paddedRect;const wi=Hi.displaySize;Xr=Xr*Ai/un,Gi={width:wi[0],height:wi[1],left:1,top:-3,advance:Mi?wi[1]:wi[0],localGlyph:!1},mi=Qn?-Gi.height*Xr:dr*Ai-17-wi[1]*Xr,bi=Gi.advance;const Ss=(Mi?wi[0]:wi[1])*Xr-Ai*dr;Ss>0&&Ss>Ur&&(Ur=Ss)}else{const Hi=ft[ti.fontStack];if(!Hi)continue;Hi[xr]&&(qr=Hi[xr]);const wi=gt[ti.fontStack];if(!wi)continue;const Ss=wi.glyphs[xr];if(!Ss)continue;if(Gi=Ss.metrics,bi=xr!==8203?Ai:0,Qn){const ad=wi.ascender!==void 0?Math.abs(wi.ascender):0,Ph=wi.descender!==void 0?Math.abs(wi.descender):0,Ah=(ad+Ph)*Xr;Zr<Ah&&(Zr=Ah,xi=(ad-Ph)/2*Xr),mi=-ad*Xr}else mi=(dr-Xr)*Ai-17}Mi?(Ue.verticalizable=!0,Ar.push({glyph:xr,imageName:oi,x:$n,y:Vn+mi,vertical:Mi,scale:Xr,localGlyph:Gi.localGlyph,fontStack:ti.fontStack,sectionIndex:Fi,metrics:Gi,rect:qr}),$n+=bi*Xr+Xt):(Ar.push({glyph:xr,imageName:oi,x:$n,y:Vn+mi,vertical:Mi,scale:Xr,localGlyph:Gi.localGlyph,fontStack:ti.fontStack,sectionIndex:Fi,metrics:Gi,rect:qr}),$n+=Gi.advance*Xr+Xt)}Ar.length!==0&&(Tn=Math.max($n-Xt,Tn),Qn?l2(Ar,nn,Ur,xi,xt*dr/2):l2(Ar,nn,Ur,0,xt/2)),$n=0;const ro=xt*dr+Ur;Rr.lineOffset=Math.max(Ur,Br),Vn+=ro,++Rn}var hn;const Fr=Vn,{horizontalAlign:Dr,verticalAlign:Hr}=$_(Lt);(function(Gn,dr,Br,Rr,Ar,Ur){const Zr=(dr-Br)*Ar,xi=-Ur*Rr;for(const ro of Gn)for(const or of ro.positionedGlyphs)or.x+=Zr,or.y+=xi})(Ue.positionedLines,nn,Dr,Hr,Tn,Fr),Ue.top+=-Hr*Fr,Ue.bottom=Ue.top+Fr,Ue.left+=-Dr*Tn,Ue.right=Ue.left+Tn,Ue.hasBaseline=Qn}(Je,n,a,c,Ae,y,x,E,B,I,$,re),!function(Ue){for(const gt of Ue)if(gt.positionedGlyphs.length!==0)return!1;return!0}(Ne)&&Je}const ov={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},yF={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function i2(s,n,a,c,h,v){if(n.imageName){const y=c[n.imageName];return y?y.displaySize[0]*n.scale*Ai/v+h:0}{const y=a[n.fontStack],x=y&&y.glyphs[s];return x?x.metrics.advance*n.scale+h:0}}function o2(s,n,a,c){const h=Math.pow(s-n,2);return c?s<n?h/2:2*h:h+Math.abs(a)*a}function _F(s,n,a){let c=0;return s===10&&(c-=1e4),a&&(c+=150),s!==40&&s!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function a2(s,n,a,c,h,v){let y=null,x=o2(n,a,h,v);for(const E of c){const I=o2(n-E.x,a,h,v)+E.badness;I<=x&&(y=E,x=I)}return{index:s,x:n,priorBreak:y,badness:x}}function s2(s){return s?s2(s.priorBreak).concat(s.index):[]}function N_(s,n,a,c,h,v,y){if(v!=="point")return[];if(!s)return[];const x=[],E=function($,X,J,re,fe,Ae){let je=0;for(let ke=0;ke<$.length();ke++){const Ne=$.getSection(ke);je+=i2($.getCharCode(ke),Ne,re,fe,X,Ae)}return je/Math.max(1,Math.ceil(je/J))}(s,n,a,c,h,y),I=s.text.indexOf("\u200B")>=0;let D=0;for(let $=0;$<s.length();$++){const X=s.getSection($),J=s.getCharCode($);if(ov[J]||(D+=i2(J,X,c,h,n,y)),$<s.length()-1){const re=!((B=J)<11904||!(Hf(B)||Mm(B)||Yf(B)||Rm(B)||Zf(B)||Pm(B)||km(B)||Nc(B)||Xf(B)||hu(B)||Wf(B)||Qf(B)||Gf(B)||fu(B)||Am(B)||qf(B)||cs(B)||zm(B)||Om(B)||$c(B)));(yF[J]||re||X.imageName)&&x.push(a2($+1,D,E,x,_F(J,s.getCharCode($+1),re&&I),!1))}}var B;return s2(a2(s.length(),D,E,x,0,!0))}function $_(s){let n=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function l2(s,n,a,c,h){if(!(n||a||c||h))return;const v=s.length-1,y=s[v],x=(y.x+y.metrics.advance*y.scale)*n;for(let E=0;E<=v;E++)s[E].x-=x,s[E].y+=a+c+h}function xF(s,n,a){const{horizontalAlign:c,verticalAlign:h}=$_(a),v=n[0]-s.displaySize[0]*c,y=n[1]-s.displaySize[1]*h;return{image:s,top:y,bottom:y+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function u2(s,n,a,c,h,v){const y=s.image;let x;if(y.content){const fe=y.content,Ae=y.pixelRatio||1;x=[fe[0]/Ae,fe[1]/Ae,y.displaySize[0]-fe[2]/Ae,y.displaySize[1]-fe[3]/Ae]}const E=n.left*v,I=n.right*v;let D,B,$,X;a==="width"||a==="both"?(X=h[0]+E-c[3],B=h[0]+I+c[1]):(X=h[0]+(E+I-y.displaySize[0])/2,B=X+y.displaySize[0]);const J=n.top*v,re=n.bottom*v;return a==="height"||a==="both"?(D=h[1]+J-c[0],$=h[1]+re+c[2]):(D=h[1]+(J+re-y.displaySize[1])/2,$=D+y.displaySize[1]),{image:y,top:D,right:B,bottom:$,left:X,collisionPadding:x}}class ws extends S{constructor(n,a,c,h,v){super(n,a),this.angle=h,this.z=c,v!==void 0&&(this.segment=v)}clone(){return new ws(this.x,this.y,this.z,this.angle,this.segment)}}function c2(s,n,a,c,h){if(n.segment===void 0)return!0;let v=n,y=n.segment+1,x=0;for(;x>-a/2;){if(y--,y<0)return!1;x-=s[y].dist(v),v=s[y]}x+=s[y].dist(s[y+1]),y++;const E=[];let I=0;for(;x<a/2;){const D=s[y],B=s[y+1];if(!B)return!1;let $=s[y-1].angleTo(D)-D.angleTo(B);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:x,angleDelta:$}),I+=$;x-E[0].distance>c;)I-=E.shift().angleDelta;if(I>h)return!1;y++,x+=D.dist(B)}return!0}function d2(s){let n=0;for(let a=0;a<s.length-1;a++)n+=s[a].dist(s[a+1]);return n}function f2(s,n,a){return s?.6*n*a:0}function h2(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function bF(s,n,a,c,h,v){const y=f2(a,h,v),x=h2(a,c)*v;let E=0;const I=d2(s)/2;for(let D=0;D<s.length-1;D++){const B=s[D],$=s[D+1],X=B.dist($);if(E+X>I){const J=(I-E)/X,re=ur(B.x,$.x,J),fe=ur(B.y,$.y,J),Ae=new ws(re,fe,0,$.angleTo(B),D);return!y||c2(s,Ae,x,y,n)?Ae:void 0}E+=X}}function wF(s,n,a,c,h,v,y,x,E){const I=f2(c,v,y),D=h2(c,h),B=D*y,$=s[0].x===0||s[0].x===E||s[0].y===0||s[0].y===E;return n-B<n/4&&(n=B+n/4),p2(s,$?n/2*x%n:(D/2+2*v)*y*x%n,n,I,a,B,$,!1,E)}function p2(s,n,a,c,h,v,y,x,E){const I=v/2,D=d2(s);let B=0,$=n-a,X=[];for(let J=0;J<s.length-1;J++){const re=s[J],fe=s[J+1],Ae=re.dist(fe),je=fe.angleTo(re);for(;$+a<B+Ae;){$+=a;const ke=($-B)/Ae,Ne=ur(re.x,fe.x,ke),Je=ur(re.y,fe.y,ke);if(Ne>=0&&Ne<E&&Je>=0&&Je<E&&$-I>=0&&$+I<=D){const Ue=new ws(Ne,Je,0,je,J);Ue._round(),c&&!c2(s,Ue,v,c,h)||X.push(Ue)}}B+=Ae}return x||X.length||y||(X=p2(s,B/2,a,c,h,v,y,!0,E)),X}function m2(s,n,a,c,h){const v=[];for(let y=0;y<s.length;y++){const x=s[y];let E;for(let I=0;I<x.length-1;I++){let D=x[I],B=x[I+1];D.x<n&&B.x<n||(D.x<n?D=new S(n,D.y+(n-D.x)/(B.x-D.x)*(B.y-D.y))._round():B.x<n&&(B=new S(n,D.y+(n-D.x)/(B.x-D.x)*(B.y-D.y))._round()),D.y<a&&B.y<a||(D.y<a?D=new S(D.x+(a-D.y)/(B.y-D.y)*(B.x-D.x),a)._round():B.y<a&&(B=new S(D.x+(a-D.y)/(B.y-D.y)*(B.x-D.x),a)._round()),D.x>=c&&B.x>=c||(D.x>=c?D=new S(c,D.y+(c-D.x)/(B.x-D.x)*(B.y-D.y))._round():B.x>=c&&(B=new S(c,D.y+(c-D.x)/(B.x-D.x)*(B.y-D.y))._round()),D.y>=h&&B.y>=h||(D.y>=h?D=new S(D.x+(h-D.y)/(B.y-D.y)*(B.x-D.x),h)._round():B.y>=h&&(B=new S(D.x+(h-D.y)/(B.y-D.y)*(B.x-D.x),h)._round()),E&&D.equals(E[E.length-1])||(E=[D],v.push(E)),E.push(B)))))}}return v}pn(ws,"Anchor");const gh=1e20;function v2(s,n,a,c,h,v,y,x,E){for(let I=n;I<n+c;I++)g2(s,a*v+I,v,h,y,x,E);for(let I=a;I<a+h;I++)g2(s,I*v+n,1,c,y,x,E)}function g2(s,n,a,c,h,v,y){v[0]=0,y[0]=-gh,y[1]=gh,h[0]=s[n];for(let x=1,E=0,I=0;x<c;x++){h[x]=s[n+x*a];const D=x*x;do{const B=v[E];I=(h[x]-h[B]+D-B*B)/(x-B)/2}while(I<=y[E]&&--E>-1);E++,v[E]=x,y[E]=I,y[E+1]=gh}for(let x=0,E=0;x<c;x++){for(;y[E+1]<x;)E++;const I=v[E],D=x-I;s[n+x*a]=h[I]+D*D}}const j_={none:0,ideographs:1,all:2};class ed{constructor(n,a,c){this.requestManager=n,this.localGlyphMode=a,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,a){const c=[];for(const h in n)for(const v of n[h])c.push({stack:h,id:v});Q(c,({stack:h,id:v},y)=>{let x=this.entries[h];x||(x=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=x.glyphs[v];if(E!==void 0)return void y(null,{stack:h,id:v,glyph:E});if(E=this._tinySDF(x,h,v),E)return x.glyphs[v]=E,void y(null,{stack:h,id:v,glyph:E});const I=Math.floor(v/256);if(256*I>65535)return void y(new Error("glyphs > 65535 not supported"));if(x.ranges[I])return void y(null,{stack:h,id:v,glyph:E});let D=x.requests[I];D||(D=x.requests[I]=[],ed.loadGlyphRange(h,I,this.url,this.requestManager,(B,$)=>{if($){x.ascender=$.ascender,x.descender=$.descender;for(const X in $.glyphs)this._doesCharSupportLocalGlyph(+X)||(x.glyphs[+X]=$.glyphs[+X]);x.ranges[I]=!0}for(const X of D)X(B,$);delete x.requests[I]})),D.push((B,$)=>{B?y(B):$&&y(null,{stack:h,id:v,glyph:$.glyphs[v]||null})})},(h,v)=>{if(h)a(h);else if(v){const y={};for(const{stack:x,id:E,glyph:I}of v)y[x]===void 0&&(y[x]={}),y[x].glyphs===void 0&&(y[x].glyphs={}),y[x].glyphs[E]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics},y[x].ascender=this.entries[x].ascender,y[x].descender=this.entries[x].descender;a(null,y)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==j_.none&&(this.localGlyphMode===j_.all?!!this.localFontFamily:!!this.localFontFamily&&(hu(n)||Dm(n)||Gf(n)||cs(n)||Nc(n)))}_tinySDF(n,a,c){const h=this.localFontFamily;if(!h||!this._doesCharSupportLocalGlyph(c))return;let v=n.tinySDF;if(!v){let re="400";/bold/i.test(a)?re="900":/medium/i.test(a)?re="500":/light/i.test(a)&&(re="200"),v=n.tinySDF=new ed.TinySDF({fontFamily:h,fontWeight:re,fontSize:48,buffer:6,radius:16}),v.fontWeight=re}if(this.localGlyphs[v.fontWeight][c])return this.localGlyphs[v.fontWeight][c];const y=String.fromCharCode(c),{data:x,width:E,height:I,glyphWidth:D,glyphHeight:B,glyphLeft:$,glyphTop:X,glyphAdvance:J}=v.draw(y);return this.localGlyphs[v.fontWeight][c]={id:c,bitmap:new xs({width:E,height:I},x),metrics:{width:D/2,height:B/2,left:$/2,top:X/2-27,advance:J/2,localGlyph:!0}}}}function y2(s,n,a,c){const h=[],v=s.image,y=v.pixelRatio,x=v.paddedRect.w-2,E=v.paddedRect.h-2,I=s.right-s.left,D=s.bottom-s.top,B=v.stretchX||[[0,x]],$=v.stretchY||[[0,E]],X=(xt,Lt)=>xt+Lt[1]-Lt[0],J=B.reduce(X,0),re=$.reduce(X,0),fe=x-J,Ae=E-re;let je=0,ke=J,Ne=0,Je=re,Ue=0,gt=fe,ft=0,Mt=Ae;if(v.content&&c){const xt=v.content;je=av(B,0,xt[0]),Ne=av($,0,xt[1]),ke=av(B,xt[0],xt[2]),Je=av($,xt[1],xt[3]),Ue=xt[0]-je,ft=xt[1]-Ne,gt=xt[2]-xt[0]-ke,Mt=xt[3]-xt[1]-Je}const Jt=(xt,Lt,Vt,Ft)=>{const Xt=sv(xt.stretch-je,ke,I,s.left),Ut=lv(xt.fixed-Ue,gt,xt.stretch,J),un=sv(Lt.stretch-Ne,Je,D,s.top),$n=lv(Lt.fixed-ft,Mt,Lt.stretch,re),Vn=sv(Vt.stretch-je,ke,I,s.left),Tn=lv(Vt.fixed-Ue,gt,Vt.stretch,J),nn=sv(Ft.stretch-Ne,Je,D,s.top),Qn=lv(Ft.fixed-ft,Mt,Ft.stretch,re),Rn=new S(Xt,un),hn=new S(Vn,un),Fr=new S(Vn,nn),Dr=new S(Xt,nn),Hr=new S(Ut/y,$n/y),Gn=new S(Tn/y,Qn/y),dr=n*Math.PI/180;if(dr){const Ar=Math.sin(dr),Ur=Math.cos(dr),Zr=[Ur,-Ar,Ar,Ur];Rn._matMult(Zr),hn._matMult(Zr),Dr._matMult(Zr),Fr._matMult(Zr)}const Br=xt.stretch+xt.fixed,Rr=Lt.stretch+Lt.fixed;return{tl:Rn,tr:hn,bl:Dr,br:Fr,tex:{x:v.paddedRect.x+1+Br,y:v.paddedRect.y+1+Rr,w:Vt.stretch+Vt.fixed-Br,h:Ft.stretch+Ft.fixed-Rr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hr,pixelOffsetBR:Gn,minFontScaleX:gt/y/I,minFontScaleY:Mt/y/D,isSDF:a}};if(c&&(v.stretchX||v.stretchY)){const xt=_2(B,fe,J),Lt=_2($,Ae,re);for(let Vt=0;Vt<xt.length-1;Vt++){const Ft=xt[Vt],Xt=xt[Vt+1];for(let Ut=0;Ut<Lt.length-1;Ut++)h.push(Jt(Ft,Lt[Ut],Xt,Lt[Ut+1]))}}else h.push(Jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:E+1}));return h}function av(s,n,a){let c=0;for(const h of s)c+=Math.max(n,Math.min(a,h[1]))-Math.max(n,Math.min(a,h[0]));return c}function _2(s,n,a){const c=[{fixed:-1,stretch:0}];for(const[h,v]of s){const y=c[c.length-1];c.push({fixed:h-y.stretch,stretch:y.stretch}),c.push({fixed:h-y.stretch,stretch:y.stretch+(v-h)})}return c.push({fixed:n+1,stretch:a}),c}function sv(s,n,a,c){return s/n*a+c}function lv(s,n,a,c){return s-n*a/c}function CF(s,n,a,c){const h=n+s.positionedLines[c].lineOffset;return c===0?a+h/2:a+(h+(n+s.positionedLines[c-1].lineOffset))/2}ed.loadGlyphRange=function(s,n,a,c,h){const v=256*n,y=v+255,x=c.transformRequest(c.normalizeGlyphsURL(a).replace("{fontstack}",s).replace("{range}",`${v}-${y}`),Ve.Glyphs);ot(x,(E,I)=>{if(E)h(E);else if(I){const D={},B=function($){return new mh($).readFields(mF,{})}(I);for(const $ of B.glyphs)D[$.id]=$;h(null,{glyphs:D,ascender:B.ascender,descender:B.descender})}})},ed.TinySDF=class{constructor({fontSize:s=24,buffer:n=3,radius:a=8,cutoff:c=.25,fontFamily:h="sans-serif",fontWeight:v="normal",fontStyle:y="normal"}={}){this.buffer=n,this.cutoff=c,this.radius=a;const x=this.size=s+4*n,E=this._createCanvas(x),I=this.ctx=E.getContext("2d",{willReadFrequently:!0});I.font=`${y} ${v} ${s}px ${h}`,I.textBaseline="alphabetic",I.textAlign="left",I.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(s){const n=document.createElement("canvas");return n.width=n.height=s,n}draw(s){const{width:n,actualBoundingBoxAscent:a,actualBoundingBoxDescent:c,actualBoundingBoxLeft:h,actualBoundingBoxRight:v}=this.ctx.measureText(s),y=Math.ceil(a),x=Math.min(this.size-this.buffer,Math.ceil(v-h)),E=Math.min(this.size-this.buffer,y+Math.ceil(c)),I=x+2*this.buffer,D=E+2*this.buffer,B=Math.max(I*D,0),$=new Uint8ClampedArray(B),X={data:$,width:I,height:D,glyphWidth:x,glyphHeight:E,glyphTop:y,glyphLeft:0,glyphAdvance:n};if(x===0||E===0)return X;const{ctx:J,buffer:re,gridInner:fe,gridOuter:Ae}=this;J.clearRect(re,re,x,E),J.fillText(s,re,re+y);const je=J.getImageData(re,re,x,E);Ae.fill(gh,0,B),fe.fill(0,0,B);for(let ke=0;ke<E;ke++)for(let Ne=0;Ne<x;Ne++){const Je=je.data[4*(ke*x+Ne)+3]/255;if(Je===0)continue;const Ue=(ke+re)*I+Ne+re;if(Je===1)Ae[Ue]=0,fe[Ue]=gh;else{const gt=.5-Je;Ae[Ue]=gt>0?gt*gt:0,fe[Ue]=gt<0?gt*gt:0}}v2(Ae,0,0,I,D,I,this.f,this.v,this.z),v2(fe,re,re,x,E,I,this.f,this.v,this.z);for(let ke=0;ke<B;ke++){const Ne=Math.sqrt(Ae[ke])-Math.sqrt(fe[ke]);$[ke]=Math.round(255-255*(Ne/this.radius+this.cutoff))}return X}};class SF{constructor(n=[],a=TF){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:c}=this,h=a[n];for(;n>0;){const v=n-1>>1,y=a[v];if(c(h,y)>=0)break;a[n]=y,n=v}a[n]=h}_down(n){const{data:a,compare:c}=this,h=this.length>>1,v=a[n];for(;n<h;){let y=1+(n<<1),x=a[y];const E=y+1;if(E<this.length&&c(a[E],x)<0&&(y=E,x=a[E]),c(x,v)>=0)break;a[n]=x,n=y}a[n]=v}}function TF(s,n){return s<n?-1:s>n?1:0}function EF(s,n=1,a=!1){let c=1/0,h=1/0,v=-1/0,y=-1/0;const x=s[0];for(let X=0;X<x.length;X++){const J=x[X];(!X||J.x<c)&&(c=J.x),(!X||J.y<h)&&(h=J.y),(!X||J.x>v)&&(v=J.x),(!X||J.y>y)&&(y=J.y)}const E=Math.min(v-c,y-h);let I=E/2;const D=new SF([],IF);if(E===0)return new S(c,h);for(let X=c;X<v;X+=E)for(let J=h;J<y;J+=E)D.push(new td(X+I,J+I,I,s));let B=function(X){let J=0,re=0,fe=0;const Ae=X[0];for(let je=0,ke=Ae.length,Ne=ke-1;je<ke;Ne=je++){const Je=Ae[je],Ue=Ae[Ne],gt=Je.x*Ue.y-Ue.x*Je.y;re+=(Je.x+Ue.x)*gt,fe+=(Je.y+Ue.y)*gt,J+=3*gt}return new td(re/J,fe/J,0,X)}(s),$=D.length;for(;D.length;){const X=D.pop();(X.d>B.d||!B.d)&&(B=X,a&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,$)),X.max-B.d<=n||(I=X.h/2,D.push(new td(X.p.x-I,X.p.y-I,I,s)),D.push(new td(X.p.x+I,X.p.y-I,I,s)),D.push(new td(X.p.x-I,X.p.y+I,I,s)),D.push(new td(X.p.x+I,X.p.y+I,I,s)),$+=4)}return a&&(console.log(`num probes: ${$}`),console.log(`best distance: ${B.d}`)),B.p}function IF(s,n){return n.max-s.max}function td(s,n,a,c){this.p=new S(s,n),this.h=a,this.d=function(h,v){let y=!1,x=1/0;for(let E=0;E<v.length;E++){const I=v[E];for(let D=0,B=I.length,$=B-1;D<B;$=D++){const X=I[D],J=I[$];X.y>h.y!=J.y>h.y&&h.x<(J.x-X.x)*(h.y-X.y)/(J.y-X.y)+X.x&&(y=!y),x=Math.min(x,aS(h,X,J))}}return(y?1:-1)*Math.sqrt(x)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const V_=Number.POSITIVE_INFINITY,PF=Math.sqrt(2);function x2(s,n){return n[1]!==V_?function(a,c,h){let v=0,y=0;switch(c=Math.abs(c),h=Math.abs(h),a){case"top-right":case"top-left":case"top":y=h-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-h}switch(a){case"top-right":case"bottom-right":case"right":v=-c;break;case"top-left":case"bottom-left":case"left":v=c}return[v,y]}(s,n[0],n[1]):function(a,c){let h=0,v=0;c<0&&(c=0);const y=c/PF;switch(a){case"top-right":case"top-left":v=y-7;break;case"bottom-right":case"bottom-left":v=7-y;break;case"bottom":v=7-c;break;case"top":v=c-7}switch(a){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=c;break;case"right":h=-c}return[h,v]}(s,n[0])}function AF(s,n,a,c,h,v,y,x,E,I){s.createArrays(),s.tilePixelRatio=Pn/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const D=s.layers[0].layout,B=s.layers[0]._unevaluatedLayout._values,$={};if(s.textSizeData.kind==="composite"){const{minZoom:re,maxZoom:fe}=s.textSizeData;$.compositeTextSizes=[B["text-size"].possiblyEvaluate(new _e(re),x),B["text-size"].possiblyEvaluate(new _e(fe),x)]}if(s.iconSizeData.kind==="composite"){const{minZoom:re,maxZoom:fe}=s.iconSizeData;$.compositeIconSizes=[B["icon-size"].possiblyEvaluate(new _e(re),x),B["icon-size"].possiblyEvaluate(new _e(fe),x)]}$.layoutTextSize=B["text-size"].possiblyEvaluate(new _e(E+1),x),$.layoutIconSize=B["icon-size"].possiblyEvaluate(new _e(E+1),x),$.textMaxSize=B["text-size"].possiblyEvaluate(new _e(18),x);const X=D.get("text-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",J=D.get("text-size");for(const re of s.features){const fe=D.get("text-font").evaluate(re,{},x).join(","),Ae=J.evaluate(re,{},x),je=$.layoutTextSize.evaluate(re,{},x),ke=($.layoutIconSize.evaluate(re,{},x),{horizontal:{},vertical:void 0}),Ne=re.text;let Je,Ue=[0,0];if(Ne){const Mt=Ne.toString(),Jt=D.get("text-letter-spacing").evaluate(re,{},x)*Ai,xt=D.get("text-line-height").evaluate(re,{},x)*Ai,Lt=i_(Mt)?Jt:0,Vt=D.get("text-anchor").evaluate(re,{},x),Ft=D.get("text-variable-anchor");if(!Ft){const Tn=D.get("text-radial-offset").evaluate(re,{},x);Ue=Tn?x2(Vt,[Tn*Ai,V_]):D.get("text-offset").evaluate(re,{},x).map(nn=>nn*Ai)}let Xt=X?"center":D.get("text-justify").evaluate(re,{},x);const Ut=D.get("symbol-placement"),un=Ut==="point",$n=Ut==="point"?D.get("text-max-width").evaluate(re,{},x)*Ai:0,Vn=Tn=>{s.allowVerticalPlacement&&jc(Mt)&&(ke.vertical=B_(Ne,n,a,h,fe,$n,xt,Vt,Tn,Lt,Ue,Mo.vertical,!0,Ut,je,Ae))};if(!X&&Ft){const Tn=Xt==="auto"?Ft.map(Qn=>U_(Qn)):[Xt];let nn=!1;for(let Qn=0;Qn<Tn.length;Qn++){const Rn=Tn[Qn];if(!ke.horizontal[Rn])if(nn)ke.horizontal[Rn]=ke.horizontal[0];else{const hn=B_(Ne,n,a,h,fe,$n,xt,"center",Rn,Lt,Ue,Mo.horizontal,!1,Ut,je,Ae);hn&&(ke.horizontal[Rn]=hn,nn=hn.positionedLines.length===1)}}Vn("left")}else{if(Xt==="auto"&&(Xt=U_(Vt)),un||D.get("text-writing-mode").indexOf("horizontal")>=0||!jc(Mt)){const Tn=B_(Ne,n,a,h,fe,$n,xt,Vt,Xt,Lt,Ue,Mo.horizontal,!1,Ut,je,Ae);Tn&&(ke.horizontal[Xt]=Tn)}Vn(Ut==="point"?"left":Xt)}}let gt=!1;if(re.icon&&re.icon.name){const Mt=c[re.icon.name];Mt&&(Je=xF(h[re.icon.name],D.get("icon-offset").evaluate(re,{},x),D.get("icon-anchor").evaluate(re,{},x)),gt=Mt.sdf,s.sdfIcons===void 0?s.sdfIcons=Mt.sdf:s.sdfIcons!==Mt.sdf&&Re("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Mt.pixelRatio!==s.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const ft=w2(ke.horizontal)||ke.vertical;s.iconsInText||(s.iconsInText=!!ft&&ft.iconsInText),(ft||Je)&&MF(s,re,ke,Je,c,$,je,0,Ue,gt,y,x,I)}v&&s.generateCollisionDebugBuffers(E,s.collisionBoxArray)}function U_(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function MF(s,n,a,c,h,v,y,x,E,I,D,B,$){let X=v.textMaxSize.evaluate(n,{},B);X===void 0&&(X=y);const J=s.layers[0].layout,re=J.get("icon-offset").evaluate(n,{},B),fe=w2(a.horizontal)||a.vertical,Ae=$.name==="globe",je=y/24,ke=s.tilePixelRatio*X/24,Ne=(Lt=s.overscaling,s.zoom>18&&Lt>2&&(Lt>>=1),Math.max(Pn/(512*Lt),1)*J.get("symbol-spacing")),Je=J.get("text-padding")*s.tilePixelRatio,Ue=J.get("icon-padding")*s.tilePixelRatio,gt=R(J.get("text-max-angle")),ft=J.get("text-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Mt=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Jt=J.get("symbol-placement"),xt=Ne/2;var Lt;const Vt=J.get("icon-text-fit");let Ft;c&&Vt!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(Ft=u2(c,a.vertical,Vt,J.get("icon-text-fit-padding"),re,je)),fe&&(c=u2(c,fe,Vt,J.get("icon-text-fit-padding"),re,je)));const Xt=(Ut,un,$n)=>{if(un.x<0||un.x>=Pn||un.y<0||un.y>=Pn)return;let Vn=null;if(Ae){const{x:Tn,y:nn,z:Qn}=$.projectTilePoint(un.x,un.y,$n);Vn={anchor:new ws(Tn,nn,Qn,0,void 0),up:$.upVector($n,un.x,un.y)}}(function(Tn,nn,Qn,Rn,hn,Fr,Dr,Hr,Gn,dr,Br,Rr,Ar,Ur,Zr,xi,ro,or,ti,Fi,xr,Xr,Gi,qr,oi){const bi=Tn.addToLineVertexArray(nn,Rn);let mi,Mi,Hi,wi,Ss,ad,Ph,Ah=0,oT=0,aT=0,sT=0,a0=-1,s0=-1;const Va={};let lT=eh("");const Eu=Qn?Qn.anchor:nn;let l0=0,u0=0;if(Gn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[l0,u0]=Gn.layout.get("text-offset").evaluate(xr,{},oi).map(yo=>yo*Ai):(l0=Gn.layout.get("text-radial-offset").evaluate(xr,{},oi)*Ai,u0=V_),Tn.allowVerticalPlacement&&hn.vertical){const yo=hn.vertical;if(Zr)ad=K_(yo),Hr&&(Ph=K_(Hr));else{const _o=Gn.layout.get("text-rotate").evaluate(xr,{},oi)+90;Hi=uv(dr,Eu,nn,Br,Rr,Ar,yo,Ur,_o,xi),Hr&&(wi=uv(dr,Eu,nn,Br,Rr,Ar,Hr,or,_o))}}if(Fr){const yo=Gn.layout.get("icon-rotate").evaluate(xr,{},oi),_o=Gn.layout.get("icon-text-fit")!=="none",Mh=y2(Fr,yo,Gi,_o),d0=Hr?y2(Hr,yo,Gi,_o):void 0;Mi=uv(dr,Eu,nn,Br,Rr,Ar,Fr,or,yo),Ah=4*Mh.length;const uT=Tn.iconSizeData;let Iu=null;uT.kind==="source"?(Iu=[Fa*Gn.layout.get("icon-size").evaluate(xr,{},oi)],Iu[0]>hl&&Re(`${Tn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):uT.kind==="composite"&&(Iu=[Fa*Xr.compositeIconSizes[0].evaluate(xr,{},oi),Fa*Xr.compositeIconSizes[1].evaluate(xr,{},oi)],(Iu[0]>hl||Iu[1]>hl)&&Re(`${Tn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Tn.addSymbols(Tn.icon,Mh,Iu,Fi,ti,xr,!1,Qn,nn,bi.lineStartIndex,bi.lineLength,-1,qr,oi),a0=Tn.icon.placedSymbolArray.length-1,d0&&(oT=4*d0.length,Tn.addSymbols(Tn.icon,d0,Iu,Fi,ti,xr,Mo.vertical,Qn,nn,bi.lineStartIndex,bi.lineLength,-1,qr,oi),s0=Tn.icon.placedSymbolArray.length-1)}for(const yo in hn.horizontal){const _o=hn.horizontal[yo];mi||(lT=eh(_o.text),Zr?Ss=K_(_o):mi=uv(dr,Eu,nn,Br,Rr,Ar,_o,Ur,Gn.layout.get("text-rotate").evaluate(xr,{},oi),xi));const Mh=_o.positionedLines.length===1;if(aT+=b2(Tn,Qn,nn,_o,Dr,Gn,Zr,xr,xi,bi,hn.vertical?Mo.horizontal:Mo.horizontalOnly,Mh?Object.keys(hn.horizontal):[yo],Va,a0,Xr,qr,oi),Mh)break}hn.vertical&&(sT+=b2(Tn,Qn,nn,hn.vertical,Dr,Gn,Zr,xr,xi,bi,Mo.vertical,["vertical"],Va,s0,Xr,qr,oi));let _l=-1;const c0=(yo,_o)=>yo?Math.max(yo,_o):_o;_l=c0(Ss,_l),_l=c0(ad,_l),_l=c0(Ph,_l);const l4=_l>-1?1:0;Tn.glyphOffsetArray.length>=ml.MAX_GLYPHS&&Re("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xr.sortKey!==void 0&&Tn.addToSortKeyRanges(Tn.symbolInstances.length,xr.sortKey),Tn.symbolInstances.emplaceBack(Eu.x,Eu.y,Eu.z,nn.x,nn.y,Va.right>=0?Va.right:-1,Va.center>=0?Va.center:-1,Va.left>=0?Va.left:-1,Va.vertical>=0?Va.vertical:-1,a0,s0,lT,mi!==void 0?mi:Tn.collisionBoxArray.length,mi!==void 0?mi+1:Tn.collisionBoxArray.length,Hi!==void 0?Hi:Tn.collisionBoxArray.length,Hi!==void 0?Hi+1:Tn.collisionBoxArray.length,Mi!==void 0?Mi:Tn.collisionBoxArray.length,Mi!==void 0?Mi+1:Tn.collisionBoxArray.length,wi||Tn.collisionBoxArray.length,wi?wi+1:Tn.collisionBoxArray.length,Br,aT,sT,Ah,oT,l4,0,l0,u0,_l)})(s,un,Vn,Ut,a,c,h,Ft,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,Je,ft,E,0,Ue,Mt,re,n,v,I,D,B)};if(Jt==="line")for(const Ut of m2(n.geometry,0,0,Pn,Pn)){const un=wF(Ut,Ne,gt,a.vertical||fe,c,24,ke,s.overscaling,Pn);for(const $n of un){const Vn=fe;Vn&&kF(s,Vn.text,xt,$n)||Xt(Ut,$n,B)}}else if(Jt==="line-center"){for(const Ut of n.geometry)if(Ut.length>1){const un=bF(Ut,gt,a.vertical||fe,c,24,ke);un&&Xt(Ut,un,B)}}else if(n.type==="Polygon")for(const Ut of k_(n.geometry,0)){const un=EF(Ut,16);Xt(Ut[0],new ws(un.x,un.y,0,0,void 0),B)}else if(n.type==="LineString")for(const Ut of n.geometry)Xt(Ut,new ws(Ut[0].x,Ut[0].y,0,0,void 0),B);else if(n.type==="Point")for(const Ut of n.geometry)for(const un of Ut)Xt([un],new ws(un.x,un.y,0,0,void 0),B)}const hl=32640;function b2(s,n,a,c,h,v,y,x,E,I,D,B,$,X,J,re,fe){const Ae=function(Ne,Je,Ue,gt,ft,Mt,Jt,xt){const Lt=[];if(Je.positionedLines.length===0)return Lt;const Vt=gt.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,Ft=function(Vn){const Tn=Vn[0],nn=Vn[1],Qn=Tn*nn;return Qn>0?[Tn,-nn]:Qn<0?[-Tn,nn]:Tn===0?[nn,Tn]:[nn,-Tn]}(Ue);let Xt=Math.abs(Je.top-Je.bottom);for(const Vn of Je.positionedLines)Xt-=Vn.lineOffset;const Ut=Je.positionedLines.length,un=Xt/Ut;let $n=Je.top-Ue[1];for(let Vn=0;Vn<Ut;++Vn){const Tn=Je.positionedLines[Vn];$n=CF(Je,un,$n,Vn);for(const nn of Tn.positionedGlyphs){if(!nn.rect)continue;const Qn=nn.rect||{};let Rn=4,hn=!0,Fr=1,Dr=0;if(nn.imageName){const qr=Jt[nn.imageName];if(!qr)continue;if(qr.sdf){Re("SDF images are not supported in formatted text and will be ignored.");continue}hn=!1,Fr=qr.pixelRatio,Rn=1/Fr}const Hr=(ft||xt)&&nn.vertical,Gn=nn.metrics.advance*nn.scale/2,dr=nn.metrics,Br=nn.rect;if(Br===null)continue;xt&&Je.verticalizable&&(Dr=nn.imageName?Gn-nn.metrics.width*nn.scale/2:0);const Rr=ft?[nn.x+Gn,nn.y]:[0,0];let Ar=[0,0],Ur=[0,0],Zr=!1;ft||(Hr?(Ur=[nn.x+Gn+Ft[0],nn.y+Ft[1]-Dr],Zr=!0):Ar=[nn.x+Gn+Ue[0],nn.y+Ue[1]-Dr]);const xi=Br.w*nn.scale/(Fr*(nn.localGlyph?2:1)),ro=Br.h*nn.scale/(Fr*(nn.localGlyph?2:1));let or,ti,Fi,xr;if(Hr){const qr=nn.y-$n,oi=new S(-Gn,Gn-qr),bi=-Math.PI/2,mi=new S(...Ur);or=new S(-Gn+Ar[0],Ar[1]),or._rotateAround(bi,oi)._add(mi),or.x+=-qr+Gn,or.y-=(dr.left-Rn)*nn.scale;const Mi=nn.imageName?dr.advance*nn.scale:Ai*nn.scale,Hi=String.fromCharCode(nn.glyph);iF(Hi)?or.x+=(1-Rn)*nn.scale:oF(Hi)?or.x+=Mi-dr.height*nn.scale+(-Rn-1)*nn.scale:or.x+=nn.imageName||dr.width+2*Rn===Br.w&&dr.height+2*Rn===Br.h?(Mi-ro)/2:(Mi-(dr.height+2*Rn)*nn.scale)/2,ti=new S(or.x,or.y-xi),Fi=new S(or.x+ro,or.y),xr=new S(or.x+ro,or.y-xi)}else{const qr=(dr.left-Rn)*nn.scale-Gn+Ar[0],oi=(-dr.top-Rn)*nn.scale+Ar[1],bi=qr+xi,mi=oi+ro;or=new S(qr,oi),ti=new S(bi,oi),Fi=new S(qr,mi),xr=new S(bi,mi)}if(Vt){let qr;qr=ft?new S(0,0):Zr?new S(Ft[0],Ft[1]):new S(Ue[0],Ue[1]),or._rotateAround(Vt,qr),ti._rotateAround(Vt,qr),Fi._rotateAround(Vt,qr),xr._rotateAround(Vt,qr)}const Xr=new S(0,0),Gi=new S(0,0);Lt.push({tl:or,tr:ti,bl:Fi,br:xr,tex:Qn,writingMode:Je.writingMode,glyphOffset:Rr,sectionIndex:nn.sectionIndex,isSDF:hn,pixelOffsetTL:Xr,pixelOffsetBR:Gi,minFontScaleX:0,minFontScaleY:0})}}return Lt}(0,c,E,v,y,x,h,s.allowVerticalPlacement),je=s.textSizeData;let ke=null;je.kind==="source"?(ke=[Fa*v.layout.get("text-size").evaluate(x,{},fe)],ke[0]>hl&&Re(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):je.kind==="composite"&&(ke=[Fa*J.compositeTextSizes[0].evaluate(x,{},fe),Fa*J.compositeTextSizes[1].evaluate(x,{},fe)],(ke[0]>hl||ke[1]>hl)&&Re(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,Ae,ke,E,y,x,D,n,a,I.lineStartIndex,I.lineLength,X,re,fe);for(const Ne of B)$[Ne]=s.text.placedSymbolArray.length-1;return 4*Ae.length}function w2(s){for(const n in s)return s[n];return null}function uv(s,n,a,c,h,v,y,x,E,I){let D=y.top,B=y.bottom,$=y.left,X=y.right;const J=y.collisionPadding;if(J&&($-=J[0],D-=J[1],X+=J[2],B+=J[3]),E){const re=new S($,D),fe=new S(X,D),Ae=new S($,B),je=new S(X,B),ke=R(E);let Ne=new S(0,0);I&&(Ne=new S(I[0],I[1])),re._rotateAround(ke,Ne),fe._rotateAround(ke,Ne),Ae._rotateAround(ke,Ne),je._rotateAround(ke,Ne),$=Math.min(re.x,fe.x,Ae.x,je.x),X=Math.max(re.x,fe.x,Ae.x,je.x),D=Math.min(re.y,fe.y,Ae.y,je.y),B=Math.max(re.y,fe.y,Ae.y,je.y)}return s.emplaceBack(n.x,n.y,n.z,a.x,a.y,$,D,X,B,x,c,h,v),s.length-1}function K_(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const n=s.bottom-s.top;return n>0?Math.max(10,n):null}function kF(s,n,a,c){const h=s.compareText;if(n in h){const v=h[n];for(let y=v.length-1;y>=0;y--)if(c.dist(v[y])<a)return!0}else h[n]=[];return h[n].push(c),!1}const OF=Nt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:C2}=OF,S2=Nt([{name:"a_pos_3",components:3,type:"Int16"}]);var yh=Nt([{name:"a_pos",type:"Int16",components:2}]);const Cs=Pn/Math.PI/2,G_=2*qo(1,0)*Cs*Math.PI,nd=[64,32,16],ha=-Cs,pa=Cs,DF=[new no([ha,ha,ha],[pa,pa,pa]),new no([ha,ha,ha],[0,0,pa]),new no([0,ha,ha],[pa,0,pa]),new no([ha,0,ha],[0,pa,pa]),new no([0,0,ha],[pa,pa,pa])];function T2(s,n,a,c=!0){const h=da([],s._camera.position,s.worldSize),v=[n,a,1,1];bu(v,v,s.pixelMatrixInverse),gS(v,v,1/v[3]);const y=Ui([],fa([],v,h)),x=s.globeMatrix,E=[x[12],x[13],x[14]],I=fa([],E,h),D=rh(I),B=Ui([],I),$=s.worldSize/(2*Math.PI),X=Zo(B,y),J=Math.asin($/D);if(J<Math.acos(X)){if(!c)return null;const Jt=[],xt=[];da(Jt,y,D/X),Ui(xt,fa(xt,Jt,I)),Ui(y,fl(y,I,da(y,xt,Math.tan(J)*D)))}const re=[];new C_(h,y).closestPointOnSphere(E,$,re);const fe=Ui([],kt(x,0)),Ae=Ui([],kt(x,1)),je=Ui([],kt(x,2)),ke=Zo(fe,re),Ne=Zo(Ae,re),Je=Zo(je,re),Ue=z(Math.asin(-Ne/$));let gt=z(Math.atan2(ke,Je));gt=s.center.lng+function(Jt,xt){const Lt=(xt-Jt+180)%360-180;return Lt<-180?Lt+360:Lt}(s.center.lng,gt);const ft=Ra(gt),Mt=q(ys(Ue),0,1);return new Kc(ft,Mt)}class RF{constructor(n,a,c){this.a=fa([],n,c),this.b=fa([],a,c),this.center=c;const h=Ui([],this.a),v=Ui([],this.b);this.angle=Math.acos(Zo(h,v))}}function H_(s,n){if(s.angle===0)return null;let a;return a=s.a[n]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[n]/s.a[n]/Math.sin(s.angle)-1/Math.tan(s.angle)),a<0||a>1?null:function(c,h,v,y){const x=Math.sin(v);return c*(Math.sin((1-y)*v)/x)+h*(Math.sin(y*v)/x)}(s.a[n],s.b[n],s.angle,q(a,0,1))+s.center[n]}function Ba(s){if(s.z<=1)return DF[s.z+2*s.y+s.x];const n=q_(cv(s));return no.fromPoints(n)}function E2(s,n){const a=bh(n.zoom);if(a===0)return Ba(s);const c=cv(s),h=q_(c),v=Ra(c.getWest())*n.worldSize,y=Ra(c.getEast())*n.worldSize,x=ys(c.getNorth())*n.worldSize,E=ys(c.getSouth())*n.worldSize,I=[v,x,0],D=[y,x,0],B=[v,E,0],$=[y,E,0],X=v_([],n.globeMatrix);return fi(I,I,X),fi(D,D,X),fi(B,B,X),fi($,$,X),h[0]=Xs(h[0],B,a),h[1]=Xs(h[1],$,a),h[2]=Xs(h[2],D,a),h[3]=Xs(h[3],I,a),no.fromPoints(h)}function I2(s,n,a,c,h){for(const v of a)fi(v,v,c),da(v,v,h),x_(s,s,v),b_(n,n,v)}function zF(s,n,a){const c=n/s.worldSize,h=Number.MAX_VALUE,v=[-h,-h,-h],y=[h,h,h],x=s.globeMatrix;if(a.z<=1)return I2(y,v,Ba(a).getCorners(),x,c),new no(y,v);const E=cv(a),I=q_(E);if(I2(y,v,I,x,c),E.contains(s.center)){v[2]=0;const gt=s.point,ft=[gt.x*c,gt.y*c,0];return x_(y,y,ft),b_(v,v,ft),new no(y,v)}const D=[x[12]*c,x[13]*c,x[14]*c],B=E.getCenter(),$=q(s.center.lat,-85.051129,za),X=q(B.lat,-85.051129,za),J=Ra(s.center.lng),re=ys($);let fe=J-Ra(B.lng);const Ae=re-ys(X);fe>.5?fe-=1:fe<-.5&&(fe+=1);let je=0;Math.abs(fe)>Math.abs(Ae)?je=fe>=0?1:3:(je=Ae>=0?0:2,Hm(D,D,[x[4]*c,x[5]*c,x[6]*c],-Math.sin(R(Ae>=0?E.getSouth():E.getNorth()))*Cs));const ke=I[je],Ne=I[(je+1)%4],Je=new RF(ke,Ne,D),Ue=[H_(Je,0)||ke[0],H_(Je,1)||ke[1],H_(Je,2)||ke[2]];return y[2]=Math.min(ke[2],Ne[2]),x_(y,y,Ue),b_(v,v,Ue),new no(y,v)}function cv({x:s,y:n,z:a}){const c=1/(1<<a),h=new Sr(Wo(s*c),Pi((n+1)*c)),v=new Sr(Wo((s+1)*c),Pi(n*c));return new dl(h,v)}function q_(s){const n=R(s.getNorth()),a=R(s.getSouth()),c=Math.cos(n),h=Math.cos(a),v=Math.sin(n),y=Math.sin(a),x=s.getWest(),E=s.getEast();return[rd(h,y,x),rd(h,y,E),rd(c,v,E),rd(c,v,x)]}function rd(s,n,a,c=Cs){return a=R(a),[s*Math.sin(a)*c,-n*c,s*Math.cos(a)*c]}function dv(s,n,a){return rd(Math.cos(R(s)),Math.sin(R(s)),n,a)}function _h(s,n,a,c){const h=1<<a.z,v=(s/Pn+a.x)/h;return dv(Pi((n/Pn+a.y)/h),Wo(v),c)}function fv({min:s,max:n}){return 16383/Math.max(n[0]-s[0],n[1]-s[1],n[2]-s[2])}const P2=new Float64Array(16);function xh(s){const n=fv(s),a=fS(P2,[n,n,n]);return nh(a,a,((c=[])[0]=-(h=s.min)[0],c[1]=-h[1],c[2]=-h[2],c));var c,h}function W_(s){const n=(c=s.min,(a=P2)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a);var a,c;const h=1/fv(s);return xu(n,n,[h,h,h])}function A2(s,n,a,c,h){const v=function(E){const I=Pn/(2*Math.PI);return E/(2*Math.PI)/I}(a),y=[s,n,-a/(2*Math.PI)],x=La(new Float64Array(16));return nh(x,x,y),xu(x,x,[v,v,v]),g_(x,x,R(-h)),Gm(x,x,R(-c)),x}function bh(s){return V(5,6,s)}function M2(s,n){const a=dv(n.lat,n.lng);return v=(c=__([],function(X){const J=dv(X._center.lat,X._center.lng);let re=w_([],qc(0,1,0),J);const fe=hS([],-X.angle,J);re=fi(re,re,fe),hS(fe,-X._pitch,re);const Ae=Ui([],J);return da(Ae,Ae,X.cameraToCenterDistance/X.pixelsPerMeter*G_),fi(Ae,Ae,fe),fl([],J,Ae)}(s),a))[0],y=c[1],x=c[2],E=(h=a)[0],I=h[1],D=h[2],$=(B=Math.sqrt(v*v+y*y+x*x)*Math.sqrt(E*E+I*I+D*D))&&Zo(c,h)/B,Math.acos(Math.min(Math.max($,-1),1));var c,h,v,y,x,E,I,D,B,$}const k2=R(85),LF=Math.cos(k2),FF=Math.sin(k2);function O2(s,n){const a=s.fovAboveCenter,c=s.elevation?s.elevation.getMinElevationBelowMSL()*n:0,h=(s._camera.position[2]*s.worldSize-c)/Math.cos(s._pitch),v=Math.sin(a)*h/Math.sin(Math.max(Math.PI/2-s._pitch-a,.01)),y=Math.sin(s._pitch)*v+h;return Math.min(1.01*y,h*(1/s._horizonShift))}function Su(s,n){if(!n.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:n};const a=Math.pow(2,-s.z),c=s.x*a,h=(s.x+1)*a,v=s.y*a,y=(s.y+1)*a,x=Wo(c),E=Wo(h),I=Pi(v),D=Pi(y),B=n.project(x,I),$=n.project(E,I),X=n.project(E,D),J=n.project(x,D);let re=Math.min(B.x,$.x,X.x,J.x),fe=Math.min(B.y,$.y,X.y,J.y),Ae=Math.max(B.x,$.x,X.x,J.x),je=Math.max(B.y,$.y,X.y,J.y);const ke=a/16;function Ne(Ue,gt,ft,Mt,Jt,xt){const Lt=(ft+Jt)/2,Vt=(Mt+xt)/2,Ft=n.project(Wo(Lt),Pi(Vt)),Xt=Math.max(0,re-Ft.x,fe-Ft.y,Ft.x-Ae,Ft.y-je);re=Math.min(re,Ft.x),Ae=Math.max(Ae,Ft.x),fe=Math.min(fe,Ft.y),je=Math.max(je,Ft.y),Xt>ke&&(Ne(Ue,Ft,ft,Mt,Lt,Vt),Ne(Ft,gt,Lt,Vt,Jt,xt))}Ne(B,$,c,v,h,v),Ne($,X,h,v,h,y),Ne(X,J,h,y,c,y),Ne(J,B,c,y,c,v),re-=ke,fe-=ke,Ae+=ke,je+=ke;const Je=1/Math.max(Ae-re,je-fe);return{scale:Je,x:re*Je,y:fe*Je,x2:Ae*Je,y2:je*Je,projection:n}}const BF=La(new Float32Array(16));class pl{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,a){return{x:0,y:0,z:0}}unproject(n,a){return new Sr(0,0)}projectTilePoint(n,a,c){return{x:n,y:a,z:0}}locationPoint(n,a,c=!0){return n._coordinatePoint(n.locationCoordinate(a),c)}pixelsPerMeter(n,a){return qo(1,n)*a}pixelSpaceConversion(n,a,c){return 1}farthestPixelDistance(n){return O2(n,n.pixelsPerMeter)}pointCoordinate(n,a,c,h){const v=n.horizonLineFromTop(!1),y=new S(a,Math.max(v,c));return n.rayIntersectionCoordinate(n.pointRayIntersection(y,h))}pointCoordinate3D(n,a,c){const h=new S(a,c);if(n.elevation)return n.elevation.pointCoordinate(h);{const v=this.pointCoordinate(n,h.x,h.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(n,a){if(n.elevation)return!this.pointCoordinate3D(n,a.x,a.y);const c=n.horizonLineFromTop();return a.y<c}createInversionMatrix(n,a){return BF}createTileMatrix(n,a,c){let h,v,y;const x=c.canonical,E=La(new Float64Array(16));if(this.isReprojectedInTileSpace){const I=Su(x,this);h=1,v=I.x+c.wrap*I.scale,y=I.y,xu(E,E,[h/I.scale,h/I.scale,n.pixelsPerMeter/a])}else h=a/n.zoomScale(x.z),v=(x.x+Math.pow(2,x.z)*c.wrap)*h,y=x.y*h;return nh(E,E,[v,y,0]),xu(E,E,[h/Pn,h/Pn,1]),E}upVector(n,a,c){return[0,0,1]}upVectorScale(n,a,c){return{metersToTile:1}}}class NF extends pl{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[a,c]=this.parallels=n.parallels||[29.5,45.5],h=Math.sin(R(a));this.n=(h+Math.sin(R(c)))/2,this.c=1+h*(2*this.n-h),this.r0=Math.sqrt(this.c)/this.n}project(n,a){const{n:c,c:h,r0:v}=this,y=R(n-this.center[0]),x=R(a),E=Math.sqrt(h-2*c*Math.sin(x))/c;return{x:E*Math.sin(y*c),y:E*Math.cos(y*c)-v,z:0}}unproject(n,a){const{n:c,c:h,r0:v}=this,y=v+a;let x=Math.atan2(n,Math.abs(y))*Math.sign(y);y*c<0&&(x-=Math.PI*Math.sign(n)*Math.sign(y));const E=R(this.center[0])*c;x=Z(x,-Math.PI-E,Math.PI-E);const I=z(x/c)+this.center[0],D=Math.asin(q((h-(n*n+y*y)*c*c)/(2*c),-1,1)),B=q(z(D),-85.051129,za);return new Sr(I,B)}}const wh=1.340264,Ch=-.081106,Sh=893e-6,Th=.003796,hv=Math.sqrt(3)/2;class $F extends pl{project(n,a){a=a/180*Math.PI,n=n/180*Math.PI;const c=Math.asin(hv*Math.sin(a)),h=c*c,v=h*h*h;return{x:.5*(n*Math.cos(c)/(hv*(wh+3*Ch*h+v*(7*Sh+9*Th*h)))/Math.PI+.5),y:1-.5*(c*(wh+Ch*h+v*(Sh+Th*h))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let c=a=(2*(1-a)-1)*Math.PI,h=c*c,v=h*h*h;for(let D,B,$,X=0;X<12&&(B=c*(wh+Ch*h+v*(Sh+Th*h))-a,$=wh+3*Ch*h+v*(7*Sh+9*Th*h),D=B/$,c=q(c-D,-Math.PI/3,Math.PI/3),h=c*c,v=h*h*h,!(Math.abs(D)<1e-12));++X);const y=hv*n*(wh+3*Ch*h+v*(7*Sh+9*Th*h))/Math.cos(c),x=Math.asin(Math.sin(c)/hv),E=q(180*y/Math.PI,-180,180),I=q(180*x/Math.PI,-85.051129,za);return new Sr(E,I)}}class jF extends pl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){return{x:.5+n/360,y:.5-a/360,z:0}}unproject(n,a){const c=360*(n-.5),h=q(360*(.5-a),-85.051129,za);return new Sr(c,h)}}const id=Math.PI/2;function pv(s){return Math.tan((id+s)/2)}class VF extends pl{constructor(n){super(n),this.center=n.center||[0,30];const[a,c]=this.parallels=n.parallels||[30,30],h=R(a),v=R(c),y=Math.cos(h);this.n=h===v?Math.sin(h):Math.log(y/Math.cos(v))/Math.log(pv(v)/pv(h)),this.f=y*Math.pow(pv(h),this.n)/this.n}project(n,a){a=R(a),n=R(n-this.center[0]);const c=1e-6,{n:h,f:v}=this;v>0?a<-id+c&&(a=-id+c):a>id-c&&(a=id-c);const y=v/Math.pow(pv(a),h),x=y*Math.sin(h*n),E=v-y*Math.cos(h*n);return{x:.5*(x/Math.PI+.5),y:1-.5*(E/Math.PI+.5),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI,a=(2*(1-a)-.5)*Math.PI;const{n:c,f:h}=this,v=h-a,y=Math.sign(v),x=Math.sign(c)*Math.sqrt(n*n+v*v);let E=Math.atan2(n,Math.abs(v))*y;v*c<0&&(E-=Math.PI*Math.sign(n)*y);const I=q(z(E/c)+this.center[0],-180,180),D=q(z(2*Math.atan(Math.pow(h/x,1/c))-id),-85.051129,za);return new Sr(I,D)}}class D2 extends pl{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,a){return{x:Ra(n),y:ys(a),z:0}}unproject(n,a){const c=Wo(n),h=Pi(a);return new Sr(c,h)}}const R2=R(za);class UF extends pl{project(n,a){const c=(a=R(a))*a,h=c*c;return{x:.5*((n=R(n))*(.8707-.131979*c+h*(h*(.003971*c-.001529*h)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+c*(.015085+h*(.028874*c-.044475-.005916*h)))/Math.PI+1),z:0}}unproject(n,a){n=(2*n-.5)*Math.PI;let c=a=(2*(1-a)-1)*Math.PI,h=25,v=0,y=c*c;do{y=c*c;const I=y*y;v=(c*(1.007226+y*(.015085+I*(.028874*y-.044475-.005916*I)))-a)/(1.007226+y*(.045255+I*(.259866*y-.311325-.005916*11*I))),c=q(c-v,-R2,R2)}while(Math.abs(v)>1e-6&&--h>0);y=c*c;const x=q(z(n/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),E=z(c);return new Sr(x,E)}}const z2=R(za);class KF extends pl{project(n,a){a=R(a),n=R(n);const c=Math.cos(a),h=2/Math.PI,v=Math.acos(c*Math.cos(n/2)),y=Math.sin(v)/v,x=.5*(n*h+2*c*Math.sin(n/2)/y)||0,E=.5*(a+Math.sin(a)/y)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(n,a){let c=n=(2*n-.5)*Math.PI,h=a=(2*(1-a)-1)*Math.PI,v=25;const y=1e-6;let x=0,E=0;do{const I=Math.cos(h),D=Math.sin(h),B=2*D*I,$=D*D,X=I*I,J=Math.cos(c/2),re=Math.sin(c/2),fe=2*J*re,Ae=re*re,je=1-X*J*J,ke=je?1/je:0,Ne=je?Math.acos(I*J)*Math.sqrt(1/je):0,Je=.5*(2*Ne*I*re+2*c/Math.PI)-n,Ue=.5*(Ne*D+h)-a,gt=.5*ke*(X*Ae+Ne*I*J*$)+1/Math.PI,ft=ke*(fe*B/4-Ne*D*re),Mt=.125*ke*(B*re-Ne*D*X*fe),Jt=.5*ke*($*J+Ne*Ae*I)+.5,xt=ft*Mt-Jt*gt;x=(Ue*ft-Je*Jt)/xt,E=(Je*Mt-Ue*gt)/xt,c=q(c-x,-Math.PI,Math.PI),h=q(h-E,-z2,z2)}while((Math.abs(x)>y||Math.abs(E)>y)&&--v>0);return new Sr(z(c),z(h))}}class L2 extends pl{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(R(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,a){const{scale:c,cosPhi:h}=this;return{x:R(n)*h*c+.5,y:-Math.sin(R(a))/h*c+.5,z:0}}unproject(n,a){const{scale:c,cosPhi:h}=this,v=-(a-.5)/c,y=q(z((n-.5)/c)/h,-180,180),x=Math.asin(q(v*h,-1,1)),E=q(z(x),-85.051129,za);return new Sr(y,E)}}class GF extends D2{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(n,a,c){const h=_h(n,a,c);return fi(h,h,xh(Ba(c))),{x:h[0],y:h[1],z:h[2]}}locationPoint(n,a){const c=dv(a.lat,a.lng),h=Ui([],c),v=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(a),n._centerAltitude):n._centerAltitude;Hm(c,c,h,qo(1,0)*Pn*v);const y=La(new Float64Array(16));return Hc(y,n.pixelMatrix,n.globeMatrix),fi(c,c,y),new S(c[0],c[1])}pixelsPerMeter(n,a){return qo(1,0)*a}pixelSpaceConversion(n,a,c){const h=ur(qo(1,45)*a,qo(1,n)*a,c);return this.pixelsPerMeter(n,a)/h}createTileMatrix(n,a,c){const h=W_(Ba(c.canonical));return Hc(new Float64Array(16),n.globeMatrix,h)}createInversionMatrix(n,a){const{center:c}=n,h=xh(Ba(a));return Gm(h,h,R(c.lng)),g_(h,h,R(c.lat)),xu(h,h,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(h)}pointCoordinate(n,a,c,h){return T2(n,a,c,!0)||new Kc(0,0)}pointCoordinate3D(n,a,c){const h=this.pointCoordinate(n,a,c,0);return[h.x,h.y,h.z]}isPointAboveHorizon(n,a){return!T2(n,a.x,a.y,!1)}farthestPixelDistance(n){const a=function(h,v){const y=h.cameraToCenterDistance,x=h._centerAltitude*v,E=h._camera,I=h._camera.forward(),D=fl([],da([],I,-y),[0,0,x]),B=h.worldSize/(2*Math.PI),$=[0,0,-B],X=h.width/h.height,J=Math.tan(h.fovAboveCenter),re=da([],E.up(),J),fe=da([],E.right(),J*X),Ae=Ui([],fl([],fl([],I,re),fe)),je=[];let ke;if(new C_(D,Ae).closestPointOnSphere($,B,je)){const Ne=fl([],je,$),Je=fa([],Ne,D);ke=Math.cos(h.fovAboveCenter)*rh(Je)}else{const Ne=fa([],D,$),Je=fa([],$,D);Ui(Je,Je);const Ue=rh(Ne)-B;ke=Math.sqrt(Ue*(Ue+2*B));const gt=Math.acos(ke/(B+Ue))-Math.acos(Zo(I,Je));ke*=Math.cos(gt)}return 1.01*ke}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),c=bh(n.zoom);if(c>0){const h=O2(n,qo(1,n.center.lat)*n.worldSize),v=n.worldSize/(2*Math.PI),y=Math.max(n.width,n.height)/n.worldSize*Math.PI;return ur(a,h+v*(1-Math.cos(y)),Math.pow(c,10))}return a}upVector(n,a,c){return _h(a,c,n,1)}upVectorScale(n){return{metersToTile:G_*fv(Ba(n))}}}function F2(s){const n=s.parallels,a=!!n&&Math.abs(n[0]+n[1])<.01;switch(s.name){case"mercator":return new D2(s);case"equirectangular":return new jF(s);case"naturalEarth":return new UF(s);case"equalEarth":return new $F(s);case"winkelTripel":return new KF(s);case"albers":return a?new L2(s):new NF(s);case"lambertConformalConic":return a?new L2(s):new VF(s);case"globe":return new GF(s)}throw new Error(`Invalid projection name: ${s.name}`)}const HF=Cu.VectorTileFeature.types,qF=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function mv(s,n,a,c,h,v,y,x,E,I,D,B,$){const X=x?Math.min(hl,Math.round(x[0])):0,J=x?Math.min(hl,Math.round(x[1])):0;s.emplaceBack(n,a,Math.round(32*c),Math.round(32*h),v,y,(X<<1)+(E?1:0),J,16*I,16*D,256*B,256*$)}function vv(s,n,a,c,h,v,y){s.emplaceBack(n,a,c,h,v,y)}function gv(s,n,a,c,h){s.emplaceBack(n,a,c,h),s.emplaceBack(n,a,c,h),s.emplaceBack(n,a,c,h),s.emplaceBack(n,a,c,h)}function WF(s){for(const n of s.sections)if(f(n.text))return!0;return!1}class Z_{constructor(n){this.layoutVertexArray=new jr,this.indexArray=new qn,this.programConfigurations=n,this.segments=new ci,this.dynamicLayoutVertexArray=new Jn,this.opacityVertexArray=new Pr,this.placedSymbolArray=new FC,this.globeExtVertexArray=new Qr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,c,h){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,XL.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,JL.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,qF,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,YL.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||h)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}pn(Z_,"SymbolBuffers");class X_{constructor(n,a,c){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new c,this.segments=new ci,this.collisionVertexArray=new Vr,this.collisionVertexArrayExt=new Gr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,QL.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,eF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}pn(X_,"CollisionBuffers");class ml{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(y=>y.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=La([]),this.placementViewportMatrix=La([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=R_(this.zoom,a["text-size"]),this.iconSizeData=R_(this.zoom,a["icon-size"]);const c=this.layers[0].layout,h=c.get("symbol-sort-key"),v=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(y=>Mo[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new Z_(new gu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new Z_(new gu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new $C,this.lineVertexArray=new jC,this.symbolInstances=new NC}calculateGlyphDependencies(n,a,c,h,v){for(let y=0;y<n.length;y++)if(a[n.charCodeAt(y)]=!0,h&&v){const x=ph[n.charAt(y)];x&&(a[x.charCodeAt(0)]=!0)}}populate(n,a,c,h){const v=this.layers[0],y=v.layout,x=this.projection.name==="globe",E=y.get("text-font"),I=y.get("text-field"),D=y.get("icon-image"),B=(I.value.kind!=="constant"||I.value.value instanceof ji&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),$=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,X=y.get("symbol-sort-key");if(this.features=[],!B&&!$)return;const J=a.iconDependencies,re=a.glyphDependencies,fe=a.availableImages,Ae=new _e(this.zoom);for(const{feature:je,id:ke,index:Ne,sourceLayerIndex:Je}of n){const Ue=v._featureFilter.needGeometry,gt=yu(je,Ue);if(!v._featureFilter.filter(Ae,gt,c))continue;if(Ue||(gt.geometry=_s(je,c,h)),x&&je.type!==1&&c.z<=5){const xt=gt.geometry,Lt=.98078528056;for(let Vt=0;Vt<xt.length;Vt++)xt[Vt]=Yz(xt[Vt],Ft=>Ft,(Ft,Xt)=>Zo(_h(Ft.x,Ft.y,c,1),_h(Xt.x,Xt.y,c,1))<Lt)}let ft,Mt;if(B){const xt=v.getValueAndResolveTokens("text-field",gt,c,fe),Lt=ji.factory(xt);WF(Lt)&&(this.hasRTLText=!0),(!this.hasRTLText||le()==="unavailable"||this.hasRTLText&&ye.isParsed())&&(ft=rF(Lt,v,gt))}if($){const xt=v.getValueAndResolveTokens("icon-image",gt,c,fe);Mt=xt instanceof Vi?xt:Vi.fromString(xt)}if(!ft&&!Mt)continue;const Jt=this.sortFeaturesByKey?X.evaluate(gt,{},c):void 0;if(this.features.push({id:ke,text:ft,icon:Mt,index:Ne,sourceLayerIndex:Je,geometry:gt.geometry,properties:je.properties,type:HF[je.type],sortKey:Jt}),Mt&&(J[Mt.name]=!0),ft){const xt=E.evaluate(gt,{},c).join(","),Lt=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Mo.vertical)>=0;for(const Vt of ft.sections)if(Vt.image)J[Vt.image.name]=!0;else{const Ft=jc(ft.toString()),Xt=Vt.fontStack||xt,Ut=re[Xt]=re[Xt]||{};this.calculateGlyphDependencies(Vt.text,Ut,Lt,this.allowVerticalPlacement,Ft)}}}y.get("symbol-placement")==="line"&&(this.features=function(je){const ke={},Ne={},Je=[];let Ue=0;function gt(xt){Je.push(je[xt]),Ue++}function ft(xt,Lt,Vt){const Ft=Ne[xt];return delete Ne[xt],Ne[Lt]=Ft,Je[Ft].geometry[0].pop(),Je[Ft].geometry[0]=Je[Ft].geometry[0].concat(Vt[0]),Ft}function Mt(xt,Lt,Vt){const Ft=ke[Lt];return delete ke[Lt],ke[xt]=Ft,Je[Ft].geometry[0].shift(),Je[Ft].geometry[0]=Vt[0].concat(Je[Ft].geometry[0]),Ft}function Jt(xt,Lt,Vt){const Ft=Vt?Lt[0][Lt[0].length-1]:Lt[0][0];return`${xt}:${Ft.x}:${Ft.y}`}for(let xt=0;xt<je.length;xt++){const Lt=je[xt],Vt=Lt.geometry,Ft=Lt.text?Lt.text.toString():null;if(!Ft){gt(xt);continue}const Xt=Jt(Ft,Vt),Ut=Jt(Ft,Vt,!0);if(Xt in Ne&&Ut in ke&&Ne[Xt]!==ke[Ut]){const un=Mt(Xt,Ut,Vt),$n=ft(Xt,Ut,Je[un].geometry);delete ke[Xt],delete Ne[Ut],Ne[Jt(Ft,Je[$n].geometry,!0)]=$n,Je[un].geometry=null}else Xt in Ne?ft(Xt,Ut,Vt):Ut in ke?Mt(Xt,Ut,Vt):(gt(xt),ke[Xt]=Ue-1,Ne[Ut]=Ue-1)}return Je.filter(xt=>xt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((je,ke)=>je.sortKey-ke.sortKey)}update(n,a,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,c,h),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,c,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=F2(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const c=this.lineVertexArray.length,h=n.segment;if(h!==void 0){let v=n.dist(a[h+1]),y=n.dist(a[h]);const x={};for(let E=h+1;E<a.length;E++)x[E]={x:a[E].x,y:a[E].y,tileUnitDistanceFromAnchor:v},E<a.length-1&&(v+=a[E+1].dist(a[E]));for(let E=h||0;E>=0;E--)x[E]={x:a[E].x,y:a[E].y,tileUnitDistanceFromAnchor:y},E>0&&(y+=a[E-1].dist(a[E]));for(let E=0;E<a.length;E++){const I=x[E];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,a,c,h,v,y,x,E,I,D,B,$,X,J){const re=n.indexArray,fe=n.layoutVertexArray,Ae=n.globeExtVertexArray,je=n.segments.prepareSegment(4*a.length,fe,re,this.canOverlap?y.sortKey:void 0),ke=this.glyphOffsetArray.length,Ne=je.vertexLength,Je=this.allowVerticalPlacement&&x===Mo.vertical?Math.PI/2:0,Ue=y.text&&y.text.sections;for(let ft=0;ft<a.length;ft++){const{tl:Mt,tr:Jt,bl:xt,br:Lt,tex:Vt,pixelOffsetTL:Ft,pixelOffsetBR:Xt,minFontScaleX:Ut,minFontScaleY:un,glyphOffset:$n,isSDF:Vn,sectionIndex:Tn}=a[ft],nn=je.vertexLength,Qn=$n[1];if(mv(fe,I.x,I.y,Mt.x,Qn+Mt.y,Vt.x,Vt.y,c,Vn,Ft.x,Ft.y,Ut,un),mv(fe,I.x,I.y,Jt.x,Qn+Jt.y,Vt.x+Vt.w,Vt.y,c,Vn,Xt.x,Ft.y,Ut,un),mv(fe,I.x,I.y,xt.x,Qn+xt.y,Vt.x,Vt.y+Vt.h,c,Vn,Ft.x,Xt.y,Ut,un),mv(fe,I.x,I.y,Lt.x,Qn+Lt.y,Vt.x+Vt.w,Vt.y+Vt.h,c,Vn,Xt.x,Xt.y,Ut,un),E){const Rn=E.anchor,hn=E.up;vv(Ae,Rn.x,Rn.y,Rn.z,hn[0],hn[1],hn[2]),vv(Ae,Rn.x,Rn.y,Rn.z,hn[0],hn[1],hn[2]),vv(Ae,Rn.x,Rn.y,Rn.z,hn[0],hn[1],hn[2]),vv(Ae,Rn.x,Rn.y,Rn.z,hn[0],hn[1],hn[2]),gv(n.dynamicLayoutVertexArray,Rn.x,Rn.y,Rn.z,Je)}else gv(n.dynamicLayoutVertexArray,I.x,I.y,I.z,Je);re.emplaceBack(nn,nn+1,nn+2),re.emplaceBack(nn+1,nn+2,nn+3),je.vertexLength+=4,je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($n[0]),ft!==a.length-1&&Tn===a[ft+1].sectionIndex||n.programConfigurations.populatePaintArrays(fe.length,y,y.index,{},X,J,Ue&&Ue[Tn])}const gt=E?E.anchor:I;n.placedSymbolArray.emplaceBack(gt.x,gt.y,gt.z,I.x,I.y,ke,this.glyphOffsetArray.length-ke,Ne,D,B,I.segment,c?c[0]:0,c?c[1]:0,h[0],h[1],x,0,!1,0,$,0)}_commitLayoutVertex(n,a,c,h,v,y,x){n.emplaceBack(a,c,h,v,y,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(n,a,c,h,v,y,x){const E=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),I=E.vertexLength,D=x.tileAnchorX,B=x.tileAnchorY;for(let X=0;X<4;X++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(a,-n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(a,n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(a,n.padding,n.padding),c.collisionVertexArrayExt.emplaceBack(a,-n.padding,n.padding),this._commitLayoutVertex(c.layoutVertexArray,h,v,y,D,B,new S(n.x1,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,v,y,D,B,new S(n.x2,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,h,v,y,D,B,new S(n.x2,n.y2)),this._commitLayoutVertex(c.layoutVertexArray,h,v,y,D,B,new S(n.x1,n.y2)),E.vertexLength+=4;const $=c.indexArray;$.emplaceBack(I,I+1),$.emplaceBack(I+1,I+2),$.emplaceBack(I+2,I+3),$.emplaceBack(I+3,I),E.primitiveLength+=4}_addTextDebugCollisionBoxes(n,a,c,h,v,y){for(let x=h;x<v;x++){const E=c.get(x),I=this.getSymbolInstanceTextSize(n,y,a,x);this._addCollisionDebugVertices(E,I,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(n,a,c,h,v,y){for(let x=h;x<v;x++){const E=c.get(x),I=this.getSymbolInstanceIconSize(n,a,x);this._addCollisionDebugVertices(E,I,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,y)}}generateCollisionDebugBuffers(n,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new X_(Ao,XS.members,zi),this.iconCollisionBox=new X_(Ao,XS.members,zi);const c=Xc(this.iconSizeData,n),h=Xc(this.textSizeData,n);for(let v=0;v<this.symbolInstances.length;v++){const y=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(h,n,a,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(h,n,a,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,a,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,a,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(n,a,c,h){const v=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:h),y=rv(this.textSizeData,n,v)/Ai;return this.tilePixelRatio*y}getSymbolInstanceIconSize(n,a,c){const h=this.icon.placedSymbolArray.get(c),v=rv(this.iconSizeData,n,h);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(n,a,c){n.emplaceBack(a,-c,-c),n.emplaceBack(a,c,-c),n.emplaceBack(a,c,c),n.emplaceBack(a,-c,c)}_updateTextDebugCollisionBoxes(n,a,c,h,v,y){for(let x=h;x<v;x++){const E=c.get(x),I=this.getSymbolInstanceTextSize(n,y,a,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,I,E.padding)}}_updateIconDebugCollisionBoxes(n,a,c,h,v){for(let y=h;y<v;y++){const x=c.get(y),E=this.getSymbolInstanceIconSize(n,a,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,E,x.padding)}}updateCollisionDebugBuffers(n,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=Xc(this.iconSizeData,n),h=Xc(this.textSizeData,n);for(let v=0;v<this.symbolInstances.length;v++){const y=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(h,n,a,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(h,n,a,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(c,n,a,y.iconBoxStartIndex,y.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(c,n,a,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,a,c,h,v,y,x,E,I){const D={};for(let B=a;B<c;B++){const $=n.get(B);D.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,padding:$.padding,projectedAnchorX:$.projectedAnchorX,projectedAnchorY:$.projectedAnchorY,projectedAnchorZ:$.projectedAnchorZ,tileAnchorX:$.tileAnchorX,tileAnchorY:$.tileAnchorY},D.textFeatureIndex=$.featureIndex;break}for(let B=h;B<v;B++){const $=n.get(B);D.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,padding:$.padding,projectedAnchorX:$.projectedAnchorX,projectedAnchorY:$.projectedAnchorY,projectedAnchorZ:$.projectedAnchorZ,tileAnchorX:$.tileAnchorX,tileAnchorY:$.tileAnchorY},D.verticalTextFeatureIndex=$.featureIndex;break}for(let B=y;B<x;B++){const $=n.get(B);D.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,padding:$.padding,projectedAnchorX:$.projectedAnchorX,projectedAnchorY:$.projectedAnchorY,projectedAnchorZ:$.projectedAnchorZ,tileAnchorX:$.tileAnchorX,tileAnchorY:$.tileAnchorY},D.iconFeatureIndex=$.featureIndex;break}for(let B=E;B<I;B++){const $=n.get(B);D.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,padding:$.padding,projectedAnchorX:$.projectedAnchorX,projectedAnchorY:$.projectedAnchorY,projectedAnchorZ:$.projectedAnchorZ,tileAnchorX:$.tileAnchorX,tileAnchorY:$.tileAnchorY},D.verticalIconFeatureIndex=$.featureIndex;break}return D}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const c=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const c=n.placedSymbolArray.get(a),h=c.vertexStartIndex+4*c.numGlyphs;for(let v=c.vertexStartIndex;v<h;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),c=Math.cos(n),h=[],v=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);const E=this.symbolInstances.get(x);h.push(0|Math.round(a*E.tileAnchorX+c*E.tileAnchorY)),v.push(E.featureIndex)}return y.sort((x,E)=>h[x]-h[E]||v[E]-v[x]),y}addToSortKeyRanges(n,a){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===a?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const c=this.symbolInstances.get(a);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((h,v,y)=>{h>=0&&y.indexOf(h)===v&&this.addIndicesForPlacedSymbol(this.text,h)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}pn(ml,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ml.MAX_GLYPHS=65535,ml.addDynamicAttributes=gv;const ZF=new Dt({"symbol-placement":new Ge(wt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ge(wt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ge(wt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qe(wt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ge(wt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ge(wt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ge(wt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ge(wt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ge(wt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qe(wt.layout_symbol["icon-size"]),"icon-text-fit":new Ge(wt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ge(wt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qe(wt.layout_symbol["icon-image"]),"icon-rotate":new Qe(wt.layout_symbol["icon-rotate"]),"icon-padding":new Ge(wt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ge(wt.layout_symbol["icon-keep-upright"]),"icon-offset":new Qe(wt.layout_symbol["icon-offset"]),"icon-anchor":new Qe(wt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ge(wt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ge(wt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ge(wt.layout_symbol["text-rotation-alignment"]),"text-field":new Qe(wt.layout_symbol["text-field"]),"text-font":new Qe(wt.layout_symbol["text-font"]),"text-size":new Qe(wt.layout_symbol["text-size"]),"text-max-width":new Qe(wt.layout_symbol["text-max-width"]),"text-line-height":new Qe(wt.layout_symbol["text-line-height"]),"text-letter-spacing":new Qe(wt.layout_symbol["text-letter-spacing"]),"text-justify":new Qe(wt.layout_symbol["text-justify"]),"text-radial-offset":new Qe(wt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ge(wt.layout_symbol["text-variable-anchor"]),"text-anchor":new Qe(wt.layout_symbol["text-anchor"]),"text-max-angle":new Ge(wt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ge(wt.layout_symbol["text-writing-mode"]),"text-rotate":new Qe(wt.layout_symbol["text-rotate"]),"text-padding":new Ge(wt.layout_symbol["text-padding"]),"text-keep-upright":new Ge(wt.layout_symbol["text-keep-upright"]),"text-transform":new Qe(wt.layout_symbol["text-transform"]),"text-offset":new Qe(wt.layout_symbol["text-offset"]),"text-allow-overlap":new Ge(wt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ge(wt.layout_symbol["text-ignore-placement"]),"text-optional":new Ge(wt.layout_symbol["text-optional"])});var Y_={paint:new Dt({"icon-opacity":new Qe(wt.paint_symbol["icon-opacity"]),"icon-color":new Qe(wt.paint_symbol["icon-color"]),"icon-halo-color":new Qe(wt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qe(wt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qe(wt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ge(wt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ge(wt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qe(wt.paint_symbol["text-opacity"]),"text-color":new Qe(wt.paint_symbol["text-color"],{runtimeType:To,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Qe(wt.paint_symbol["text-halo-color"]),"text-halo-width":new Qe(wt.paint_symbol["text-halo-width"]),"text-halo-blur":new Qe(wt.paint_symbol["text-halo-blur"]),"text-translate":new Ge(wt.paint_symbol["text-translate"]),"text-translate-anchor":new Ge(wt.paint_symbol["text-translate-anchor"])}),layout:ZF};class B2{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:Hs,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}pn(B2,"FormatSectionOverride",{omit:["defaultValue"]});class yv extends ca{constructor(n){super(n,Y_)}recalculate(n,a){super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const h=[];for(const v of c)h.indexOf(v)<0&&h.push(v);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,a,c,h){const v=this.layout.get(n).evaluate(a,{},c,h),y=this._unevaluatedLayout._values[n];return y.isDataDriven()||kc(y.value)||!v?v:function(x,E){return E.replace(/{([^{}]+)}/g,(I,D)=>D in x?String(x[D]):"")}(a.properties,v)}createBucket(n){return new ml(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of Y_.paint.overridableProperties){if(!yv.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),c=new B2(a),h=new zf(c,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new Lf("source",h):new iu("composite",h,a.value.zoomStops,a.value._interpolationType),this.paint._values[n]=new $e(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,c){return!(!this.layout||a.isDataDriven()||c.isDataDriven())&&yv.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const c=n.get("text-field"),h=Y_.paint.properties[a];let v=!1;const y=x=>{for(const E of x)if(h.overrides&&h.overrides.hasOverride(E))return void(v=!0)};if(c.value.kind==="constant"&&c.value.value instanceof ji)y(c.value.value.sections);else if(c.value.kind==="source"){const x=I=>{v||(I instanceof Hl&&ii(I.value)===Vl?y(I.value.sections):I instanceof Wl?y(I.sections):I.eachChild(x))},E=c.value;E._styleExpression&&x(E._styleExpression.expression)}return v}getProgramConfiguration(n){return new cl(this,n)}}var XF={paint:new Dt({"background-color":new Ge(wt.paint_background["background-color"]),"background-pattern":new Zt(wt.paint_background["background-pattern"]),"background-opacity":new Ge(wt.paint_background["background-opacity"])})},YF={paint:new Dt({"raster-opacity":new Ge(wt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ge(wt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ge(wt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ge(wt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ge(wt.paint_raster["raster-saturation"]),"raster-contrast":new Ge(wt.paint_raster["raster-contrast"]),"raster-resampling":new Ge(wt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ge(wt.paint_raster["raster-fade-duration"])})};class JF extends ca{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var QF={paint:new Dt({"sky-type":new Ge(wt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ge(wt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ge(wt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ge(wt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ge(wt.paint_sky["sky-gradient-radius"]),"sky-gradient":new at(wt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ge(wt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ge(wt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ge(wt.paint_sky["sky-opacity"])})};function J_(s,n,a){const c=[0,0,1],h=_S([]);return bS(h,h,a?-R(s)+Math.PI:R(s)),xS(h,h,-R(n)),vS(c,c,h),Ui(c,c)}const e4={circle:class extends ca{constructor(s){super(s,iL)}createBucket(s){return new h_(s)}queryRadius(s){const n=s;return Gc("circle-radius",this,n)+Gc("circle-stroke-width",this,n)+Um(this.paint.get("circle-translate"))}queryIntersectsFeature(s,n,a,c,h,v,y,x){const E=cS(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),I=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a);return wS(s,c,v,y,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,I)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new cl(this,s)}},heatmap:class extends ca{createBucket(s){return new SS(s)}constructor(s){super(s,dL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=I_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return Gc("heatmap-radius",this,s)}queryIntersectsFeature(s,n,a,c,h,v,y,x){const E=this.paint.get("heatmap-radius").evaluate(n,a);return wS(s,c,v,y,x,!0,!0,new S(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new cl(this,s)}},hillshade:class extends ca{constructor(s){super(s,fL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ca{constructor(s){super(s,AL)}getProgramIds(){const s=this.paint.get("fill-pattern"),n=s&&s.constantOr(1),a=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(s){return new cl(this,s)}recalculate(s,n){super.recalculate(s,n);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Jm(s)}queryRadius(){return Um(this.paint.get("fill-translate"))}queryIntersectsFeature(s,n,a,c,h,v){return!s.queryGeometry.isAboveHorizon&&oS(uS(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends ca{constructor(s){super(s,VL)}createBucket(s){return new dh(s)}queryRadius(){return Um(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new cl(this,s)}queryIntersectsFeature(s,n,a,c,h,v,y,x,E){const I=cS(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),D=this.paint.get("fill-extrusion-height").evaluate(n,a),B=this.paint.get("fill-extrusion-base").evaluate(n,a),$=[0,0],X=x&&v.elevation,J=v.elevation?v.elevation.exaggeration():1,re=s.tile.getBucket(this);if(X&&re instanceof dh){const je=re.centroidVertexArray,ke=E+1;if(ke<je.length){const Ne=je.get(ke);$[0]=Ne.a_centroid_pos0,$[1]=Ne.a_centroid_pos1}}if($[0]===0&&$[1]===1)return!1;v.projection.name==="globe"&&(c=VS([c],[new S(0,0),new S(Pn,Pn)],s.tileID.canonical).map(je=>je.polygon).flat());const fe=function(je,ke,Ne,Je,Ue,gt,ft,Mt,Jt,xt,Lt){return je.projection.name==="globe"?function(Vt,Ft,Xt,Ut,un,$n,Vn,Tn,nn,Qn,Rn){const hn=[],Fr=[],Dr=Vt.projection.upVectorScale(Rn,Vt.center.lat,Vt.worldSize).metersToTile,Hr=[0,0,0,1],Gn=[0,0,0,1],dr=(Rr,Ar,Ur,Zr)=>{Rr[0]=Ar,Rr[1]=Ur,Rr[2]=Zr,Rr[3]=1},Br=jS();Xt>0&&(Xt+=Br),Ut+=Br;for(const Rr of Ft){const Ar=[],Ur=[];for(const Zr of Rr){const xi=Zr.x+un.x,ro=Zr.y+un.y,or=Vt.projection.projectTilePoint(xi,ro,Rn),ti=Vt.projection.upVector(Rn,Zr.x,Zr.y);let Fi=Xt,xr=Ut;if(Vn){const Xr=HS(xi,ro,Xt,Ut,Vn,Tn,nn,Qn);Fi+=Xr.base,xr+=Xr.top}Xt!==0?dr(Hr,or.x+ti[0]*Dr*Fi,or.y+ti[1]*Dr*Fi,or.z+ti[2]*Dr*Fi):dr(Hr,or.x,or.y,or.z),dr(Gn,or.x+ti[0]*Dr*xr,or.y+ti[1]*Dr*xr,or.z+ti[2]*Dr*xr),fi(Hr,Hr,$n),fi(Gn,Gn,$n),Ar.push(tv(Hr)),Ur.push(tv(Gn))}hn.push(Ar),Fr.push(Ur)}return[hn,Fr]}(je,ke,Ne,Je,Ue,gt,ft,Mt,Jt,xt,Lt):ft?function(Vt,Ft,Xt,Ut,un,$n,Vn,Tn,nn){const Qn=[],Rn=[],hn=[0,0,0,1];for(const Fr of Vt){const Dr=[],Hr=[];for(const Gn of Fr){const dr=Gn.x+Ut.x,Br=Gn.y+Ut.y,Rr=HS(dr,Br,Ft,Xt,$n,Vn,Tn,nn);hn[0]=dr,hn[1]=Br,hn[2]=Rr.base,hn[3]=1,bu(hn,hn,un),hn[3]=Math.max(hn[3],1e-5);const Ar=tv([hn[0]/hn[3],hn[1]/hn[3],hn[2]/hn[3]]);hn[0]=dr,hn[1]=Br,hn[2]=Rr.top,hn[3]=1,bu(hn,hn,un),hn[3]=Math.max(hn[3],1e-5);const Ur=tv([hn[0]/hn[3],hn[1]/hn[3],hn[2]/hn[3]]);Dr.push(Ar),Hr.push(Ur)}Qn.push(Dr),Rn.push(Hr)}return[Qn,Rn]}(ke,Ne,Je,Ue,gt,ft,Mt,Jt,xt):function(Vt,Ft,Xt,Ut,un){const $n=[],Vn=[],Tn=un[8]*Ft,nn=un[9]*Ft,Qn=un[10]*Ft,Rn=un[11]*Ft,hn=un[8]*Xt,Fr=un[9]*Xt,Dr=un[10]*Xt,Hr=un[11]*Xt;for(const Gn of Vt){const dr=[],Br=[];for(const Rr of Gn){const Ar=Rr.x+Ut.x,Ur=Rr.y+Ut.y,Zr=un[0]*Ar+un[4]*Ur+un[12],xi=un[1]*Ar+un[5]*Ur+un[13],ro=un[2]*Ar+un[6]*Ur+un[14],or=un[3]*Ar+un[7]*Ur+un[15],ti=Zr+Tn,Fi=xi+nn,xr=ro+Qn,Xr=Math.max(or+Rn,1e-5),Gi=Zr+hn,qr=xi+Fr,oi=ro+Dr,bi=Math.max(or+Hr,1e-5),mi=new S(ti/Xr,Fi/Xr);mi.z=xr/Xr,dr.push(mi);const Mi=new S(Gi/bi,qr/bi);Mi.z=oi/bi,Br.push(Mi)}$n.push(dr),Vn.push(Br)}return[$n,Vn]}(ke,Ne,Je,Ue,gt)}(v,c,B,D,I,y,X?x:null,$,J,v.center.lat,s.tileID.canonical),Ae=s.queryGeometry;return function(je,ke,Ne){let Je=1/0;oS(Ne,ke)&&(Je=GS(Ne,ke[0]));for(let Ue=0;Ue<ke.length;Ue++){const gt=ke[Ue],ft=je[Ue];for(let Mt=0;Mt<gt.length-1;Mt++){const Jt=gt[Mt],xt=[Jt,gt[Mt+1],ft[Mt+1],ft[Mt],Jt];iS(Ne,xt)&&(Je=Math.min(Je,GS(Ne,xt)))}}return Je!==1/0&&Je}(fe[0],fe[1],Ae.isPointQuery()?Ae.screenBounds:Ae.screenGeometry)}},line:class extends ca{constructor(s){super(s,qS),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof mf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,n){super.recalculate(s,n),this.paint._values["line-floorwidth"]=WS.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new nv(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new cl(this,s)}queryRadius(s){const n=s,a=ZS(Gc("line-width",this,n),Gc("line-gap-width",this,n)),c=Gc("line-offset",this,n);return a/2+Math.abs(c)+Um(this.paint.get("line-translate"))}queryIntersectsFeature(s,n,a,c,h,v){if(s.queryGeometry.isAboveHorizon)return!1;const y=uS(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),x=s.pixelToTileUnitsFactor/2*ZS(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),E=this.paint.get("line-offset").evaluate(n,a);return E&&(c=function(I,D){const B=[],$=new S(0,0);for(let X=0;X<I.length;X++){const J=I[X],re=[];for(let fe=0;fe<J.length;fe++){const Ae=J[fe-1],je=J[fe],ke=J[fe+1],Ne=fe===0?$:je.sub(Ae)._unit()._perp(),Je=fe===J.length-1?$:ke.sub(je)._unit()._perp(),Ue=Ne._add(Je)._unit();Ue._mult(1/(Ue.x*Je.x+Ue.y*Je.y)),re.push(Ue._mult(D)._add(je))}B.push(re)}return B}(c,E*s.pixelToTileUnitsFactor)),function(I,D,B){for(let $=0;$<D.length;$++){const X=D[$];if(I.length>=3){for(let J=0;J<X.length;J++)if(_u(I,X[J]))return!0}if(eL(I,X,B))return!0}return!1}(y,c,x)}isTileClipped(){return!0}},symbol:yv,background:class extends ca{constructor(s){super(s,XF)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ca{constructor(s){super(s,YF)}getProgramIds(){return["raster"]}},sky:class extends ca{constructor(s){super(s,QF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=I_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(s,n){if(this.paint.get("sky-type")==="atmosphere"){const c=this.paint.get("sky-atmosphere-sun"),h=!c,v=s.style.light,y=v.properties.get("position");return h&&v.properties.get("anchor")==="viewport"&&Re("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),h?J_(y.azimuthal,90-y.polar,n):J_(c[0],90-c[1],n)}const a=this.paint.get("sky-gradient-center");return J_(a[0],90-a[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class Eh{constructor(n,a,c,h){this.context=n,this.format=c,this.texture=n.gl.createTexture(),this.update(a,h)}update(n,a,c){const{width:h,height:v}=n,{context:y}=this,{gl:x}=y,{HTMLImageElement:E,HTMLCanvasElement:I,HTMLVideoElement:D,ImageData:B,ImageBitmap:$}=_;if(x.bindTexture(x.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!a||a.premultiply!==!1)),c||this.size&&this.size[0]===h&&this.size[1]===v){const{x:X,y:J}=c||{x:0,y:0};n instanceof E||n instanceof I||n instanceof D||n instanceof B||$&&n instanceof $?x.texSubImage2D(x.TEXTURE_2D,0,X,J,x.RGBA,x.UNSIGNED_BYTE,n):x.texSubImage2D(x.TEXTURE_2D,0,X,J,h,v,x.RGBA,x.UNSIGNED_BYTE,n.data)}else this.size=[h,v],n instanceof E||n instanceof I||n instanceof D||n instanceof B||$&&n instanceof $?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,n):x.texImage2D(x.TEXTURE_2D,0,this.format,h,v,0,this.format,x.UNSIGNED_BYTE,n.data);this.useMipmap=Boolean(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(n,a){const{context:c}=this,{gl:h}=c;h.bindTexture(h.TEXTURE_2D,this.texture),n!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?n===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_NEAREST:n),this.filter=n),a!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,a),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class Q_{constructor(n,a){this.width=n,this.height=a,this.nextRow=0,this.image=new xs({width:n,height:a}),this.positions={},this.uploaded=!1}getDash(n,a){const c=this.getKey(n,a);return this.positions[c]}trim(){const n=this.width,a=this.height=xe(this.nextRow);this.image.resize({width:n,height:a})}getKey(n,a){return n.join(",")+a}getDashRanges(n,a,c){const h=[];let v=n.length%2==1?-n[n.length-1]*c:0,y=n[0]*c,x=!0;h.push({left:v,right:y,isDash:x,zeroLength:n[0]===0});let E=n[0];for(let I=1;I<n.length;I++){x=!x;const D=n[I];v=E*c,E+=D,y=E*c,h.push({left:v,right:y,isDash:x,zeroLength:D===0})}return h}addRoundDash(n,a,c){const h=a/2;for(let v=-c;v<=c;v++){const y=this.width*(this.nextRow+c+v);let x=0,E=n[x];for(let I=0;I<this.width;I++){I/E.right>1&&(E=n[++x]);const D=Math.abs(I-E.left),B=Math.abs(I-E.right),$=Math.min(D,B);let X;const J=v/c*(h+1);if(E.isDash){const re=h-Math.abs(J);X=Math.sqrt($*$+re*re)}else X=h-Math.sqrt($*$+J*J);this.image.data[y+I]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(n,a){for(let E=n.length-1;E>=0;--E){const I=n[E],D=n[E+1];I.zeroLength?n.splice(E,1):D&&D.isDash===I.isDash&&(D.left=I.left,n.splice(E,1))}const c=n[0],h=n[n.length-1];c.isDash===h.isDash&&(c.left=h.left-this.width,h.right=c.right+this.width);const v=this.width*this.nextRow;let y=0,x=n[y];for(let E=0;E<this.width;E++){E/x.right>1&&(x=n[++y]);const I=Math.abs(E-x.left),D=Math.abs(E-x.right),B=Math.min(I,D);this.image.data[v+E]=Math.max(0,Math.min(255,(x.isDash?B:-B)+a+128))}}addDash(n,a){const c=this.getKey(n,a);if(this.positions[c])return this.positions[c];const h=a==="round",v=h?7:0,y=2*v+1;if(this.nextRow+y>this.height)return Re("LineAtlas out of space"),null;n.length===0&&n.push(1);let x=0;for(let D=0;D<n.length;D++)n[D]<0&&(Re("Negative value is found in line dasharray, replacing values with 0"),n[D]=0),x+=n[D];if(x!==0){const D=this.width/x,B=this.getDashRanges(n,this.width,D);h?this.addRoundDash(B,D,v):this.addRegularDash(B,a==="square"?.5*D:0)}const E=this.nextRow+v;this.nextRow+=y;const I={tl:[E,v],br:[x,0]};return this.positions[c]=I,I}}pn(Q_,"LineAtlas");class t4{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class n4{constructor(){this.tasks={},this.taskQueue=[],ge(["process"],this),this.invoker=new t4(this.process),this.nextId=0}add(n,a){const c=this.nextId++,h=function({type:v,isSymbolTile:y,zoom:x}){return x=x||0,v==="message"?0:v!=="maybePrepare"||y?v!=="parseTile"||y?v==="parseTile"&&y?300-x:v==="maybePrepare"&&y?400-x:500:200-x:100-x}(a);if(h===0){oe();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:n,metadata:a,priority:h,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){oe();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const a=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let n=null,a=1/0;for(let h=0;h<this.taskQueue.length;h++){const v=this.tasks[this.taskQueue[h]];v.priority<a&&(a=v.priority,n=h)}if(n===null)return null;const c=this.taskQueue[n];return this.taskQueue.splice(n,1),c}remove(){this.invoker.remove()}}class N2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const c=n[a];this._stringToNumber[c]=a,this._numberToString[a]=c}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const r4=["tile","layer","source","sourceLayer","state"];class $2{constructor(n,a,c,h,v){this.type="Feature",this._vectorTileFeature=n,this._z=a,this._x=c,this._y=h,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const a of r4)this[a]!==void 0&&(n[a]=this[a]);return n}}const Xo=32,Na=33,vl=new Uint16Array(8184);for(let s=0;s<2046;s++){let n=s+2,a=0,c=0,h=0,v=0,y=0,x=0;for(1&n?h=v=y=Xo:a=c=x=Xo;(n>>=1)>1;){const I=a+h>>1,D=c+v>>1;1&n?(h=a,v=c,a=y,c=x):(a=h,c=v,h=y,v=x),y=I,x=D}const E=4*s;vl[E+0]=a,vl[E+1]=c,vl[E+2]=h,vl[E+3]=v}const $a=new Uint16Array(2178),gl=new Uint8Array(1089),_v=new Uint16Array(1089);function j2(s){return s===0?-.03125:s===32?.03125:0}var V2=Nt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const U2={type:2,extent:Pn,loadGeometry:()=>[[new S(0,0),new S(8193,0),new S(8193,8193),new S(0,8193),new S(0,0)]]};class e0{constructor(n,a,c,h,v){this.tileID=n,this.uid=ce(),this.uses=0,this.tileSize=a,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=v,this.expiredRequestCount=0,this.state="loading",h&&h.transform&&(this.projection=h.transform.projection)}registerFadeDuration(n){const a=n+this.timeAdded;a<At.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Su(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,a,c){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(h,v){const y={};if(!v)return y;for(const x of h){const E=x.layerIds.map(I=>v.getLayer(I)).filter(Boolean);if(E.length!==0){x.layers=E,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(I=>E.filter(D=>D.id===I)[0]));for(const I of E)y[I.id]=x}}return y}(n.buckets,a.style),this.hasSymbolBuckets=!1;for(const h in this.buckets){const v=this.buckets[h];if(v instanceof ml){if(this.hasSymbolBuckets=!0,!c)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const h in this.buckets){const v=this.buckets[h];if(v instanceof ml&&v.hasRTLText){this.hasRTLText=!0,ye.isLoading()||ye.isLoaded()||le()!=="deferred"||Se();break}}this.queryPadding=0;for(const h in this.buckets){const v=this.buckets[h];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(h).queryRadius(v))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new Da}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const c in this.buckets){const h=this.buckets[c];h.uploadPending()&&h.upload(n)}const a=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Eh(n,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Eh(n,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Eh(n,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,a,c,h,v,y,x,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:h,pixelPosMatrix:x,transform:y,params:v,tileTransform:this.tileTransform},n,a,c):{}}querySourceFeatures(n,a){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const h=c.loadVTLayers(),v=a?a.sourceLayer:"",y=h._geojsonTileLayer||h[v];if(!y)return;const x=lu(a&&a.filter),{z:E,x:I,y:D}=this.tileID.canonical,B={z:E,x:I,y:D};for(let $=0;$<y.length;$++){const X=y.feature($);if(x.needGeometry){const fe=yu(X,!0);if(!x.filter(new _e(this.tileID.overscaledZ),fe,this.tileID.canonical))continue}else if(!x.filter(new _e(this.tileID.overscaledZ),X))continue;const J=c.getId(X,v),re=new $2(X,E,I,D,J);re.tile=B,n.push(re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const a=this.expirationTime;if(n.cacheControl){const c=ze(n.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const c=Date.now();let h=!1;if(this.expirationTime>c)h=!1;else if(a)if(this.expirationTime<a)h=!0;else{const v=this.expirationTime-a;v?this.expirationTime=c+Math.max(v,3e4):h=!0}else h=!0;h?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!a)return;const c=this.latestFeatureIndex.loadVTLayers(),h=a.style.listImages();for(const v in this.buckets){if(!a.style.hasLayer(v))continue;const y=this.buckets[v],x=y.layers[0].sourceLayer||"_geojsonTileLayer",E=c[x],I=n[x];if(!E||!I||Object.keys(I).length===0)continue;if(y.update(I,E,h,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof nv||y instanceof Jm){const B=a.style._getSourceCache(y.layers[0].source);a._terrain&&a._terrain.enabled&&B&&y.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(B.id,this.tileID)}const D=a&&a.style&&a.style.getLayer(v);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<At.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=At.now()+n}setTexture(n,a){const c=a.context,h=c.gl;this.texture=a.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new Eh(c,n,h.RGBA,{useMipmap:!0}),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),c.extTextureFilterAnisotropic&&h.texParameterf(h.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax))}setDependencies(n,a){const c={};for(const h of a)c[h]=!0;this.dependencies[n]=c}hasDependency(n,a){for(const c of n){const h=this.dependencies[c];if(h){for(const v of a)if(h[v])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;const c=_s(U2,this.tileID.canonical,this.tileTransform)[0],h=new rn,v=new fs;for(let y=0;y<c.length;y++){const{x,y:E}=c[y];h.emplaceBack(x,E),v.emplaceBack(y)}v.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(v),this._tileDebugBuffer=n.createVertexBuffer(h,yh.members),this._tileDebugSegments=ci.simpleSegment(0,0,h.length,v.length)}_makeTileBoundsBuffers(n,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;const c=_s(U2,this.tileID.canonical,this.tileTransform)[0];let h,v;if(this.isRaster){const y=function(x,E){const I=Su(x,E),D=Math.pow(2,x.z);for(let fe=0;fe<Na;fe++)for(let Ae=0;Ae<Na;Ae++){const je=Wo((x.x+(Ae+j2(Ae))/Xo)/D),ke=Pi((x.y+(fe+j2(fe))/Xo)/D),Ne=E.project(je,ke),Je=fe*Na+Ae;$a[2*Je+0]=Math.round((Ne.x*I.scale-I.x)*Pn),$a[2*Je+1]=Math.round((Ne.y*I.scale-I.y)*Pn)}gl.fill(0),_v.fill(0);for(let fe=2045;fe>=0;fe--){const Ae=4*fe,je=vl[Ae+0],ke=vl[Ae+1],Ne=vl[Ae+2],Je=vl[Ae+3],Ue=je+Ne>>1,gt=ke+Je>>1,ft=Ue+gt-ke,Mt=gt+je-Ue,Jt=ke*Na+je,xt=Je*Na+Ne,Lt=gt*Na+Ue,Vt=Math.hypot(($a[2*Jt+0]+$a[2*xt+0])/2-$a[2*Lt+0],($a[2*Jt+1]+$a[2*xt+1])/2-$a[2*Lt+1])>=16;if(gl[Lt]=gl[Lt]||(Vt?1:0),fe<1022){const Ft=(ke+Mt>>1)*Na+(je+ft>>1),Xt=(Je+Mt>>1)*Na+(Ne+ft>>1);gl[Lt]=gl[Lt]||gl[Ft]||gl[Xt]}}const B=new En,$=new qn;let X=0;function J(fe,Ae){const je=Ae*Na+fe;return _v[je]===0&&(B.emplaceBack($a[2*je+0],$a[2*je+1],fe*Pn/Xo,Ae*Pn/Xo),_v[je]=++X),_v[je]-1}function re(fe,Ae,je,ke,Ne,Je){const Ue=fe+je>>1,gt=Ae+ke>>1;if(Math.abs(fe-Ne)+Math.abs(Ae-Je)>1&&gl[gt*Na+Ue])re(Ne,Je,fe,Ae,Ue,gt),re(je,ke,Ne,Je,Ue,gt);else{const ft=J(fe,Ae),Mt=J(je,ke),Jt=J(Ne,Je);$.emplaceBack(ft,Mt,Jt)}}return re(0,0,Xo,Xo,Xo,0),re(Xo,Xo,0,0,0,Xo),{vertices:B,indices:$}}(this.tileID.canonical,a);h=y.vertices,v=y.indices}else{h=new En,v=new qn;for(const{x,y:E}of c)h.emplaceBack(x,E,0,0);const y=qm(h.int16,void 0,4);for(let x=0;x<y.length;x+=3)v.emplaceBack(y[x],y[x+1],y[x+2])}this._tileBoundsBuffer=n.createVertexBuffer(h,V2.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(v),this._tileBoundsSegments=ci.simpleSegment(0,0,h.length,v.length)}_makeGlobeTileDebugBuffers(n,a){const c=a.projection;if(!c||c.name!=="globe"||a.freezeTileCoverage)return;const h=this.tileID.canonical,v=xh(E2(h,a)),y=bh(a.zoom);let x;y>0&&(x=v_(new Float64Array(16),a.globeMatrix));const E=(h.x+.5)/(1<<h.z)-Ra(a.center.lng);let I=0;E>.5?I=-1:E<-.5&&(I=1),this._makeGlobeTileDebugBorderBuffer(n,h,a,v,x,y,I),this._makeGlobeTileDebugTextBuffer(n,h,a,v,x,y,I)}_globePoint(n,a,c,h,v,y,x,E){let I=_h(n,a,c);if(y){const D=1<<c.z,B=[((n/Pn+c.x)/D+E)*h,(a/Pn+c.y)/D*h,0];fi(B,B,y),I=Xs(I,B,x)}return fi(I,I,v)}_makeGlobeTileDebugBorderBuffer(n,a,c,h,v,y,x){const E=new rn,I=new fs,D=new yn,B=(X,J,re,fe,Ae)=>{const je=(re-X)/(Ae-1),ke=(fe-J)/(Ae-1),Ne=E.length;for(let Je=0;Je<Ae;Je++){const Ue=X+Je*je,gt=J+Je*ke;E.emplaceBack(Ue,gt);const ft=this._globePoint(Ue,gt,a,c.worldSize,h,v,y,x);D.emplaceBack(ft[0],ft[1],ft[2]),I.emplaceBack(Ne+Je)}},$=Pn;B(0,0,$,0,16),B($,0,$,$,16),B($,$,0,$,16),B(0,$,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(I),this._tileDebugBuffer=n.createVertexBuffer(E,yh.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(D,S2.members),this._tileDebugSegments=ci.simpleSegment(0,0,E.length,I.length)}_makeGlobeTileDebugTextBuffer(n,a,c,h,v,y,x){const E=new rn,I=new qn,D=new yn,B=25;I.reserve(32),E.reserve(B),D.reserve(B);const $=(X,J)=>B*X+J;for(let X=0;X<B;X++){const J=2048*X;for(let re=0;re<B;re++){const fe=2048*re;E.emplaceBack(fe,J);const Ae=this._globePoint(fe,J,a,c.worldSize,h,v,y,x);D.emplaceBack(Ae[0],Ae[1],Ae[2])}}for(let X=0;X<4;X++)for(let J=0;J<4;J++){const re=$(X,J),fe=$(X,J+1),Ae=$(X+1,J),je=$(X+1,J+1);I.emplaceBack(re,fe,Ae),I.emplaceBack(Ae,fe,je)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(I),this._tileDebugTextBuffer=n.createVertexBuffer(E,yh.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(D,S2.members),this._tileDebugTextSegments=ci.simpleSegment(0,0,B,32)}}class i4{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,a,c){const h=String(a);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][h]=this.stateChanges[n][h]||{},ie(this.stateChanges[n][h],c),this.deletedStates[n]===null){this.deletedStates[n]={};for(const v in this.state[n])v!==h&&(this.deletedStates[n][v]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][h]===null){this.deletedStates[n][h]={};for(const v in this.state[n][h])c[v]||(this.deletedStates[n][h][v]=null)}else for(const v in c)this.deletedStates[n]&&this.deletedStates[n][h]&&this.deletedStates[n][h][v]===null&&delete this.deletedStates[n][h][v]}removeFeatureState(n,a,c){if(this.deletedStates[n]===null)return;const h=String(a);if(this.deletedStates[n]=this.deletedStates[n]||{},c&&a!==void 0)this.deletedStates[n][h]!==null&&(this.deletedStates[n][h]=this.deletedStates[n][h]||{},this.deletedStates[n][h][c]=null);else if(a!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][h])for(c in this.deletedStates[n][h]={},this.stateChanges[n][h])this.deletedStates[n][h][c]=null;else this.deletedStates[n][h]=null;else this.deletedStates[n]=null}getState(n,a){const c=String(a),h=ie({},(this.state[n]||{})[c],(this.stateChanges[n]||{})[c]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const v=this.deletedStates[n][a];if(v===null)return{};for(const y in v)delete h[y]}return h}initializeTileState(n,a){n.setFeatureState(this.state,a)}coalesceChanges(n,a){const c={};for(const h in this.stateChanges){this.state[h]=this.state[h]||{};const v={};for(const y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),ie(this.state[h][y],this.stateChanges[h][y]),v[y]=this.state[h][y];c[h]=v}for(const h in this.deletedStates){this.state[h]=this.state[h]||{};const v={};if(this.deletedStates[h]===null)for(const y in this.state[h])v[y]={},this.state[h][y]={};else for(const y in this.deletedStates[h]){if(this.deletedStates[h][y]===null)this.state[h][y]={};else for(const x of Object.keys(this.deletedStates[h][y]))delete this.state[h][y][x];v[y]=this.state[h][y]}c[h]=c[h]||{},ie(c[h],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const h in n)n[h].setFeatureState(c,a)}}class K2{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,a){const c=this.toIdx(n,a);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(n,a){return this.leaves[this.toIdx(n,a)]}toIdx(n,a){return a*this.size+n}}function G2(s,n,a,c){let h=0,v=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(c[y])<1e-15){if(a[y]<s[y]||a[y]>n[y])return null}else{const x=1/c[y];let E=(s[y]-a[y])*x,I=(n[y]-a[y])*x;if(E>I){const D=E;E=I,I=D}if(E>h&&(h=E),I<v&&(v=I),h>v)return null}return h}function H2(s,n,a,c,h,v,y,x,E,I,D){const B=c-s,$=h-n,X=v-a,J=y-s,re=x-n,fe=E-a,Ae=D[1]*fe-D[2]*re,je=D[2]*J-D[0]*fe,ke=D[0]*re-D[1]*J,Ne=B*Ae+$*je+X*ke;if(Math.abs(Ne)<1e-15)return null;const Je=1/Ne,Ue=I[0]-s,gt=I[1]-n,ft=I[2]-a,Mt=(Ue*Ae+gt*je+ft*ke)*Je;if(Mt<0||Mt>1)return null;const Jt=gt*X-ft*$,xt=ft*B-Ue*X,Lt=Ue*$-gt*B,Vt=(D[0]*Jt+D[1]*xt+D[2]*Lt)*Je;return Vt<0||Mt+Vt>1?null:(J*Jt+re*xt+fe*Lt)*Je}function q2(s,n,a){return(s-n)/(a-n)}function W2(s,n,a,c,h,v,y,x,E){const I=1<<a,D=v-c,B=y-h,$=(s+1)/I*D+c,X=(n+0)/I*B+h,J=(n+1)/I*B+h;x[0]=(s+0)/I*D+c,x[1]=X,E[0]=$,E[1]=J}class Z2{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(v){const y=Math.ceil(Math.log2(v.dim/8)),x=[];let E=Math.ceil(Math.pow(2,y));const I=1/E,D=(X,J,re,fe,Ae)=>{const je=fe?1:0,ke=(X+1)*re-je,Ne=J*re,Je=(J+1)*re-je;Ae[0]=X*re,Ae[1]=Ne,Ae[2]=ke,Ae[3]=Je};let B=new K2(E);const $=[];for(let X=0;X<E*E;X++){D(X%E,Math.floor(X/E),I,!1,$);const J=yl($[0],$[1],v),re=yl($[2],$[1],v),fe=yl($[2],$[3],v),Ae=yl($[0],$[3],v);B.minimums.push(Math.min(J,re,fe,Ae)),B.maximums.push(Math.max(J,re,fe,Ae)),B.leaves.push(1)}for(x.push(B),E/=2;E>=1;E/=2){const X=x[x.length-1];B=new K2(E);for(let J=0;J<E*E;J++){D(J%E,Math.floor(J/E),2,!0,$);const re=X.getElevation($[0],$[1]),fe=X.getElevation($[2],$[1]),Ae=X.getElevation($[2],$[3]),je=X.getElevation($[0],$[3]),ke=X.isLeaf($[0],$[1]),Ne=X.isLeaf($[2],$[1]),Je=X.isLeaf($[2],$[3]),Ue=X.isLeaf($[0],$[3]),gt=Math.min(re.min,fe.min,Ae.min,je.min),ft=Math.max(re.max,fe.max,Ae.max,je.max),Mt=ke&&Ne&&Je&&Ue;B.maximums.push(ft),B.minimums.push(gt),B.leaves.push(ft-gt<=5&&Mt?1:0)}x.push(B)}return x}(this.dem),c=a.length-1,h=a[c];this._addNode(h.minimums[0],h.maximums[0],h.leaves[0]),this._construct(a,0,0,c,0)}raycastRoot(n,a,c,h,v,y,x=1){return G2([n,a,-100],[c,h,this.maximums[0]*x],v,y)}raycast(n,a,c,h,v,y,x=1){if(!this.nodeCount)return null;const E=this.raycastRoot(n,a,c,h,v,y,x);if(E==null)return null;const I=[],D=[],B=[],$=[],X=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;X.length>0;){const{idx:J,t:re,nodex:fe,nodey:Ae,depth:je}=X.pop();if(this.leaves[J]){W2(fe,Ae,je,n,a,c,h,B,$);const Ne=1<<je,Je=(fe+0)/Ne,Ue=(fe+1)/Ne,gt=(Ae+0)/Ne,ft=(Ae+1)/Ne,Mt=yl(Je,gt,this.dem)*x,Jt=yl(Ue,gt,this.dem)*x,xt=yl(Ue,ft,this.dem)*x,Lt=yl(Je,ft,this.dem)*x,Vt=H2(B[0],B[1],Mt,$[0],B[1],Jt,$[0],$[1],xt,v,y),Ft=H2($[0],$[1],xt,B[0],$[1],Lt,B[0],B[1],Mt,v,y),Xt=Math.min(Vt!==null?Vt:Number.MAX_VALUE,Ft!==null?Ft:Number.MAX_VALUE);if(Xt!==Number.MAX_VALUE)return Xt;{const Ut=Hm([],v,y,re);if(X2(Mt,Jt,Lt,xt,q2(Ut[0],B[0],$[0]),q2(Ut[1],B[1],$[1]))>=Ut[2])return re}continue}let ke=0;for(let Ne=0;Ne<this._siblingOffset.length;Ne++){W2((fe<<1)+this._siblingOffset[Ne][0],(Ae<<1)+this._siblingOffset[Ne][1],je+1,n,a,c,h,B,$),B[2]=-100,$[2]=this.maximums[this.childOffsets[J]+Ne]*x;const Je=G2(B,$,v,y);if(Je!=null){const Ue=Je;I[Ne]=Ue;let gt=!1;for(let ft=0;ft<ke&&!gt;ft++)Ue>=I[D[ft]]&&(D.splice(ft,0,Ne),gt=!0);gt||(D[ke]=Ne),ke++}}for(let Ne=0;Ne<ke;Ne++){const Je=D[Ne];X.push({idx:this.childOffsets[J]+Je,t:I[Je],nodex:(fe<<1)+this._siblingOffset[Je][0],nodey:(Ae<<1)+this._siblingOffset[Je][1],depth:je+1})}}return null}_addNode(n,a,c){return this.minimums.push(n),this.maximums.push(a),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(n,a,c,h,v){if(n[h].isLeaf(a,c)===1)return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const y=h-1,x=n[y];let E=0,I=0;for(let D=0;D<this._siblingOffset.length;D++){const B=2*a+this._siblingOffset[D][0],$=2*c+this._siblingOffset[D][1],X=x.getElevation(B,$),J=x.isLeaf(B,$),re=this._addNode(X.min,X.max,J);J&&(E|=1<<D),I||(I=re)}for(let D=0;D<this._siblingOffset.length;D++)E&1<<D||this._construct(n,2*a+this._siblingOffset[D][0],2*c+this._siblingOffset[D][1],y,I+D)}}function X2(s,n,a,c,h,v){return ur(ur(s,a,v),ur(n,c,v),h)}function yl(s,n,a){const c=a.dim,h=q(s*c-.5,0,c-1),v=q(n*c-.5,0,c-1),y=Math.floor(h),x=Math.floor(v),E=Math.min(y+1,c-1),I=Math.min(x+1,c-1);return X2(a.get(y,x),a.get(E,x),a.get(y,I),a.get(E,I),h-y,v-x)}const Y2={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class xv{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,a,c,h=!1,v=!1){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return Re(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const y=this.dim=a.height-2,x=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=c||"mapbox",this.borderReady=h,!h){for(let E=0;E<y;E++)x[this._idx(-1,E)]=x[this._idx(0,E)],x[this._idx(y,E)]=x[this._idx(y-1,E)],x[this._idx(E,-1)]=x[this._idx(E,0)],x[this._idx(E,y)]=x[this._idx(E,y-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(y,-1)]=x[this._idx(y-1,0)],x[this._idx(-1,y)]=x[this._idx(0,y-1)],x[this._idx(y,y)]=x[this._idx(y-1,y-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Z2(this)}get(n,a,c=!1){c&&(n=q(n,-1,this.dim),a=q(a,-1,this.dim));const h=4*this._idx(n,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[h],this.pixels[h+1],this.pixels[h+2])}static getUnpackVector(n){return Y2[n]}get unpackVector(){return Y2[this.encoding]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}_unpackMapbox(n,a,c){return(256*n*256+256*a+c)/10-1e4}_unpackTerrarium(n,a,c){return 256*n+a+c/256-32768}static pack(n,a){const c=[0,0,0,0],h=xv.getUnpackVector(a);let v=Math.floor((n+h[3])/h[2]);return c[2]=v%256,v=Math.floor(v/256),c[1]=v%256,v=Math.floor(v/256),c[0]=v,c}getPixels(){return new go({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,a,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let h=a*this.dim,v=a*this.dim+this.dim,y=c*this.dim,x=c*this.dim+this.dim;switch(a){case-1:h=v-1;break;case 1:v=h+1}switch(c){case-1:y=x-1;break;case 1:x=y+1}const E=-a*this.dim,I=-c*this.dim;for(let D=y;D<x;D++)for(let B=h;B<v;B++){const $=4*this._idx(B,D),X=4*this._idx(B+E,D+I);this.pixels[$+0]=n.pixels[X+0],this.pixels[$+1]=n.pixels[X+1],this.pixels[$+2]=n.pixels[X+2],this.pixels[$+3]=n.pixels[X+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}pn(xv,"DEMData"),pn(Z2,"DemMinMaxQuadTree",{omit:["dem"]});class o4{constructor(n,a){this.max=n,this.onRemove=a,this.reset()}reset(){for(const n in this.data)for(const a of this.data[n])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(n,a,c){const h=n.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const v={value:a,timeout:void 0};if(c!==void 0&&(v.timeout=setTimeout(()=>{this.remove(n,v)},c)),this.data[h].push(v),this.order.push(h),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const a=this.data[n].shift();return a.timeout&&clearTimeout(a.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),a.value}getByKey(n){const a=this.data[n];return a?a[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,a){if(!this.has(n))return this;const c=n.wrapped().key,h=a===void 0?0:this.data[c].indexOf(a),v=this.data[c][h];return this.data[c].splice(h,1),v.timeout&&clearTimeout(v.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(v.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(n){const a=[];for(const c in this.data)for(const h of this.data[c])n(h.value)||a.push(h);for(const c of a)this.remove(c.value.tileID,c)}}class od{constructor(n,a,c){this.func=n,this.mask=a,this.range=c}}od.ReadOnly=!1,od.ReadWrite=!0,od.disabled=new od(519,od.ReadOnly,[0,1]);const t0=7680;class n0{constructor(n,a,c,h,v,y){this.test=n,this.ref=a,this.mask=c,this.fail=h,this.depthFail=v,this.pass=y}}n0.disabled=new n0({func:519,mask:0},0,0,t0,t0,t0);class ja{constructor(n,a,c){this.blendFunction=n,this.blendColor=a,this.mask=c}}ja.Replace=[1,0],ja.disabled=new ja(ja.Replace,Ir.transparent,[!1,!1,!1,!1]),ja.unblended=new ja(ja.Replace,Ir.transparent,[!0,!0,!0,!0]),ja.alphaBlended=new ja([1,771],Ir.transparent,[!0,!0,!0,!0]);const r0=1029,i0=2305;class ma{constructor(n,a,c){this.enable=n,this.mode=a,this.frontFace=c}}ma.disabled=new ma(!1,r0,i0),ma.backCCW=new ma(!0,r0,i0),ma.backCW=new ma(!0,r0,2304),ma.frontCW=new ma(!0,1028,2304),ma.frontCCW=new ma(!0,1028,i0);class Tu extends gn{constructor(n,a,c){super(),this.id=n,this._onlySymbols=c,a.on("data",h=>{h.dataType==="source"&&h.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&h.dataType==="source"&&h.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new o4(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new i4,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const a=this._tiles[n];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,a){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,a)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const a in this._tiles){const c=this._tiles[a];this._source.prepareTile(c)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,c.tileID),c.upload(n),c.prepare(this.map.style.imageManager)}else for(const a in this._tiles){const c=this._tiles[a];c.upload(n),c.prepare(this.map.style.imageManager)}}getIds(){return te(this._tiles).map(n=>n.tileID).sort(J2).map(n=>n.key)}getRenderableIds(n){const a=[];for(const c in this._tiles)this._isIdRenderable(+c,n)&&a.push(this._tiles[c]);return n?a.sort((c,h)=>{const v=c.tileID,y=h.tileID,x=new S(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),E=new S(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-y.overscaledZ||E.y-x.y||E.x-x.x}).map(c=>c.tileID.key):a.map(c=>c.tileID).sort(J2).map(c=>c.key)}hasRenderableParent(n){const a=this.findLoadedParent(n,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(n,a){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(a||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,a){const c=this._tiles[n];c&&(c.state!=="loading"&&(c.state=a),this._loadTile(c,this._tileLoaded.bind(this,c,n,a)))}_tileLoaded(n,a,c,h){if(h)if(n.state="errored",h.status!==404)this._source.fire(new Ln(h,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const v=this.map.painter.terrain;this.update(this.transform,v.getScaledDemTileSize(),!0),v.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=At.now(),c==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(a,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new rr("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const a=this.getRenderableIds();for(let h=0;h<a.length;h++){const v=a[h];if(n.neighboringTiles&&n.neighboringTiles[v]){const y=this.getTileByID(v);c(n,y),c(y,n)}}function c(h,v){if(!h.dem||h.dem.borderReady)return;h.needsHillshadePrepare=!0,h.needsDEMTextureUpload=!0;let y=v.tileID.canonical.x-h.tileID.canonical.x;const x=v.tileID.canonical.y-h.tileID.canonical.y,E=Math.pow(2,h.tileID.canonical.z),I=v.tileID.key;y===0&&x===0||Math.abs(x)>1||(Math.abs(y)>1&&(Math.abs(y+E)===1?y+=E:Math.abs(y-E)===1&&(y-=E)),v.dem&&h.dem&&(h.dem.backfillBorder(v.dem,y,x),h.neighboringTiles&&h.neighboringTiles[I]&&(h.neighboringTiles[I].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,a,c,h){for(const v in this._tiles){let y=this._tiles[v];if(h[v]||!y.hasData()||y.tileID.overscaledZ<=a||y.tileID.overscaledZ>c)continue;let x=y.tileID;for(;y&&y.tileID.overscaledZ>a+1;){const I=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[I.key],y&&y.hasData()&&(x=I)}let E=x;for(;E.overscaledZ>a;)if(E=E.scaledTo(E.overscaledZ-1),n[E.key]){h[x.key]=x;break}}}findLoadedParent(n,a){if(n.key in this._loadedParentTiles){const c=this._loadedParentTiles[n.key];return c&&c.tileID.overscaledZ>=a?c:null}for(let c=n.overscaledZ-1;c>=a;c--){const h=n.scaledTo(c),v=this._getLoadedTile(h);if(v)return v}}_getLoadedTile(n){const a=this._tiles[n.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,a){a=a||this._source.tileSize;const c=Math.ceil(n.width/a)+1,h=Math.ceil(n.height/a)+1,v=Math.floor(c*h*5),y=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,v):v,x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(x)}handleWrapJump(n){const a=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,a){const c={};for(const h in this._tiles){const v=this._tiles[h];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+a),c[v.tileID.key]=v}this._tiles=c;for(const h in this._timers)clearTimeout(this._timers[h]),delete this._timers[h];for(const h in this._tiles)this._setTileReloadTimer(+h,this._tiles[h])}}update(n,a,c){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let h;this.updateCacheSize(n,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new Ki(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(h=n.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(h=h.filter(x=>this._source.hasTile(x)))):h=[];const v=this._updateRetainedTiles(h);if(Q2(this._source.type)&&h.length!==0){const x={},E={},I=Object.keys(v);for(const B of I){const $=v[B],X=this._tiles[B];if(!X||X.fadeEndTime&&X.fadeEndTime<=At.now())continue;const J=this.findLoadedParent($,Math.max($.overscaledZ-Tu.maxOverzooming,this._source.minzoom));J&&(this._addTile(J.tileID),x[J.tileID.key]=J.tileID),E[B]=$}const D=h[h.length-1].overscaledZ;for(const B in this._tiles){const $=this._tiles[B];if(v[B]||!$.hasData())continue;let X=$.tileID;for(;X.overscaledZ>D;){X=X.scaledTo(X.overscaledZ-1);const J=this._tiles[X.key];if(J&&J.hasData()&&E[X.key]){v[B]=$.tileID;break}}}for(const B in x)v[B]||(this._coveredTiles[B]=!0,v[B]=x[B])}for(const x in v)this._tiles[x].clearFadeHold();const y=function(x,E){const I=[];for(const D in x)D in E||I.push(D);return I}(this._tiles,v);for(const x of y){const E=this._tiles[x];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const a={};if(n.length===0)return a;const c={},h=n.reduce((I,D)=>Math.min(I,D.overscaledZ),1/0),v=n[0].overscaledZ,y=Math.max(v-Tu.maxOverzooming,this._source.minzoom),x=Math.max(v+Tu.maxUnderzooming,this._source.minzoom),E={};for(const I of n){const D=this._addTile(I);a[I.key]=I,D.hasData()||h<this._source.maxzoom&&(E[I.key]=I)}this._retainLoadedChildren(E,h,x,a);for(const I of n){let D=this._tiles[I.key];if(D.hasData())continue;if(I.canonical.z>=this._source.maxzoom){const $=I.children(this._source.maxzoom)[0],X=this.getTile($);if(X&&X.hasData()){a[$.key]=$;continue}}else{const $=I.children(this._source.maxzoom);if(a[$[0].key]&&a[$[1].key]&&a[$[2].key]&&a[$[3].key])continue}let B=D.wasRequested();for(let $=I.overscaledZ-1;$>=y;--$){const X=I.scaledTo($);if(c[X.key]||(c[X.key]=!0,D=this.getTile(X),!D&&B&&(D=this._addTile(X)),D&&(a[X.key]=X,B=D.wasRequested(),D.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const a=[];let c,h=this._tiles[n].tileID;for(;h.overscaledZ>0;){if(h.key in this._loadedParentTiles){c=this._loadedParentTiles[h.key];break}a.push(h.key);const v=h.scaledTo(h.overscaledZ-1);if(c=this._getLoadedTile(v),c)break;h=v}for(const v of a)this._loadedParentTiles[v]=c}}_addTile(n){let a=this._tiles[n.key];if(a)return this._source.prepareTile&&this._source.prepareTile(a),a;a=this._cache.getAndRemove(n),a&&(this._setTileReloadTimer(n.key,a),a.tileID=n,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,a)));const c=Boolean(a);if(!c){const h=this.map?this.map.painter:null;a=new e0(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,h,this._isRaster),this._source.prepareTile&&this._source.prepareTile(a)||this._loadTile(a,this._tileLoaded.bind(this,a,n.key,a.state))}return a?(a.uses++,this._tiles[n.key]=a,c||this._source.fire(new rr("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(n,a){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const c=a.getExpiryTimeout();c&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},c))}_removeTile(n){const a=this._tiles[n];a&&(a.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,a,c){const h=[],v=this.transform;if(!v)return h;const y=v.projection.name==="globe",x=Ra(v.center.lng);for(const E in this._tiles){const I=this._tiles[E];if(c&&I.clearQueryDebugViz(),I.holdingForFade())continue;let D;if(y){const B=I.tileID.canonical;if(B.z===0){const $=[Math.abs(q(x,...Ih(B,-1))-x),Math.abs(q(x,...Ih(B,1))-x)];D=[0,2*$.indexOf(Math.min(...$))-1]}else{const $=[Math.abs(q(x,...Ih(B,-1))-x),Math.abs(q(x,...Ih(B,0))-x),Math.abs(q(x,...Ih(B,1))-x)];D=[$.indexOf(Math.min(...$))-1]}}else D=[0];for(const B of D){const $=n.containsTile(I,v,a,B);$&&h.push($)}}return h}getVisibleCoordinates(n){const a=this.getRenderableIds(n).map(c=>this._tiles[c].tileID);for(const c of a)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(Q2(this._source.type))for(const n in this._tiles){const a=this._tiles[n];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=At.now())return!0}return!1}setFeatureState(n,a,c){this._state.updateState(n=n||"_geojsonTileLayer",a,c)}removeFeatureState(n,a,c){this._state.removeFeatureState(n=n||"_geojsonTileLayer",a,c)}getFeatureState(n,a){return this._state.getState(n=n||"_geojsonTileLayer",a)}setDependencies(n,a,c){const h=this._tiles[n];h&&h.setDependencies(a,c)}reloadTilesForDependencies(n,a){for(const c in this._tiles)this._tiles[c].hasDependency(n,a)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(n,a))}_preloadTiles(n,a){const c=new Map,h=Array.isArray(n)?n:[n],v=this.map.painter.terrain,y=this.usedForTerrain&&v?v.getScaledDemTileSize():this._source.tileSize;for(const x of h){const E=x.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const I of E)c.set(I.key,I);this.usedForTerrain&&x.updateElevation(!1)}Q(Array.from(c.values()),(x,E)=>{const I=new e0(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(I,D=>{this._source.type==="raster-dem"&&I.dem&&this._backfillDEM(I),E(D,I)})},a)}}function J2(s,n){const a=Math.abs(2*s.wrap)-+(s.wrap<0),c=Math.abs(2*n.wrap)-+(n.wrap<0);return s.overscaledZ-n.overscaledZ||c-a||n.canonical.y-s.canonical.y||n.canonical.x-s.canonical.x}function Q2(s){return s==="raster"||s==="image"||s==="video"}function Ih(s,n){const a=1<<s.z;return[s.x/a+n,(s.x+1)/a+n]}Tu.maxOverzooming=10,Tu.maxUnderzooming=3;class bv{constructor(n,a,c){this._demTile=n,this._dem=this._demTile.dem,this._scale=a,this._offset=c}static create(n,a,c){const h=c||n.findDEMTileFor(a);if(!h||!h.dem)return;const v=h.dem,y=h.tileID,x=1<<a.canonical.z-y.canonical.z;return new bv(h,h.tileSize/Pn/x,[(a.canonical.x/x-y.canonical.x)*v.dim,(a.canonical.y/x-y.canonical.y)*v.dim])}tileCoordToPixel(n,a){const c=a*this._scale+this._offset[1],h=Math.floor(n*this._scale+this._offset[0]),v=Math.floor(c);return new S(h,v)}getElevationAt(n,a,c,h){const v=n*this._scale+this._offset[0],y=a*this._scale+this._offset[1],x=Math.floor(v),E=Math.floor(y),I=this._dem;return h=!!h,c?ur(ur(I.get(x,E,h),I.get(x,E+1,h),y-E),ur(I.get(x+1,E,h),I.get(x+1,E+1,h),y-E),v-x):I.get(x,E,h)}getElevationAtPixel(n,a,c){return this._dem.get(n,a,!!c)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*qo(1,n)*this._dem.stride}}class eT{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new sl(Pn,16,0),this.featureIndexArray=new UC,this.promoteId=a}insert(n,a,c,h,v,y=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,h,v,y);const E=this.grid;for(let I=0;I<a.length;I++){const D=a[I],B=[1/0,1/0,-1/0,-1/0];for(let $=0;$<D.length;$++){const X=D[$];B[0]=Math.min(B[0],X.x),B[1]=Math.min(B[1],X.y),B[2]=Math.max(B[2],X.x),B[3]=Math.max(B[3],X.y)}B[0]<Pn&&B[1]<Pn&&B[2]>=0&&B[3]>=0&&E.insert(x,B[0],B[1],B[2],B[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Cu.VectorTile(new mh(this.rawTileData)).layers,this.sourceLayerCoder=new N2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,a,c,h){this.loadVTLayers();const v=n.params||{},y=lu(v.filter),x=n.tileResult,E=n.transform,I=x.bufferedTilespaceBounds,D=this.grid.query(I.min.x,I.min.y,I.max.x,I.max.y,(J,re,fe,Ae)=>lS(x.bufferedTilespaceGeometry,J,re,fe,Ae));D.sort(a4);let B=null;E.elevation&&D.length>0&&(B=bv.create(E.elevation,this.tileID));const $={};let X;for(let J=0;J<D.length;J++){const re=D[J];if(re===X)continue;X=re;const fe=this.featureIndexArray.get(re);let Ae=null;this.loadMatchingFeature($,fe,y,v.layers,v.availableImages,a,c,h,(je,ke,Ne,Je=0)=>(Ae||(Ae=_s(je,this.tileID.canonical,n.tileTransform)),ke.queryIntersectsFeature(x,je,Ne,Ae,this.z,n.transform,n.pixelPosMatrix,B,Je)))}return $}loadMatchingFeature(n,a,c,h,v,y,x,E,I){const{featureIndex:D,bucketIndex:B,sourceLayerIndex:$,layoutVertexArrayOffset:X}=a,J=this.bucketLayerIDs[B];if(h&&!function(je,ke){for(let Ne=0;Ne<je.length;Ne++)if(ke.indexOf(je[Ne])>=0)return!0;return!1}(h,J))return;const re=this.sourceLayerCoder.decode($),fe=this.vtLayers[re].feature(D);if(c.needGeometry){const je=yu(fe,!0);if(!c.filter(new _e(this.tileID.overscaledZ),je,this.tileID.canonical))return}else if(!c.filter(new _e(this.tileID.overscaledZ),fe))return;const Ae=this.getId(fe,re);for(let je=0;je<J.length;je++){const ke=J[je];if(h&&h.indexOf(ke)<0)continue;const Ne=y[ke];if(!Ne)continue;let Je={};Ae!==void 0&&E&&(Je=E.getState(Ne.sourceLayer||"_geojsonTileLayer",Ae));const Ue=ie({},x[ke]);Ue.paint=tT(Ue.paint,Ne.paint,fe,Je,v),Ue.layout=tT(Ue.layout,Ne.layout,fe,Je,v);const gt=!I||I(fe,Ne,Je,X);if(!gt)continue;const ft=new $2(fe,this.z,this.x,this.y,Ae);ft.layer=Ue;let Mt=n[ke];Mt===void 0&&(Mt=n[ke]=[]),Mt.push({featureIndex:D,feature:ft,intersectionZ:gt})}}lookupSymbolFeatures(n,a,c,h,v,y,x,E){const I={};this.loadVTLayers();const D=lu(v);for(const B of n)this.loadMatchingFeature(I,{bucketIndex:c,sourceLayerIndex:h,featureIndex:B,layoutVertexArrayOffset:0},D,y,x,E,a);return I}loadFeature(n){const{featureIndex:a,sourceLayerIndex:c}=n;this.loadVTLayers();const h=this.sourceLayerCoder.decode(c),v=this.vtFeatures[h];if(v[a])return v[a];const y=this.vtLayers[h].feature(a);return v[a]=y,y}hasLayer(n){for(const a of this.bucketLayerIDs)for(const c of a)if(n===c)return!0;return!1}getId(n,a){let c=n.id;return this.promoteId&&(c=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof c=="boolean"&&(c=Number(c))),c}}function tT(s,n,a,c,h){return me(s,(v,y)=>{const x=n instanceof Ze?n.get(y):null;return x&&x.evaluate?x.evaluate(a,c,h):x})}function a4(s,n){return n-s}pn(eT,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class nT{constructor(n){const a={},c=[];for(const x in n){const E=n[x],I=a[x]={};for(const D in E.glyphs){const B=E.glyphs[+D];if(!B||B.bitmap.width===0||B.bitmap.height===0)continue;const $=B.metrics.localGlyph?2:1,X={x:0,y:0,w:B.bitmap.width+2*$,h:B.bitmap.height+2*$};c.push(X),I[D]=X}}const{w:h,h:v}=L_(c),y=new xs({width:h||1,height:v||1});for(const x in n){const E=n[x];for(const I in E.glyphs){const D=E.glyphs[+I];if(!D||D.bitmap.width===0||D.bitmap.height===0)continue;const B=a[x][I],$=D.metrics.localGlyph?2:1;xs.copy(D.bitmap,y,{x:0,y:0},{x:B.x+$,y:B.y+$},D.bitmap)}}this.image=y,this.positions=a}}pn(nT,"GlyphAtlas");class s4{constructor(n){this.tileID=new Ki(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Su(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,a,c,h,v){this.status="parsing",this.data=n,this.collisionBoxArray=new Da;const y=new N2(Object.keys(n.layers).sort()),x=new eT(this.tileID,this.promoteId);x.bucketLayerIDs=[];const E={},I=new Q_(256,256),D={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:I,availableImages:c},B=a.familiesBySource[this.source];for(const Je in B){const Ue=n.layers[Je];if(!Ue)continue;let gt=!1,ft=!1;for(const xt of B[Je])xt[0].type==="symbol"?gt=!0:ft=!0;if(this.isSymbolTile===!0&&!gt||this.isSymbolTile===!1&&!ft)continue;Ue.version===1&&Re(`Vector tile source "${this.source}" layer "${Je}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mt=y.encode(Je),Jt=[];for(let xt=0;xt<Ue.length;xt++){const Lt=Ue.feature(xt),Vt=x.getId(Lt,Je);Jt.push({feature:Lt,id:Vt,index:xt,sourceLayerIndex:Mt})}for(const xt of B[Je]){const Lt=xt[0];this.isSymbolTile!==void 0&&Lt.type==="symbol"!==this.isSymbolTile||Lt.minzoom&&this.zoom<Math.floor(Lt.minzoom)||Lt.maxzoom&&this.zoom>=Lt.maxzoom||Lt.visibility!=="none"&&(o0(xt,this.zoom,c),(E[Lt.id]=Lt.createBucket({index:x.bucketLayerIDs.length,layers:xt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:c})).populate(Jt,D,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(xt.map(Vt=>Vt.id)))}}let $,X,J,re;I.trim();const fe={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ae=me(D.glyphDependencies,Je=>Object.keys(Je).map(Number));Object.keys(Ae).length?h.send("getGlyphs",{uid:this.uid,stacks:Ae},(Je,Ue)=>{$||($=Je,X=Ue,Ne.call(this))},void 0,!1,fe):X={};const je=Object.keys(D.iconDependencies);je.length?h.send("getImages",{icons:je,source:this.source,tileID:this.tileID,type:"icons"},(Je,Ue)=>{$||($=Je,J=Ue,Ne.call(this))},void 0,!1,fe):J={};const ke=Object.keys(D.patternDependencies);function Ne(){if($)return v($);if(X&&J&&re){const Je=new nT(X),Ue=new r2(J,re);for(const gt in E){const ft=E[gt];ft instanceof ml?(o0(ft.layers,this.zoom,c),AF(ft,X,Je.positions,J,Ue.iconPositions,this.showCollisionBoxes,c,this.tileID.canonical,this.tileZoom,this.projection)):ft.hasPattern&&(ft instanceof nv||ft instanceof Jm||ft instanceof dh)&&(o0(ft.layers,this.zoom,c),ft.addFeatures(D,this.tileID.canonical,Ue.patternPositions,c,this.tileTransform))}this.status="done",v(null,{buckets:te(E).filter(gt=>!gt.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Je.image,lineAtlas:I,imageAtlas:Ue,glyphMap:this.returnDependencies?X:null,iconMap:this.returnDependencies?J:null,glyphPositions:this.returnDependencies?Je.positions:null})}}ke.length?h.send("getImages",{icons:ke,source:this.source,tileID:this.tileID,type:"patterns"},(Je,Ue)=>{$||($=Je,re=Ue,Ne.call(this))},void 0,!1,fe):re={},Ne.call(this)}}function o0(s,n,a){const c=new _e(n);for(const h of s)h.recalculate(c,a)}class rT{constructor(n){this.entries={},this.scheduler=n}request(n,a,c,h){const v=this.entries[n]=this.entries[n]||{callbacks:[]};if(v.result){const[y,x]=v.result;return this.scheduler?this.scheduler.add(()=>{h(y,x)},a):h(y,x),()=>{}}return v.callbacks.push(h),v.cancel||(v.cancel=c((y,x)=>{v.result=[y,x];for(const E of v.callbacks)this.scheduler?this.scheduler.add(()=>{E(y,x)},a):E(y,x);setTimeout(()=>delete this.entries[n],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(y=>y!==h),v.callbacks.length||(v.cancel(),delete this.entries[n]))}}}function iT(s,n,a){const c=JSON.stringify(s.request);return s.data&&(this.deduped.entries[c]={result:[null,s.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},h=>{const v=ot(s.request,(y,x,E,I)=>{y?h(y):x&&h(null,{vectorTile:a?void 0:new Cu.VectorTile(new mh(x)),rawData:x,cacheControl:E,expires:I})});return()=>{v.cancel(),h()}},n)}o.ARRAY_TYPE=vo,o.AUTH_ERR_MSG=Rt,o.Aabb=no,o.Actor=class{constructor(s,n,a){this.target=s,this.parent=n,this.mapId=a,this.callbacks={},this.cancelCallbacks={},ge(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=oe()?s:_,this.scheduler=new n4}send(s,n,a,c,h=!1,v){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=v,this.callbacks[y]=a);const x=lt(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:s,hasCallback:!!a,targetMapId:c,mustQueue:h,sourceMapId:this.mapId,data:ll(n,x)},x),{cancel:()=>{a&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(s){const n=s.data,a=n.id;if(a&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const c=this.cancelCallbacks[a];delete this.cancelCallbacks[a],c&&c.cancel()}else if(n.mustQueue||oe()){const c=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,n),c&&c.metadata||{type:"message"})}else this.processTask(a,n)}processTask(s,n){if(n.type==="<response>"){const a=this.callbacks[s];delete this.callbacks[s],a&&(n.error?a(du(n.error)):a(null,du(n.data)))}else{const a=lt(this.globalScope)?void 0:[],c=n.hasCallback?(v,y)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:v?ll(v):null,data:ll(y,a)},a)}:v=>{},h=du(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,h,c);else if(this.parent.getWorkerSource){const v=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,v[0],h.source)[v[1]](h,c)}else c(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=ev,o.Color=Ir,o.ColorMode=ja,o.CullFaceMode=ma,o.DEMData=xv,o.DataConstantProperty=Ge,o.DedupedRequest=rT,o.DepthMode=od,o.EXTENT=Pn,o.Elevation=class{isDataAvailableAtPoint(s){const n=this._source();if(!n||s.y<0||s.y>1)return!1;const a=n.getSource().maxzoom,c=1<<a,h=Math.floor(s.x),v=Math.floor((s.x-h)*c),y=Math.floor(s.y*c),x=this.findDEMTileFor(new Ki(a,h,a,v,y));return!(!x||!x.dem)}getAtPointOrZero(s,n=0){return this.getAtPoint(s,n)||0}getAtPoint(s,n,a=!0){n==null&&(n=null);const c=this._source();if(!c||s.y<0||s.y>1)return n;const h=c.getSource().maxzoom,v=1<<h,y=Math.floor(s.x),x=s.x-y,E=new Ki(h,y,h,Math.floor(x*v),Math.floor(s.y*v)),I=this.findDEMTileFor(E);if(!I||!I.dem)return n;const D=I.dem,B=1<<I.tileID.canonical.z,$=(x*B-I.tileID.canonical.x)*D.dim,X=(s.y*B-I.tileID.canonical.y)*D.dim,J=Math.floor($),re=Math.floor(X);return(a?this.exaggeration():1)*ur(ur(D.get(J,re),D.get(J,re+1),X-re),ur(D.get(J+1,re),D.get(J+1,re+1),X-re),$-J)}getAtTileOffset(s,n,a){const c=1<<s.canonical.z;return this.getAtPointOrZero(new Kc(s.wrap+(s.canonical.x+n/Pn)/c,(s.canonical.y+a/Pn)/c))}getAtTileOffsetFunc(s,n,a,c){return h=>{const v=this.getAtTileOffset(s,h.x,h.y),y=c.upVector(s.canonical,h.x,h.y);return da(y,y,v*c.upVectorScale(s.canonical,n,a).metersToTile),y}}getForTilePoints(s,n,a,c){const h=bv.create(this,s,c);return!!h&&(n.forEach(v=>{v[2]=this.exaggeration()*h.getElevationAt(v[0],v[1],a)}),!0)}getMinMaxForTile(s){const n=this.findDEMTileFor(s);if(!n||!n.dem)return null;const a=n.dem.tree,c=n.tileID,h=1<<s.canonical.z-c.canonical.z;let v=s.canonical.x/h-c.canonical.x,y=s.canonical.y/h-c.canonical.y,x=0;for(let E=0;E<s.canonical.z-c.canonical.z&&!a.leaves[x];E++){v*=2,y*=2;const I=2*Math.floor(y)+Math.floor(v);x=a.childOffsets[x]+I,v%=1,y%=1}return{min:this.exaggeration()*a.minimums[x],max:this.exaggeration()*a.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,n,a){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Ln,o.EvaluationParameters=_e,o.Event=rr,o.Evented=gn,o.FillExtrusionBucket=dh,o.Frustum=T_,o.FrustumCorners=S_,o.GLOBE_METERS_TO_ECEF=G_,o.GLOBE_RADIUS=Cs,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_createGrid(s){const n=new rn,a=new qn,c=65;for(let h=0;h<c;h++)for(let v=0;v<c;v++)n.emplaceBack(v,h);this._gridSegments=[];for(let h=0,v=0;h<nd.length;h++){const y=nd[h];for(let E=0;E<y;E++)for(let I=0;I<64;I++){const D=E*c+I;a.emplaceBack(D+1,D,D+c),a.emplaceBack(D+c,D+c+1,D+1)}const x=64*y*2;this._gridSegments.push(ci.simpleSegment(0,v,(y+1)*c,x)),v+=x}this._gridBuffer=s.createVertexBuffer(n,yh.members),this._gridIndexBuffer=s.createIndexBuffer(a,!0)}_createPoles(s){const n=new qn;for(let h=0;h<=64;h++)n.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=s.createIndexBuffer(n,!0);const a=new Ii,c=new Ii;this._poleSegments=[];for(let h=0,v=0;h<5;h++){const y=360/(1<<h);a.emplaceBack(0,-Cs,0,.5,0),c.emplaceBack(0,-Cs,0,.5,1);for(let x=0;x<=64;x++){const E=x/64,I=ur(0,y,E),[D,B,$]=rd(LF,FF,I,Cs);a.emplaceBack(D,B,$,E,0),c.emplaceBack(D,B,$,E,1)}this._poleSegments.push(ci.simpleSegment(v,0,66,64)),v+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(a,C2,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(c,C2,!1)}getGridBuffers(s){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[s]]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,n){if(!this._wireframeSegments){const a=new zi,c=64,h=c+1;this._wireframeSegments=[];for(let v=0,y=0;v<nd.length;v++){const x=nd[v];for(let I=0;I<x;I++)for(let D=0;D<c;D++){const B=I*h+D;a.emplaceBack(B,B+1),a.emplaceBack(B,B+h),a.emplaceBack(B,B+h+1)}const E=x*c*3;this._wireframeSegments.push(ci.simpleSegment(0,y,(x+1)*h,E)),y+=E}this._wireframeIndexBuffer=s.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},o.GlyphManager=ed,o.ImagePosition=F_,o.LineAtlas=Q_,o.LngLat=Sr,o.LngLatBounds=dl,o.LocalGlyphMode=j_,o.MAX_MERCATOR_LATITUDE=za,o.MercatorCoordinate=Kc,o.ONE_EM=Ai,o.OverscaledTileID=Ki,o.Properties=Dt,o.RGBAImage=go,o.Ray=C_,o.RequestManager=class{constructor(s,n,a){this._transformRequestFn=s,this._customAccessToken=n,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const s=function(){let n="";for(let a=0;a<10;a++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Cn,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,n){return this._transformRequestFn&&this._transformRequestFn(s,n)||{url:s}}normalizeStyleURL(s,n){if(!ht(s))return s;const a=zt(s);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeGlyphsURL(s,n){if(!ht(s))return s;const a=zt(s);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||n)}normalizeSourceURL(s,n,a,c){if(!ht(s))return s;const h=zt(s);return h.path=`/v4/${h.authority}.json`,h.params.push("secure"),a&&h.params.push(`language=${a}`),c&&h.params.push(`worldview=${c}`),this._makeAPIURL(h,this._customAccessToken||n)}normalizeSpriteURL(s,n,a,c){const h=zt(s);return ht(s)?(h.path=`/styles/v1${h.path}/sprite${n}${a}`,this._makeAPIURL(h,this._customAccessToken||c)):(h.path+=`${n}${a}`,mt(h))}normalizeTileURL(s,n,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!ht(s))return s;const c=zt(s);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||a&&c.authority!=="raster"&&a===512?"@2x":""}${tt.supported?".webp":"$1"}`),c.authority==="raster"?c.path=`/${nt.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${nt.TILE_URL_VERSION}${c.path}`);const h=this._customAccessToken||function(v){for(const y of v){const x=y.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(c.params)||nt.ACCESS_TOKEN;return nt.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,h)}canonicalizeTileURL(s,n){const a=zt(s);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return s;let c="mapbox://";a.path.match(/^\/raster\/v1\//)?c+=`raster/${a.path.replace(`/${nt.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${a.path.replace(`/${nt.TILE_URL_VERSION}/`,"")}`;let h=a.params;return n&&(h=h.filter(v=>!v.match(/^access_token=/))),h.length&&(c+=`?${h.join("&")}`),c}canonicalizeTileset(s,n){const a=!!n&&ht(n),c=[];for(const h of s.tiles||[])Ht(h)?c.push(this.canonicalizeTileURL(h,a)):c.push(h);return c}_makeAPIURL(s,n){const a="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",c=zt(nt.API_URL);if(s.protocol=c.protocol,s.authority=c.authority,s.protocol==="http"){const h=s.params.indexOf("secure");h>=0&&s.params.splice(h,1)}if(c.path!=="/"&&(s.path=`${c.path}${s.path}`),!nt.REQUIRE_ACCESS_TOKEN)return mt(s);if(n=n||nt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return s.params=s.params.filter(h=>h.indexOf("access_token")===-1),s.params.push(`access_token=${n||""}`),mt(s)}},o.ResourceType=Ve,o.SegmentVector=ci,o.SourceCache=Tu,o.StencilMode=n0,o.StructArrayLayout1ui2=fs,o.StructArrayLayout2f1f2i16=la,o.StructArrayLayout2i4=rn,o.StructArrayLayout2ui4=zi,o.StructArrayLayout3f12=Gr,o.StructArrayLayout3ui6=qn,o.StructArrayLayout4i8=En,o.StructArrayLayout5f20=Ii,o.Texture=Eh,o.Tile=e0,o.Transitionable=Me,o.Uniform1f=Nm,o.Uniform1i=class extends vs{constructor(s){super(s),this.current=0}set(s,n,a){this.fetchUniformLocation(s,n)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},o.Uniform2f=class extends vs{constructor(s){super(s),this.current=[0,0]}set(s,n,a){this.fetchUniformLocation(s,n)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},o.Uniform3f=class extends vs{constructor(s){super(s),this.current=[0,0,0]}set(s,n,a){this.fetchUniformLocation(s,n)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},o.Uniform4f=XC,o.UniformColor=YC,o.UniformMatrix2f=class extends vs{constructor(s){super(s),this.current=Kz}set(s,n,a){if(this.fetchUniformLocation(s,n)){for(let c=0;c<4;c++)if(a[c]!==this.current[c]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}},o.UniformMatrix3f=class extends vs{constructor(s){super(s),this.current=Uz}set(s,n,a){if(this.fetchUniformLocation(s,n)){for(let c=0;c<9;c++)if(a[c]!==this.current[c]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},o.UniformMatrix4f=class extends vs{constructor(s){super(s),this.current=Vz}set(s,n,a){if(this.fetchUniformLocation(s,n)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let c=1;c<16;c++)if(a[c]!==this.current[c]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},o.UnwrappedTileID=KS,o.ValidationError=fn,o.VectorTileWorkerSource=class extends gn{constructor(s,n,a,c,h){super(),this.actor=s,this.layerIndex=n,this.availableImages=a,this.loadVectorData=h||iT,this.loading={},this.loaded={},this.deduped=new rT(s.scheduler),this.isSpriteLoaded=c,this.scheduler=s.scheduler}loadTile(s,n){const a=s.uid,c=s&&s.request,h=c&&c.collectResourceTiming,v=this.loading[a]=new s4(s);v.abort=this.loadVectorData(s,(y,x)=>{const E=!this.loading[a];if(delete this.loading[a],E||y||!x)return v.status="done",E||(this.loaded[a]=v),n(y);const I=x.rawData,D={};x.expires&&(D.expires=x.expires),x.cacheControl&&(D.cacheControl=x.cacheControl),v.vectorTile=x.vectorTile||new Cu.VectorTile(new mh(I));const B=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,($,X)=>{if($||!X)return n($);const J={};if(h){const re=se(c);re.length>0&&(J.resourceTiming=JSON.parse(JSON.stringify(re)))}n(null,ie({rawTileData:I.slice(0)},X,D,J))})};this.isSpriteLoaded?B():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(B,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):B()}),this.loaded=this.loaded||{},this.loaded[a]=v})}reloadTile(s,n){const a=this.loaded,c=s.uid,h=this;if(a&&a[c]){const v=a[c];v.showCollisionBoxes=s.showCollisionBoxes,v.enableTerrain=!!s.enableTerrain,v.projection=s.projection,v.tileTransform=Su(s.tileID.canonical,s.projection);const y=(x,E)=>{const I=v.reloadCallback;I&&(delete v.reloadCallback,v.parse(v.vectorTile,h.layerIndex,this.availableImages,h.actor,I)),n(x,E)};v.status==="parsing"?v.reloadCallback=y:v.status==="done"&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(s,n){const a=s.uid,c=this.loading[a];c&&(c.abort&&c.abort(),delete this.loading[a]),n()}removeTile(s,n){const a=this.loaded,c=s.uid;a&&a[c]&&delete a[c],n()}},o.WritingMode=Mo,o.ZoomHistory=Sm,o.add=fl,o.addDynamicAttributes=gv,o.adjoint=function(s,n){var a=n[0],c=n[1],h=n[2],v=n[3],y=n[4],x=n[5],E=n[6],I=n[7],D=n[8];return s[0]=y*D-x*I,s[1]=h*I-c*D,s[2]=c*x-h*y,s[3]=x*E-v*D,s[4]=a*D-h*E,s[5]=h*v-a*x,s[6]=v*I-y*E,s[7]=c*E-a*I,s[8]=a*y-c*v,s},o.asyncAll=Q,o.bezier=U,o.bindAll=ge,o.boundsAttributes=V2,o.bufferConvexPolygon=function(s,n){const a=[];for(let c=0;c<s.length;c++){const h=Z(c-1,-1,s.length-1),v=Z(c+1,-1,s.length-1),y=s[c],x=s[v],E=s[h].sub(y).unit(),I=x.sub(y).unit(),D=I.angleWithSep(E.x,E.y),B=E.add(I).unit().mult(-1*n/Math.sin(D/2));a.push(y.add(B))}return a},o.cacheEntryPossiblyAdded=function(s){Oe++,Oe>ir&&(s.getActor().send("enforceCacheSizeLimit",Mn),Oe=0)},o.calculateGlobeLabelMatrix=function(s,n){const{x:a,y:c}=s.point,h=A2(a,c,s.worldSize/s._pixelsPerMercatorPixel,0,0);return Hc(h,h,W_(Ba(n)))},o.calculateGlobeMatrix=function(s){const{x:n,y:a}=s.point,{lng:c,lat:h}=s._center;return A2(n,a,s.worldSize,c,h)},o.calculateGlobeMercatorMatrix=function(s){const n=s.pixelsPerMeter,a=n/qo(1,s.center.lat),c=La(new Float64Array(16));return nh(c,c,[s.point.x,s.point.y,0]),xu(c,c,[a,a,n]),Float32Array.from(c)},o.circumferenceAtLatitude=u_,o.clamp=q,o.clearTileCache=function(s){const n=Ce(),a=[];for(const c in Dn)n&&a.push(n.delete(c)),delete Dn[c];s&&Promise.all(a).catch(s).then(()=>s())},o.clipLine=m2,o.clone=function(s){var n=new vo(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},o.clone$1=He,o.collisionCircleLayout=tF,o.config=nt,o.conjugate=function(s,n){return s[0]=-n[0],s[1]=-n[1],s[2]=-n[2],s[3]=n[3],s},o.create=function(){var s=new vo(16);return vo!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},o.create$1=dS,o.createExpression=nl,o.createLayout=Nt,o.createStyleLayer=function(s){return s.type==="custom"?new JF(s):new e4[s.type](s)},o.cross=w_,o.degToRad=R,o.distance=function(s,n){return Math.hypot(n[0]-s[0],n[1]-s[1],n[2]-s[2])},o.div=function(s,n,a){return s[0]=n[0]/a[0],s[1]=n[1]/a[1],s[2]=n[2]/a[2],s},o.dot=Zo,o.ease=G,o.easeCubicInOut=N,o.emitValidationErrors=Kf,o.endsWith=he,o.enforceCacheSizeLimit=function(s){for(const n in Dn)Y(n),Dn[n].then(a=>{a.keys().then(c=>{for(let h=0;h<c.length-s;h++)a.delete(c[h])})})},o.evaluateSizeForFeature=rv,o.evaluateSizeForZoom=Xc,o.evaluateVariableOffset=x2,o.evented=ee,o.exactEquals=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]&&s[3]===n[3]},o.exactEquals$1=function(s,n){return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]},o.exported=At,o.exported$1=tt,o.extend=ie,o.extend$1=Qi,o.fillExtrusionHeightLift=jS,o.filterObject=Pe,o.fromMat4=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[4],s[4]=n[5],s[5]=n[6],s[6]=n[8],s[7]=n[9],s[8]=n[10],s},o.fromQuat=function(s,n){var a=n[0],c=n[1],h=n[2],v=n[3],y=a+a,x=c+c,E=h+h,I=a*y,D=c*y,B=c*x,$=h*y,X=h*x,J=h*E,re=v*y,fe=v*x,Ae=v*E;return s[0]=1-B-J,s[1]=D+Ae,s[2]=$-fe,s[3]=0,s[4]=D-Ae,s[5]=1-I-J,s[6]=X+re,s[7]=0,s[8]=$+fe,s[9]=X-re,s[10]=1-I-B,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},o.fromRotation=function(s,n){var a=Math.sin(n),c=Math.cos(n);return s[0]=c,s[1]=a,s[2]=0,s[3]=-a,s[4]=c,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},o.fromScaling=fS,o.furthestTileCorner=function(s){const n=Math.round((s+45+360)%360/90)%4;return F[n]},o.getAABBPointSquareDist=function(s,n,a){let c=0;for(let h=0;h<2;++h){const v=a?a[h]:0;s[h]>v&&(c+=(s[h]-v)*(s[h]-v)),n[h]<v&&(c+=(v-n[h])*(v-n[h]))}return c},o.getAnchorAlignment=$_,o.getAnchorJustification=U_,o.getBounds=function(s){let n=1/0,a=1/0,c=-1/0,h=-1/0;for(const v of s)n=Math.min(n,v.x),a=Math.min(a,v.y),c=Math.max(c,v.x),h=Math.max(h,v.y);return{min:new S(n,a),max:new S(c,h)}},o.getColumn=kt,o.getGridMatrix=function(s,n,a){const c=n.getNorth(),h=n.getSouth(),v=n.getWest(),y=.015625;return[0,(n.getEast()-v)*y,1<<s.z,(h-c)/nd[a],0,s.y,c,v,y]},o.getImage=In,o.getJSON=function(s,n){return Xe(ie(s,{type:"json"}),n)},o.getLatitudinalLod=function(s){const n=80.051129;s=q(s,-80.051129,n)/n*90;const a=Math.pow(Math.abs(Math.sin(R(s))),3);return Math.round(a*(nd.length-1))},o.getMapSessionAPI=sn,o.getPerformanceMeasurement=se,o.getProjection=F2,o.getRTLTextPluginStatus=le,o.getReferrer=rt,o.getTilePoint=function(s,{x:n,y:a},c=0){return new S(((n-c)*s.scale-s.x)*Pn,(a*s.scale-s.y)*Pn)},o.getTileVec3=function(s,n,a=0){return qc(((n.x-a)*s.scale-s.x)*Pn,(n.y*s.scale-s.y)*Pn,eS(n.z,n.y))},o.getVideo=function(s,n){const a=_.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let c=0;c<s.length;c++){const h=_.document.createElement("source");Bt(s[c])||(a.crossOrigin="Anonymous"),h.src=s[c],a.appendChild(h)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(s){const n=[0,0,0],a=La(new Float64Array(16));return Hc(a,s.pixelMatrix,s.globeMatrix),fi(n,n,a),new S(n[0],n[1])},o.globeDenormalizeECEF=W_,o.globeECEFOrigin=function(s,n){const a=[0,0,0];return fi(a,a,xh(Ba(n.canonical))),fi(a,a,s),a},o.globeNormalizeECEF=xh,o.globePixelsToTileUnits=function(s,n){return Pn/(512*Math.pow(2,s))*fv(Ba(n))},o.globePoleMatrixForTile=function(s,n,a){const c=La(new Float64Array(16)),h=(n/(1<<s)-.5)*Math.PI*2;return Gm(c,a.globeMatrix,h),Float32Array.from(c)},o.globeTileBounds=Ba,o.globeTiltAtLngLat=M2,o.globeToMercatorTransition=bh,o.globeUseCustomAntiAliasing=function(s,n,a){const c=bh(a.zoom),h=s.style.map._antialias,v=!!n.extStandardDerivatives,y=n.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return c===0&&!h&&!y&&v},o.identity=La,o.identity$1=_S,o.invert=v_,o.isFullscreen=function(){return!!_.document.fullscreenElement||!!_.document.webkitFullscreenElement},o.isLngLatBehindGlobe=function(s,n){return M2(s,n)>Math.PI/2*1.01},o.isMapAuthenticated=function(s){return xn.has(s)},o.isMapboxURL=ht,o.isSafariWithAntialiasingBug=function(s){const n=s.navigator?s.navigator.userAgent:null;return!!lt(s)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Pi,o.len=sL,o.length=rh,o.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},o.loadVectorTile=iT,o.makeRequest=Xe,o.mapValue=function(s,n,a,c,h){return q((s-n)/(a-n)*(h-c)+c,c,h)},o.mercatorScale=tS,o.mercatorXfromLng=Ra,o.mercatorYfromLat=ys,o.mercatorZfromAltitude=qo,o.mul=oL,o.mul$1=aL,o.multiply=Hc,o.multiply$1=function(s,n,a){var c=n[0],h=n[1],v=n[2],y=n[3],x=n[4],E=n[5],I=n[6],D=n[7],B=n[8],$=a[0],X=a[1],J=a[2],re=a[3],fe=a[4],Ae=a[5],je=a[6],ke=a[7],Ne=a[8];return s[0]=$*c+X*y+J*I,s[1]=$*h+X*x+J*D,s[2]=$*v+X*E+J*B,s[3]=re*c+fe*y+Ae*I,s[4]=re*h+fe*x+Ae*D,s[5]=re*v+fe*E+Ae*B,s[6]=je*c+ke*y+Ne*I,s[7]=je*h+ke*x+Ne*D,s[8]=je*v+ke*E+Ne*B,s},o.multiply$2=mS,o.nextPowerOfTwo=xe,o.normalize=Ui,o.normalize$1=function(s,n){var a=n[0],c=n[1],h=n[2],v=n[3],y=a*a+c*c+h*h+v*v;return y>0&&(y=1/Math.sqrt(y)),s[0]=a*y,s[1]=c*y,s[2]=h*y,s[3]=v*y,s},o.number=ur,o.ortho=function(s,n,a,c,h,v,y){var x=1/(n-a),E=1/(c-h),I=1/(v-y);return s[0]=-2*x,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*I,s[11]=0,s[12]=(n+a)*x,s[13]=(h+c)*E,s[14]=(y+v)*I,s[15]=1,s},o.pbf=mh,o.perspective=function(s,n,a,c,h){var v,y=1/Math.tan(n/2);return s[0]=y/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=y,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,h!=null&&h!==1/0?(s[10]=(h+c)*(v=1/(c-h)),s[14]=2*h*c*v):(s[10]=-1,s[14]=-2*c),s},o.pick=function(s,n){const a={};for(let c=0;c<n.length;c++){const h=n[c];h in s&&(a[h]=s[h])}return a},o.plugin=ye,o.pointGeometry=S,o.polygonContainsPoint=_u,o.polygonIntersectsBox=lS,o.polygonIntersectsPolygon=iS,o.polygonizeBounds=function(s,n,a=0,c=!0){const h=new S(a,a),v=s.sub(h),y=n.add(h),x=[v,new S(y.x,v.y),y,new S(v.x,y.y)];return c&&x.push(v.clone()),x},o.posAttributes=yh,o.postMapLoadEvent=Tt,o.postTurnstileEvent=tn,o.potpack=L_,o.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},o.radToDeg=z,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(s){return s({pluginStatus:k,pluginURL:L}),ee.on("pluginStateChange",s),s},o.removeAuthState=function(s){xn.delete(s)},o.renderColorRamp=I_,o.resample=nS,o.rotateX=g_,o.rotateX$1=xS,o.rotateY=Gm,o.rotateY$1=bS,o.rotateZ=function(s,n,a){var c=Math.sin(a),h=Math.cos(a),v=n[0],y=n[1],x=n[2],E=n[3],I=n[4],D=n[5],B=n[6],$=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=v*h+I*c,s[1]=y*h+D*c,s[2]=x*h+B*c,s[3]=E*h+$*c,s[4]=I*h-v*c,s[5]=D*h-y*c,s[6]=B*h-x*c,s[7]=$*h-E*c,s},o.rotateZ$1=function(s,n,a){a*=.5;var c=n[0],h=n[1],v=n[2],y=n[3],x=Math.sin(a),E=Math.cos(a);return s[0]=c*E+h*x,s[1]=h*E-c*x,s[2]=v*E+y*x,s[3]=y*E-v*x,s},o.scale=xu,o.scale$1=gS,o.scale$2=da,o.scaleAndAdd=Hm,o.setCacheLimits=function(s,n){Mn=s,ir=n},o.setColumn=function(s,n,a){s[4*n+0]=a[0],s[4*n+1]=a[1],s[4*n+2]=a[2],s[4*n+3]=a[3]},o.setRTLTextPlugin=function(s,n,a=!1){if(k===g||k===b||k===w)throw new Error("setRTLTextPlugin cannot be called multiple times.");L=At.resolveURL(s),k=g,M=n,W(),a||Se()},o.smoothstep=V,o.spec=wt,o.storeAuthState=function(s,n){n?xn.add(s):xn.delete(s)},o.sub=fa,o.subtract=__,o.symbolSize=nF,o.tileAABB=function(s,n,a,c,h,v,y,x,E){if(E.name==="globe")return zF(s,n,new ev(a,c,h));const I=Su({z:a,x:c,y:h},E);return new no([(v+I.x/I.scale)*n,n*(I.y/I.scale),y],[(v+I.x2/I.scale)*n,n*(I.y2/I.scale),x])},o.tileCornersToBounds=cv,o.tileTransform=Su,o.transformMat3=function(s,n,a){var c=n[0],h=n[1],v=n[2];return s[0]=c*a[0]+h*a[3]+v*a[6],s[1]=c*a[1]+h*a[4]+v*a[7],s[2]=c*a[2]+h*a[5]+v*a[8],s},o.transformMat4=fi,o.transformMat4$1=bu,o.transformQuat=vS,o.transitionTileAABBinECEF=E2,o.translate=nh,o.transpose=function(s,n){if(s===n){var a=n[1],c=n[2],h=n[5];s[1]=n[3],s[2]=n[6],s[3]=a,s[5]=n[7],s[6]=c,s[7]=h}else s[0]=n[0],s[1]=n[3],s[2]=n[6],s[3]=n[1],s[4]=n[4],s[5]=n[7],s[6]=n[2],s[7]=n[5],s[8]=n[8];return s},o.triggerPluginCompletionEvent=K,o.uniqueId=ce,o.updateGlobeVertexNormal=function(s,n,a,c,h){const v=5*n+2;s.float32[v+0]=a,s.float32[v+1]=c,s.float32[v+2]=h},o.validateCustomStyleLayer=function(s){const n=[],a=s.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},o.validateFilter=s=>sa(ol(s)),o.validateFog=s=>sa(xm(s)),o.validateLayer=s=>sa(Dc(s)),o.validateLight=s=>sa(_m(s)),o.validateSource=s=>sa(ym(s)),o.validateStyle=Lc,o.validateTerrain=s=>sa(zc(s)),o.values=te,o.vectorTile=Cu,o.version=ae,o.warnOnce=Re,o.window=_,o.wrap=Z}),d(["./shared"],function(o){function _(Ce){if(typeof Ce=="number"||typeof Ce=="boolean"||typeof Ce=="string"||Ce==null)return JSON.stringify(Ce);if(Array.isArray(Ce)){let ne="[";for(const be of Ce)ne+=`${_(be)},`;return`${ne}]`}let Y="{";for(const ne of Object.keys(Ce).sort())Y+=`${ne}:${_(Ce[ne])},`;return`${Y}}`}function C(Ce){let Y="";for(const ne of o.refProperties)Y+=`/${_(Ce[ne])}`;return Y}class T{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,ne){for(const Oe of Y)this._layerConfigs[Oe.id]=Oe,(this._layers[Oe.id]=o.createStyleLayer(Oe)).compileFilter(),this.keyCache[Oe.id]&&delete this.keyCache[Oe.id];for(const Oe of ne)delete this.keyCache[Oe],delete this._layerConfigs[Oe],delete this._layers[Oe];this.familiesBySource={};const be=function(Oe,Ve){const it={};for(let Xe=0;Xe<Oe.length;Xe++){const ot=Ve&&Ve[Oe[Xe].id]||C(Oe[Xe]);Ve&&(Ve[Oe[Xe].id]=ot);let Pt=it[ot];Pt||(Pt=it[ot]=[]),Pt.push(Oe[Xe])}const rt=[];for(const Xe in it)rt.push(it[Xe]);return rt}(o.values(this._layerConfigs),this.keyCache);for(const Oe of be){const Ve=Oe.map(Qt=>this._layers[Qt.id]),it=Ve[0];if(it.visibility==="none")continue;const rt=it.source||"";let Xe=this.familiesBySource[rt];Xe||(Xe=this.familiesBySource[rt]={});const ot=it.sourceLayer||"_geojsonTileLayer";let Pt=Xe[ot];Pt||(Pt=Xe[ot]=[]),Pt.push(Ve)}}}class S{loadTile(Y,ne){const{uid:be,encoding:Oe,rawImageData:Ve,padding:it,buildQuadTree:rt}=Y,Xe=o.window.ImageBitmap&&Ve instanceof o.window.ImageBitmap?this.getImageData(Ve,it):Ve;ne(null,new o.DEMData(be,Xe,Oe,it<1,rt))}getImageData(Y,ne){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const be=this.offscreenCanvasContext.getImageData(-ne,-ne,Y.width+2*ne,Y.height+2*ne);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),be}}var P=function Ce(Y,ne){var be,Oe=Y&&Y.type;if(Oe==="FeatureCollection")for(be=0;be<Y.features.length;be++)Ce(Y.features[be],ne);else if(Oe==="GeometryCollection")for(be=0;be<Y.geometries.length;be++)Ce(Y.geometries[be],ne);else if(Oe==="Feature")Ce(Y.geometry,ne);else if(Oe==="Polygon")A(Y.coordinates,ne);else if(Oe==="MultiPolygon")for(be=0;be<Y.coordinates.length;be++)A(Y.coordinates[be],ne);return Y};function A(Ce,Y){if(Ce.length!==0){O(Ce[0],Y);for(var ne=1;ne<Ce.length;ne++)O(Ce[ne],!Y)}}function O(Ce,Y){for(var ne=0,be=0,Oe=0,Ve=Ce.length,it=Ve-1;Oe<Ve;it=Oe++){var rt=(Ce[Oe][0]-Ce[it][0])*(Ce[it][1]+Ce[Oe][1]),Xe=ne+rt;be+=Math.abs(ne)>=Math.abs(rt)?ne-Xe+rt:rt-Xe+ne,ne=Xe}ne+be>=0!=!!Y&&Ce.reverse()}const R=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;class z{constructor(Y){this._feature=Y,this.extent=o.EXTENT,this.type=Y.type,this.properties=Y.tags,"id"in Y&&!isNaN(Y.id)&&(this.id=parseInt(Y.id,10))}loadGeometry(){if(this._feature.type===1){const Y=[];for(const ne of this._feature.geometry)Y.push([new o.pointGeometry(ne[0],ne[1])]);return Y}{const Y=[];for(const ne of this._feature.geometry){const be=[];for(const Oe of ne)be.push(new o.pointGeometry(Oe[0],Oe[1]));Y.push(be)}return Y}}toGeoJSON(Y,ne,be){return R.call(this,Y,ne,be)}}class F{constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Y.length,this._features=Y}feature(Y){return new z(this._features[Y])}}var N=o.vectorTile.VectorTileFeature,U=G;function G(Ce,Y){this.options=Y||{},this.features=Ce,this.length=Ce.length}function q(Ce,Y){this.id=typeof Ce.id=="number"?Ce.id:void 0,this.type=Ce.type,this.rawGeometry=Ce.type===1?[Ce.geometry]:Ce.geometry,this.properties=Ce.tags,this.extent=Y||4096}G.prototype.feature=function(Ce){return new q(this.features[Ce],this.options.extent)},q.prototype.loadGeometry=function(){var Ce=this.rawGeometry;this.geometry=[];for(var Y=0;Y<Ce.length;Y++){for(var ne=Ce[Y],be=[],Oe=0;Oe<ne.length;Oe++)be.push(new o.pointGeometry(ne[Oe][0],ne[Oe][1]));this.geometry.push(be)}return this.geometry},q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ce=this.geometry,Y=1/0,ne=-1/0,be=1/0,Oe=-1/0,Ve=0;Ve<Ce.length;Ve++)for(var it=Ce[Ve],rt=0;rt<it.length;rt++){var Xe=it[rt];Y=Math.min(Y,Xe.x),ne=Math.max(ne,Xe.x),be=Math.min(be,Xe.y),Oe=Math.max(Oe,Xe.y)}return[Y,be,ne,Oe]},q.prototype.toGeoJSON=N.prototype.toGeoJSON;var V=Q,Z=U;function Q(Ce){var Y=new o.pbf;return function(ne,be){for(var Oe in ne.layers)be.writeMessage(3,te,ne.layers[Oe])}(Ce,Y),Y.finish()}function te(Ce,Y){var ne;Y.writeVarintField(15,Ce.version||1),Y.writeStringField(1,Ce.name||""),Y.writeVarintField(5,Ce.extent||4096);var be={keys:[],values:[],keycache:{},valuecache:{}};for(ne=0;ne<Ce.length;ne++)be.feature=Ce.feature(ne),Y.writeMessage(2,ie,be);var Oe=be.keys;for(ne=0;ne<Oe.length;ne++)Y.writeStringField(3,Oe[ne]);var Ve=be.values;for(ne=0;ne<Ve.length;ne++)Y.writeMessage(4,De,Ve[ne])}function ie(Ce,Y){var ne=Ce.feature;ne.id!==void 0&&Y.writeVarintField(1,ne.id),Y.writeMessage(2,ve,Ce),Y.writeVarintField(3,ne.type),Y.writeMessage(4,xe,ne)}function ve(Ce,Y){var ne=Ce.feature,be=Ce.keys,Oe=Ce.values,Ve=Ce.keycache,it=Ce.valuecache;for(var rt in ne.properties){var Xe=ne.properties[rt],ot=Ve[rt];if(Xe!==null){ot===void 0&&(be.push(rt),Ve[rt]=ot=be.length-1),Y.writeVarint(ot);var Pt=typeof Xe;Pt!=="string"&&Pt!=="boolean"&&Pt!=="number"&&(Xe=JSON.stringify(Xe));var Qt=Pt+":"+Xe,Bt=it[Qt];Bt===void 0&&(Oe.push(Xe),it[Qt]=Bt=Oe.length-1),Y.writeVarint(Bt)}}}function ce(Ce,Y){return(Y<<3)+(7&Ce)}function de(Ce){return Ce<<1^Ce>>31}function xe(Ce,Y){for(var ne=Ce.loadGeometry(),be=Ce.type,Oe=0,Ve=0,it=ne.length,rt=0;rt<it;rt++){var Xe=ne[rt],ot=1;be===1&&(ot=Xe.length),Y.writeVarint(ce(1,ot));for(var Pt=be===3?Xe.length-1:Xe.length,Qt=0;Qt<Pt;Qt++){Qt===1&&be!==1&&Y.writeVarint(ce(2,Pt-1));var Bt=Xe[Qt].x-Oe,Sn=Xe[Qt].y-Ve;Y.writeVarint(de(Bt)),Y.writeVarint(de(Sn)),Oe+=Bt,Ve+=Sn}be===3&&Y.writeVarint(ce(7,1))}}function De(Ce,Y){var ne=typeof Ce;ne==="string"?Y.writeStringField(1,Ce):ne==="boolean"?Y.writeBooleanField(7,Ce):ne==="number"&&(Ce%1!=0?Y.writeDoubleField(3,Ce):Ce<0?Y.writeSVarintField(6,Ce):Y.writeVarintField(5,Ce))}function ge(Ce,Y,ne,be,Oe,Ve){if(Oe-be<=ne)return;const it=be+Oe>>1;he(Ce,Y,it,be,Oe,Ve%2),ge(Ce,Y,ne,be,it-1,Ve+1),ge(Ce,Y,ne,it+1,Oe,Ve+1)}function he(Ce,Y,ne,be,Oe,Ve){for(;Oe>be;){if(Oe-be>600){const ot=Oe-be+1,Pt=ne-be+1,Qt=Math.log(ot),Bt=.5*Math.exp(2*Qt/3),Sn=.5*Math.sqrt(Qt*Bt*(ot-Bt)/ot)*(Pt-ot/2<0?-1:1);he(Ce,Y,ne,Math.max(be,Math.floor(ne-Pt*Bt/ot+Sn)),Math.min(Oe,Math.floor(ne+(ot-Pt)*Bt/ot+Sn)),Ve)}const it=Y[2*ne+Ve];let rt=be,Xe=Oe;for(me(Ce,Y,be,ne),Y[2*Oe+Ve]>it&&me(Ce,Y,be,Oe);rt<Xe;){for(me(Ce,Y,rt,Xe),rt++,Xe--;Y[2*rt+Ve]<it;)rt++;for(;Y[2*Xe+Ve]>it;)Xe--}Y[2*be+Ve]===it?me(Ce,Y,be,Xe):(Xe++,me(Ce,Y,Xe,Oe)),Xe<=ne&&(be=Xe+1),ne<=Xe&&(Oe=Xe-1)}}function me(Ce,Y,ne,be){Pe(Ce,ne,be),Pe(Y,2*ne,2*be),Pe(Y,2*ne+1,2*be+1)}function Pe(Ce,Y,ne){const be=Ce[Y];Ce[Y]=Ce[ne],Ce[ne]=be}function He(Ce,Y,ne,be){const Oe=Ce-ne,Ve=Y-be;return Oe*Oe+Ve*Ve}V.fromVectorTileJs=Q,V.fromGeojsonVt=function(Ce,Y){Y=Y||{};var ne={};for(var be in Ce)ne[be]=new U(Ce[be].features,Y),ne[be].name=be,ne[be].version=Y.version,ne[be].extent=Y.extent;return Q({layers:ne})},V.GeoJSONWrapper=Z;const Ke=Ce=>Ce[0],Re=Ce=>Ce[1];class Le{constructor(Y,ne=Ke,be=Re,Oe=64,Ve=Float64Array){this.nodeSize=Oe,this.points=Y;const it=Y.length<65536?Uint16Array:Uint32Array,rt=this.ids=new it(Y.length),Xe=this.coords=new Ve(2*Y.length);for(let ot=0;ot<Y.length;ot++)rt[ot]=ot,Xe[2*ot]=ne(Y[ot]),Xe[2*ot+1]=be(Y[ot]);ge(rt,Xe,Oe,0,rt.length-1,0)}range(Y,ne,be,Oe){return function(Ve,it,rt,Xe,ot,Pt,Qt){const Bt=[0,Ve.length-1,0],Sn=[];let mn,vn;for(;Bt.length;){const In=Bt.pop(),Nn=Bt.pop(),nr=Bt.pop();if(Nn-nr<=Qt){for(let gn=nr;gn<=Nn;gn++)mn=it[2*gn],vn=it[2*gn+1],mn>=rt&&mn<=ot&&vn>=Xe&&vn<=Pt&&Sn.push(Ve[gn]);continue}const rr=Math.floor((nr+Nn)/2);mn=it[2*rr],vn=it[2*rr+1],mn>=rt&&mn<=ot&&vn>=Xe&&vn<=Pt&&Sn.push(Ve[rr]);const Ln=(In+1)%2;(In===0?rt<=mn:Xe<=vn)&&(Bt.push(nr),Bt.push(rr-1),Bt.push(Ln)),(In===0?ot>=mn:Pt>=vn)&&(Bt.push(rr+1),Bt.push(Nn),Bt.push(Ln))}return Sn}(this.ids,this.coords,Y,ne,be,Oe,this.nodeSize)}within(Y,ne,be){return function(Oe,Ve,it,rt,Xe,ot){const Pt=[0,Oe.length-1,0],Qt=[],Bt=Xe*Xe;for(;Pt.length;){const Sn=Pt.pop(),mn=Pt.pop(),vn=Pt.pop();if(mn-vn<=ot){for(let Ln=vn;Ln<=mn;Ln++)He(Ve[2*Ln],Ve[2*Ln+1],it,rt)<=Bt&&Qt.push(Oe[Ln]);continue}const In=Math.floor((vn+mn)/2),Nn=Ve[2*In],nr=Ve[2*In+1];He(Nn,nr,it,rt)<=Bt&&Qt.push(Oe[In]);const rr=(Sn+1)%2;(Sn===0?it-Xe<=Nn:rt-Xe<=nr)&&(Pt.push(vn),Pt.push(In-1),Pt.push(rr)),(Sn===0?it+Xe>=Nn:rt+Xe>=nr)&&(Pt.push(In+1),Pt.push(mn),Pt.push(rr))}return Qt}(this.ids,this.coords,Y,ne,be,this.nodeSize)}}const Te={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ce=>Ce},oe=Math.fround||(ze=new Float32Array(1),Ce=>(ze[0]=+Ce,ze[0]));var ze;class Fe{constructor(Y){this.options=st(Object.create(Te),Y),this.trees=new Array(this.options.maxZoom+1)}load(Y){const{log:ne,minZoom:be,maxZoom:Oe,nodeSize:Ve}=this.options;ne&&console.time("total time");const it=`prepare ${Y.length} points`;ne&&console.time(it),this.points=Y;let rt=[];for(let Xe=0;Xe<Y.length;Xe++)Y[Xe].geometry&&rt.push(vt(Y[Xe],Xe));this.trees[Oe+1]=new Le(rt,ut,bt,Ve,Float32Array),ne&&console.timeEnd(it);for(let Xe=Oe;Xe>=be;Xe--){const ot=+Date.now();rt=this._cluster(rt,Xe),this.trees[Xe]=new Le(rt,ut,bt,Ve,Float32Array),ne&&console.log("z%d: %d clusters in %dms",Xe,rt.length,+Date.now()-ot)}return ne&&console.timeEnd("total time"),this}getClusters(Y,ne){let be=((Y[0]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,Y[1]));let Ve=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const it=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)be=-180,Ve=180;else if(be>Ve){const Pt=this.getClusters([be,Oe,180,it],ne),Qt=this.getClusters([-180,Oe,Ve,it],ne);return Pt.concat(Qt)}const rt=this.trees[this._limitZoom(ne)],Xe=rt.range(se(be),ae(it),se(Ve),ae(Oe)),ot=[];for(const Pt of Xe){const Qt=rt.points[Pt];ot.push(Qt.numPoints?kt(Qt):this.points[Qt.index])}return ot}getChildren(Y){const ne=this._getOriginId(Y),be=this._getOriginZoom(Y),Oe="No cluster with the specified id.",Ve=this.trees[be];if(!Ve)throw new Error(Oe);const it=Ve.points[ne];if(!it)throw new Error(Oe);const rt=this.options.radius/(this.options.extent*Math.pow(2,be-1)),Xe=Ve.within(it.x,it.y,rt),ot=[];for(const Pt of Xe){const Qt=Ve.points[Pt];Qt.parentId===Y&&ot.push(Qt.numPoints?kt(Qt):this.points[Qt.index])}if(ot.length===0)throw new Error(Oe);return ot}getLeaves(Y,ne,be){const Oe=[];return this._appendLeaves(Oe,Y,ne=ne||10,be=be||0,0),Oe}getTile(Y,ne,be){const Oe=this.trees[this._limitZoom(Y)],Ve=Math.pow(2,Y),{extent:it,radius:rt}=this.options,Xe=rt/it,ot=(be-Xe)/Ve,Pt=(be+1+Xe)/Ve,Qt={features:[]};return this._addTileFeatures(Oe.range((ne-Xe)/Ve,ot,(ne+1+Xe)/Ve,Pt),Oe.points,ne,be,Ve,Qt),ne===0&&this._addTileFeatures(Oe.range(1-Xe/Ve,ot,1,Pt),Oe.points,Ve,be,Ve,Qt),ne===Ve-1&&this._addTileFeatures(Oe.range(0,ot,Xe/Ve,Pt),Oe.points,-1,be,Ve,Qt),Qt.features.length?Qt:null}getClusterExpansionZoom(Y){let ne=this._getOriginZoom(Y)-1;for(;ne<=this.options.maxZoom;){const be=this.getChildren(Y);if(ne++,be.length!==1)break;Y=be[0].properties.cluster_id}return ne}_appendLeaves(Y,ne,be,Oe,Ve){const it=this.getChildren(ne);for(const rt of it){const Xe=rt.properties;if(Xe&&Xe.cluster?Ve+Xe.point_count<=Oe?Ve+=Xe.point_count:Ve=this._appendLeaves(Y,Xe.cluster_id,be,Oe,Ve):Ve<Oe?Ve++:Y.push(rt),Y.length===be)break}return Ve}_addTileFeatures(Y,ne,be,Oe,Ve,it){for(const rt of Y){const Xe=ne[rt],ot=Xe.numPoints;let Pt,Qt,Bt;if(ot)Pt=It(Xe),Qt=Xe.x,Bt=Xe.y;else{const vn=this.points[Xe.index];Pt=vn.properties,Qt=se(vn.geometry.coordinates[0]),Bt=ae(vn.geometry.coordinates[1])}const Sn={type:1,geometry:[[Math.round(this.options.extent*(Qt*Ve-be)),Math.round(this.options.extent*(Bt*Ve-Oe))]],tags:Pt};let mn;ot?mn=Xe.id:this.options.generateId?mn=Xe.index:this.points[Xe.index].id&&(mn=this.points[Xe.index].id),mn!==void 0&&(Sn.id=mn),it.features.push(Sn)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(+Y,this.options.maxZoom+1))}_cluster(Y,ne){const be=[],{radius:Oe,extent:Ve,reduce:it,minPoints:rt}=this.options,Xe=Oe/(Ve*Math.pow(2,ne));for(let ot=0;ot<Y.length;ot++){const Pt=Y[ot];if(Pt.zoom<=ne)continue;Pt.zoom=ne;const Qt=this.trees[ne+1],Bt=Qt.within(Pt.x,Pt.y,Xe),Sn=Pt.numPoints||1;let mn=Sn;for(const vn of Bt){const In=Qt.points[vn];In.zoom>ne&&(mn+=In.numPoints||1)}if(mn>Sn&&mn>=rt){let vn=Pt.x*Sn,In=Pt.y*Sn,Nn=it&&Sn>1?this._map(Pt,!0):null;const nr=(ot<<5)+(ne+1)+this.points.length;for(const rr of Bt){const Ln=Qt.points[rr];if(Ln.zoom<=ne)continue;Ln.zoom=ne;const gn=Ln.numPoints||1;vn+=Ln.x*gn,In+=Ln.y*gn,Ln.parentId=nr,it&&(Nn||(Nn=this._map(Pt,!0)),it(Nn,this._map(Ln)))}Pt.parentId=nr,be.push(lt(vn/mn,In/mn,nr,mn,Nn))}else if(be.push(Pt),mn>1)for(const vn of Bt){const In=Qt.points[vn];In.zoom<=ne||(In.zoom=ne,be.push(In))}}return be}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,ne){if(Y.numPoints)return ne?st({},Y.properties):Y.properties;const be=this.points[Y.index].properties,Oe=this.options.map(be);return ne&&Oe===be?st({},Oe):Oe}}function lt(Ce,Y,ne,be,Oe){return{x:oe(Ce),y:oe(Y),zoom:1/0,id:ne,parentId:-1,numPoints:be,properties:Oe}}function vt(Ce,Y){const[ne,be]=Ce.geometry.coordinates;return{x:oe(se(ne)),y:oe(ae(be)),zoom:1/0,index:Y,parentId:-1}}function kt(Ce){return{type:"Feature",id:Ce.id,properties:It(Ce),geometry:{type:"Point",coordinates:[(Y=Ce.x,360*(Y-.5)),Be(Ce.y)]}};var Y}function It(Ce){const Y=Ce.numPoints,ne=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y;return st(st({},Ce.properties),{cluster:!0,cluster_id:Ce.id,point_count:Y,point_count_abbreviated:ne})}function se(Ce){return Ce/360+.5}function ae(Ce){const Y=Math.sin(Ce*Math.PI/180),ne=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ne<0?0:ne>1?1:ne}function Be(Ce){const Y=(180-360*Ce)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function st(Ce,Y){for(const ne in Y)Ce[ne]=Y[ne];return Ce}function ut(Ce){return Ce.x}function bt(Ce){return Ce.y}function At(Ce,Y,ne,be){for(var Oe,Ve=be,it=ne-Y>>1,rt=ne-Y,Xe=Ce[Y],ot=Ce[Y+1],Pt=Ce[ne],Qt=Ce[ne+1],Bt=Y+3;Bt<ne;Bt+=3){var Sn=_t(Ce[Bt],Ce[Bt+1],Xe,ot,Pt,Qt);if(Sn>Ve)Oe=Bt,Ve=Sn;else if(Sn===Ve){var mn=Math.abs(Bt-it);mn<rt&&(Oe=Bt,rt=mn)}}Ve>be&&(Oe-Y>3&&At(Ce,Y,Oe,be),Ce[Oe+2]=Ve,ne-Oe>3&&At(Ce,Oe,ne,be))}function _t(Ce,Y,ne,be,Oe,Ve){var it=Oe-ne,rt=Ve-be;if(it!==0||rt!==0){var Xe=((Ce-ne)*it+(Y-be)*rt)/(it*it+rt*rt);Xe>1?(ne=Oe,be=Ve):Xe>0&&(ne+=it*Xe,be+=rt*Xe)}return(it=Ce-ne)*it+(rt=Y-be)*rt}function nt(Ce,Y,ne,be){var Oe={id:Ce===void 0?null:Ce,type:Y,geometry:ne,tags:be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ve){var it=Ve.geometry,rt=Ve.type;if(rt==="Point"||rt==="MultiPoint"||rt==="LineString")tt(Ve,it);else if(rt==="Polygon"||rt==="MultiLineString")for(var Xe=0;Xe<it.length;Xe++)tt(Ve,it[Xe]);else if(rt==="MultiPolygon")for(Xe=0;Xe<it.length;Xe++)for(var ot=0;ot<it[Xe].length;ot++)tt(Ve,it[Xe][ot])}(Oe),Oe}function tt(Ce,Y){for(var ne=0;ne<Y.length;ne+=3)Ce.minX=Math.min(Ce.minX,Y[ne]),Ce.minY=Math.min(Ce.minY,Y[ne+1]),Ce.maxX=Math.max(Ce.maxX,Y[ne]),Ce.maxY=Math.max(Ce.maxY,Y[ne+1])}function pt(Ce,Y,ne,be){if(Y.geometry){var Oe=Y.geometry.coordinates,Ve=Y.geometry.type,it=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2),rt=[],Xe=Y.id;if(ne.promoteId?Xe=Y.properties[ne.promoteId]:ne.generateId&&(Xe=be||0),Ve==="Point")dt(Oe,rt);else if(Ve==="MultiPoint")for(var ot=0;ot<Oe.length;ot++)dt(Oe[ot],rt);else if(Ve==="LineString")Ot(Oe,rt,it,!1);else if(Ve==="MultiLineString"){if(ne.lineMetrics){for(ot=0;ot<Oe.length;ot++)Ot(Oe[ot],rt=[],it,!1),Ce.push(nt(Xe,"LineString",rt,Y.properties));return}Kt(Oe,rt,it,!1)}else if(Ve==="Polygon")Kt(Oe,rt,it,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(ot=0;ot<Y.geometry.geometries.length;ot++)pt(Ce,{id:Xe,geometry:Y.geometry.geometries[ot],properties:Y.properties},ne,be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ot=0;ot<Oe.length;ot++){var Pt=[];Kt(Oe[ot],Pt,it,!0),rt.push(Pt)}}Ce.push(nt(Xe,Ve,rt,Y.properties))}}function dt(Ce,Y){Y.push(cn(Ce[0])),Y.push(Cn(Ce[1])),Y.push(0)}function Ot(Ce,Y,ne,be){for(var Oe,Ve,it=0,rt=0;rt<Ce.length;rt++){var Xe=cn(Ce[rt][0]),ot=Cn(Ce[rt][1]);Y.push(Xe),Y.push(ot),Y.push(0),rt>0&&(it+=be?(Oe*ot-Xe*Ve)/2:Math.sqrt(Math.pow(Xe-Oe,2)+Math.pow(ot-Ve,2))),Oe=Xe,Ve=ot}var Pt=Y.length-3;Y[2]=1,At(Y,0,Pt,ne),Y[Pt+2]=1,Y.size=Math.abs(it),Y.start=0,Y.end=Y.size}function Kt(Ce,Y,ne,be){for(var Oe=0;Oe<Ce.length;Oe++){var Ve=[];Ot(Ce[Oe],Ve,ne,be),Y.push(Ve)}}function cn(Ce){return Ce/360+.5}function Cn(Ce){var Y=Math.sin(Ce*Math.PI/180),ne=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ne<0?0:ne>1?1:ne}function Rt(Ce,Y,ne,be,Oe,Ve,it,rt){if(be/=Y,Ve>=(ne/=Y)&&it<be)return Ce;if(it<ne||Ve>=be)return null;for(var Xe=[],ot=0;ot<Ce.length;ot++){var Pt=Ce[ot],Qt=Pt.geometry,Bt=Pt.type,Sn=Oe===0?Pt.minX:Pt.minY,mn=Oe===0?Pt.maxX:Pt.maxY;if(Sn>=ne&&mn<be)Xe.push(Pt);else if(!(mn<ne||Sn>=be)){var vn=[];if(Bt==="Point"||Bt==="MultiPoint")ht(Qt,vn,ne,be,Oe);else if(Bt==="LineString")Ht(Qt,vn,ne,be,Oe,!1,rt.lineMetrics);else if(Bt==="MultiLineString")zt(Qt,vn,ne,be,Oe,!1);else if(Bt==="Polygon")zt(Qt,vn,ne,be,Oe,!0);else if(Bt==="MultiPolygon")for(var In=0;In<Qt.length;In++){var Nn=[];zt(Qt[In],Nn,ne,be,Oe,!0),Nn.length&&vn.push(Nn)}if(vn.length){if(rt.lineMetrics&&Bt==="LineString"){for(In=0;In<vn.length;In++)Xe.push(nt(Pt.id,Bt,vn[In],Pt.tags));continue}Bt!=="LineString"&&Bt!=="MultiLineString"||(vn.length===1?(Bt="LineString",vn=vn[0]):Bt="MultiLineString"),Bt!=="Point"&&Bt!=="MultiPoint"||(Bt=vn.length===3?"Point":"MultiPoint"),Xe.push(nt(Pt.id,Bt,vn,Pt.tags))}}}return Xe.length?Xe:null}function ht(Ce,Y,ne,be,Oe){for(var Ve=0;Ve<Ce.length;Ve+=3){var it=Ce[Ve+Oe];it>=ne&&it<=be&&(Y.push(Ce[Ve]),Y.push(Ce[Ve+1]),Y.push(Ce[Ve+2]))}}function Ht(Ce,Y,ne,be,Oe,Ve,it){for(var rt,Xe,ot=wn(Ce),Pt=Oe===0?St:yt,Qt=Ce.start,Bt=0;Bt<Ce.length-3;Bt+=3){var Sn=Ce[Bt],mn=Ce[Bt+1],vn=Ce[Bt+2],In=Ce[Bt+3],Nn=Ce[Bt+4],nr=Oe===0?Sn:mn,rr=Oe===0?In:Nn,Ln=!1;it&&(rt=Math.sqrt(Math.pow(Sn-In,2)+Math.pow(mn-Nn,2))),nr<ne?rr>ne&&(Xe=Pt(ot,Sn,mn,In,Nn,ne),it&&(ot.start=Qt+rt*Xe)):nr>be?rr<be&&(Xe=Pt(ot,Sn,mn,In,Nn,be),it&&(ot.start=Qt+rt*Xe)):mt(ot,Sn,mn,vn),rr<ne&&nr>=ne&&(Xe=Pt(ot,Sn,mn,In,Nn,ne),Ln=!0),rr>be&&nr<=be&&(Xe=Pt(ot,Sn,mn,In,Nn,be),Ln=!0),!Ve&&Ln&&(it&&(ot.end=Qt+rt*Xe),Y.push(ot),ot=wn(Ce)),it&&(Qt+=rt)}var gn=Ce.length-3;Sn=Ce[gn],mn=Ce[gn+1],vn=Ce[gn+2],(nr=Oe===0?Sn:mn)>=ne&&nr<=be&&mt(ot,Sn,mn,vn),gn=ot.length-3,Ve&&gn>=3&&(ot[gn]!==ot[0]||ot[gn+1]!==ot[1])&&mt(ot,ot[0],ot[1],ot[2]),ot.length&&Y.push(ot)}function wn(Ce){var Y=[];return Y.size=Ce.size,Y.start=Ce.start,Y.end=Ce.end,Y}function zt(Ce,Y,ne,be,Oe,Ve){for(var it=0;it<Ce.length;it++)Ht(Ce[it],Y,ne,be,Oe,Ve,!1)}function mt(Ce,Y,ne,be){Ce.push(Y),Ce.push(ne),Ce.push(be)}function St(Ce,Y,ne,be,Oe,Ve){var it=(Ve-Y)/(be-Y);return Ce.push(Ve),Ce.push(ne+(Oe-ne)*it),Ce.push(1),it}function yt(Ce,Y,ne,be,Oe,Ve){var it=(Ve-ne)/(Oe-ne);return Ce.push(Y+(be-Y)*it),Ce.push(Ve),Ce.push(1),it}function Wt(Ce,Y){for(var ne=[],be=0;be<Ce.length;be++){var Oe,Ve=Ce[be],it=Ve.type;if(it==="Point"||it==="MultiPoint"||it==="LineString")Oe=tn(Ve.geometry,Y);else if(it==="MultiLineString"||it==="Polygon"){Oe=[];for(var rt=0;rt<Ve.geometry.length;rt++)Oe.push(tn(Ve.geometry[rt],Y))}else if(it==="MultiPolygon")for(Oe=[],rt=0;rt<Ve.geometry.length;rt++){for(var Xe=[],ot=0;ot<Ve.geometry[rt].length;ot++)Xe.push(tn(Ve.geometry[rt][ot],Y));Oe.push(Xe)}ne.push(nt(Ve.id,it,Oe,Ve.tags))}return ne}function tn(Ce,Y){var ne=[];ne.size=Ce.size,Ce.start!==void 0&&(ne.start=Ce.start,ne.end=Ce.end);for(var be=0;be<Ce.length;be+=3)ne.push(Ce[be]+Y,Ce[be+1],Ce[be+2]);return ne}function on(Ce,Y){if(Ce.transformed)return Ce;var ne,be,Oe,Ve=1<<Ce.z,it=Ce.x,rt=Ce.y;for(ne=0;ne<Ce.features.length;ne++){var Xe=Ce.features[ne],ot=Xe.geometry,Pt=Xe.type;if(Xe.geometry=[],Pt===1)for(be=0;be<ot.length;be+=2)Xe.geometry.push(Tt(ot[be],ot[be+1],Y,Ve,it,rt));else for(be=0;be<ot.length;be++){var Qt=[];for(Oe=0;Oe<ot[be].length;Oe+=2)Qt.push(Tt(ot[be][Oe],ot[be][Oe+1],Y,Ve,it,rt));Xe.geometry.push(Qt)}}return Ce.transformed=!0,Ce}function Tt(Ce,Y,ne,be,Oe,Ve){return[Math.round(ne*(Ce*be-Oe)),Math.round(ne*(Y*be-Ve))]}function Et(Ce,Y,ne,be,Oe){for(var Ve=Y===Oe.maxZoom?0:Oe.tolerance/((1<<Y)*Oe.extent),it={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ne,y:be,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},rt=0;rt<Ce.length;rt++){it.numFeatures++,sn(it,Ce[rt],Ve,Oe);var Xe=Ce[rt].minX,ot=Ce[rt].minY,Pt=Ce[rt].maxX,Qt=Ce[rt].maxY;Xe<it.minX&&(it.minX=Xe),ot<it.minY&&(it.minY=ot),Pt>it.maxX&&(it.maxX=Pt),Qt>it.maxY&&(it.maxY=Qt)}return it}function sn(Ce,Y,ne,be){var Oe=Y.geometry,Ve=Y.type,it=[];if(Ve==="Point"||Ve==="MultiPoint")for(var rt=0;rt<Oe.length;rt+=3)it.push(Oe[rt]),it.push(Oe[rt+1]),Ce.numPoints++,Ce.numSimplified++;else if(Ve==="LineString")xn(it,Oe,Ce,ne,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(rt=0;rt<Oe.length;rt++)xn(it,Oe[rt],Ce,ne,Ve==="Polygon",rt===0);else if(Ve==="MultiPolygon")for(var Xe=0;Xe<Oe.length;Xe++){var ot=Oe[Xe];for(rt=0;rt<ot.length;rt++)xn(it,ot[rt],Ce,ne,!0,rt===0)}if(it.length){var Pt=Y.tags||null;if(Ve==="LineString"&&be.lineMetrics){for(var Qt in Pt={},Y.tags)Pt[Qt]=Y.tags[Qt];Pt.mapbox_clip_start=Oe.start/Oe.size,Pt.mapbox_clip_end=Oe.end/Oe.size}var Bt={geometry:it,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:Pt};Y.id!==null&&(Bt.id=Y.id),Ce.features.push(Bt)}}function xn(Ce,Y,ne,be,Oe,Ve){var it=be*be;if(be>0&&Y.size<(Oe?it:be))ne.numPoints+=Y.length/3;else{for(var rt=[],Xe=0;Xe<Y.length;Xe+=3)(be===0||Y[Xe+2]>it)&&(ne.numSimplified++,rt.push(Y[Xe]),rt.push(Y[Xe+1])),ne.numPoints++;Oe&&function(ot,Pt){for(var Qt=0,Bt=0,Sn=ot.length,mn=Sn-2;Bt<Sn;mn=Bt,Bt+=2)Qt+=(ot[Bt]-ot[mn])*(ot[Bt+1]+ot[mn+1]);if(Qt>0===Pt)for(Bt=0,Sn=ot.length;Bt<Sn/2;Bt+=2){var vn=ot[Bt],In=ot[Bt+1];ot[Bt]=ot[Sn-2-Bt],ot[Bt+1]=ot[Sn-1-Bt],ot[Sn-2-Bt]=vn,ot[Sn-1-Bt]=In}}(rt,Ve),Ce.push(rt)}}function An(Ce,Y){var ne=(Y=this.options=function(Oe,Ve){for(var it in Ve)Oe[it]=Ve[it];return Oe}(Object.create(this.options),Y)).debug;if(ne&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var be=function(Oe,Ve){var it=[];if(Oe.type==="FeatureCollection")for(var rt=0;rt<Oe.features.length;rt++)pt(it,Oe.features[rt],Ve,rt);else pt(it,Oe.type==="Feature"?Oe:{geometry:Oe},Ve);return it}(Ce,Y);this.tiles={},this.tileCoords=[],ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(be=function(Oe,Ve){var it=Ve.buffer/Ve.extent,rt=Oe,Xe=Rt(Oe,1,-1-it,it,0,-1,2,Ve),ot=Rt(Oe,1,1-it,2+it,0,-1,2,Ve);return(Xe||ot)&&(rt=Rt(Oe,1,-it,1+it,0,-1,2,Ve)||[],Xe&&(rt=Wt(Xe,1).concat(rt)),ot&&(rt=rt.concat(Wt(ot,-1)))),rt}(be,Y)).length&&this.splitTile(be,0,0,0),ne&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Mn(Ce,Y,ne){return 32*((1<<Ce)*ne+Y)+Ce}function ir(Ce,Y){const ne=Ce.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const be=this._geoJSONIndex.getTile(ne.z,ne.x,ne.y);if(!be)return Y(null,null);const Oe=new F(be.features);let Ve=V(Oe);Ve.byteOffset===0&&Ve.byteLength===Ve.buffer.byteLength||(Ve=new Uint8Array(Ve)),Y(null,{vectorTile:Oe,rawData:Ve.buffer})}An.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},An.prototype.splitTile=function(Ce,Y,ne,be,Oe,Ve,it){for(var rt=[Ce,Y,ne,be],Xe=this.options,ot=Xe.debug;rt.length;){be=rt.pop(),ne=rt.pop(),Y=rt.pop(),Ce=rt.pop();var Pt=1<<Y,Qt=Mn(Y,ne,be),Bt=this.tiles[Qt];if(!Bt&&(ot>1&&console.time("creation"),Bt=this.tiles[Qt]=Et(Ce,Y,ne,be,Xe),this.tileCoords.push({z:Y,x:ne,y:be}),ot)){ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,ne,be,Bt.numFeatures,Bt.numPoints,Bt.numSimplified),console.timeEnd("creation"));var Sn="z"+Y;this.stats[Sn]=(this.stats[Sn]||0)+1,this.total++}if(Bt.source=Ce,Oe){if(Y===Xe.maxZoom||Y===Oe)continue;var mn=1<<Oe-Y;if(ne!==Math.floor(Ve/mn)||be!==Math.floor(it/mn))continue}else if(Y===Xe.indexMaxZoom||Bt.numPoints<=Xe.indexMaxPoints)continue;if(Bt.source=null,Ce.length!==0){ot>1&&console.time("clipping");var vn,In,Nn,nr,rr,Ln,gn=.5*Xe.buffer/Xe.extent,wt=.5-gn,Qi=.5+gn,Jr=1+gn;vn=In=Nn=nr=null,rr=Rt(Ce,Pt,ne-gn,ne+Qi,0,Bt.minX,Bt.maxX,Xe),Ln=Rt(Ce,Pt,ne+wt,ne+Jr,0,Bt.minX,Bt.maxX,Xe),Ce=null,rr&&(vn=Rt(rr,Pt,be-gn,be+Qi,1,Bt.minY,Bt.maxY,Xe),In=Rt(rr,Pt,be+wt,be+Jr,1,Bt.minY,Bt.maxY,Xe),rr=null),Ln&&(Nn=Rt(Ln,Pt,be-gn,be+Qi,1,Bt.minY,Bt.maxY,Xe),nr=Rt(Ln,Pt,be+wt,be+Jr,1,Bt.minY,Bt.maxY,Xe),Ln=null),ot>1&&console.timeEnd("clipping"),rt.push(vn||[],Y+1,2*ne,2*be),rt.push(In||[],Y+1,2*ne,2*be+1),rt.push(Nn||[],Y+1,2*ne+1,2*be),rt.push(nr||[],Y+1,2*ne+1,2*be+1)}}},An.prototype.getTile=function(Ce,Y,ne){var be=this.options,Oe=be.extent,Ve=be.debug;if(Ce<0||Ce>24)return null;var it=1<<Ce,rt=Mn(Ce,Y=(Y%it+it)%it,ne);if(this.tiles[rt])return on(this.tiles[rt],Oe);Ve>1&&console.log("drilling down to z%d-%d-%d",Ce,Y,ne);for(var Xe,ot=Ce,Pt=Y,Qt=ne;!Xe&&ot>0;)ot--,Pt=Math.floor(Pt/2),Qt=Math.floor(Qt/2),Xe=this.tiles[Mn(ot,Pt,Qt)];return Xe&&Xe.source?(Ve>1&&console.log("found parent tile z%d-%d-%d",ot,Pt,Qt),Ve>1&&console.time("drilling down"),this.splitTile(Xe.source,ot,Pt,Qt,Ce,Y,ne),Ve>1&&console.timeEnd("drilling down"),this.tiles[rt]?on(this.tiles[rt],Oe):null):null};class Dn extends o.VectorTileWorkerSource{constructor(Y,ne,be,Oe,Ve){super(Y,ne,be,Oe,ir),Ve&&(this.loadGeoJSON=Ve)}loadData(Y,ne){const be=Y&&Y.request,Oe=be&&be.collectResourceTiming;this.loadGeoJSON(Y,(Ve,it)=>{if(Ve||!it)return ne(Ve);if(typeof it!="object")return ne(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{P(it,!0);try{if(Y.filter){const Xe=o.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Xe.result==="error")throw new Error(Xe.value.map(Pt=>`${Pt.key}: ${Pt.message}`).join(", "));const ot=it.features.filter(Pt=>Xe.value.evaluate({zoom:0},Pt));it={type:"FeatureCollection",features:ot}}this._geoJSONIndex=Y.cluster?new Fe(function({superclusterOptions:Xe,clusterProperties:ot}){if(!ot||!Xe)return Xe;const Pt={},Qt={},Bt={accumulated:null,zoom:0},Sn={properties:null},mn=Object.keys(ot);for(const vn of mn){const[In,Nn]=ot[vn],nr=o.createExpression(Nn),rr=o.createExpression(typeof In=="string"?[In,["accumulated"],["get",vn]]:In);Pt[vn]=nr.value,Qt[vn]=rr.value}return Xe.map=vn=>{Sn.properties=vn;const In={};for(const Nn of mn)In[Nn]=Pt[Nn].evaluate(Bt,Sn);return In},Xe.reduce=(vn,In)=>{Sn.properties=In;for(const Nn of mn)Bt.accumulated=vn[Nn],vn[Nn]=Qt[Nn].evaluate(Bt,Sn)},Xe}(Y)).load(it.features):function(Xe,ot){return new An(Xe,ot)}(it,Y.geojsonVtOptions)}catch(Xe){return ne(Xe)}this.loaded={};const rt={};if(Oe){const Xe=o.getPerformanceMeasurement(be);Xe&&(rt.resourceTiming={},rt.resourceTiming[Y.source]=JSON.parse(JSON.stringify(Xe)))}ne(null,rt)}})}reloadTile(Y,ne){const be=this.loaded;return be&&be[Y.uid]?super.reloadTile(Y,ne):this.loadTile(Y,ne)}loadGeoJSON(Y,ne){if(Y.request)o.getJSON(Y.request,ne);else{if(typeof Y.data!="string")return ne(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));try{return ne(null,JSON.parse(Y.data))}catch{return ne(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Y,ne){try{ne(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(be){ne(be)}}getClusterChildren(Y,ne){try{ne(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(be){ne(be)}}getClusterLeaves(Y,ne){try{ne(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(be){ne(be)}}}class lr{constructor(Y){this.self=Y,this.actor=new o.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Dn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ne,be)=>{if(this.workerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.workerSourceTypes[ne]=be},this.self.registerRTLTextPlugin=ne=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=ne.applyArabicShaping,o.plugin.processBidirectionalText=ne.processBidirectionalText,o.plugin.processStyledBidirectionalText=ne.processStyledBidirectionalText}}clearCaches(Y,ne,be){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.workerSources[Y],delete this.demWorkerSources[Y],be()}checkIfReady(Y,ne,be){be()}setReferrer(Y,ne){this.referrer=ne}spriteLoaded(Y,ne){this.isSpriteLoaded[Y]=ne;for(const be in this.workerSources[Y]){const Oe=this.workerSources[Y][be];for(const Ve in Oe)Oe[Ve]instanceof o.VectorTileWorkerSource&&(Oe[Ve].isSpriteLoaded=ne,Oe[Ve].fire(new o.Event("isSpriteLoaded")))}}setImages(Y,ne,be){this.availableImages[Y]=ne;for(const Oe in this.workerSources[Y]){const Ve=this.workerSources[Y][Oe];for(const it in Ve)Ve[it].availableImages=ne}be()}enableTerrain(Y,ne,be){this.terrain=ne,be()}setProjection(Y,ne){this.projections[Y]=o.getProjection(ne)}setLayers(Y,ne,be){this.getLayerIndex(Y).replace(ne),be()}updateLayers(Y,ne,be){this.getLayerIndex(Y).update(ne.layers,ne.removedIds),be()}loadTile(Y,ne,be){const Oe=this.enableTerrain?o.extend({enableTerrain:this.terrain},ne):ne;Oe.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,ne.type,ne.source).loadTile(Oe,be)}loadDEMTile(Y,ne,be){const Oe=this.enableTerrain?o.extend({buildQuadTree:this.terrain},ne):ne;this.getDEMWorkerSource(Y,ne.source).loadTile(Oe,be)}reloadTile(Y,ne,be){const Oe=this.enableTerrain?o.extend({enableTerrain:this.terrain},ne):ne;Oe.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,ne.type,ne.source).reloadTile(Oe,be)}abortTile(Y,ne,be){this.getWorkerSource(Y,ne.type,ne.source).abortTile(ne,be)}removeTile(Y,ne,be){this.getWorkerSource(Y,ne.type,ne.source).removeTile(ne,be)}removeSource(Y,ne,be){if(!this.workerSources[Y]||!this.workerSources[Y][ne.type]||!this.workerSources[Y][ne.type][ne.source])return;const Oe=this.workerSources[Y][ne.type][ne.source];delete this.workerSources[Y][ne.type][ne.source],Oe.removeSource!==void 0?Oe.removeSource(ne,be):be()}loadWorkerSource(Y,ne,be){try{this.self.importScripts(ne.url),be()}catch(Oe){be(Oe.toString())}}syncRTLPluginState(Y,ne,be){try{o.plugin.setState(ne);const Oe=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Oe!=null){this.self.importScripts(Oe);const Ve=o.plugin.isParsed();be(Ve?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Oe}`),Ve)}}catch(Oe){be(Oe.toString())}}getAvailableImages(Y){let ne=this.availableImages[Y];return ne||(ne=[]),ne}getLayerIndex(Y){let ne=this.layerIndexes[Y];return ne||(ne=this.layerIndexes[Y]=new T),ne}getWorkerSource(Y,ne,be){return this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][ne]||(this.workerSources[Y][ne]={}),this.workerSources[Y][ne][be]||(this.workerSources[Y][ne][be]=new this.workerSourceTypes[ne]({send:(Oe,Ve,it,rt,Xe,ot)=>{this.actor.send(Oe,Ve,it,Y,Xe,ot)},scheduler:this.actor.scheduler},this.getLayerIndex(Y),this.getAvailableImages(Y),this.isSpriteLoaded[Y])),this.workerSources[Y][ne][be]}getDEMWorkerSource(Y,ne){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][ne]||(this.demWorkerSources[Y][ne]=new S),this.demWorkerSources[Y][ne]}enforceCacheSizeLimit(Y,ne){o.enforceCacheSizeLimit(ne)}getWorkerPerformanceMetrics(Y,ne,be){be(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new lr(self)),lr}),d(["./shared"],function(o){function _(p,l){if(Array.isArray(p)){if(!Array.isArray(l)||p.length!==l.length)return!1;for(let f=0;f<p.length;f++)if(!_(p[f],l[f]))return!1;return!0}if(typeof p=="object"&&p!==null&&l!==null){if(typeof l!="object"||Object.keys(p).length!==Object.keys(l).length)return!1;for(const f in p)if(!_(p[f],l[f]))return!1;return!0}return p===l}var C=T;function T(p){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,b,w=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(w);try{b=new Worker(M),g=!0}catch{g=!1}return b&&b.terminate(),URL.revokeObjectURL(M),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var b=g.getContext("2d");if(!b)return!1;var w=b.getImageData(0,0,1,1);return w&&w.width===g.width}()?(S[f=l&&l.failIfMajorPerformanceCaveat]===void 0&&(S[f]=function(g){var b,w=function(M){var k=document.createElement("canvas"),L=Object.create(T.webGLContextAttributes);return L.failIfMajorPerformanceCaveat=M,k.getContext("webgl",L)||k.getContext("experimental-webgl",L)}(g);if(!w)return!1;try{b=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!b||w.isContextLost())&&(w.shaderSource(b,"void main() {}"),w.compileShader(b),w.getShaderParameter(b,w.COMPILE_STATUS)===!0)}(f)),S[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(p)}var S={};function P(p,l,f){const g=o.window.document.createElement(p);return l!==void 0&&(g.className=l),f&&f.appendChild(g),g}function A(p,l,f){const g=o.window.document.createElementNS("http://www.w3.org/2000/svg",p);for(const b of Object.keys(l))g.setAttributeNS(null,b,l[b]);return f&&f.appendChild(g),g}T.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const O=o.window.document&&o.window.document.documentElement.style,R=O&&O.userSelect!==void 0?"userSelect":"WebkitUserSelect";let z;function F(){O&&R&&(z=O[R],O[R]="none")}function N(){O&&R&&(O[R]=z)}function U(p){p.preventDefault(),p.stopPropagation(),o.window.removeEventListener("click",U,!0)}function G(){o.window.addEventListener("click",U,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",U,!0)},0)}function q(p,l){const f=p.getBoundingClientRect();return Q(p,f,l)}function V(p,l){const f=p.getBoundingClientRect(),g=[];for(let b=0;b<l.length;b++)g.push(Q(p,f,l[b]));return g}function Z(p){return o.window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function Q(p,l,f){const g=p.offsetWidth===l.width?1:p.offsetWidth/l.width;return new o.pointGeometry((f.clientX-l.left)*g,(f.clientY-l.top)*g)}function te(p,l){var f=l[0],g=l[1],b=l[2],w=l[3],M=f*w-b*g;return M?(p[0]=w*(M=1/M),p[1]=-g*M,p[2]=-b*M,p[3]=f*M,p):null}function ie(p){const{userImage:l}=p;return!!(l&&l.render&&l.render())&&(p.data.replace(new Uint8Array(l.data.buffer)),!0)}class ve extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:g}of this.requestors)this._notify(f,g);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,f){this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let g=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),g=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),g=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),g=!1),g}_validateStretch(l,f){if(!l)return!0;let g=0;for(const b of l){if(b[0]<g||b[1]<b[0]||f<b[1])return!1;g=b[1]}return!0}_validateContent(l,f){return!(l&&(l.length!==4||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){f.version=this.images[l].version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let g=!0;if(!this.isLoaded())for(const b of l)this.images[b]||(g=!1);this.isLoaded()||g?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const g={};for(const b of l){this.images[b]||this.fire(new o.Event("styleimagemissing",{id:b}));const w=this.images[b];w?g[b]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:Boolean(w.userImage&&w.userImage.render)}:o.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,g)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],g=this.getImage(l);if(!g)return null;if(f&&f.position.version===g.version)return f.position;if(f)f.position.version=g.version;else{const b={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.ImagePosition(b,g);this.patterns[l]={bin:b,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(l,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:f,h:g}=o.potpack(l),b=this.atlasImage;b.resize({width:f||1,height:g||1});for(const w in this.patterns){const{bin:M}=this.patterns[w],k=M.x+1,L=M.y+1,K=this.images[w].data,W=K.width,ee=K.height;o.RGBAImage.copy(K,b,{x:0,y:0},{x:k,y:L},{width:W,height:ee}),o.RGBAImage.copy(K,b,{x:0,y:ee-1},{x:k,y:L-1},{width:W,height:1}),o.RGBAImage.copy(K,b,{x:0,y:0},{x:k,y:L+ee},{width:W,height:1}),o.RGBAImage.copy(K,b,{x:W-1,y:0},{x:k-1,y:L},{width:1,height:ee}),o.RGBAImage.copy(K,b,{x:0,y:0},{x:k+W,y:L},{width:1,height:ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const g=this.images[f];ie(g)&&this.updateImage(f,g)}}}const ce=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(p,l){return function([f,g,b]){const w=o.degToRad(g+90),M=o.degToRad(b);return{x:f*Math.cos(w)*Math.sin(M),y:f*Math.sin(w)*Math.sin(M),z:f*Math.cos(M),azimuthal:g,polar:b}}(p.expression.evaluate(l))}interpolate(p,l,f){return{x:o.number(p.x,l.x,f),y:o.number(p.y,l.y,f),z:o.number(p.z,l.z,f),azimuthal:o.number(p.azimuthal,l.azimuthal,f),polar:o.number(p.polar,l.polar,f)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),de="-transition";class xe extends o.Evented{constructor(l){super(),this._transitionable=new o.Transitionable(ce),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(o.validateLight,l,f))for(const g in l){const b=l[g];o.endsWith(g,de)?this._transitionable.setTransition(g.slice(0,-de.length),b):this._transitionable.setValue(g,b)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,g){return(!g||g.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const De=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),ge="-transition";class he extends o.Evented{constructor(l,f){super(),this._transitionable=new o.Transitionable(De),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(l){for(const f in l){const g=l[f];o.endsWith(f,ge)?this._transitionable.setTransition(f.slice(0,-ge.length),g):this._transitionable.setValue(f,g)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function me(p,l,f,g){const b=o.smoothstep(45,65,f),[w,M]=Pe(p,g),k=o.length(l);let L=1-Math.min(1,Math.exp((k-w)/(M-w)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*b*p.alpha}function Pe(p,l){const f=.5/Math.tan(.5*l);return[p.range[0]+f,p.range[1]+f]}const He=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),Ke="-transition";class Re extends o.Evented{constructor(l,f){super(),this._transitionable=new o.Transitionable(He),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const l=this._transform,f=l.projection.name==="globe",g=o.globeToMercatorTransition(l.zoom),b=this.properties.get("range"),w=[.5,3];return{range:f?[o.number(w[0],b[0],g),o.number(w[1],b[1],g)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,f={}){if(!this._validate(o.validateFog,l,f)){for(const g of Object.keys(o.spec.fog))l&&l[g]===void 0&&(l[g]=o.spec.fog[g].default);for(const g in l){const b=l[g];o.endsWith(g,Ke)?this._transitionable.setTransition(g.slice(0,-Ke.length),b):this._transitionable.setValue(g,b)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,l))*f.a}getOpacityAtLatLng(l,f){return this._transform.projection.supportsFog?function(g,b,w){const M=o.MercatorCoordinate.fromLngLat(b),k=w.elevation?w.elevation.getAtPointOrZero(M):0,L=[M.x,M.y,k];return o.transformMat4(L,L,w.mercatorFogMatrix),me(g,L,w.pitch,w._fov)}(this.state,l,f):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Pe(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,g){return(!g||g.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class Le{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const g=this.workerPool.acquire(this.id);for(let b=0;b<g.length;b++){const w=new Le.Actor(g[b],f,this.id);w.name=`Worker ${b}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,f,g){o.asyncAll(this.actors,(b,w)=>{b.send(l,f,w)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Te(p,l,f){return l*(o.EXTENT/(p.tileSize*Math.pow(2,f-p.tileID.overscaledZ)))}Le.Actor=o.Actor;class oe{constructor(l,f,g,b){this.screenBounds=l,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(l,f){let g,b;if(l instanceof o.pointGeometry||typeof l[0]=="number"){const w=o.pointGeometry.convert(l);g=[o.pointGeometry.convert(l)],b=f.isPointAboveHorizon(w)}else{const w=o.pointGeometry.convert(l[0]),M=o.pointGeometry.convert(l[1]);g=[w,M],b=o.polygonizeBounds(w,M).every(k=>f.isPointAboveHorizon(k))}return new oe(g,f.getCameraPoint(),b,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const f=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<g.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?b[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(b[3]=this.cameraPoint)),o.bufferConvexPolygon(b,l)}bufferedCameraGeometryGlobe(l){const f=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,g,l),w=this.cameraPoint.clone();switch(3*((w.y>f.y)+(w.y>g.y))+((w.x>f.x)+(w.x>g.x))){case 0:b[0]=w,b[4]=w.clone();break;case 1:b.splice(1,0,w);break;case 2:b[1]=w;break;case 3:b.splice(4,0,w);break;case 5:b.splice(2,0,w);break;case 6:b[3]=w;break;case 7:b.splice(3,0,w);break;case 8:b[2]=w}return b}containsTile(l,f,g,b=0){const w=l.queryPadding/f._pixelsPerMercatorPixel+1,M=g?this._bufferedCameraMercator(w,f):this._bufferedScreenMercator(w,f);let k=l.tileID.wrap+(M.unwrapped?b:0);const L=M.polygon.map(we=>o.getTilePoint(l.tileTransform,we,k));if(!o.polygonIntersectsBox(L,0,0,o.EXTENT,o.EXTENT))return;k=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const K=this.screenGeometryMercator.polygon.map(we=>o.getTileVec3(l.tileTransform,we,k)),W=K.map(we=>new o.pointGeometry(we[0],we[1])),ee=f.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),le=o.getTileVec3(l.tileTransform,ee,k),Se=K.map(we=>{const pe=o.sub(we,we,le);return o.normalize(pe,pe),new o.Ray(le,pe)}),ye=Te(l,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:W,tilespaceRays:Se,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(_e=o.getBounds(L),_e.min.x=o.clamp(_e.min.x,0,o.EXTENT),_e.min.y=o.clamp(_e.min.y,0,o.EXTENT),_e.max.x=o.clamp(_e.max.x,0,o.EXTENT),_e.max.y=o.clamp(_e.max.y,0,o.EXTENT),_e),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:ye};var _e}_bufferedScreenMercator(l,f){const g=lt(l);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),f):{polygon:this.bufferedScreenGeometry(l).map(w=>f.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[g]=b,b}}_bufferedCameraMercator(l,f){const g=lt(l);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),f):{polygon:this.bufferedCameraGeometry(l).map(w=>f.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[g]=b,b}}_projectAndResample(l,f){const g=function(w,M){const k=o.multiply([],M.pixelMatrix,M.globeMatrix),L=[0,-o.GLOBE_RADIUS,0,1],K=[0,o.GLOBE_RADIUS,0,1],W=[0,0,0,1];o.transformMat4$1(L,L,k),o.transformMat4$1(K,K,k),o.transformMat4$1(W,W,k);const ee=new o.pointGeometry(L[0]/L[3],L[1]/L[3]),le=new o.pointGeometry(K[0]/K[3],K[1]/K[3]),Se=o.polygonContainsPoint(w,ee)&&L[3]<W[3],ye=o.polygonContainsPoint(w,le)&&K[3]<W[3];if(!Se&&!ye)return null;const _e=function(Ze,Ge,Qe){for(let ct=1;ct<Ze.length;ct++){const Zt=Fe(Ge.pointCoordinate3D(Ze[ct-1]).x),at=Fe(Ge.pointCoordinate3D(Ze[ct]).x);if(Qe<0){if(Zt<at)return{idx:ct,t:-Zt/(at-1-Zt)}}else if(at<Zt)return{idx:ct,t:(1-Zt)/(at+1-Zt)}}return null}(w,M,Se?-1:1);if(!_e)return null;const{idx:we,t:pe}=_e;let Me=we>1?ze(w.slice(0,we),M):[],Ee=we<w.length?ze(w.slice(we),M):[];Me=Me.map(Ze=>new o.pointGeometry(Fe(Ze.x),Ze.y)),Ee=Ee.map(Ze=>new o.pointGeometry(Fe(Ze.x),Ze.y));const Ye=[...Me];Ye.length===0&&Ye.push(Ee[Ee.length-1]);const We=o.number(Ye[Ye.length-1].y,(Ee.length===0?Me[0]:Ee[0]).y,pe);let $e;return $e=Se?[new o.pointGeometry(0,We),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,We)]:[new o.pointGeometry(1,We),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,We)],Ye.push(...$e),Ee.length===0?Ye.push(Me[0]):Ye.push(...Ee),{polygon:Ye.map(Ze=>new o.MercatorCoordinate(Ze.x,Ze.y)),unwrapped:!1}}(l,f);if(g)return g;const b=function(w,M){let k=!1,L=-1/0,K=0;for(let ee=0;ee<w.length-1;ee++)w[ee].x>L&&(L=w[ee].x,K=ee);for(let ee=0;ee<w.length-1;ee++){const le=(K+ee)%(w.length-1),Se=w[le],ye=w[le+1];Math.abs(Se.x-ye.x)>.5&&(Se.x<ye.x?(Se.x+=1,le===0&&(w[w.length-1].x+=1)):(ye.x+=1,le+1===w.length-1&&(w[0].x+=1)),k=!0)}const W=o.mercatorXfromLng(M.center.lng);return k&&W<Math.abs(W-1)&&w.forEach(ee=>{ee.x-=1}),{polygon:w,unwrapped:k}}(ze(l,f).map(w=>new o.pointGeometry(Fe(w.x),w.y)),f);return{polygon:b.polygon.map(w=>new o.MercatorCoordinate(w.x,w.y)),unwrapped:b.unwrapped}}}function ze(p,l){return o.resample(p,f=>{const g=l.pointCoordinate3D(f);f.x=g.x,f.y=g.y},1/256)}function Fe(p){return p<0?1+p%1:p%1}function lt(p){return 100*p|0}function vt(p,l,f,g,b){const w=function(M,k){if(M)return b(M);if(k){const L=o.pick(o.extend(k,p),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);k.vector_layers&&(L.vectorLayers=k.vector_layers,L.vectorLayerIds=L.vectorLayers.map(K=>K.id)),k.language_options&&(L.languageOptions=k.language_options),k.language&&k.language[k.id]&&(L.language=k.language[k.id]),k.worldview_options&&(L.worldviewOptions=k.worldview_options),k.worldview?L.worldview=k.worldview[k.id]:k.worldview_default&&(L.worldview=k.worldview_default),L.tiles=l.canonicalizeTileset(L,p.url),b(null,L)}};return p.url?o.getJSON(l.transformRequest(l.normalizeSourceURL(p.url,null,f,g),o.ResourceType.Source),w):o.exported.frame(()=>w(null,p))}class kt{constructor(l,f,g){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=g||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),g=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*f),b=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*f),w=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*f),M=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=g&&l.x<w&&l.y>=b&&l.y<M}}class It{constructor(l,f,g){this.context=l;const b=l.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const se={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ae{constructor(l,f,g,b){this.length=f.length,this.attributes=g,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let g=0;g<this.attributes.length;g++){const b=f.attributes[this.attributes[g].name];b!==void 0&&l.enableVertexAttribArray(b)}}setVertexAttribPointers(l,f,g){for(let b=0;b<this.attributes.length;b++){const w=this.attributes[b],M=f.attributes[w.name];M!==void 0&&l.vertexAttribPointer(M,w.components,l[se[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Be{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class st extends Be{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class ut extends Be{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class bt extends Be{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class At extends Be{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class _t extends Be{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class nt extends Be{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class tt extends Be{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class pt extends Be{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class dt extends Be{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class Ot extends Be{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class Kt extends Be{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class cn extends Be{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Cn extends Be{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class Rt extends Be{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class ht extends Be{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Ht extends Be{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class wn extends Be{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class zt extends Be{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class mt extends Be{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class St extends Be{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class yt extends Be{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Wt extends Be{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class tn extends Be{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class on extends Be{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Tt extends Be{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Et extends Be{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class sn extends Be{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class xn extends Be{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class An extends Be{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Mn extends Be{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class ir extends Be{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Dn extends Be{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class lr extends Dn{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class Ce extends Dn{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Y extends Ce{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ne{constructor(l,f,g,b){this.context=l,this.width=f,this.height=g;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new lr(l,w),b&&(this.depthAttachment=new Ce(l,w))}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const g=this.depthAttachment.get();g&&l.deleteRenderbuffer(g)}l.deleteFramebuffer(this.framebuffer)}}class be{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new st(this),this.clearDepth=new ut(this),this.clearStencil=new bt(this),this.colorMask=new At(this),this.depthMask=new _t(this),this.stencilMask=new nt(this),this.stencilFunc=new tt(this),this.stencilOp=new pt(this),this.stencilTest=new dt(this),this.depthRange=new Ot(this),this.depthTest=new Kt(this),this.depthFunc=new cn(this),this.blend=new Cn(this),this.blendFunc=new Rt(this),this.blendColor=new ht(this),this.blendEquation=new Ht(this),this.cullFace=new wn(this),this.cullFaceSide=new zt(this),this.frontFace=new mt(this),this.program=new St(this),this.activeTexture=new yt(this),this.viewport=new Wt(this),this.bindFramebuffer=new tn(this),this.bindRenderbuffer=new on(this),this.bindTexture=new Tt(this),this.bindVertexBuffer=new Et(this),this.bindElementBuffer=new sn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new xn(this),this.pixelStoreUnpack=new An(this),this.pixelStoreUnpackPremultiplyAlpha=new Mn(this),this.pixelStoreUnpackFlipY=new ir(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new It(this,l,f)}createVertexBuffer(l,f,g){return new ae(this,l,f,g)}createRenderbuffer(l,f,g){const b=this.gl,w=b.createRenderbuffer();return this.bindRenderbuffer.set(w),b.renderbufferStorage(b.RENDERBUFFER,l,f,g),this.bindRenderbuffer.set(null),w}createFramebuffer(l,f,g){return new ne(this,l,f,g)}clear({color:l,depth:f,stencil:g}){const b=this.gl;let w=0;l&&(w|=b.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(w|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),g!==void 0&&(w|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),b.clear(w)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){_(l.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Oe extends o.Evented{constructor(l,f,g,b){super(),this.id=l,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=vt(this._options,this.map._requestManager,null,null,(l,f)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):f&&(o.extend(this,f),f.bounds&&(this.tileBounds=new kt(f.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(f.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const g=o.exported.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);l.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(w,M,k,L)=>(delete l.request,l.aborted?(l.state="unloaded",f(null)):w?(l.state="errored",f(w)):M?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:k,expires:L}),l.setTexture(M,this.map.painter),l.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(l,f,g){l.setTexture(f,g)}static unloadTileData(l,f){l.texture&&f.saveTileTexture(l.texture)}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}}let Ve;function it(p,l,f,g,b,w,M,k){const L=[p,f,b,l,g,w,1,1,1],K=[M,k,1],W=o.adjoint([],L),[ee,le,Se]=o.transformMat3(K,K,o.transpose(W,W));return o.multiply$1(L,[ee,0,0,0,le,0,0,0,Se],L)}class rt extends o.Evented{constructor(l,f,g,b){super(),this.id=l,this.dispatcher=g,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f}load(l,f){this._loaded=f||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(g,b)=>{if(this._loaded=!0,g)this.fire(new o.ErrorEvent(g));else if(b){const{HTMLImageElement:w}=o.window;this.image=b instanceof w?o.exported.getImageData(b):b,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const f=l.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let b=1/0,w=1/0,M=-1/0,k=-1/0;for(const ee of g)b=Math.min(b,ee.x),w=Math.min(w,ee.y),M=Math.max(M,ee.x),k=Math.max(k,ee.y);const L=Math.max(M-b,k-w),K=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),W=Math.pow(2,K);return new o.CanonicalTileID(K,Math.floor((b+M)/2*W),Math.floor((w+k)/2*W))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const L in this.tiles){const K=this.tiles[L];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture)}if(this._boundsArray)return;const f=o.tileTransform(this.tileID,this.map.transform.projection),[g,b,w,M]=this.coordinates.map(L=>{const K=f.projection.project(L[0],L[1]);return o.getTilePoint(f,K)._round()});this.perspectiveTransform=function(L,K,W,ee,le,Se,ye,_e,we,pe){const Me=it(0,0,L,0,0,K,L,K),Ee=it(W,ee,le,Se,ye,_e,we,pe);return o.multiply$1(Ee,o.adjoint(Me,Me),Ee),[Ee[6]/Ee[8]*L/o.EXTENT,Ee[7]/Ee[8]*K/o.EXTENT]}(this.width,this.height,g.x,g.y,b.x,b.y,M.x,M.y,w.x,w.y);const k=this._boundsArray=new o.StructArrayLayout4i8;k.emplaceBack(g.x,g.y,0,0),k.emplaceBack(b.x,b.y,o.EXTENT,0),k.emplaceBack(M.x,M.y,0,o.EXTENT),k.emplaceBack(w.x,w.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(k,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,f=l.gl;this.texture?this.texture.update(this.image):(this.texture=new o.Texture(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._prepareData(l)}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Xe={vector:class extends o.Evented{constructor(p,l,f,g){if(super(),this.id=p,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(l,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(p){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const l=this.language||this.map._language,f=this.worldview||this.map._worldview;this._tileJSONRequest=vt(this._options,this.map._requestManager,l,f,(g,b)=>{this._tileJSONRequest=null,this._loaded=!0,g?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${l}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new o.ErrorEvent(g))):b&&(o.extend(this,b),b.bounds&&(this.tileBounds=new kt(b.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),p&&p(g)})}loaded(){return this._loaded}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}onAdd(p){this.map=p,this.load()}setSourceProperty(p){this._tileJSONRequest&&this._tileJSONRequest.cancel(),p(),this.load(()=>{const l=this.map.style._getSourceCaches(this.id);for(const f of l)f.clearTiles()})}setTiles(p){return this.setSourceProperty(()=>{this._options.tiles=p}),this}setUrl(p){return this.setSourceProperty(()=>{this.url=p,this._options.url=p}),this}_setLanguage(p){return p===this.language||this.setSourceProperty(()=>{this.language=p}),this}_setWorldview(p){return p===this.worldview?this:this.worldviewOptions&&p&&!this.worldviewOptions[p]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${p}".`),this):(this.setSourceProperty(()=>{this.worldview=p}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}loadTile(p,l){const f=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(f,o.ResourceType.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:p.isSymbolTile};if(g.request.collectResourceTiming=this._collectResourceTiming,p.actor&&p.state!=="expired")p.state==="loading"?p.reloadCallback=l:p.request=p.actor.send("reloadTile",g,b.bind(this));else if(p.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)p.request=p.actor.send("loadTile",g,b.bind(this),void 0,!0);else{const w=o.loadVectorTile.call({deduped:this._deduped},g,(M,k)=>{M||!k?b.call(this,M):(g.data={cacheControl:k.cacheControl,expires:k.expires,rawData:k.rawData.slice(0)},p.actor&&p.actor.send("loadTile",g,b.bind(this),void 0,!0))},!0);p.request={cancel:w}}function b(w,M){return delete p.request,p.aborted?l(null):w&&w.status!==404?l(w):(M&&M.resourceTiming&&(p.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&p.setExpiryData(M),p.loadVectorData(M,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(p.reloadCallback&&(this.loadTile(p,p.reloadCallback),p.reloadCallback=null)))}}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.actor&&p.actor.send("abortTile",{uid:p.uid,type:this.type,source:this.id})}unloadTile(p){p.unloadVectorData(),p.actor&&p.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Oe,"raster-dem":class extends Oe{constructor(p,l,f,g){super(p,l,f,g),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(p,l){const f=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(b,w){b&&(p.state="errored",l(b)),w&&(p.dem=w,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",l(null))}p.request=o.getImage(this.map._requestManager.transformRequest(f,o.ResourceType.Tile),function(b,w,M,k){if(delete p.request,p.aborted)p.state="unloaded",l(null);else if(b)p.state="errored",l(b);else if(w){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:M,expires:k});const L=o.window.ImageBitmap&&w instanceof o.window.ImageBitmap&&(Ve==null&&(Ve=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),Ve),K=1-(w.width-o.prevPowerOfTwo(w.width))/2;K<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const W=L?w:o.exported.getImageData(w,K),ee={uid:p.uid,coord:p.tileID,source:this.id,rawImageData:W,encoding:this.encoding,padding:K};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",ee,g.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(p){const l=p.canonical,f=Math.pow(2,l.z),g=(l.x-1+f)%f,b=l.x===0?p.wrap-1:p.wrap,w=(l.x+1+f)%f,M=l.x+1===f?p.wrap+1:p.wrap,k={};return k[new o.OverscaledTileID(p.overscaledZ,b,l.z,g,l.y).key]={backfilled:!1},k[new o.OverscaledTileID(p.overscaledZ,M,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(k[new o.OverscaledTileID(p.overscaledZ,b,l.z,g,l.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(p.overscaledZ,p.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},k[new o.OverscaledTileID(p.overscaledZ,M,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<f&&(k[new o.OverscaledTileID(p.overscaledZ,b,l.z,g,l.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(p.overscaledZ,p.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},k[new o.OverscaledTileID(p.overscaledZ,M,l.z,w,l.y+1).key]={backfilled:!1}),k}unloadTile(p){p.demTexture&&this.map.painter.saveTileTexture(p.demTexture),p.fbo&&(p.fbo.destroy(),delete p.fbo),p.dem&&delete p.dem,delete p.neighboringTiles,p.state="unloaded"}},geojson:class extends o.Evented{constructor(p,l,f,g){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(g),this._data=l.data,this._options=o.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const b=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*b,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*b,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*b,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}getClusterExpansionZoom(p,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id},l),this}getClusterChildren(p,l){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id},l),this}getClusterLeaves(p,l,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:p,limit:l,offset:f},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const p=o.extend({},this.workerOptions),l=this._data;typeof l=="string"?(p.request=this.map._requestManager.transformRequest(o.exported.resolveURL(l),o.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,p,(f,g)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new o.ErrorEvent(f));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(b.resourceTiming=g.resourceTiming[this.id]),this.fire(new o.Event("data",b)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,l){const f=p.actor?"reloadTile":"loadTile";p.actor=this.actor,p.request=this.actor.send(f,{type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,b)=>(delete p.request,p.unloadVectorData(),p.aborted?l(null):g?l(g):(p.loadVectorData(b,this.map.painter,f==="reloadTile"),l(null))),void 0,f==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p){p.unloadVectorData(),this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends rt{constructor(p,l,f,g){super(p,l,f,g),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const l of p.urls)this.urls.push(this.map._requestManager.transformRequest(l,o.ResourceType.Source).url);o.getVideo(this.urls,(l,f)=>{this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const l=this.video.seekable;p<l.start(0)||p>l.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,l=p.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(p,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:rt,canvas:class extends rt{constructor(p,l,f,g){super(p,l,f,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(w=>typeof w!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${p}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${p}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(p||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends o.Evented{constructor(p,l,f,g){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=l,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new kt(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this._map=p,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:l,y:f,z:g}=p.canonical;return this._implementation.hasTile({x:l,y:f,z:g})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,l){const{x:f,y:g,z:b}=p.tileID.canonical,w=new o.window.AbortController,M=this._implementation.loadTile({x:f,y:g,z:b},{signal:w.signal});if(!M)return this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",l(null);M.cancel=()=>w.abort(),p.request=M.then(function(k){return delete p.request,p.aborted?(p.state="unloaded",l(null)):k?function(L){return L instanceof o.window.ImageData||L instanceof o.window.ImageBitmap||L instanceof o.window.HTMLCanvasElement}(k)?(this.loadTileData(p,k),p.state="loaded",void l(null)):(p.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",l(null))}.bind(this)).catch(k=>{k.code!==20&&(p.state="errored",l(k))})}loadTileData(p,l){Oe.loadTileData(p,l,this._map.painter)}unloadTileData(p){Oe.unloadTileData(p,this._map.painter)}prepareTile(p){if(!this._implementation.prepareTile)return null;const{x:l,y:f,z:g}=p.tileID.canonical,b=this._implementation.prepareTile({x:l,y:f,z:g});return b?(this.loadTileData(p,b),p.state="loaded",b):null}unloadTile(p,l){if(this.unloadTileData(p),this._implementation.unloadTile){const{x:f,y:g,z:b}=p.tileID.canonical;this._implementation.unloadTile({x:f,y:g,z:b})}l()}abortTile(p,l){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},ot=function(p,l,f,g){const b=new Xe[l.type](p,l,f,g);if(b.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${b.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],b),b};function Pt(p,l){const f=o.identity([]);return o.scale(f,f,[.5*p.width,.5*-p.height,1]),o.translate(f,f,[1,-1,0]),o.multiply(f,f,p.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(f)}function Qt(p,l,f,g,b,w,M,k=!1){const L=p.tilesIn(g,M,k);L.sort(Sn);const K=[];for(const ee of L)K.push({wrappedTileID:ee.tile.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(l,f,p._state,ee,b,w,Pt(p.transform,ee.tile.tileID),k)});const W=function(ee){const le={},Se={};for(const ye of ee){const _e=ye.queryResults,we=ye.wrappedTileID,pe=Se[we]=Se[we]||{};for(const Me in _e){const Ee=_e[Me],Ye=pe[Me]=pe[Me]||{},We=le[Me]=le[Me]||[];for(const $e of Ee)Ye[$e.featureIndex]||(Ye[$e.featureIndex]=!0,We.push($e))}}return le}(K);for(const ee in W)W[ee].forEach(le=>{const Se=le.feature,ye=Se.layer;ye&&ye.type!=="background"&&ye.type!=="sky"&&(Se.source=ye.source,ye["source-layer"]&&(Se.sourceLayer=ye["source-layer"]),Se.state=Se.id!==void 0?p.getFeatureState(ye["source-layer"],Se.id):{})});return W}function Bt(p,l){const f=p.getRenderableIds().map(w=>p.getTileByID(w)),g=[],b={};for(let w=0;w<f.length;w++){const M=f[w],k=M.tileID.canonical.key;b[k]||(b[k]=!0,M.querySourceFeatures(g,l))}return g}function Sn(p,l){const f=p.tileID,g=l.tileID;return f.overscaledZ-g.overscaledZ||f.canonical.y-g.canonical.y||f.wrap-g.wrap||f.canonical.x-g.canonical.x}function mn(){return mu.workerClass!=null?new mu.workerClass:new o.window.Worker(mu.workerUrl)}const vn="mapboxgl_preloaded_worker_pool";class In{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<In.workerCount;)this.workers.push(new mn);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[vn]}numActive(){return Object.keys(this.active).length}}let Nn;function nr(){return Nn||(Nn=new In),Nn}function rr(p,l){const f={};for(const g in p)g!=="ref"&&(f[g]=p[g]);return o.refProperties.forEach(g=>{g in l&&(f[g]=l[g])}),f}function Ln(p){p=p.slice();const l=Object.create(null);for(let f=0;f<p.length;f++)l[p[f].id]=p[f];for(let f=0;f<p.length;f++)"ref"in p[f]&&(p[f]=rr(p[f],l[p[f].ref]));return p}In.workerCount=2;const gn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function wt(p,l,f){f.push({command:gn.addSource,args:[p,l[p]]})}function Qi(p,l,f){l.push({command:gn.removeSource,args:[p]}),f[p]=!0}function Jr(p,l,f,g){Qi(p,f,g),wt(p,l,f)}function Ta(p,l,f){let g;for(g in p[f])if(p[f].hasOwnProperty(g)&&g!=="data"&&!_(p[f][g],l[f][g]))return!1;for(g in l[f])if(l[f].hasOwnProperty(g)&&g!=="data"&&!_(p[f][g],l[f][g]))return!1;return!0}function uc(p,l,f,g,b,w){let M;for(M in l=l||{},p=p||{})p.hasOwnProperty(M)&&(_(p[M],l[M])||f.push({command:w,args:[g,M,l[M],b]}));for(M in l)l.hasOwnProperty(M)&&!p.hasOwnProperty(M)&&(_(p[M],l[M])||f.push({command:w,args:[g,M,l[M],b]}))}function So(p){return p.id}function cc(p,l){return p[l.id]=l,p}class $y{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);let f=1,g=this._distances[f];const b=l*this.paddedLength+this.padding;for(;g<b&&f<this._distances.length;)g=this._distances[++f];const w=f-1,M=this._distances[w],k=g-M,L=k>0?(b-M)/k:0;return this.points[w].mult(1-L).add(this.points[f].mult(L))}}class Hs{constructor(l,f,g){const b=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/g),this.yCellCount=Math.ceil(f/g);for(let M=0;M<this.xCellCount*this.yCellCount;M++)b.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,g,b,w){this._forEachCell(f,g,b,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(w)}insertCircle(l,f,g,b){this._forEachCell(f-b,g-b,f+b,g+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(g),this.circles.push(b)}_insertBoxCell(l,f,g,b,w,M){this.boxCells[w].push(M)}_insertCircleCell(l,f,g,b,w,M){this.circleCells[w].push(M)}_query(l,f,g,b,w,M){if(g<0||l>this.width||b<0||f>this.height)return!w&&[];const k=[];if(l<=0&&f<=0&&this.width<=g&&this.height<=b){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)k.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const K=this.circles[3*L],W=this.circles[3*L+1],ee=this.circles[3*L+2];k.push({key:this.circleKeys[L],x1:K-ee,y1:W-ee,x2:K+ee,y2:W+ee})}return M?k.filter(M):k}return this._forEachCell(l,f,g,b,this._queryCell,k,{hitTest:w,seenUids:{box:{},circle:{}}},M),w?k.length>0:k}_queryCircle(l,f,g,b,w){const M=l-g,k=l+g,L=f-g,K=f+g;if(k<0||M>this.width||K<0||L>this.height)return!b&&[];const W=[];return this._forEachCell(M,L,k,K,this._queryCellCircle,W,{hitTest:b,circle:{x:l,y:f,radius:g},seenUids:{box:{},circle:{}}},w),b?W.length>0:W}query(l,f,g,b,w){return this._query(l,f,g,b,!1,w)}hitTest(l,f,g,b,w){return this._query(l,f,g,b,!0,w)}hitTestCircle(l,f,g,b){return this._queryCircle(l,f,g,!0,b)}_queryCell(l,f,g,b,w,M,k,L){const K=k.seenUids,W=this.boxCells[w];if(W!==null){const le=this.bboxes;for(const Se of W)if(!K.box[Se]){K.box[Se]=!0;const ye=4*Se;if(l<=le[ye+2]&&f<=le[ye+3]&&g>=le[ye+0]&&b>=le[ye+1]&&(!L||L(this.boxKeys[Se]))){if(k.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[Se],x1:le[ye],y1:le[ye+1],x2:le[ye+2],y2:le[ye+3]})}}}const ee=this.circleCells[w];if(ee!==null){const le=this.circles;for(const Se of ee)if(!K.circle[Se]){K.circle[Se]=!0;const ye=3*Se;if(this._circleAndRectCollide(le[ye],le[ye+1],le[ye+2],l,f,g,b)&&(!L||L(this.circleKeys[Se]))){if(k.hitTest)return M.push(!0),!0;{const _e=le[ye],we=le[ye+1],pe=le[ye+2];M.push({key:this.circleKeys[Se],x1:_e-pe,y1:we-pe,x2:_e+pe,y2:we+pe})}}}}}_queryCellCircle(l,f,g,b,w,M,k,L){const K=k.circle,W=k.seenUids,ee=this.boxCells[w];if(ee!==null){const Se=this.bboxes;for(const ye of ee)if(!W.box[ye]){W.box[ye]=!0;const _e=4*ye;if(this._circleAndRectCollide(K.x,K.y,K.radius,Se[_e+0],Se[_e+1],Se[_e+2],Se[_e+3])&&(!L||L(this.boxKeys[ye])))return M.push(!0),!0}}const le=this.circleCells[w];if(le!==null){const Se=this.circles;for(const ye of le)if(!W.circle[ye]){W.circle[ye]=!0;const _e=3*ye;if(this._circlesCollide(Se[_e],Se[_e+1],Se[_e+2],K.x,K.y,K.radius)&&(!L||L(this.circleKeys[ye])))return M.push(!0),!0}}}_forEachCell(l,f,g,b,w,M,k,L){const K=this._convertToXCellCoord(l),W=this._convertToYCellCoord(f),ee=this._convertToXCellCoord(g),le=this._convertToYCellCoord(b);for(let Se=K;Se<=ee;Se++)for(let ye=W;ye<=le;ye++)if(w.call(this,l,f,g,b,this.xCellCount*ye+Se,M,k,L))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,g,b,w,M){const k=b-l,L=w-f,K=g+M;return K*K>k*k+L*L}_circleAndRectCollide(l,f,g,b,w,M,k){const L=(M-b)/2,K=Math.abs(l-(b+L));if(K>L+g)return!1;const W=(k-w)/2,ee=Math.abs(f-(w+W));if(ee>W+g)return!1;if(K<=L||ee<=W)return!0;const le=K-L,Se=ee-W;return le*le+Se*Se<=g*g}}const dn=Math.tan(85*Math.PI/180);function Zn(p,l,f,g,b,w,M){const k=o.create();if(f)if(w.name==="globe"){const L=o.calculateGlobeLabelMatrix(b,l);o.multiply(k,k,L)}else{const L=te([],M);k[0]=L[0],k[1]=L[1],k[4]=L[2],k[5]=L[3],g||o.rotateZ(k,k,b.angle)}else o.multiply(k,b.labelPlaneMatrix,p);return k}function Xn(p,l,f,g,b,w,M){const k=Zn(p,l,f,g,b,w,M);return w.name==="globe"&&f||(k[2]=k[6]=k[10]=k[14]=0),k}function To(p,l,f,g,b,w,M){if(f){if(w.name==="globe"){const k=Zn(p,l,f,g,b,w,M);return o.invert(k,k),o.multiply(k,p,k),k}{const k=o.clone(p),L=o.identity([]);return L[0]=M[0],L[1]=M[1],L[4]=M[2],L[5]=M[3],o.multiply(k,k,L),g||o.rotateZ(k,k,-b.angle),k}}return b.glCoordMatrix}function Eo(p,l,f=0){const g=[p.x,p.y,f,1];f?o.transformMat4$1(g,g,l):Ri(g,g,l);const b=g[3];return{point:[g[0]/b,g[1]/b,g[2]/b],signedDistanceFromCamera:b}}function jn(p,l){const f=[p[0],p[1],p[2],1];o.transformMat4$1(f,f,l);const g=f[3];return{point:[f[0]/g,f[1]/g,f[2]/g],signedDistanceFromCamera:g}}function jl(p,l){return Math.min(.5+p/l*.5,1.5)}function Vl(p,l){const f=p[0]/p[3],g=p[1]/p[3];return f>=-l[0]&&f<=l[0]&&g>=-l[1]&&g<=l[1]}function Ul(p,l,f,g,b,w,M,k,L,K){const W=f.transform,ee=g?p.textSizeData:p.iconSizeData,le=o.evaluateSizeForZoom(ee,f.transform.zoom),Se=W.projection.name==="globe",ye=[256/f.width*2+1,256/f.height*2+1],_e=g?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;_e.clear();let we=null;Se&&(we=g?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const pe=p.lineVertexArray,Me=g?p.text.placedSymbolArray:p.icon.placedSymbolArray,Ee=f.transform.width/f.transform.height;let Ye=!1;for(let We=0;We<Me.length;We++){const $e=Me.get(We);if($e.writingMode!==o.WritingMode.vertical||Ye||We!==0&&Me.get(We-1).writingMode===o.WritingMode.horizontal||(Ye=!0),($e.hidden||$e.writingMode===o.WritingMode.vertical)&&!Ye){Ia($e.numGlyphs,_e);continue}Ye=!1;const Ze=new o.pointGeometry($e.tileAnchorX,$e.tileAnchorY),Ge=L?L(Ze):[0,0,0],Qe=W.projection.projectTilePoint(Ze.x,Ze.y,K.canonical),ct=[Qe.x+Ge[0],Qe.y+Ge[1],Qe.z+Ge[2]],Zt=[...ct,1];if(o.transformMat4$1(Zt,Zt,l),!Vl(Zt,ye)){Ia($e.numGlyphs,_e);continue}const at=jl(f.transform.cameraToCenterDistance,Zt[3]),Dt=o.evaluateSizeForFeature(ee,le,$e),$t=M?Dt/at:Dt*at,en=Eo(new o.pointGeometry(ct[0],ct[1]),b,ct[2]);if(en.signedDistanceFromCamera<=0){Ia($e.numGlyphs,_e);continue}let Ct={};const Yt=M?null:L,Nt=Wp($e,$t,!1,k,l,b,w,p.glyphOffsetArray,pe,_e,we,en.point,Ze,Ct,Ee,Yt,W.projection,K,M);Ye=Nt.useVertical,Yt&&Nt.needsFlipping&&(Ct={}),(Nt.notEnoughRoom||Ye||Nt.needsFlipping&&Wp($e,$t,!0,k,l,b,w,p.glyphOffsetArray,pe,_e,we,en.point,Ze,Ct,Ee,Yt,W.projection,K,M).notEnoughRoom)&&Ia($e.numGlyphs,_e)}g?(p.text.dynamicLayoutVertexBuffer.updateData(_e),we&&p.text.globeExtVertexBuffer.updateData(we)):(p.icon.dynamicLayoutVertexBuffer.updateData(_e),we&&p.icon.globeExtVertexBuffer.updateData(we))}function eo(p,l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e){const we=k.glyphStartIndex+k.numGlyphs,pe=k.lineStartIndex,Me=k.lineStartIndex+k.lineLength,Ee=l.getoffsetX(k.glyphStartIndex),Ye=l.getoffsetX(we-1),We=Ea(p*Ee,f,g,b,w,M,k.segment,pe,Me,L,K,W,ee,le,!0,Se,ye,_e);if(!We)return null;const $e=Ea(p*Ye,f,g,b,w,M,k.segment,pe,Me,L,K,W,ee,le,!0,Se,ye,_e);return $e?{first:We,last:$e}:null}function Wr(p,l,f,g){return p.writingMode===o.WritingMode.horizontal&&Math.abs(f.y-l.y)>Math.abs(f.x-l.x)*g?{useVertical:!0}:p.writingMode===o.WritingMode.vertical?l.y<f.y?{needsFlipping:!0}:null:p.flipState!==0&&function(b,w,M){const k=(w.x-b.x)*M;return k===0||Math.abs((w.y-b.y)/k)>dn}(l,f,g)?p.flipState===1?{needsFlipping:!0}:null:l.x>f.x?{needsFlipping:!0}:null}function Wp(p,l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e,we,pe,Me){const Ee=l/24,Ye=p.lineOffsetX*Ee,We=p.lineOffsetY*Ee;let $e;if(p.numGlyphs>1){const Ze=p.glyphStartIndex+p.numGlyphs,Ge=p.lineStartIndex,Qe=p.lineStartIndex+p.lineLength,ct=eo(Ee,k,Ye,We,f,ee,le,p,L,w,Se,_e,!1,we,pe,Me);if(!ct)return{notEnoughRoom:!0};const Zt=jn(ct.first.point,M).point,at=jn(ct.last.point,M).point,Dt=new o.pointGeometry(Zt[0],Zt[1]),$t=new o.pointGeometry(at[0],at[1]);if(g&&!f){const en=Wr(p,Dt,$t,ye);if(p.flipState=en&&en.needsFlipping?1:2,en)return en}$e=[ct.first];for(let en=p.glyphStartIndex+1;en<Ze-1;en++)$e.push(Ea(Ee*k.getoffsetX(en),Ye,We,f,ee,le,p.segment,Ge,Qe,L,w,Se,_e,!1,!1,we,pe,Me));$e.push(ct.last)}else{if(g&&!f){const Ge=Eo(le,b).point,Qe=p.lineStartIndex+p.segment+1,ct=new o.pointGeometry(L.getx(Qe),L.gety(Qe)),Zt=Eo(ct,b),at=Zt.signedDistanceFromCamera>0?Zt.point:dc(le,ct,Ge,1,b,void 0,we,pe.canonical),Dt=Wr(p,new o.pointGeometry(Ge[0],Ge[1]),new o.pointGeometry(at[0],at[1]),ye);if(p.flipState=Dt&&Dt.needsFlipping?1:2,Dt)return Dt}const Ze=Ea(Ee*k.getoffsetX(p.glyphStartIndex),Ye,We,f,ee,le,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,L,w,Se,_e,!1,!1,we,pe,Me);if(!Ze)return{notEnoughRoom:!0};$e=[Ze]}if(W)for(const Ze of $e)o.updateGlobeVertexNormal(W,K.length+0,Ze.up[0],Ze.up[1],Ze.up[2]),o.updateGlobeVertexNormal(W,K.length+1,Ze.up[0],Ze.up[1],Ze.up[2]),o.updateGlobeVertexNormal(W,K.length+2,Ze.up[0],Ze.up[1],Ze.up[2]),o.updateGlobeVertexNormal(W,K.length+3,Ze.up[0],Ze.up[1],Ze.up[2]),o.addDynamicAttributes(K,Ze.point[0],Ze.point[1],Ze.point[2],Ze.angle);else for(const Ze of $e)o.addDynamicAttributes(K,Ze.point[0],Ze.point[1],Ze.point[2],Ze.angle);return{}}function qs(p,l,f,g,b){const w=g.projectTilePoint(p.x,p.y,l);if(!b)return Eo(w,f,w.z);const M=b(p);return Eo(new o.pointGeometry(w.x+M[0],w.y+M[1]),f,w.z+M[2])}function dc(p,l,f,g,b,w,M,k){const L=qs(p.add(p.sub(l)._unit()),k,b,M,w).point,K=o.sub([],f,L);return o.scaleAndAdd([],f,K,g/o.length(K))}function Ea(p,l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e,we,pe){const Me=g?p-l:p+l;let Ee=Me>0?1:-1,Ye=0;g&&(Ee*=-1,Ye=Math.PI),Ee<0&&(Ye+=Math.PI);let We=Ee>0?k+M:k+M+1,$e=b,Ze=b,Ge=0,Qe=0;const ct=Math.abs(Me),Zt=[],at=[];let Dt=w;const $t=()=>{const _n=We-Ee;return Ge===0?w:new o.pointGeometry(K.getx(_n),K.gety(_n))},en=()=>dc($t(),Dt,Ze,ct-Ge+1,W,le,_e,we.canonical);for(;Ge+Qe<=ct;){if(We+=Ee,We<k||We>=L)return null;if(Ze=$e,Zt.push($e),Se&&at.push(Dt||$t()),$e=ee[We],$e===void 0){Dt=new o.pointGeometry(K.getx(We),K.gety(We));const _n=qs(Dt,we.canonical,W,_e,le);$e=_n.signedDistanceFromCamera>0?ee[We]=_n.point:en()}else Dt=null;Ge+=Qe,Qe=o.distance(Ze,$e)}Dt=Dt||new o.pointGeometry(K.getx(We),K.gety(We));const Ct=$t();ye&&le&&(ee[We]=$e=ee[We]===void 0?$e:en(),Qe=o.distance(Ze,$e));const Yt=(ct-Ge)/Qe,Nt=Dt.sub(Ct).mult(Yt)._add(Ct),ln=o.sub([],$e,Ze),rn=o.scaleAndAdd([],Ze,ln,Yt);let yn=[0,0,1],En=ln[0],kn=ln[1];if(pe&&(yn=_e.upVector(we.canonical,Nt.x,Nt.y),yn[0]!==0||yn[1]!==0||yn[2]!==1)){const _n=[1,0,0],Bn=[0,1,0];_n[0]=yn[2],_n[1]=0,_n[2]=-yn[0],o.cross(Bn,yn,_n),o.normalize(_n,_n),o.normalize(Bn,Bn),En=o.dot(ln,_n),kn=o.dot(ln,Bn)}if(f){const _n=o.cross([],yn,ln);o.normalize(_n,_n),o.scaleAndAdd(rn,rn,_n,f*Ee)}const Jn=Ye+Math.atan2(kn,En);return Zt.push(rn),Se&&at.push(Nt),{point:rn,angle:Jn,path:Zt,tilePath:at,up:yn}}const nf=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ia(p,l){for(let f=0;f<p;f++){const g=l.length;l.resize(g+4),l.float32.set(nf,4*g)}}function Ri(p,l,f){const g=l[0],b=l[1];return p[0]=f[0]*g+f[4]*b+f[12],p[1]=f[1]*g+f[5]*b+f[13],p[3]=f[3]*g+f[7]*b+f[15],p}const Ir=100;class rf{constructor(l,f,g=new Hs(l.width+200,l.height+200,25),b=new Hs(l.width+200,l.height+200,25)){this.transform=l,this.grid=g,this.ignoredGrid=b,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Ir,this.screenBottomBoundary=l.height+Ir,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=f}placeCollisionBox(l,f,g,b,w,M,k,L){let K=g.projectedAnchorX,W=g.projectedAnchorY,ee=g.projectedAnchorZ;const le=g.elevation,Se=g.tileID;if(le&&Se){const We=l.getProjection().upVector(Se.canonical,g.tileAnchorX,g.tileAnchorY),$e=l.getProjection().upVectorScale(Se.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=We[0]*le*$e,W+=We[1]*le*$e,ee+=We[2]*le*$e}const ye=this.projectAndGetPerspectiveRatio(k,[K,W,ee],g.tileID,l.projection.name==="globe"||!!le||this.transform.pitch>0,l.getProjection()),_e=M*ye.perspectiveRatio,we=(g.x1*f+b.x-g.padding)*_e+ye.point.x,pe=(g.y1*f+b.y-g.padding)*_e+ye.point.y,Me=(g.x2*f+b.x+g.padding)*_e+ye.point.x,Ee=(g.y2*f+b.y+g.padding)*_e+ye.point.y,Ye=ye.perspectiveRatio<=.55||ye.occluded;return!this.isInsideGrid(we,pe,Me,Ee)||!w&&this.grid.hitTest(we,pe,Me,Ee,L)||Ye?{box:[],offscreen:!1,occluded:ye.occluded}:{box:[we,pe,Me,Ee],offscreen:this.isOffscreen(we,pe,Me,Ee),occluded:!1}}placeCollisionCircles(l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e){const we=[],pe=this.transform.elevation,Me=pe?pe.getAtTileOffsetFunc(_e,this.transform.center.lat,this.transform.worldSize,l.getProjection()):Ct=>[0,0,0],Ee=new o.pointGeometry(g.tileAnchorX,g.tileAnchorY),Ye=l.getProjection().projectTilePoint(g.tileAnchorX,g.tileAnchorY,_e.canonical),We=Me(Ee),$e=[Ye.x+We[0],Ye.y+We[1],Ye.z+We[2]],Ze=l.projection.name==="globe",Ge=this.projectAndGetPerspectiveRatio(k,[$e[0],$e[1],$e[2]],_e,Ze||!!pe||this.transform.pitch>0,l.getProjection()),{perspectiveRatio:Qe}=Ge,ct=(ee?M/Qe:M*Qe)/o.ONE_EM,Zt=Eo(new o.pointGeometry($e[0],$e[1]),L,$e[2]).point,at=Ge.signedDistanceFromCamera>0?eo(ct,w,g.lineOffsetX*ct,g.lineOffsetY*ct,!1,Zt,Ee,g,b,L,{},pe&&!ee?Me:null,ee&&!!pe,l.getProjection(),_e,ee):null;let Dt=!1,$t=!1,en=!0;if(at&&!Ge.occluded){const Ct=.5*Se*Qe+ye,Yt=new o.pointGeometry(-100,-100),Nt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ln=new $y,rn=at.first,yn=at.last;let En=[];for(let _n=rn.path.length-1;_n>=1;_n--)En.push(rn.path[_n]);for(let _n=1;_n<yn.path.length;_n++)En.push(yn.path[_n]);const kn=2.5*Ct;if(K){const _n=En.map(pe&&!Ze?(Bn,cr)=>{const jr=Me(cr<rn.path.length-1?rn.tilePath[rn.path.length-1-cr]:yn.tilePath[cr-rn.path.length+2]);return Bn[2]=jr[2],jn(Bn,K)}:Bn=>jn(Bn,K));En=_n.some(Bn=>Bn.signedDistanceFromCamera<=0)?[]:_n.map(Bn=>Bn.point)}let Jn=[];if(En.length>0){const _n=En.map(Pr=>new o.pointGeometry(Pr[0],Pr[1]));let Bn=1/0,cr=-1/0,jr=1/0,Qr=-1/0;for(let Pr=0;Pr<_n.length;Pr++)Bn=Math.min(Bn,_n[Pr].x),jr=Math.min(jr,_n[Pr].y),cr=Math.max(cr,_n[Pr].x),Qr=Math.max(Qr,_n[Pr].y);Jn=Bn>=Yt.x&&cr<=Nt.x&&jr>=Yt.y&&Qr<=Nt.y?[_n]:cr<Yt.x||Bn>Nt.x||Qr<Yt.y||jr>Nt.y?[]:o.clipLine([_n],Yt.x,Yt.y,Nt.x,Nt.y)}for(const _n of Jn){ln.reset(_n,.25*Ct);let Bn=0;Bn=ln.length<=.5*Ct?1:Math.ceil(ln.paddedLength/kn)+1;for(let cr=0;cr<Bn;cr++){const jr=cr/Math.max(Bn-1,1),Qr=ln.lerp(jr),Pr=Qr.x+Ir,_i=Qr.y+Ir;we.push(Pr,_i,Ct,0);const Ao=Pr-Ct,la=_i-Ct,Vr=Pr+Ct,Gr=_i+Ct;if(en=en&&this.isOffscreen(Ao,la,Vr,Gr),$t=$t||this.isInsideGrid(Ao,la,Vr,Gr),!f&&this.grid.hitTestCircle(Pr,_i,Ct,le)&&(Dt=!0,!W))return{circles:[],offscreen:!1,collisionDetected:Dt,occluded:!1}}}}return{circles:!W&&Dt||!$t?[]:we,offscreen:en,collisionDetected:Dt,occluded:Ge.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let g=1/0,b=1/0,w=-1/0,M=-1/0;for(const W of l){const ee=new o.pointGeometry(W.x+Ir,W.y+Ir);g=Math.min(g,ee.x),b=Math.min(b,ee.y),w=Math.max(w,ee.x),M=Math.max(M,ee.y),f.push(ee)}const k=this.grid.query(g,b,w,M).concat(this.ignoredGrid.query(g,b,w,M)),L={},K={};for(const W of k){const ee=W.key;if(L[ee.bucketInstanceId]===void 0&&(L[ee.bucketInstanceId]={}),L[ee.bucketInstanceId][ee.featureIndex])continue;const le=[new o.pointGeometry(W.x1,W.y1),new o.pointGeometry(W.x2,W.y1),new o.pointGeometry(W.x2,W.y2),new o.pointGeometry(W.x1,W.y2)];o.polygonIntersectsPolygon(f,le)&&(L[ee.bucketInstanceId][ee.featureIndex]=!0,K[ee.bucketInstanceId]===void 0&&(K[ee.bucketInstanceId]=[]),K[ee.bucketInstanceId].push(ee.featureIndex))}return K}insertCollisionBox(l,f,g,b,w){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:b,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,g,b,w){const M=f?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:b,collisionGroupID:w};for(let L=0;L<l.length;L+=4)M.insertCircle(k,l[L],l[L+1],l[L+2])}projectAndGetPerspectiveRatio(l,f,g,b,w){const M=[f[0],f[1],f[2],1];let k=!1;if(f[2]||this.transform.pitch>0){o.transformMat4$1(M,M,l);const L=w.name==="globe";this.fogState&&g&&!L&&(k=function(K,W,ee,le,Se,ye){const _e=ye.calculateFogTileMatrix(Se),we=[W,ee,le];return o.transformMat4(we,we,_e),me(K,we,ye.pitch,ye._fov)}(this.fogState,f[0],f[1],f[2],g.toUnwrapped(),this.transform)>.9)}else Ri(M,M,l);return{point:new o.pointGeometry((M[0]/M[3]+1)/2*this.transform.width+Ir,(-M[1]/M[3]+1)/2*this.transform.height+Ir),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(w)/M[3]*.5,1.5),signedDistanceFromCamera:M[3],occluded:b&&M[2]>M[3]||k}}isOffscreen(l,f,g,b){return g<Ir||l>=this.screenRightBoundary||b<Ir||f>this.screenBottomBoundary}isInsideGrid(l,f,g,b){return g>=0&&l<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l}}function Kl(p,l,f){const g=l.createTileMatrix(p,p.worldSize,f.toUnwrapped());return o.multiply(new Float32Array(16),p.projMatrix,g)}function ji(p,l,f){if(l.projection.name===f.projection.name)return p.projMatrix;const g=f.clone();return g.setProjection(l.projection),Kl(g,l.getProjection(),p)}function Vi(p,l,f){return l.name===f.projection.name?p.projMatrix:Kl(f,l,p)}class of{constructor(l,f,g,b){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):b&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Pa{constructor(l,f,g,b,w,M=!1){this.text=new of(l?l.text:null,f,g,w),this.icon=new of(l?l.icon:null,f,b,w),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ii{constructor(l,f,g,b=!1){this.text=l,this.icon=f,this.skipFade=g,this.clipped=b}}class Gl{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class af{constructor(l,f,g,b,w){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=g,this.bucketIndex=b,this.tileID=w}}class Hl{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:g=>g.collisionGroupID===f}}return this.collisionGroups[l]}}function pi(p,l,f,g,b){const{horizontalAlign:w,verticalAlign:M}=o.getAnchorAlignment(p),k=-(w-.5)*l,L=-(M-.5)*f,K=o.evaluateVariableOffset(p,g);return new o.pointGeometry(k+K[0]*b,L+K[1]*b)}function ql(p,l,f,g,b){const w=new o.pointGeometry(p,l);return f&&w._rotate(g?b:-b),w}class sf{constructor(l,f,g,b,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new rf(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Hl(g),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,g,b){const w=g.getBucket(f),M=g.latestFeatureIndex;if(!w||!M||f.id!==w.layerIds[0])return;const k=w.layers[0].layout,L=g.collisionBoxArray,K=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),W=g.tileSize/o.EXTENT,ee=g.tileID.toUnwrapped();this.transform.setProjection(w.projection);const le=(Se=g.tileID,ye=w.getProjection(),_e=this.transform,ye.name===this.projection?_e.calculateProjMatrix(Se.toUnwrapped()):Kl(_e,ye,Se));var Se,ye,_e;const we=k.get("text-pitch-alignment")==="map",pe=k.get("text-rotation-alignment")==="map";f.compileFilter();const Me=f.dynamicFilter(),Ee=f.dynamicFilterNeedsFeature(),Ye=this.transform.calculatePixelsToTileUnitsMatrix(g),We=Xn(le,g.tileID.canonical,we,pe,this.transform,w.getProjection(),Ye);let $e=null;if(we){const Qe=To(le,g.tileID.canonical,we,pe,this.transform,w.getProjection(),Ye);$e=o.multiply([],this.transform.labelPlaneMatrix,Qe)}let Ze=null;Me&&g.latestFeatureIndex&&(Ze={unwrappedTileID:ee,dynamicFilter:Me,dynamicFilterNeedsFeature:Ee,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new af(w.bucketInstanceId,M,w.sourceLayerIndex,w.index,g.tileID);const Ge={bucket:w,layout:k,posMatrix:le,textLabelPlaneMatrix:We,labelToScreenMatrix:$e,clippingData:Ze,scale:K,textPixelRatio:W,holdingForFade:g.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(b)for(const Qe of w.sortKeyRanges){const{sortKey:ct,symbolInstanceStart:Zt,symbolInstanceEnd:at}=Qe;l.push({sortKey:ct,symbolInstanceStart:Zt,symbolInstanceEnd:at,parameters:Ge})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Ge})}attemptAnchorPlacement(l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e,we,pe,Me){const Ee=[le.textOffset0,le.textOffset1],Ye=pi(l,g,b,Ee,w),We=this.collisionIndex.placeCollisionBox(ye,w,f,ql(Ye.x,Ye.y,M,k,this.transform.angle),ee,L,K,W.predicate);if((!we||this.collisionIndex.placeCollisionBox(ye,ye.getSymbolInstanceIconSize(Me,this.transform.zoom,Se),we,ql(Ye.x,Ye.y,M,k,this.transform.angle),ee,L,K,W.predicate).box.length!==0)&&We.box.length>0){let $e;return this.prevPlacement&&this.prevPlacement.variableOffsets[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID]&&this.prevPlacement.placements[le.crossTileID].text&&($e=this.prevPlacement.variableOffsets[le.crossTileID].anchor),this.variableOffsets[le.crossTileID]={textOffset:Ee,width:g,height:b,anchor:l,textScale:w,prevAnchor:$e},this.markUsedJustification(ye,l,le,_e),ye.allowVerticalPlacement&&(this.markUsedOrientation(ye,_e,le),this.placedOrientations[le.crossTileID]=_e),{shift:Ye,placedGlyphBoxes:We}}}placeLayerBucketPart(l,f,g,b){const{bucket:w,layout:M,posMatrix:k,textLabelPlaneMatrix:L,labelToScreenMatrix:K,clippingData:W,textPixelRatio:ee,holdingForFade:le,collisionBoxArray:Se,partiallyEvaluatedTextSize:ye,partiallyEvaluatedIconSize:_e,collisionGroup:we}=l.parameters,pe=M.get("text-optional"),Me=M.get("icon-optional"),Ee=M.get("text-allow-overlap"),Ye=M.get("icon-allow-overlap"),We=M.get("text-rotation-alignment")==="map",$e=M.get("text-pitch-alignment")==="map",Ze=M.get("icon-text-fit")!=="none",Ge=M.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let Qe=Ee&&(Ye||!w.hasIconData()||Me),ct=Ye&&(Ee||!w.hasTextData()||pe);!w.collisionArrays&&Se&&w.deserializeCollisionBoxes(Se),g&&b&&w.updateCollisionDebugBuffers(this.transform.zoom,Se);const Zt=(at,Dt,$t)=>{if(W){const Vr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Gr=null;if(W.dynamicFilterNeedsFeature){const qn=this.retainedQueryData[w.bucketInstanceId];Gr=W.featureIndex.loadFeature({featureIndex:at.featureIndex,bucketIndex:qn.bucketIndex,sourceLayerIndex:qn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,W.dynamicFilter)(Vr,Gr,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new o.pointGeometry(at.tileAnchorX,at.tileAnchorY),this.transform.calculateDistanceTileData(W.unwrappedTileID)))return this.placements[at.crossTileID]=new ii(!1,!1,!1,!0),void(f[at.crossTileID]=!0)}if(f[at.crossTileID])return;if(le)return void(this.placements[at.crossTileID]=new ii(!1,!1,!1));let en=!1,Ct=!1,Yt=!0,Nt=!1,ln=!1,rn=null,yn={box:null,offscreen:null,occluded:null},En={box:null,offscreen:null,occluded:null},kn=null,Jn=null,_n=null,Bn=0,cr=0,jr=0;$t.textFeatureIndex?Bn=$t.textFeatureIndex:at.useRuntimeCollisionCircles&&(Bn=at.featureIndex),$t.verticalTextFeatureIndex&&(cr=$t.verticalTextFeatureIndex);const Qr=Vr=>{Vr.tileID=this.retainedQueryData[w.bucketInstanceId].tileID,(this.transform.elevation||Vr.elevation)&&(Vr.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[w.bucketInstanceId].tileID,Vr.tileAnchorX,Vr.tileAnchorY):0)},Pr=$t.textBox;if(Pr){Qr(Pr);const Vr=qn=>{let ai=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!qn&&this.prevPlacement){const Ei=this.prevPlacement.placedOrientations[at.crossTileID];Ei&&(this.placedOrientations[at.crossTileID]=Ei,ai=Ei,this.markUsedOrientation(w,ai,at))}return ai},Gr=(qn,ai)=>{if(w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&$t.verticalTextBox){for(const Ei of w.writingModes)if(Ei===o.WritingMode.vertical?(yn=ai(),En=yn):yn=qn(),yn&&yn.box&&yn.box.length)break}else yn=qn()};if(M.get("text-variable-anchor")){let qn=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[at.crossTileID]){const zr=this.prevPlacement.variableOffsets[at.crossTileID];qn.indexOf(zr.anchor)>0&&(qn=qn.filter(Ii=>Ii!==zr.anchor),qn.unshift(zr.anchor))}const ai=(zr,Ii,ds)=>{const zi=w.getSymbolInstanceTextSize(ye,at,this.transform.zoom,Dt),fs=(zr.x2-zr.x1)*zi+2*zr.padding,hs=(zr.y2-zr.y1)*zi+2*zr.padding,ps=Ze&&!Ye?Ii:null;ps&&Qr(ps);let Li={box:[],offscreen:!1,occluded:!1};const ms=Ee?2*qn.length:qn.length;for(let Da=0;Da<ms;++Da){const vu=this.attemptAnchorPlacement(qn[Da%qn.length],zr,fs,hs,zi,We,$e,ee,k,we,Da>=qn.length,at,Dt,w,ds,ps,ye,_e);if(vu&&(Li=vu.placedGlyphBoxes,Li&&Li.box&&Li.box.length)){en=!0,rn=vu.shift;break}}return Li};Gr(()=>ai(Pr,$t.iconBox,o.WritingMode.horizontal),()=>{const zr=$t.verticalTextBox;return zr&&Qr(zr),w.allowVerticalPlacement&&!(yn&&yn.box&&yn.box.length)&&at.numVerticalGlyphVertices>0&&zr?ai(zr,$t.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),yn&&(en=yn.box,Yt=yn.offscreen,Nt=yn.occluded);const Ei=Vr(yn&&yn.box);if(!en&&this.prevPlacement){const zr=this.prevPlacement.variableOffsets[at.crossTileID];zr&&(this.variableOffsets[at.crossTileID]=zr,this.markUsedJustification(w,zr.anchor,at,Ei))}}else{const qn=(ai,Ei)=>{const zr=w.getSymbolInstanceTextSize(ye,at,this.transform.zoom,Dt),Ii=this.collisionIndex.placeCollisionBox(w,zr,ai,new o.pointGeometry(0,0),Ee,ee,k,we.predicate);return Ii&&Ii.box&&Ii.box.length&&(this.markUsedOrientation(w,Ei,at),this.placedOrientations[at.crossTileID]=Ei),Ii};Gr(()=>qn(Pr,o.WritingMode.horizontal),()=>{const ai=$t.verticalTextBox;return w.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&ai?(Qr(ai),qn(ai,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Vr(yn&&yn.box&&yn.box.length)}}if(kn=yn,en=kn&&kn.box&&kn.box.length>0,Yt=kn&&kn.offscreen,Nt=kn&&kn.occluded,at.useRuntimeCollisionCircles){const Vr=w.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex>=0?at.centerJustifiedTextSymbolIndex:at.verticalPlacedTextSymbolIndex),Gr=o.evaluateSizeForFeature(w.textSizeData,ye,Vr),qn=M.get("text-padding");Jn=this.collisionIndex.placeCollisionCircles(w,Ee,Vr,w.lineVertexArray,w.glyphOffsetArray,Gr,k,L,K,g,$e,we.predicate,at.collisionCircleDiameter*Gr/o.ONE_EM,qn,this.retainedQueryData[w.bucketInstanceId].tileID),en=Ee||Jn.circles.length>0&&!Jn.collisionDetected,Yt=Yt&&Jn.offscreen,Nt=Jn.occluded}if($t.iconFeatureIndex&&(jr=$t.iconFeatureIndex),$t.iconBox){const Vr=Gr=>{Qr(Gr);const qn=Ze&&rn?ql(rn.x,rn.y,We,$e,this.transform.angle):new o.pointGeometry(0,0),ai=w.getSymbolInstanceIconSize(_e,this.transform.zoom,Dt);return this.collisionIndex.placeCollisionBox(w,ai,Gr,qn,Ye,ee,k,we.predicate)};En&&En.box&&En.box.length&&$t.verticalIconBox?(_n=Vr($t.verticalIconBox),Ct=_n.box.length>0):(_n=Vr($t.iconBox),Ct=_n.box.length>0),Yt=Yt&&_n.offscreen,ln=_n.occluded}const _i=pe||at.numHorizontalGlyphVertices===0&&at.numVerticalGlyphVertices===0,Ao=Me||at.numIconVertices===0;if(_i||Ao?Ao?_i||(Ct=Ct&&en):en=Ct&&en:Ct=en=Ct&&en,en&&kn&&kn.box&&this.collisionIndex.insertCollisionBox(kn.box,M.get("text-ignore-placement"),w.bucketInstanceId,En&&En.box&&cr?cr:Bn,we.ID),Ct&&_n&&this.collisionIndex.insertCollisionBox(_n.box,M.get("icon-ignore-placement"),w.bucketInstanceId,jr,we.ID),Jn&&(en&&this.collisionIndex.insertCollisionCircles(Jn.circles,M.get("text-ignore-placement"),w.bucketInstanceId,Bn,we.ID),g)){const Vr=w.bucketInstanceId;let Gr=this.collisionCircleArrays[Vr];Gr===void 0&&(Gr=this.collisionCircleArrays[Vr]=new Gl);for(let qn=0;qn<Jn.circles.length;qn+=4)Gr.circles.push(Jn.circles[qn+0]),Gr.circles.push(Jn.circles[qn+1]),Gr.circles.push(Jn.circles[qn+2]),Gr.circles.push(Jn.collisionDetected?1:0)}const la=w.projection.name!=="globe";Qe=Qe&&(la||!Nt),ct=ct&&(la||!ln),this.placements[at.crossTileID]=new ii(en||Qe,Ct||ct,Yt||w.justReloaded),f[at.crossTileID]=!0};if(Ge){const at=w.getSortedSymbolIndexes(this.transform.angle);for(let Dt=at.length-1;Dt>=0;--Dt){const $t=at[Dt];Zt(w.symbolInstances.get($t),$t,w.collisionArrays[$t])}}else for(let at=l.symbolInstanceStart;at<l.symbolInstanceEnd;at++)Zt(w.symbolInstances.get(at),at,w.collisionArrays[at]);if(g&&w.bucketInstanceId in this.collisionCircleArrays){const at=this.collisionCircleArrays[w.bucketInstanceId];o.invert(at.invProjMatrix,k),at.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,f,g,b){let w;w=b===o.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(f)];const M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const k of M)k>=0&&(l.text.placedSymbolArray.get(k).crossTileID=w>=0&&k!==w?0:g.crossTileID)}markUsedOrientation(l,f,g){const b=f===o.WritingMode.horizontal||f===o.WritingMode.horizontalOnly?f:0,w=f===o.WritingMode.vertical?f:0,M=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const k of M)l.text.placedSymbolArray.get(k).placedOrientation=b;g.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let g=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(l):1,w=f?f.opacities:{},M=f?f.variableOffsets:{},k=f?f.placedOrientations:{};for(const L in this.placements){const K=this.placements[L],W=w[L];W?(this.opacities[L]=new Pa(W,b,K.text,K.icon,null,K.clipped),g=g||K.text!==W.text.placed||K.icon!==W.icon.placed):(this.opacities[L]=new Pa(null,b,K.text,K.icon,K.skipFade,K.clipped),g=g||K.text||K.icon)}for(const L in w){const K=w[L];if(!this.opacities[L]){const W=new Pa(K,b,!1,!1);W.isHidden()||(this.opacities[L]=W,g=g||K.text.placed||K.icon.placed)}}for(const L in M)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=M[L]);for(const L in k)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=k[L]);g?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const g={};for(const b of f){const w=b.getBucket(l);w&&b.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,g,b.collisionBoxArray)}}updateBucketOpacities(l,f,g){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const b=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),M=new Pa(null,0,!1,!1,!0),k=b.get("text-allow-overlap"),L=b.get("icon-allow-overlap"),K=b.get("text-variable-anchor"),W=b.get("text-rotation-alignment")==="map",ee=b.get("text-pitch-alignment")==="map",le=b.get("icon-text-fit")!=="none",Se=new Pa(null,0,k&&(L||!l.hasIconData()||b.get("icon-optional")),L&&(k||!l.hasTextData()||b.get("text-optional")),!0);!l.collisionArrays&&g&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(g);const ye=(we,pe,Me)=>{for(let Ee=0;Ee<pe/4;Ee++)we.opacityVertexArray.emplaceBack(Me)};let _e=0;for(let we=0;we<l.symbolInstances.length;we++){const pe=l.symbolInstances.get(we),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:Ee,crossTileID:Ye}=pe;let We=this.opacities[Ye];f[Ye]?We=M:We||(We=Se,this.opacities[Ye]=We),f[Ye]=!0;const $e=Me>0||Ee>0,Ze=pe.numIconVertices>0,Ge=this.placedOrientations[pe.crossTileID],Qe=Ge===o.WritingMode.vertical,ct=Ge===o.WritingMode.horizontal||Ge===o.WritingMode.horizontalOnly;if(!$e&&!Ze||We.isHidden()||_e++,$e){const Zt=ss(We.text);ye(l.text,Me,Qe?Io:Zt),ye(l.text,Ee,ct?Io:Zt);const at=We.text.isHidden();[pe.rightJustifiedTextSymbolIndex,pe.centerJustifiedTextSymbolIndex,pe.leftJustifiedTextSymbolIndex].forEach(en=>{en>=0&&(l.text.placedSymbolArray.get(en).hidden=at||Qe?1:0)}),pe.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(pe.verticalPlacedTextSymbolIndex).hidden=at||ct?1:0);const Dt=this.variableOffsets[pe.crossTileID];Dt&&this.markUsedJustification(l,Dt.anchor,pe,Ge);const $t=this.placedOrientations[pe.crossTileID];$t&&(this.markUsedJustification(l,"left",pe,$t),this.markUsedOrientation(l,$t,pe))}if(Ze){const Zt=ss(We.icon);pe.placedIconSymbolIndex>=0&&(ye(l.icon,pe.numIconVertices,Qe?Io:Zt),l.icon.placedSymbolArray.get(pe.placedIconSymbolIndex).hidden=We.icon.isHidden()),pe.verticalPlacedIconSymbolIndex>=0&&(ye(l.icon,pe.numVerticalIconVertices,ct?Io:Zt),l.icon.placedSymbolArray.get(pe.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Zt=l.collisionArrays[we];if(Zt){let at=new o.pointGeometry(0,0),Dt=!0;if(Zt.textBox||Zt.verticalTextBox){if(K){const en=this.variableOffsets[Ye];en?(at=pi(en.anchor,en.width,en.height,en.textOffset,en.textScale),W&&at._rotate(ee?this.transform.angle:-this.transform.angle)):Dt=!1}w&&(Dt=!We.clipped),Zt.textBox&&ho(l.textCollisionBox.collisionVertexArray,We.text.placed,!Dt||Qe,at.x,at.y),Zt.verticalTextBox&&ho(l.textCollisionBox.collisionVertexArray,We.text.placed,!Dt||ct,at.x,at.y)}const $t=Dt&&Boolean(!ct&&Zt.verticalIconBox);Zt.iconBox&&ho(l.iconCollisionBox.collisionVertexArray,We.icon.placed,$t,le?at.x:0,le?at.y:0),Zt.verticalIconBox&&ho(l.iconCollisionBox.collisionVertexArray,We.icon.placed,!$t,le?at.x:0,le?at.y:0)}}}if(l.fullyClipped=_e===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const we=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=we.invProjMatrix,l.placementViewportMatrix=we.viewportMatrix,l.collisionCircleArray=we.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const g=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*g>l}setStale(){this.stale=!0}}function ho(p,l,f,g,b){p.emplaceBack(l?1:0,f?1:0,g||0,b||0),p.emplaceBack(l?1:0,f?1:0,g||0,b||0),p.emplaceBack(l?1:0,f?1:0,g||0,b||0),p.emplaceBack(l?1:0,f?1:0,g||0,b||0)}const Wl=Math.pow(2,25),fc=Math.pow(2,24),jy=Math.pow(2,17),lf=Math.pow(2,16),Ws=Math.pow(2,9),Vy=Math.pow(2,8),Zp=Math.pow(2,1);function ss(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const l=p.placed?1:0,f=Math.floor(127*p.opacity);return f*Wl+l*fc+f*jy+l*lf+f*Ws+l*Vy+f*Zp+l}const Io=0;class hc{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,f,g,b,w){const M=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(M,b,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((k,L)=>k.sortKey-L.sortKey));this._currentPartIndex<M.length;){const k=M[this._currentPartIndex];if(f.placeLayerBucketPart(k,this._seenCrossTileIDs,g,k.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class Aa{constructor(l,f,g,b,w,M,k,L){this.placement=new sf(l,w,M,k,L),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(l,f,g){const b=o.exported.now(),w=()=>{const M=o.exported.now()-b;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=f[l[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=k)&&(!M.maxzoom||M.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new hc(M)),this._inProgressLayer.continuePlacement(g[M.source],this.placement,this._showCollisionBoxes,M,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const uf=512/o.EXTENT/2;class pc{constructor(l,f,g){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(let b=0;b<f.length;b++){const w=f.get(b),M=w.key;this.indexedSymbolInstances[M]||(this.indexedSymbolInstances[M]=[]),this.indexedSymbolInstances[M].push({crossTileID:w.crossTileID,coord:this.getScaledCoordinates(w,l)})}}getScaledCoordinates(l,f){const g=uf/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*o.EXTENT+l.tileAnchorX)*g),y:Math.floor((f.canonical.y*o.EXTENT+l.tileAnchorY)*g)}}findMatches(l,f,g){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let w=0;w<l.length;w++){const M=l.get(w);if(M.crossTileID)continue;const k=this.indexedSymbolInstances[M.key];if(!k)continue;const L=this.getScaledCoordinates(M,f);for(const K of k)if(Math.abs(K.coord.x-L.x)<=b&&Math.abs(K.coord.y-L.y)<=b&&!g[K.crossTileID]){g[K.crossTileID]=!0,M.crossTileID=K.crossTileID;break}}}}class Uy{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ky{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(f!==0)for(const g in this.indexes){const b=this.indexes[g],w={};for(const M in b){const k=b[M];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+f),w[k.tileID.key]=k}this.indexes[g]=w}this.lng=l}addBucket(l,f,g){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<f.symbolInstances.length;w++)f.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const b=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const M=this.indexes[w];if(Number(w)>l.overscaledZ)for(const k in M){const L=M[k];L.tileID.isChildOf(l)&&L.findMatches(f.symbolInstances,l,b)}else{const k=M[l.scaledTo(Number(w)).key];k&&k.findMatches(f.symbolInstances,l,b)}}for(let w=0;w<f.symbolInstances.length;w++){const M=f.symbolInstances.get(w);M.crossTileID||(M.crossTileID=g.generate(),b[M.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new pc(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const g in f.indexedSymbolInstances)for(const b of f.indexedSymbolInstances[g])delete this.usedCrossTileIDs[l][b.crossTileID]}removeStaleBuckets(l){let f=!1;for(const g in this.indexes){const b=this.indexes[g];for(const w in b)l[b[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,b[w]),delete b[w],f=!0)}return f}}class mc{constructor(){this.layerIndexes={},this.crossTileIDs=new Uy,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,g,b){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new Ky);let M=!1;const k={};b.name!=="globe"&&w.handleWrapJump(g);for(const L of f){const K=L.getBucket(l);K&&l.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,K,this.crossTileIDs)&&(M=!0),k[K.bucketInstanceId]=!0)}return w.removeStaleBuckets(k)&&(M=!0),M}pruneUnusedLayers(l){const f={};l.forEach(g=>{f[g]=!0});for(const g in this.layerIndexes)f[g]||delete this.layerIndexes[g]}}const vc=(p,l)=>o.emitValidationErrors(p,l&&l.filter(f=>f.identifier!=="source.canvas")),Xp=o.pick(gn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Gy=o.pick(gn,["setCenter","setZoom","setBearing","setPitch"]),Yp={version:8,layers:[],sources:{}},Hy={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class po extends o.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new Le(nr(),this),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(l._requestManager,f.localFontFamily?o.LocalGlyphMode.all:f.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.lineAtlas=new o.LineAtlas(256,512),this.crossTileSymbolIndex=new mc,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const g=this;this._rtlTextPluginCallback=po.registerForPluginStateChange(b=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(w,M)=>{if(o.triggerPluginCompletionEvent(w),M&&M.every(k=>k))for(const k in g._sourceCaches){const L=g._sourceCaches[k],K=L.getSource().type;K!=="vector"&&K!=="geojson"||L.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const w=this.getSource(b.sourceId);if(w&&w.vectorLayerIds)for(const M in this._layers){const k=this._layers[M];k.source===w.id&&this._validateLayer(k)}})}loadURL(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const g=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,f.accessToken);const b=this.map._requestManager.transformRequest(l,o.ResourceType.Style);this._request=o.getJSON(b,(w,M)=>{this._request=null,w?this.fire(new o.ErrorEvent(w)):M&&this._load(M,g)})}loadJSON(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(l,f.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Yp,!1)}_updateLayerCount(l,f){const g=f?1:-1;l.is3D()&&(this._num3DLayers+=g),l.type==="circle"&&(this._numCircleLayers+=g),l.type==="symbol"&&(this._numSymbolLayers+=g)}_load(l,f){if(f&&vc(this,o.validateStyle(l)))return;this._loaded=!0,this.stylesheet=o.clone$1(l),this._updateMapProjection();for(const b in l.sources)this.addSource(b,l.sources[b],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const g=Ln(this.stylesheet.layers);this._order=g.map(b=>b.id),this._layers={},this._serializedLayers={};for(let b of g)b=o.createStyleLayer(b),b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new xe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(f,g,b){let w,M,k;const L=o.exported.devicePixelRatio>1?"@2x":"";let K=o.getJSON(g.transformRequest(g.normalizeSpriteURL(f,L,".json"),o.ResourceType.SpriteJSON),(le,Se)=>{K=null,k||(k=le,w=Se,ee())}),W=o.getImage(g.transformRequest(g.normalizeSpriteURL(f,L,".png"),o.ResourceType.SpriteImage),(le,Se)=>{W=null,k||(k=le,M=Se,ee())});function ee(){if(k)b(k);else if(w&&M){const le=o.exported.getImageData(M),Se={};for(const ye in w){const{width:_e,height:we,x:pe,y:Me,sdf:Ee,pixelRatio:Ye,stretchX:We,stretchY:$e,content:Ze}=w[ye],Ge=new o.RGBAImage({width:_e,height:we});o.RGBAImage.copy(le,Ge,{x:pe,y:Me},{x:0,y:0},{width:_e,height:we}),Se[ye]={data:Ge,pixelRatio:Ye,sdf:Ee,stretchX:We,stretchY:$e,content:Ze}}b(null,Se)}}return{cancel(){K&&(K.cancel(),K=null),W&&(W.cancel(),W=null)}}}(l,this.map._requestManager,(f,g)=>{if(this._spriteRequest=null,f)this.fire(new o.ErrorEvent(f));else if(g)for(const b in g)this.imageManager.addImage(b,g[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.getSource(l.source);if(!f)return;const g=l.sourceLayer;g&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${f.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const g of l){const b=this._layers[g];b.type!=="custom"&&f.push(b.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&Hy[l.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(b.length||w.length)&&this._updateWorkerLayers(b,w);for(const M in this._updatedSources){const k=this._updatedSources[M];k==="reload"?this._reloadSource(M):k==="clear"&&this._clearSource(M)}this._updateTilesForChangedImages();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const g={};for(const b in this._sourceCaches){const w=this._sourceCaches[b];g[b]=w.used,w.used=!1}for(const b of this._order){const w=this._layers[b];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const k=this._getLayerSourceCache(w);k&&(k.used=!0)}const M=this.map.painter;if(M){const k=w.getProgramIds();if(!k)continue;const L=w.getProgramConfiguration(l.zoom);for(const K of k)M.useProgram(K,L)}}for(const b in g){const w=this._sourceCaches[b];g[b]!==w.used&&w.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),vc(this,o.validateStyle(l)))return!1;(l=o.clone$1(l)).layers=Ln(l.layers);const f=function(b,w){if(!b)return[{command:gn.setStyle,args:[w]}];let M=[];try{if(!_(b.version,w.version))return[{command:gn.setStyle,args:[w]}];_(b.center,w.center)||M.push({command:gn.setCenter,args:[w.center]}),_(b.zoom,w.zoom)||M.push({command:gn.setZoom,args:[w.zoom]}),_(b.bearing,w.bearing)||M.push({command:gn.setBearing,args:[w.bearing]}),_(b.pitch,w.pitch)||M.push({command:gn.setPitch,args:[w.pitch]}),_(b.sprite,w.sprite)||M.push({command:gn.setSprite,args:[w.sprite]}),_(b.glyphs,w.glyphs)||M.push({command:gn.setGlyphs,args:[w.glyphs]}),_(b.transition,w.transition)||M.push({command:gn.setTransition,args:[w.transition]}),_(b.light,w.light)||M.push({command:gn.setLight,args:[w.light]}),_(b.fog,w.fog)||M.push({command:gn.setFog,args:[w.fog]}),_(b.projection,w.projection)||M.push({command:gn.setProjection,args:[w.projection]});const k={},L=[];(function(ee,le,Se,ye){let _e;for(_e in le=le||{},ee=ee||{})ee.hasOwnProperty(_e)&&(le.hasOwnProperty(_e)||Qi(_e,Se,ye));for(_e in le)le.hasOwnProperty(_e)&&(ee.hasOwnProperty(_e)?_(ee[_e],le[_e])||(ee[_e].type==="geojson"&&le[_e].type==="geojson"&&Ta(ee,le,_e)?Se.push({command:gn.setGeoJSONSourceData,args:[_e,le[_e].data]}):Jr(_e,le,Se,ye)):wt(_e,le,Se))})(b.sources,w.sources,L,k);const K=[];b.layers&&b.layers.forEach(ee=>{ee.source&&k[ee.source]?M.push({command:gn.removeLayer,args:[ee.id]}):K.push(ee)});let W=b.terrain;W&&k[W.source]&&(M.push({command:gn.setTerrain,args:[void 0]}),W=void 0),M=M.concat(L),_(W,w.terrain)||M.push({command:gn.setTerrain,args:[w.terrain]}),function(ee,le,Se){le=le||[];const ye=(ee=ee||[]).map(So),_e=le.map(So),we=ee.reduce(cc,{}),pe=le.reduce(cc,{}),Me=ye.slice(),Ee=Object.create(null);let Ye,We,$e,Ze,Ge,Qe,ct;for(Ye=0,We=0;Ye<ye.length;Ye++)$e=ye[Ye],pe.hasOwnProperty($e)?We++:(Se.push({command:gn.removeLayer,args:[$e]}),Me.splice(Me.indexOf($e,We),1));for(Ye=0,We=0;Ye<_e.length;Ye++)$e=_e[_e.length-1-Ye],Me[Me.length-1-Ye]!==$e&&(we.hasOwnProperty($e)?(Se.push({command:gn.removeLayer,args:[$e]}),Me.splice(Me.lastIndexOf($e,Me.length-We),1)):We++,Qe=Me[Me.length-Ye],Se.push({command:gn.addLayer,args:[pe[$e],Qe]}),Me.splice(Me.length-Ye,0,$e),Ee[$e]=!0);for(Ye=0;Ye<_e.length;Ye++)if($e=_e[Ye],Ze=we[$e],Ge=pe[$e],!Ee[$e]&&!_(Ze,Ge))if(_(Ze.source,Ge.source)&&_(Ze["source-layer"],Ge["source-layer"])&&_(Ze.type,Ge.type)){for(ct in uc(Ze.layout,Ge.layout,Se,$e,null,gn.setLayoutProperty),uc(Ze.paint,Ge.paint,Se,$e,null,gn.setPaintProperty),_(Ze.filter,Ge.filter)||Se.push({command:gn.setFilter,args:[$e,Ge.filter]}),_(Ze.minzoom,Ge.minzoom)&&_(Ze.maxzoom,Ge.maxzoom)||Se.push({command:gn.setLayerZoomRange,args:[$e,Ge.minzoom,Ge.maxzoom]}),Ze)Ze.hasOwnProperty(ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?uc(Ze[ct],Ge[ct],Se,$e,ct.slice(6),gn.setPaintProperty):_(Ze[ct],Ge[ct])||Se.push({command:gn.setLayerProperty,args:[$e,ct,Ge[ct]]}));for(ct in Ge)Ge.hasOwnProperty(ct)&&!Ze.hasOwnProperty(ct)&&ct!=="layout"&&ct!=="paint"&&ct!=="filter"&&ct!=="metadata"&&ct!=="minzoom"&&ct!=="maxzoom"&&(ct.indexOf("paint.")===0?uc(Ze[ct],Ge[ct],Se,$e,ct.slice(6),gn.setPaintProperty):_(Ze[ct],Ge[ct])||Se.push({command:gn.setLayerProperty,args:[$e,ct,Ge[ct]]}))}else Se.push({command:gn.removeLayer,args:[$e]}),Qe=Me[Me.lastIndexOf($e)+1],Se.push({command:gn.addLayer,args:[Ge,Qe]})}(K,w.layers,M)}catch(k){console.warn("Unable to compute style diff:",k),M=[{command:gn.setStyle,args:[w]}]}return M}(this.serialize(),l).filter(b=>!(b.command in Gy));if(f.length===0)return!1;const g=f.filter(b=>!(b.command in Xp));if(g.length>0)throw new Error(`Unimplemented: ${g.map(b=>b.command).join(", ")}.`);return f.forEach(b=>{b.command!=="setTransition"&&b.command!=="setProjection"&&this[b.command].apply(this,b.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,f){return this.getImage(l)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,f),this._afterImageUpdated(l),this)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,f,g={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateSource,`sources.${l}`,f,null,g))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=ot(l,f,this.dispatcher,this);b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:b.serialize(),sourceId:l}));const w=M=>{const k=(M?"symbol:":"other:")+l,L=this._sourceCaches[k]=new o.SourceCache(k,b,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[l]=L,L.style=this,L.onAdd(this.map)};w(!1),f.type!=="vector"&&f.type!=="geojson"||w(!0),b.onAdd&&b.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const f=this.getSource(l);if(!f)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(l);for(const b of g)delete this._sourceCaches[b.id],delete this._updatedSources[b.id],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,f){this._checkLoaded(),this.getSource(l).setData(f),this._changed=!0}getSource(l){const f=this._getSourceCache(l);return f&&f.getSource()}addLayer(l,f,g={}){this._checkLoaded();const b=l.id;if(this.getLayer(b))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${b}" already exists on this map`)));let w;if(l.type==="custom"){if(vc(this,o.validateCustomStyleLayer(l)))return;w=o.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(b,l.source),l=o.clone$1(l),l=o.extend(l,{source:b})),this._validate(o.validateLayer,`layers.${b}`,l,{arrayIndex:-1},g))return;w=o.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const M=f?this._order.indexOf(f):this._order.length;if(f&&M===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(M,0,b),this._layerOrderChanged=!0,this._layers[b]=w;const k=this._getLayerSourceCache(w);if(this._removedLayers[b]&&w.source&&k&&w.type!=="custom"){const L=this._removedLayers[b];delete this._removedLayers[b],L.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",k.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const g=this._order.indexOf(l);this._order.splice(g,1);const b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(b,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const g=this._order.indexOf(l);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const f in this._layers)if(this._layers[f].type===l)return!0;return!1}setLayerZoomRange(l,f,g){this._checkLoaded();const b=this.getLayer(l);b?b.minzoom===f&&b.maxzoom===g||(f!=null&&(b.minzoom=f),g!=null&&(b.maxzoom=g),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,f,g={}){this._checkLoaded();const b=this.getLayer(l);if(b){if(!_(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateFilter,`layers.${b.id}.filter`,f,{layerType:b.type},g)||(b.filter=o.clone$1(f),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const f=this.getLayer(l);return f&&o.clone$1(f.filter)}setLayoutProperty(l,f,g,b={}){this._checkLoaded();const w=this.getLayer(l);w?_(w.getLayoutProperty(f),g)||(w.setLayoutProperty(f,g,b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,f){const g=this.getLayer(l);if(g)return g.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,f,g,b={}){this._checkLoaded();const w=this.getLayer(l);w?_(w.getPaintProperty(f),g)||(w.setPaintProperty(f,g,b)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,f){const g=this.getLayer(l);return g&&g.getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const g=l.source,b=l.sourceLayer,w=this.getSource(g);if(!w)return void this.fire(new o.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const M=w.type;if(M==="geojson"&&b)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!b)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const k=this._getSourceCaches(g);for(const L of k)L.setFeatureState(b,l.id,f)}removeFeatureState(l,f){this._checkLoaded();const g=l.source,b=this.getSource(g);if(!b)return void this.fire(new o.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const w=b.type,M=w==="vector"?l.sourceLayer:void 0;if(w==="vector"&&!M)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const k=this._getSourceCaches(g);for(const L of k)L.removeFeatureState(M,l.id,f)}getFeatureState(l){this._checkLoaded();const f=l.source,g=l.sourceLayer,b=this.getSource(f);if(b){if(b.type!=="vector"||g)return l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(g,l.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const f in this._sourceCaches){const g=this._sourceCaches[f].getSource();l[g.id]||(l[g.id]=g.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const f=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",f.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const f=M=>this._layers[M].type==="fill-extrusion",g={},b=[];for(let M=this._order.length-1;M>=0;M--){const k=this._order[M];if(f(k)){g[k]=M;for(const L of l){const K=L[k];if(K)for(const W of K)b.push(W)}}}b.sort((M,k)=>k.intersectionZ-M.intersectionZ);const w=[];for(let M=this._order.length-1;M>=0;M--){const k=this._order[M];if(f(k))for(let L=b.length-1;L>=0;L--){const K=b[L].feature;if(g[K.layer.id]<M)break;w.push(K),b.pop()}else for(const L of l){const K=L[k];if(K)for(const W of K)w.push(W.feature)}}return w}queryRenderedFeatures(l,f,g){f&&f.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of f.layers){const K=this._layers[L];if(!K)return this.fire(new o.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];b[K.source]=!0}}const w=[];f.availableImages=this._availableImages;const M=f&&f.layers?f.layers.some(L=>{const K=this.getLayer(L);return K&&K.is3D()}):this.has3DLayers(),k=oe.createFromScreenPoints(l,g);for(const L in this._sourceCaches){const K=this._sourceCaches[L].getSource().id;f.layers&&!b[K]||w.push(Qt(this._sourceCaches[L],this._layers,this._serializedLayers,k,f,g,M,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(L,K,W,ee,le,Se,ye){const _e={},we=Se.queryRenderedSymbols(ee),pe=[];for(const Me of Object.keys(we).map(Number))pe.push(ye[Me]);pe.sort(Sn);for(const Me of pe){const Ee=Me.featureIndex.lookupSymbolFeatures(we[Me.bucketInstanceId],K,Me.bucketIndex,Me.sourceLayerIndex,le.filter,le.layers,le.availableImages,L);for(const Ye in Ee){const We=_e[Ye]=_e[Ye]||[],$e=Ee[Ye];$e.sort((Ze,Ge)=>{const Qe=Me.featureSortOrder;if(Qe){const ct=Qe.indexOf(Ze.featureIndex);return Qe.indexOf(Ge.featureIndex)-ct}return Ge.featureIndex-Ze.featureIndex});for(const Ze of $e)We.push(Ze)}}for(const Me in _e)_e[Me].forEach(Ee=>{const Ye=Ee.feature,We=W(L[Me]).getFeatureState(Ye.layer["source-layer"],Ye.id);Ye.source=Ye.layer.source,Ye.layer["source-layer"]&&(Ye.sourceLayer=Ye.layer["source-layer"]),Ye.state=We});return _e}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),k.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,f){f&&f.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const g=this._getSourceCaches(l);let b=[];for(const w of g)b=b.concat(Bt(w,f));return b}addSourceType(l,f,g){return po.getSourceType(l)?g(new Error(`A source type called "${l}" already exists.`)):(po.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const g=this.light.getLight();let b=!1;for(const M in l)if(!_(l[M],g[M])){b=!0;break}if(!b)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,f),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,f=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(f===1){if(typeof l.source=="object"){const g="terrain-dem-src";this.addSource(g,l.source),l=o.clone$1(l),l=o.extend(l,{source:g})}if(this._validate(o.validateTerrain,"terrain",l))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode)this._createTerrain(l,f);else{const g=this.terrain,b=g.get();for(const w of Object.keys(o.spec.terrain))!l.hasOwnProperty(w)&&o.spec.terrain[w].default&&(l[w]=o.spec.terrain[w].default);for(const w in l)if(!_(l[w],b[w])){g.set(l),this.stylesheet.terrain=l;const M=this._setTransitionParameters({duration:0});g.updateTransitions(M);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const f=this.fog=new Re(l,this.map.transform);this.stylesheet.fog=l;const g=this._setTransitionParameters({duration:0});f.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,g=f.get();Object.keys(l).length===0&&f.set(l);for(const b in l)if(!_(l[b],g[b])){f.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});f.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:o.exported.now(),transition:o.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(g=>this.isLayerDraped(this._layers[g])),f=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...f)}_createTerrain(l,f){const g=this.terrain=new he(l,f);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const b=this._setTransitionParameters({duration:0});g.updateTransitions(b)}_force3DLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="symbol"&&this._updateLayer(f)}}_validate(l,f,g,b,w={}){return(!w||w.validate!==!1)&&vc(this,l.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:g,styleSpec:o.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const f=this._getSourceCaches(l);for(const g of f)g.clearTiles()}_reloadSource(l){const f=this._getSourceCaches(l);for(const g of f)g.resume(),g.reload()}_updateSources(l){for(const f in this._sourceCaches)this._sourceCaches[f].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const f=this._sourceCaches[l];f.resume(),f.reload()}}_updatePlacement(l,f,g,b,w=!1){let M=!1,k=!1;const L={};for(const K of this._order){const W=this._layers[K];if(W.type!=="symbol")continue;if(!L[W.source]){const le=this._getLayerSourceCache(W);if(!le)continue;L[W.source]=le.getRenderableIds(!0).map(Se=>le.getTileByID(Se)).sort((Se,ye)=>ye.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(ye.tileID)?-1:1))}const ee=this.crossTileSymbolIndex.addLayer(W,L[W.source],l.center.lng,l.projection);M=M||ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),l.zoom))&&(this.pauseablePlacement=new Aa(l,this._order,w,f,g,b,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),k=!0),M&&this.pauseablePlacement.placement.setStale()),k||M)for(const K of this._order){const W=this._layers[K];W.type==="symbol"&&this.placement.updateLayerOpacities(W,L[W.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,g){this.imageManager.getImages(f.icons,g),this._updateTilesForChangedImages();const b=w=>{w&&w.setDependencies(f.tileID.key,f.type,f.icons)};b(this._otherSourceCaches[f.source]),b(this._symbolSourceCaches[f.source])}getGlyphs(l,f,g){this.glyphManager.getGlyphs(f.stacks,g)}getResource(l,f,g){return o.makeRequest(f,g)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const f=[];return this._otherSourceCaches[l]&&f.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&f.push(this._symbolSourceCaches[l]),f}_isSourceCacheLoaded(l){const f=this._getSourceCaches(l);return f.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):f.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}po.getSourceType=function(p){return Xe[p]},po.setSourceType=function(p,l){Xe[p]=l},po.registerForPluginStateChange=o.registerForPluginStateChange;var cf=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,df="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ff=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,hf=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Zs=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let gc={},ls={};const Ma=[];us(cf,Ma),us(ff,Ma),us(hf,Ma),us(Zs,Ma),gc=yr("",ff),ls=yr(Zs,hf);const Zl=yr(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),yc=cf,_c=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var xc={background:yr(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:yr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:yr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:yr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:yr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:yr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:yr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:yr(`uniform lowp vec3 u_lightpos;varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
void main() {vec4 color=v_color;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:yr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:yr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:yr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:yr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:yr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:yr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,df),skyboxGradient:yr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,df),skyboxCapture:yr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:yr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:yr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function us(p,l){const f=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of f)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=g.split(" ");for(const w of b)l.includes(w)||l.push(w)}}function yr(p,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),b={},w=[...Ma];return us(p,w),us(l,w),{fragmentSource:p=p.replace(f,(M,k,L,K,W)=>(b[W]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${W}
varying ${L} ${K} ${W};
#else
uniform ${L} ${K} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${L} ${K} ${W} = u_${W};
#endif
`)),vertexSource:l=l.replace(f,(M,k,L,K,W)=>{const ee=K==="float"?"vec2":"vec4",le=W.match(/color/)?"color":ee;return b[W]?k==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${L} ${ee} a_${W};
varying ${L} ${K} ${W};
#else
uniform ${L} ${K} u_${W};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${L} ${K} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${le}(a_${W}, u_${W}_t);
#else
    ${L} ${K} ${W} = u_${W};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
attribute ${L} ${ee} a_${W};
#else
uniform ${L} ${K} u_${W};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${L} ${K} ${W} = a_${W};
#else
    ${L} ${K} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${L} ${K} ${W} = unpack_mix_${le}(a_${W}, u_${W}_t);
#else
    ${L} ${K} ${W} = u_${W};
#endif
`}),staticAttributes:g,usedDefines:w}}class bc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,f,g,b,w,M,k){this.context=l;let L=this.boundPaintVertexBuffers.length!==b.length;for(let W=0;!L&&W<b.length;W++)this.boundPaintVertexBuffers[W]!==b[W]&&(L=!0);let K=this.boundDynamicVertexBuffers.length!==k.length;for(let W=0;!K&&W<k.length;W++)this.boundDynamicVertexBuffers[W]!==k[W]&&(K=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==g||L||K||this.boundIndexBuffer!==w||this.boundVertexOffset!==M)this.freshBind(f,g,b,w,M,k);else{l.bindVertexArrayOES.set(this.vao);for(const W of k)W&&W.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,f,g,b,w,M){let k;const L=l.numAttributes,K=this.context,W=K.gl;if(K.extVertexArrayObject)this.vao&&this.destroy(),this.vao=K.extVertexArrayObject.createVertexArrayOES(),K.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=b,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=M;else{k=K.currentNumAttributes||0;for(let ee=L;ee<k;ee++)W.disableVertexAttribArray(ee)}f.enableAttributes(W,l),f.bind(),f.setVertexAttribPointers(W,l,w);for(const ee of g)ee.enableAttributes(W,l),ee.bind(),ee.setVertexAttribPointers(W,l,w);for(const ee of M)ee&&(ee.enableAttributes(W,l),ee.bind(),ee.setVertexAttribPointers(W,l,w));b&&b.bind(),K.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pf(p,l){const f=Math.pow(2,l.canonical.z),g=l.canonical.y;return[new o.MercatorCoordinate(0,g/f).toLngLat().lat,new o.MercatorCoordinate(0,(g+1)/f).toLngLat().lat]}function mf(p,l,f,g,b,w,M){const k=p.context,L=k.gl,K=f.fbo;if(!K)return;p.prepareDrawTile();const W=p.useProgram("hillshade");k.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,K.colorAttachment.get());const ee=((_e,we,pe,Me)=>{const Ee=pe.paint.get("hillshade-shadow-color"),Ye=pe.paint.get("hillshade-highlight-color"),We=pe.paint.get("hillshade-accent-color");let $e=pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);pe.paint.get("hillshade-illumination-anchor")==="viewport"&&($e-=_e.transform.angle);const Ze=!_e.options.moving;return{u_matrix:Me||_e.transform.calculateProjMatrix(we.tileID.toUnwrapped(),Ze),u_image:0,u_latrange:pf(0,we.tileID),u_light:[pe.paint.get("hillshade-exaggeration"),$e],u_shadow:Ee,u_highlight:Ye,u_accent:We}})(p,f,g,p.terrain?l.projMatrix:null);p.prepareDrawProgram(k,W,l.toUnwrapped());const{tileBoundsBuffer:le,tileBoundsIndexBuffer:Se,tileBoundsSegments:ye}=p.getTileBoundsBuffers(f);W.draw(k,L.TRIANGLES,b,w,M,o.CullFaceMode.disabled,ee,g.id,le,Se,ye)}function ur(p,l,f){if(!l.needsDEMTextureUpload)return;const g=p.context,b=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||p.getTileTexture(f.stride);const w=f.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new o.Texture(g,w,b.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Xs(p,l,f,g,b,w){const M=p.context,k=M.gl;if(!l.dem)return;const L=l.dem;if(M.activeTexture.set(k.TEXTURE1),ur(p,l,L),!l.demTexture)return;l.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);const K=L.dim;M.activeTexture.set(k.TEXTURE0);let W=l.fbo;if(!W){const ye=new o.Texture(M,{width:K,height:K,data:null},k.RGBA);ye.bind(k.LINEAR,k.CLAMP_TO_EDGE),W=l.fbo=M.createFramebuffer(K,K,!0),W.colorAttachment.set(ye.texture)}M.bindFramebuffer.set(W.framebuffer),M.viewport.set([0,0,K,K]);const{tileBoundsBuffer:ee,tileBoundsIndexBuffer:le,tileBoundsSegments:Se}=p.getMercatorTileBoundsBuffers();p.useProgram("hillshadePrepare").draw(M,k.TRIANGLES,g,b,w,o.CullFaceMode.disabled,((ye,_e)=>{const we=_e.stride,pe=o.create();return o.ortho(pe,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(pe,pe,[0,-o.EXTENT,0]),{u_matrix:pe,u_image:1,u_dimension:[we,we],u_zoom:ye.overscaledZ,u_unpack:_e.unpackVector}})(l.tileID,L),f.id,ee,le,Se),l.needsHillshadePrepare=!1}const Xl=p=>({u_matrix:new o.UniformMatrix4f(p),u_image0:new o.Uniform1i(p),u_skirt_height:new o.Uniform1f(p)}),vf=(p,l)=>({u_matrix:p,u_image0:0,u_skirt_height:l}),gf=(p,l,f,g,b,w,M,k,L,K,W,ee,le,Se)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:f,u_zoom_transition:b,u_merc_center:w,u_image0:0,u_frustum_tl:M,u_frustum_tr:k,u_frustum_br:L,u_frustum_bl:K,u_globe_pos:W,u_globe_radius:ee,u_viewport:le,u_grid_matrix:Se?Float32Array.from(Se):new Float32Array(9)});function yf(p,l){return p!=null&&l!=null&&!(!p.hasData()||!l.hasData())&&p.demTexture!=null&&l.demTexture!=null&&p.tileID.key!==l.tileID.key}const ka=new class{constructor(){this.operations={}}newMorphing(p,l,f,g,b){if(p in this.operations){const w=this.operations[p];w.to.tileID.key!==f.tileID.key&&(w.queued=f)}else this.operations[p]={startTime:g,phase:0,duration:b,from:l,to:f,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const l=this.operations[p];return{from:l.from,to:l.to,phase:l.phase}}update(p){for(const l in this.operations){const f=this.operations[l];for(f.phase=(p-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,p)){delete this.operations[l];break}}}_nextOp(p,l){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=l,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Yl={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function qy(p,l){const f=1<<p.z;return!l&&(p.x===0||p.x===f-1)||p.y===0||p.y===f-1}const _f=p=>({u_matrix:p});function wc(p,l,f,g,b){if(b>0){const w=o.exported.now(),M=(w-p.timeAdded)/b,k=l?(w-l.timeAdded)/b:-1,L=f.getSource(),K=g.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),W=!l||Math.abs(l.tileID.overscaledZ-K)>Math.abs(p.tileID.overscaledZ-K),ee=W&&p.refreshedUponExpiration?1:o.clamp(W?M:1-k,0,1);return p.refreshedUponExpiration&&M>=1&&(p.refreshedUponExpiration=!1),l?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}class xf extends o.SourceCache{constructor(l){const f={type:"raster-dem",maxzoom:l.transform.maxZoom},g=new Le(nr(),null),b=ot("mock-dem",f,g,l.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,f){l.state="loaded",f(null)}}class bf extends o.SourceCache{constructor(l){const f=ot("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Le(nr(),null),l.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,f,g){if(l.freezeTileCoverage)return;this.transform=l;const b=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,M)=>{if(w[M.key]="",!this._tiles[M.key]){const k=new o.Tile(M,this._source.tileSize*M.overscaleFactor(),l.tileZoom);k.state="loaded",this._tiles[M.key]=k}return w},{});for(const w in this._tiles)w in b||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const f=this.proxyCachedFBO[l];if(f!==void 0){const g=Object.values(f);this.renderCachePool.push(...g),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Cc extends o.OverscaledTileID{constructor(l,f,g){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=f,this.projMatrix=g}}class Jp extends o.Elevation{constructor(l,f){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,b,w]=function(L){const K=new o.StructArrayLayout4i8,W=new o.StructArrayLayout3ui6,ee=131;K.reserve(17161),W.reserve(33800);const le=o.EXTENT/128,Se=o.EXTENT+le/2,ye=Se+le;for(let we=-le;we<ye;we+=le)for(let pe=-le;pe<ye;pe+=le){const Me=pe<0||pe>Se||we<0||we>Se?24575:0,Ee=o.clamp(Math.round(pe),0,o.EXTENT),Ye=o.clamp(Math.round(we),0,o.EXTENT);K.emplaceBack(Ee+Me,Ye,Ee,Ye)}const _e=(we,pe)=>{const Me=pe*ee+we;W.emplaceBack(Me+1,Me,Me+ee),W.emplaceBack(Me+ee,Me+ee+1,Me+1)};for(let we=1;we<129;we++)for(let pe=1;pe<129;pe++)_e(pe,we);return[0,129].forEach(we=>{for(let pe=0;pe<130;pe++)_e(pe,we),_e(we,pe)}),[K,W,32768]}(),M=l.context;this.gridBuffer=M.createVertexBuffer(g,o.boundsAttributes.members),this.gridIndexBuffer=M.createIndexBuffer(b),this.gridSegments=o.SegmentVector.simpleSegment(0,0,g.length,b.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,g.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new bf(f.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,0,o.EXTENT,0,o.EXTENT,0,1);const k=M.gl;this._overlapStencilMode=new o.StencilMode({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new xf(f.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency()}update(l,f,g){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const b=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(b.get("source")),this._exaggeration=b.get("exaggeration");const w=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const M=this.getScaledDemTileSize();this.sourceCache.update(f,M,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),f.updateElevation(!g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=f.getIds().map(L=>{const K=f.getTileByID(L).tileID;return K.projMatrix=g.calculateProjMatrix(K.toUnwrapped()),K});(function(L,K){const W=K.transform.pointCoordinate(K.transform.getCameraPoint()),ee=new o.pointGeometry(W.x,W.y);L.sort((le,Se)=>{if(Se.overscaledZ-le.overscaledZ)return Se.overscaledZ-le.overscaledZ;const ye=new o.pointGeometry(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),_e=new o.pointGeometry(Se.canonical.x+(1<<Se.canonical.z)*Se.wrap,Se.canonical.y),we=ee.mult(1<<le.canonical.z);return we.x-=.5,we.y-=.5,we.distSqr(ye)-we.distSqr(_e)})})(b,this.painter),this._previousZoom=g.zoom;const w=this.proxyToSource||{};this.proxyToSource={},b.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const M=this._style._sourceCaches;for(const L in M){const K=M[L];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,l[L],w),K.usedForTerrain))continue;const W=l[L];K.getSource().reparseOverscaled&&this._assignTerrainTiles(W)}this.proxiedCoords[f.id]=b.map(L=>new Cc(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const k={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const K=this.terrainTileForTile[L.key];if(!K)continue;const W=K.tileID.key;W in k||(this._visibleDemTiles.push(K),k[W]=W)}}_assignTerrainTiles(l){this._initializing||l.forEach(f=>{if(this.terrainTileForTile[f.key])return;const g=this._findTileCoveringTileID(f,this.sourceCache);g&&(this.terrainTileForTile[f.key]=g)})}_prepareDEMTextures(){const l=this.painter.context,f=l.gl;for(const g in this.terrainTileForTile){const b=this.terrainTileForTile[g],w=b.dem;!w||b.demTexture&&!b.needsDEMTextureUpload||(l.activeTexture.set(f.TEXTURE1),ur(this.painter,b,w))}}_prepareDemTileUniforms(l,f,g,b){if(!f||f.demTexture==null)return!1;const w=l.tileID.canonical,M=Math.pow(2,f.tileID.canonical.z-w.z),k=b||"";return g[`u_dem_tl${k}`]=[w.x*M%1,w.y*M%1],g[`u_dem_scale${k}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,f=l.gl;if(!this._emptyDepthBufferTexture){const g=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(l,g,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const f=this._visibleDemTiles.reduce((g,b)=>{if(!b.dem)return g;const w=b.dem.tree.minimums[0];return w>0&&l++,g+w},0);return l?f/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,f=l.gl;l.activeTexture.set(f.TEXTURE2);const g=this._getLoadedAreaMinimum(),b=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(b,{premultiply:!1}):w=this._emptyDEMTexture=new o.Texture(l,b,f.RGBA,{premultiply:!1}),w}setupElevationDraw(l,f,g){const b=this.painter.context,w=b.gl,M=(k=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(k),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var k;M.u_dem_size=this.sourceCache.getSource().tileSize,M.u_exaggeration=this.exaggeration();const L=this.painter.transform,K=L.projection,W=l.tileID.canonical;M.u_tile_tl_up=K.upVector(W,0,0),M.u_tile_tr_up=K.upVector(W,o.EXTENT,0),M.u_tile_br_up=K.upVector(W,o.EXTENT,o.EXTENT),M.u_tile_bl_up=K.upVector(W,0,o.EXTENT),M.u_tile_up_scale=g&&g.useDenormalizedUpVectorScale?o.GLOBE_METERS_TO_ECEF:K.upVectorScale(W,L.center.lat,L.worldSize).metersToTile;let ee=null,le=null,Se=1;if(g&&g.morphing&&this._useVertexMorphing){const ye=g.morphing.srcDemTile,_e=g.morphing.dstDemTile;Se=g.morphing.phase,ye&&_e&&(this._prepareDemTileUniforms(l,ye,M,"_prev")&&(le=ye),this._prepareDemTileUniforms(l,_e,M)&&(ee=_e))}if(le&&ee?(b.activeTexture.set(w.TEXTURE2),ee.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),b.activeTexture.set(w.TEXTURE4),le.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),M.u_dem_lerp=Se):(ee=this.terrainTileForTile[l.tileID.key],b.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,ee,M)?ee.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),b.activeTexture.set(w.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(M.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),M.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&ee){const ye=(1<<ee.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=ye}g&&g.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),f.setTerrainUniformValues(b,M)}renderToBackBuffer(l){const f=this.painter,g=this.painter.context;l.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,w,M,k,L){if(b.transform.projection.name==="globe")(function(K,W,ee,le,Se){const ye=K.context,_e=ye.gl;let we,pe;const Me=K.options.showTerrainWireframe?2:0,Ee=K.transform,Ye=o.globeUseCustomAntiAliasing(K,ye,Ee),We=(en,Ct)=>{if(pe===en)return;const Yt=[Yl[en],"PROJECTION_GLOBE_VIEW"];Ye&&Yt.push("CUSTOM_ANTIALIASING"),Ct&&Yt.push(Yl[Me]),we=K.useProgram("globeRaster",null,Yt),pe=en},$e=K.colorModeForRenderPass(),Ze=new o.DepthMode(_e.LEQUAL,o.DepthMode.ReadWrite,K.depthRangeFor3D);ka.update(Se);const Ge=o.calculateGlobeMercatorMatrix(Ee),Qe=[o.mercatorXfromLng(Ee.center.lng),o.mercatorYfromLat(Ee.center.lat)],ct=Me?[!1,!0]:[!1],Zt=K.globeSharedBuffers,at=[Ee.width*o.exported.devicePixelRatio,Ee.height*o.exported.devicePixelRatio],Dt=Float32Array.from(Ee.globeMatrix),$t={useDenormalizedUpVectorScale:!0};if(ct.forEach(en=>{pe=-1;const Ct=en?_e.LINES:_e.TRIANGLES;for(const Yt of le){const Nt=ee.getTile(Yt),ln=o.StencilMode.disabled,rn=W.prevTerrainTileForTile[Yt.key],yn=W.terrainTileForTile[Yt.key];yf(rn,yn)&&ka.newMorphing(Yt.key,rn,yn,Se,250),ye.activeTexture.set(_e.TEXTURE0),Nt.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);const En=ka.getMorphValuesForProxy(Yt.key),kn=En?1:0;En&&o.extend$1($t,{morphing:{srcDemTile:En.from,dstDemTile:En.to,phase:o.easeCubicInOut(En.phase)}});const Jn=o.tileCornersToBounds(Yt.canonical),_n=o.getLatitudinalLod(Jn.getCenter().lat),Bn=o.getGridMatrix(Yt.canonical,Jn,_n),cr=o.globeNormalizeECEF(o.globeTileBounds(Yt.canonical)),jr=gf(Ee.projMatrix,Dt,Ge,cr,o.globeToMercatorTransition(Ee.zoom),Qe,Ee.frustumCorners.TL,Ee.frustumCorners.TR,Ee.frustumCorners.BR,Ee.frustumCorners.BL,Ee.globeCenterInViewSpace,Ee.globeRadius,at,Bn);if(We(kn,en),W.setupElevationDraw(Nt,we,$t),K.prepareDrawProgram(ye,we,Yt.toUnwrapped()),Zt){const[Qr,Pr,_i]=en?Zt.getWirefameBuffers(K.context,_n):Zt.getGridBuffers(_n);we.draw(ye,Ct,Ze,ln,$e,o.CullFaceMode.backCCW,jr,"globe_raster",Qr,Pr,_i)}}}),Zt){const en=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ye&&en.push("CUSTOM_ANTIALIASING"),we=K.useProgram("globeRaster",null,en);for(const Ct of le){const{x:Yt,y:Nt,z:ln}=Ct.canonical,rn=Nt===0,yn=Nt===(1<<ln)-1,[En,kn,Jn,_n]=Zt.getPoleBuffers(ln);if(_n&&(rn||yn)){const Bn=ee.getTile(Ct);ye.activeTexture.set(_e.TEXTURE0),Bn.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE);let cr=o.globePoleMatrixForTile(ln,Yt,Ee);const jr=o.globeNormalizeECEF(o.globeTileBounds(Ct.canonical)),Qr=(Pr,_i)=>Pr.draw(ye,_e.TRIANGLES,Ze,o.StencilMode.disabled,$e,o.CullFaceMode.disabled,gf(Ee.projMatrix,cr,cr,jr,0,Qe,Ee.frustumCorners.TL,Ee.frustumCorners.TR,Ee.frustumCorners.BR,Ee.frustumCorners.BL,Ee.globeCenterInViewSpace,Ee.globeRadius,at),"globe_pole_raster",_i,Jn,_n);W.setupElevationDraw(Bn,we,$t),K.prepareDrawProgram(ye,we,Ct.toUnwrapped()),rn&&Qr(we,En),yn&&(cr=o.scale(o.create(),cr,[1,-1,1]),Qr(we,kn))}}}})(b,w,M,k,L);else{const K=b.context,W=K.gl;let ee,le;const Se=b.options.showTerrainWireframe?2:0,ye=(Ee,Ye)=>{if(le===Ee)return;const We=[Yl[Ee]];Ye&&We.push(Yl[Se]),ee=b.useProgram("terrainRaster",null,We),le=Ee},_e=b.colorModeForRenderPass(),we=new o.DepthMode(W.LEQUAL,o.DepthMode.ReadWrite,b.depthRangeFor3D);ka.update(L);const pe=b.transform,Me=6*Math.pow(1.5,22-pe.zoom)*w.exaggeration();(Se?[!1,!0]:[!1]).forEach(Ee=>{le=-1;const Ye=Ee?W.LINES:W.TRIANGLES,[We,$e]=Ee?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Ze of k){const Ge=M.getTile(Ze),Qe=o.StencilMode.disabled,ct=w.prevTerrainTileForTile[Ze.key],Zt=w.terrainTileForTile[Ze.key];yf(ct,Zt)&&ka.newMorphing(Ze.key,ct,Zt,L,250),K.activeTexture.set(W.TEXTURE0),Ge.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST);const at=ka.getMorphValuesForProxy(Ze.key),Dt=at?1:0;let $t;at&&($t={morphing:{srcDemTile:at.from,dstDemTile:at.to,phase:o.easeCubicInOut(at.phase)}});const en=vf(Ze.projMatrix,qy(Ze.canonical,pe.renderWorldCopies)?Me/10:Me);ye(Dt,Ee),w.setupElevationDraw(Ge,ee,$t),b.prepareDrawProgram(K,ee,Ze.toUnwrapped()),ee.draw(K,Ye,we,Qe,_e,o.CullFaceMode.backCCW,en,"terrain_raster",w.gridBuffer,We,$e)}})}}(f,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const f=this.painter,g=this.painter.context,b=this.proxySourceCache,w=this.proxiedCoords[b.id],M=this._drapedRenderBatches.shift(),k=[],L=f.style.order;let K=0;for(const W of w){const ee=b.getTileByID(W.proxyTileKey),le=b.proxyCachedFBO[W.key]?b.proxyCachedFBO[W.key][l]:void 0,Se=le!==void 0?b.renderCache[le]:this.pool[K++],ye=le!==void 0;if(ee.texture=Se.tex,ye&&!Se.dirty){k.push(ee.tileID);continue}let _e;g.bindFramebuffer.set(Se.fb.framebuffer),this.renderedToTile=!1,Se.dirty&&(g.clear({color:o.Color.transparent,stencil:0}),Se.dirty=!1);for(let we=M.start;we<=M.end;++we){const pe=f.style._layers[L[we]];if(pe.isHidden(f.transform.zoom))continue;const Me=f.style._getLayerSourceCache(pe),Ee=Me?this.proxyToSource[W.key][Me.id]:[W];if(!Ee)continue;const Ye=Ee;g.viewport.set([0,0,Se.fb.width,Se.fb.height]),_e!==(Me?Me.id:null)&&(this._setupStencil(Se,Ee,pe,Me),_e=Me?Me.id:null),f.renderLayer(f,Me,pe,Ye)}this.renderedToTile?(Se.dirty=!0,k.push(ee.tileID)):ye||--K,K===5&&(K=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,f.width,f.height]),M.end+1}postRender(){}renderCacheEfficiency(l){const f=l.order.length;if(f===0)return{efficiency:100};let g,b=0,w=0,M=!1;for(let k=0;k<f;++k){const L=l._layers[l.order[k]];this._style.isLayerDraped(L)?(M&&++b,++w):M||(M=!0,g=L.id)}return w===0?{efficiency:100}:{efficiency:100*(1-b/w),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{l=Math.min(l,f.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,f,g){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const M=w.tileID,k=1<<M.overscaledZ,{x:L,y:K}=M.canonical,W=L/k,ee=(L+1)/k,le=K/k,Se=(K+1)/k;return{minx:W,miny:le,maxx:ee,maxy:Se,t:w.dem.tree.raycastRoot(W,le,ee,Se,l,f,g),tile:w}});b.sort((w,M)=>(w.t!==null?w.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const w of b){if(w.t==null)return null;const M=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,f,g);if(M!=null)return M}return null}_createFBO(){const l=this.painter.context,f=l.gl,g=this.drapeBufferSize;l.activeTexture.set(f.TEXTURE0);const b=new o.Texture(l,{width:g[0],height:g[1],data:null},f.RGBA);b.bind(f.LINEAR,f.CLAMP_TO_EDGE);const w=l.createFramebuffer(g[0],g[1],!1);return w.colorAttachment.set(b.texture),w.depthAttachment=new Y(l,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const f=this._style._layers[l],g=f.isHidden(this.painter.transform.zoom),b=f.getCrossfadeParameters(),w=!!b&&b.t!==1,M=f.hasTransition();return f.type!=="custom"&&!g&&(w||M)})}_clearRasterFadeFromRenderCache(){let l=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof Oe){l=!0;break}if(l)for(let f=0;f<this._style.order.length;++f){const g=this._style._layers[this._style.order[f]],b=g.isHidden(this.painter.transform.zoom),w=this._style._getLayerSourceCache(g);if(g.type!=="raster"||b||!w)continue;const M=g.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const L=this.proxyToSource[k.key][w.id];if(L)for(const K of L){const W=wc(w.getTile(K),w.findLoadedParent(K,0),w,this.painter.transform,M);(W.opacity!==1||W.mix!==0)&&this._clearRenderCacheForTile(w.id,K)}}}}_setupDrapedRenderBatches(){const l=this._style.order,f=l.length;if(f===0)return;const g=[];let b,w=0,M=this._style._layers[l[w]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++w<f;)M=this._style._layers[l[w]];for(;w<f;++w){const k=this._style._layers[l[w]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?b===void 0&&(b=w):b!==void 0&&(g.push({start:b,end:w-1}),b=void 0))}b!==void 0&&g.push({start:b,end:w-1}),this._drapedRenderBatches=g}_setupRenderCache(l){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const M=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let k=0;k<M.length;++k){const L=Object.values(M[k]);f.renderCachePool.push(...L)}}return}this._clearRasterFadeFromRenderCache();const g=this.proxyCoords,b=this._tilesDirty;for(let M=g.length-1;M>=0;M--){const k=g[M];if(f.getTileByID(k.key),f.proxyCachedFBO[k.key]!==void 0){const L=l[k.key],K=this.proxyToSource[k.key];let W=0;for(const ee in K){const le=K[ee],Se=L[ee];if(!Se||Se.length!==le.length||le.some((ye,_e)=>ye!==Se[_e]||b[ee]&&b[ee].hasOwnProperty(ye.key))){W=-1;break}++W}for(const ee in f.proxyCachedFBO[k.key])f.renderCache[f.proxyCachedFBO[k.key][ee]].dirty=W<0||W!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((M,k)=>k.end-k.start-(M.end-M.start));for(const M of w)for(const k of g){if(f.proxyCachedFBO[k.key])continue;let L=f.renderCachePool.pop();L===void 0&&f.renderCache.length<50&&(L=f.renderCache.length,f.renderCache.push(this._createFBO())),L!==void 0&&(f.proxyCachedFBO[k.key]={},f.proxyCachedFBO[k.key][M.start]=L,f.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(l,f,g,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,M=w.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let k;if(g.isTileClipped())k=f.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(l,f){const g=this.painter,b=this.painter.context,w=b.gl;g._tileClippingMaskIDs={},b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const M=g.useProgram("clippingMask");for(const k of l){const L=g._tileClippingMaskIDs[k.key]=--f;M.draw(b,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,_f(k.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(l){const f=this.painter.transform;if(l.x<0||l.x>f.width||l.y<0||l.y>f.height)return null;const g=[l.x,l.y,1,1];o.transformMat4$1(g,g,f.pixelMatrixInverse),o.scale$1(g,g,1/g[3]),g[0]/=f.worldSize,g[1]/=f.worldSize;const b=f._camera.position,w=o.mercatorZfromAltitude(1,f.center.lat),M=[b[0],b[1],b[2]/w,0],k=o.subtract([],g.slice(0,3),M);o.normalize(k,k);const L=this.raycast(M,k,this._exaggeration);return L!==null&&L?(o.scaleAndAdd(M,M,k,L),M[3]=M[2],M[2]*=w,M):null}drawDepth(){const l=this.painter,f=l.context,g=this.proxySourceCache,b=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===b&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const M=f.gl,k=f.createFramebuffer(b,w,!0);f.activeTexture.set(M.TEXTURE0);const L=new o.Texture(f,{width:b,height:w,data:null},M.RGBA);L.bind(M.NEAREST,M.CLAMP_TO_EDGE),k.colorAttachment.set(L.texture);const K=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,b,w);k.depthAttachment.set(K),this._depthFBO=k,this._depthTexture=L}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,b,w]),function(M,k,L,K){if(M.transform.projection.name==="globe")return;const W=M.context,ee=W.gl;W.clear({depth:1});const le=M.useProgram("terrainDepth"),Se=new o.DepthMode(ee.LESS,o.DepthMode.ReadWrite,M.depthRangeFor3D);for(const ye of K){const _e=L.getTile(ye),we=vf(ye.projMatrix,0);k.setupElevationDraw(_e,le),le.draw(W,ee.TRIANGLES,Se,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,we,"terrain_depth",k.gridBuffer,k.gridIndexBuffer,k.gridNoSkirtSegments)}}(l,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,f,g){if(l.getSource()instanceof rt)return this._setupProxiedCoordsForImageSource(l,f,g);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const b=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let k=0;k<w.length;k++){const L=w[k],K=this._findTileCoveringTileID(L,l);if(K){const W=this._createProxiedId(L,K,g[L.key]&&g[L.key][l.id]);b.push(W),this.proxyToSource[L.key][l.id]=[W]}}let M=!1;for(let k=0;k<f.length;k++){const L=l.getTile(f[k]);if(!L||!L.hasData())continue;const K=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(K&&K.tileID.canonical.z!==L.tileID.canonical.z){const W=this.proxyToSource[K.tileID.key][l.id],ee=this._createProxiedId(K.tileID,L,g[K.tileID.key]&&g[K.tileID.key][l.id]);W?W.splice(W.length-1,0,ee):this.proxyToSource[K.tileID.key][l.id]=[ee],b.push(ee),M=!0}}this._sourceTilesOverlap[l.id]=M}_setupProxiedCoordsForImageSource(l,f,g){if(!l.getSource().loaded())return;const b=this.proxiedCoords[l.id]=[],w=this.proxyCoords,M=l.getSource(),k=new o.pointGeometry(M.tileID.x,M.tileID.y)._div(1<<M.tileID.z),L=M.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((W,ee)=>(W.min.x=Math.min(W.min.x,ee.x-k.x),W.min.y=Math.min(W.min.y,ee.y-k.y),W.max.x=Math.max(W.max.x,ee.x-k.x),W.max.y=Math.max(W.max.y,ee.y-k.y),W),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),K=(W,ee)=>{const le=W.wrap+W.canonical.x/(1<<W.canonical.z),Se=W.canonical.y/(1<<W.canonical.z),ye=o.EXTENT/(1<<W.canonical.z),_e=ee.wrap+ee.canonical.x/(1<<ee.canonical.z),we=ee.canonical.y/(1<<ee.canonical.z);return le+ye<_e+L.min.x||le>_e+L.max.x||Se+ye<we+L.min.y||Se>we+L.max.y};for(let W=0;W<w.length;W++){const ee=w[W];for(let le=0;le<f.length;le++){const Se=l.getTile(f[le]);if(!Se||!Se.hasData()||K(ee,Se.tileID))continue;const ye=this._createProxiedId(ee,Se,g[ee.key]&&g[ee.key][l.id]),_e=this.proxyToSource[ee.key][l.id];_e?_e.push(ye):this.proxyToSource[ee.key][l.id]=[ye],b.push(ye)}}}_createProxiedId(l,f,g){let b=this.orthoMatrix;if(g){const w=g.find(M=>M.key===f.tileID.key);if(w)return w}if(f.tileID.key!==l.key){const w=l.canonical.z-f.tileID.canonical.z;let M,k,L;b=o.create();const K=f.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(M=o.EXTENT>>w,k=M*((f.tileID.canonical.x<<w)-l.canonical.x+K),L=M*((f.tileID.canonical.y<<w)-l.canonical.y)):(M=o.EXTENT<<-w,k=o.EXTENT*(f.tileID.canonical.x-(l.canonical.x+K<<-w)),L=o.EXTENT*(f.tileID.canonical.y-(l.canonical.y<<-w))),o.ortho(b,0,M,0,M,0,1),o.translate(b,b,[k,L,0])}return new Cc(f.tileID,l.key,b)}_findTileCoveringTileID(l,f){let g=f.getTile(l);if(g&&g.hasData())return g;const b=this._findCoveringTileCache[f.id],w=b[l.key];if(g=w?f.getTileByID(w):null,g&&g.hasData()||w===null)return g;let M=g?g.tileID:l,k=M.overscaledZ;const L=f.getSource().minzoom,K=[];if(!w){const ee=f.getSource().maxzoom;if(l.canonical.z>=ee){const le=l.canonical.z-ee;f.getSource().reparseOverscaled?(k=Math.max(l.canonical.z+2,f.transform.tileZoom),M=new o.OverscaledTileID(k,l.wrap,ee,l.canonical.x>>le,l.canonical.y>>le)):le!==0&&(k=ee,M=new o.OverscaledTileID(k,l.wrap,ee,l.canonical.x>>le,l.canonical.y>>le))}M.key!==l.key&&(K.push(M.key),g=f.getTile(M))}const W=ee=>{K.forEach(le=>{b[le]=ee}),K.length=0};for(k-=1;k>=L&&(!g||!g.hasData());k--){g&&W(g.tileID.key);const ee=M.calculateScaledKey(k);if(g=f.getTileByID(ee),g&&g.hasData())break;const le=b[ee];if(le===null)break;le===void 0?K.push(ee):g=f.getTileByID(le)}return W(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,f){let g=this._tilesDirty[l];g||(g=this._tilesDirty[l]={}),g[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(f){let g=0;const b=new o.StructArrayLayout2ui4,w=131;for(let M=1;M<129;M++){for(let k=1;k<129;k++)g=M*w+k,b.emplaceBack(g,g+1),b.emplaceBack(g,g+w),b.emplaceBack(g+1,g+w),M===128&&b.emplaceBack(g+w,g+w+1);b.emplaceBack(g+1,g+1+w)}return b}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class wf{static cacheKey(l,f,g,b){let w=`${f}${b?b.cacheKey:""}`;for(const M of g)l.usedDefines.includes(M)&&(w+=`/${M}`);return w}constructor(l,f,g,b,w,M){const k=l.gl;this.program=k.createProgram();const L=function(we){const pe=[];for(let Me=0;Me<we.length;Me++){if(we[Me]===null)continue;const Ee=we[Me].split(" ");pe.push(Ee.pop())}return pe}(g.staticAttributes),K=b?b.getBinderAttributes():[],W=L.concat(K);let ee=b?b.defines():[];ee=ee.concat(M.map(we=>`#define ${we}`));const le=ee.concat(l.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(_c):_c,_c,yc,Zl.fragmentSource,ls.fragmentSource,g.fragmentSource).join(`
`),Se=ee.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,yc,Zl.vertexSource,ls.vertexSource,gc.vertexSource,g.vertexSource).join(`
`),ye=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ye,le),k.compileShader(ye),k.attachShader(this.program,ye);const _e=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(_e,Se),k.compileShader(_e),k.attachShader(this.program,_e),this.attributes={},this.numAttributes=W.length;for(let we=0;we<this.numAttributes;we++)W[we]&&(k.bindAttribLocation(this.program,we,W[we]),this.attributes[W[we]]=we);k.linkProgram(this.program),k.deleteShader(_e),k.deleteShader(ye),this.fixedUniforms=w(l),this.binderUniforms=b?b.getUniforms(l):[],M.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=(we=>({u_dem:new o.Uniform1i(we),u_dem_prev:new o.Uniform1i(we),u_dem_unpack:new o.Uniform4f(we),u_dem_tl:new o.Uniform2f(we),u_dem_scale:new o.Uniform1f(we),u_dem_tl_prev:new o.Uniform2f(we),u_dem_scale_prev:new o.Uniform1f(we),u_dem_size:new o.Uniform1f(we),u_dem_lerp:new o.Uniform1f(we),u_exaggeration:new o.Uniform1f(we),u_depth:new o.Uniform1i(we),u_depth_size_inv:new o.Uniform2f(we),u_meter_to_dem:new o.Uniform1f(we),u_label_plane_matrix_inv:new o.UniformMatrix4f(we),u_tile_tl_up:new o.Uniform3f(we),u_tile_tr_up:new o.Uniform3f(we),u_tile_br_up:new o.Uniform3f(we),u_tile_bl_up:new o.Uniform3f(we),u_tile_up_scale:new o.Uniform1f(we)}))(l)),M.indexOf("FOG")!==-1&&(this.fogUniforms=(we=>({u_fog_matrix:new o.UniformMatrix4f(we),u_fog_range:new o.Uniform2f(we),u_fog_color:new o.Uniform4f(we),u_fog_horizon_blend:new o.Uniform1f(we),u_fog_temporal_offset:new o.Uniform1f(we),u_frustum_tl:new o.Uniform3f(we),u_frustum_tr:new o.Uniform3f(we),u_frustum_br:new o.Uniform3f(we),u_frustum_bl:new o.Uniform3f(we),u_globe_pos:new o.Uniform3f(we),u_globe_radius:new o.Uniform1f(we),u_globe_transition:new o.Uniform1f(we),u_is_globe:new o.Uniform1i(we),u_viewport:new o.Uniform2f(we)}))(l))}}setTerrainUniformValues(l,f){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const b in f)g[b].set(this.program,b,f[b])}}setFogUniformValues(l,f){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const b in f)g[b].set(this.program,b,f[b])}}draw(l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e){const we=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(g),l.setStencilMode(b),l.setColorMode(w),l.setCullFace(M);for(const Me of Object.keys(this.fixedUniforms))this.fixedUniforms[Me].set(this.program,Me,k[Me]);ye&&ye.setUniforms(this.program,l,this.binderUniforms,le,{zoom:Se});const pe={[we.LINES]:2,[we.TRIANGLES]:3,[we.LINE_STRIP]:1}[f];for(const Me of ee.get()){const Ee=Me.vaos||(Me.vaos={});(Ee[L]||(Ee[L]=new bc)).bind(l,this,K,ye?ye.getPaintVertexBuffers():[],W,Me.vertexOffset,_e||[]),we.drawElements(f,Me.primitiveLength*pe,we.UNSIGNED_SHORT,Me.primitiveOffset*pe*2)}}}function Qp(p,l,f){const g=1/Te(f,1,l.transform.tileZoom),b=Math.pow(2,f.tileID.overscaledZ),w=f.tileSize*Math.pow(2,l.transform.tileZoom)/b,M=w*(f.tileID.canonical.x+f.tileID.wrap*b),k=w*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[g,p.fromScale,p.toScale],u_fade:p.t,u_pixel_coord_upper:[M>>16,k>>16],u_pixel_coord_lower:[65535&M,65535&k]}}const Jl=o.create(),Ys=(p,l,f,g,b,w,M,k,L,K,W)=>{const ee=l.style.light,le=ee.properties.get("position"),Se=[le.x,le.y,le.z],ye=o.create$1();ee.properties.get("anchor")==="viewport"&&(o.fromRotation(ye,-l.transform.angle),o.transformMat3(Se,Se,ye));const _e=ee.properties.get("color"),we=l.transform,pe={u_matrix:p,u_lightpos:Se,u_lightintensity:ee.properties.get("intensity"),u_lightcolor:[_e.r,_e.g,_e.b],u_vertical_gradient:+f,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Jl,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:b,u_edge_radius:w};return we.projection.name==="globe"&&(pe.u_tile_id=[M.canonical.x,M.canonical.y,1<<M.canonical.z],pe.u_zoom_transition=L,pe.u_inv_rot_matrix=W,pe.u_merc_center=K,pe.u_up_dir=we.projection.upVector(new o.CanonicalTileID(0,0,0),K[0]*o.EXTENT,K[1]*o.EXTENT),pe.u_height_lift=k),pe},em=(p,l,f,g,b,w,M,k,L,K,W,ee,le)=>{const Se=Ys(p,l,f,g,b,w,M,K,W,ee,le),ye={u_height_factor:-Math.pow(2,M.overscaledZ)/L.tileSize/8};return o.extend(Se,Qp(k,l,L),ye)},Ql=p=>({u_matrix:p}),Sc=(p,l,f,g)=>o.extend(Ql(p),Qp(f,l,g)),Ho=(p,l)=>({u_matrix:p,u_world:l}),Cf=(p,l,f,g,b)=>o.extend(Sc(p,l,f,g),{u_world:b}),tm=o.create(),Sf=(p,l,f,g,b,w)=>{const M=p.transform,k=M.projection.name==="globe";let L;if(w.paint.get("circle-pitch-alignment")==="map")if(k){const W=o.globePixelsToTileUnits(M.zoom,l.canonical)*M._pixelsPerMercatorPixel;L=Float32Array.from([W,0,0,W])}else L=M.calculatePixelsToTileUnitsMatrix(f);else L=new Float32Array([M.pixelsToGLUnits[0],0,0,M.pixelsToGLUnits[1]]);const K={u_camera_to_center_distance:M.cameraToCenterDistance,u_matrix:p.translatePosMatrix(l.projMatrix,f,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:tm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){K.u_inv_rot_matrix=g,K.u_merc_center=b,K.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],K.u_zoom_transition=o.globeToMercatorTransition(M.zoom);const W=b[0]*o.EXTENT,ee=b[1]*o.EXTENT;K.u_up_dir=M.projection.upVector(new o.CanonicalTileID(0,0,0),W,ee)}return K},nm=p=>{const l=[];return p.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),p.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},Tf=(p,l,f,g)=>{const b=o.EXTENT/f.tileSize;return{u_matrix:p,u_camera_to_center_distance:l.getCameraToCenterDistance(g),u_extrude_scale:[l.pixelsToGLUnits[0]/b,l.pixelsToGLUnits[1]/b]}},rm=(p,l,f=1)=>({u_matrix:p,u_color:l,u_overlay:0,u_overlay_scale:f}),Ef=o.create(),Wy=(p,l,f,g,b,w,M)=>{const k=p.transform,L=k.projection.name==="globe",K=L?o.globePixelsToTileUnits(k.zoom,l.canonical)*k._pixelsPerMercatorPixel:Te(f,1,w),W={u_matrix:l.projMatrix,u_extrude_scale:K,u_intensity:M,u_inv_rot_matrix:Ef,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){W.u_inv_rot_matrix=g,W.u_merc_center=b,W.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],W.u_zoom_transition=o.globeToMercatorTransition(k.zoom);const ee=b[0]*o.EXTENT,le=b[1]*o.EXTENT;W.u_up_dir=k.projection.upVector(new o.CanonicalTileID(0,0,0),ee,le)}return W},Tc=(p,l,f,g,b,w,M,k)=>{const L=p.transform,K=L.calculatePixelsToTileUnitsMatrix(l),W={u_matrix:im(p,l,f,b),u_pixels_to_tile_units:K,u_device_pixel_ratio:M,u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:w,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:k};if(Ic(f)){const ee=Ec(l,p.transform);W.u_texsize=l.lineAtlasTexture.size,W.u_scale=[ee,g.fromScale,g.toScale],W.u_mix=g.t}return W},Zy=(p,l,f,g,b,w)=>{const M=p.transform,k=Ec(l,M);return{u_matrix:im(p,l,f,b),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:M.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:w,u_image:0,u_scale:[k,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/M.pixelsToGLUnits[0],1/M.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ec(p,l){return 1/Te(p,1,l.tileZoom)}function im(p,l,f,g){return p.translatePosMatrix(g||l.tileID.projMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function Ic(p){const l=p.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const Xy=(p,l,f,g,b,w)=>{return{u_matrix:p,u_tl_parent:l,u_scale_parent:f,u_fade_t:g.mix,u_opacity:g.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(k=b.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(M=b.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:Pc(b.paint.get("raster-hue-rotate")),u_perspective_transform:w};var M,k};function Pc(p){p*=Math.PI/180;const l=Math.sin(p),f=Math.cos(p);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const om=o.create(),If=(p,l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e)=>{const we=b.transform,pe={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:we.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:we.width/we.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:M,u_coord_matrix:k,u_is_text:+L,u_pitch_with_map:+g,u_texsize:K,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:om,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:om,u_up_vector:[0,-1,0]};return _e.name==="globe"&&(pe.u_tile_id=[W.canonical.x,W.canonical.y,1<<W.canonical.z],pe.u_zoom_transition=ee,pe.u_inv_rot_matrix=Se,pe.u_merc_center=le,pe.u_camera_forward=we._camera.forward(),pe.u_ecef_origin=o.globeECEFOrigin(we.globeMatrix,W.toUnwrapped()),pe.u_tile_matrix=Float32Array.from(we.globeMatrix),pe.u_up_vector=ye),pe},Pf=(p,l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e,we)=>o.extend(If(p,l,f,g,b,w,M,k,L,K,ee,le,Se,ye,_e,we),{u_gamma_scale:g?b.transform.cameraToCenterDistance*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+W}),Js=(p,l,f,g,b,w,M,k,L,K,W,ee,le,Se,ye,_e)=>o.extend(Pf(p,l,f,g,b,w,M,k,!0,L,!0,W,ee,le,Se,ye,_e),{u_texsize_icon:K,u_texture_icon:1}),Yy=(p,l,f)=>({u_matrix:p,u_opacity:l,u_color:f}),Jy=(p,l,f,g,b,w)=>o.extend(function(M,k,L,K){const W=L.imageManager.getPattern(M.from.toString()),ee=L.imageManager.getPattern(M.to.toString()),{width:le,height:Se}=L.imageManager.getPixelSize(),ye=Math.pow(2,K.tileID.overscaledZ),_e=K.tileSize*Math.pow(2,L.transform.tileZoom)/ye,we=_e*(K.tileID.canonical.x+K.tileID.wrap*ye),pe=_e*K.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[le,Se],u_mix:k.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/Te(K,1,L.transform.tileZoom),u_pixel_coord_upper:[we>>16,pe>>16],u_pixel_coord_lower:[65535&we,65535&pe]}}(g,w,f,b),{u_matrix:p,u_opacity:l}),Qy={fillExtrusion:p=>({u_matrix:new o.UniformMatrix4f(p),u_lightpos:new o.Uniform3f(p),u_lightintensity:new o.Uniform1f(p),u_lightcolor:new o.Uniform3f(p),u_vertical_gradient:new o.Uniform1f(p),u_opacity:new o.Uniform1f(p),u_edge_radius:new o.Uniform1f(p),u_ao:new o.Uniform2f(p),u_tile_id:new o.Uniform3f(p),u_zoom_transition:new o.Uniform1f(p),u_inv_rot_matrix:new o.UniformMatrix4f(p),u_merc_center:new o.Uniform2f(p),u_up_dir:new o.Uniform3f(p),u_height_lift:new o.Uniform1f(p)}),fillExtrusionPattern:p=>({u_matrix:new o.UniformMatrix4f(p),u_lightpos:new o.Uniform3f(p),u_lightintensity:new o.Uniform1f(p),u_lightcolor:new o.Uniform3f(p),u_vertical_gradient:new o.Uniform1f(p),u_height_factor:new o.Uniform1f(p),u_edge_radius:new o.Uniform1f(p),u_ao:new o.Uniform2f(p),u_tile_id:new o.Uniform3f(p),u_zoom_transition:new o.Uniform1f(p),u_inv_rot_matrix:new o.UniformMatrix4f(p),u_merc_center:new o.Uniform2f(p),u_up_dir:new o.Uniform3f(p),u_height_lift:new o.Uniform1f(p),u_image:new o.Uniform1i(p),u_texsize:new o.Uniform2f(p),u_pixel_coord_upper:new o.Uniform2f(p),u_pixel_coord_lower:new o.Uniform2f(p),u_scale:new o.Uniform3f(p),u_fade:new o.Uniform1f(p),u_opacity:new o.Uniform1f(p)}),fill:p=>({u_matrix:new o.UniformMatrix4f(p)}),fillPattern:p=>({u_matrix:new o.UniformMatrix4f(p),u_image:new o.Uniform1i(p),u_texsize:new o.Uniform2f(p),u_pixel_coord_upper:new o.Uniform2f(p),u_pixel_coord_lower:new o.Uniform2f(p),u_scale:new o.Uniform3f(p),u_fade:new o.Uniform1f(p)}),fillOutline:p=>({u_matrix:new o.UniformMatrix4f(p),u_world:new o.Uniform2f(p)}),fillOutlinePattern:p=>({u_matrix:new o.UniformMatrix4f(p),u_world:new o.Uniform2f(p),u_image:new o.Uniform1i(p),u_texsize:new o.Uniform2f(p),u_pixel_coord_upper:new o.Uniform2f(p),u_pixel_coord_lower:new o.Uniform2f(p),u_scale:new o.Uniform3f(p),u_fade:new o.Uniform1f(p)}),circle:p=>({u_camera_to_center_distance:new o.Uniform1f(p),u_extrude_scale:new o.UniformMatrix2f(p),u_device_pixel_ratio:new o.Uniform1f(p),u_matrix:new o.UniformMatrix4f(p),u_inv_rot_matrix:new o.UniformMatrix4f(p),u_merc_center:new o.Uniform2f(p),u_tile_id:new o.Uniform3f(p),u_zoom_transition:new o.Uniform1f(p),u_up_dir:new o.Uniform3f(p)}),collisionBox:p=>({u_matrix:new o.UniformMatrix4f(p),u_camera_to_center_distance:new o.Uniform1f(p),u_extrude_scale:new o.Uniform2f(p)}),collisionCircle:p=>({u_matrix:new o.UniformMatrix4f(p),u_inv_matrix:new o.UniformMatrix4f(p),u_camera_to_center_distance:new o.Uniform1f(p),u_viewport_size:new o.Uniform2f(p)}),debug:p=>({u_color:new o.UniformColor(p),u_matrix:new o.UniformMatrix4f(p),u_overlay:new o.Uniform1i(p),u_overlay_scale:new o.Uniform1f(p)}),clippingMask:p=>({u_matrix:new o.UniformMatrix4f(p)}),heatmap:p=>({u_extrude_scale:new o.Uniform1f(p),u_intensity:new o.Uniform1f(p),u_matrix:new o.UniformMatrix4f(p),u_inv_rot_matrix:new o.UniformMatrix4f(p),u_merc_center:new o.Uniform2f(p),u_tile_id:new o.Uniform3f(p),u_zoom_transition:new o.Uniform1f(p),u_up_dir:new o.Uniform3f(p)}),heatmapTexture:p=>({u_image:new o.Uniform1i(p),u_color_ramp:new o.Uniform1i(p),u_opacity:new o.Uniform1f(p)}),hillshade:p=>({u_matrix:new o.UniformMatrix4f(p),u_image:new o.Uniform1i(p),u_latrange:new o.Uniform2f(p),u_light:new o.Uniform2f(p),u_shadow:new o.UniformColor(p),u_highlight:new o.UniformColor(p),u_accent:new o.UniformColor(p)}),hillshadePrepare:p=>({u_matrix:new o.UniformMatrix4f(p),u_image:new o.Uniform1i(p),u_dimension:new o.Uniform2f(p),u_zoom:new o.Uniform1f(p),u_unpack:new o.Uniform4f(p)}),line:p=>({u_matrix:new o.UniformMatrix4f(p),u_pixels_to_tile_units:new o.UniformMatrix2f(p),u_device_pixel_ratio:new o.Uniform1f(p),u_units_to_pixels:new o.Uniform2f(p),u_dash_image:new o.Uniform1i(p),u_gradient_image:new o.Uniform1i(p),u_image_height:new o.Uniform1f(p),u_texsize:new o.Uniform2f(p),u_scale:new o.Uniform3f(p),u_mix:new o.Uniform1f(p),u_alpha_discard_threshold:new o.Uniform1f(p),u_trim_offset:new o.Uniform2f(p)}),linePattern:p=>({u_matrix:new o.UniformMatrix4f(p),u_texsize:new o.Uniform2f(p),u_pixels_to_tile_units:new o.UniformMatrix2f(p),u_device_pixel_ratio:new o.Uniform1f(p),u_image:new o.Uniform1i(p),u_units_to_pixels:new o.Uniform2f(p),u_scale:new o.Uniform3f(p),u_fade:new o.Uniform1f(p),u_alpha_discard_threshold:new o.Uniform1f(p)}),raster:p=>({u_matrix:new o.UniformMatrix4f(p),u_tl_parent:new o.Uniform2f(p),u_scale_parent:new o.Uniform1f(p),u_fade_t:new o.Uniform1f(p),u_opacity:new o.Uniform1f(p),u_image0:new o.Uniform1i(p),u_image1:new o.Uniform1i(p),u_brightness_low:new o.Uniform1f(p),u_brightness_high:new o.Uniform1f(p),u_saturation_factor:new o.Uniform1f(p),u_contrast_factor:new o.Uniform1f(p),u_spin_weights:new o.Uniform3f(p),u_perspective_transform:new o.Uniform2f(p)}),symbolIcon:p=>({u_is_size_zoom_constant:new o.Uniform1i(p),u_is_size_feature_constant:new o.Uniform1i(p),u_size_t:new o.Uniform1f(p),u_size:new o.Uniform1f(p),u_camera_to_center_distance:new o.Uniform1f(p),u_rotate_symbol:new o.Uniform1i(p),u_aspect_ratio:new o.Uniform1f(p),u_fade_change:new o.Uniform1f(p),u_matrix:new o.UniformMatrix4f(p),u_label_plane_matrix:new o.UniformMatrix4f(p),u_coord_matrix:new o.UniformMatrix4f(p),u_is_text:new o.Uniform1i(p),u_pitch_with_map:new o.Uniform1i(p),u_texsize:new o.Uniform2f(p),u_tile_id:new o.Uniform3f(p),u_zoom_transition:new o.Uniform1f(p),u_inv_rot_matrix:new o.UniformMatrix4f(p),u_merc_center:new o.Uniform2f(p),u_camera_forward:new o.Uniform3f(p),u_tile_matrix:new o.UniformMatrix4f(p),u_up_vector:new o.Uniform3f(p),u_ecef_origin:new o.Uniform3f(p),u_texture:new o.Uniform1i(p)}),symbolSDF:p=>({u_is_size_zoom_constant:new o.Uniform1i(p),u_is_size_feature_constant:new o.Uniform1i(p),u_size_t:new o.Uniform1f(p),u_size:new o.Uniform1f(p),u_camera_to_center_distance:new o.Uniform1f(p),u_rotate_symbol:new o.Uniform1i(p),u_aspect_ratio:new o.Uniform1f(p),u_fade_change:new o.Uniform1f(p),u_matrix:new o.UniformMatrix4f(p),u_label_plane_matrix:new o.UniformMatrix4f(p),u_coord_matrix:new o.UniformMatrix4f(p),u_is_text:new o.Uniform1i(p),u_pitch_with_map:new o.Uniform1i(p),u_texsize:new o.Uniform2f(p),u_texture:new o.Uniform1i(p),u_gamma_scale:new o.Uniform1f(p),u_device_pixel_ratio:new o.Uniform1f(p),u_tile_id:new o.Uniform3f(p),u_zoom_transition:new o.Uniform1f(p),u_inv_rot_matrix:new o.UniformMatrix4f(p),u_merc_center:new o.Uniform2f(p),u_camera_forward:new o.Uniform3f(p),u_tile_matrix:new o.UniformMatrix4f(p),u_up_vector:new o.Uniform3f(p),u_ecef_origin:new o.Uniform3f(p),u_is_halo:new o.Uniform1i(p)}),symbolTextAndIcon:p=>({u_is_size_zoom_constant:new o.Uniform1i(p),u_is_size_feature_constant:new o.Uniform1i(p),u_size_t:new o.Uniform1f(p),u_size:new o.Uniform1f(p),u_camera_to_center_distance:new o.Uniform1f(p),u_rotate_symbol:new o.Uniform1i(p),u_aspect_ratio:new o.Uniform1f(p),u_fade_change:new o.Uniform1f(p),u_matrix:new o.UniformMatrix4f(p),u_label_plane_matrix:new o.UniformMatrix4f(p),u_coord_matrix:new o.UniformMatrix4f(p),u_is_text:new o.Uniform1i(p),u_pitch_with_map:new o.Uniform1i(p),u_texsize:new o.Uniform2f(p),u_texsize_icon:new o.Uniform2f(p),u_texture:new o.Uniform1i(p),u_texture_icon:new o.Uniform1i(p),u_gamma_scale:new o.Uniform1f(p),u_device_pixel_ratio:new o.Uniform1f(p),u_is_halo:new o.Uniform1i(p)}),background:p=>({u_matrix:new o.UniformMatrix4f(p),u_opacity:new o.Uniform1f(p),u_color:new o.UniformColor(p)}),backgroundPattern:p=>({u_matrix:new o.UniformMatrix4f(p),u_opacity:new o.Uniform1f(p),u_image:new o.Uniform1i(p),u_pattern_tl_a:new o.Uniform2f(p),u_pattern_br_a:new o.Uniform2f(p),u_pattern_tl_b:new o.Uniform2f(p),u_pattern_br_b:new o.Uniform2f(p),u_texsize:new o.Uniform2f(p),u_mix:new o.Uniform1f(p),u_pattern_size_a:new o.Uniform2f(p),u_pattern_size_b:new o.Uniform2f(p),u_scale_a:new o.Uniform1f(p),u_scale_b:new o.Uniform1f(p),u_pixel_coord_upper:new o.Uniform2f(p),u_pixel_coord_lower:new o.Uniform2f(p),u_tile_units_to_pixels:new o.Uniform1f(p)}),terrainRaster:Xl,terrainDepth:Xl,skybox:p=>({u_matrix:new o.UniformMatrix4f(p),u_sun_direction:new o.Uniform3f(p),u_cubemap:new o.Uniform1i(p),u_opacity:new o.Uniform1f(p),u_temporal_offset:new o.Uniform1f(p)}),skyboxGradient:p=>({u_matrix:new o.UniformMatrix4f(p),u_color_ramp:new o.Uniform1i(p),u_center_direction:new o.Uniform3f(p),u_radius:new o.Uniform1f(p),u_opacity:new o.Uniform1f(p),u_temporal_offset:new o.Uniform1f(p)}),skyboxCapture:p=>({u_matrix_3f:new o.UniformMatrix3f(p),u_sun_direction:new o.Uniform3f(p),u_sun_intensity:new o.Uniform1f(p),u_color_tint_r:new o.Uniform4f(p),u_color_tint_m:new o.Uniform4f(p),u_luminance:new o.Uniform1f(p)}),globeRaster:p=>({u_proj_matrix:new o.UniformMatrix4f(p),u_globe_matrix:new o.UniformMatrix4f(p),u_normalize_matrix:new o.UniformMatrix4f(p),u_merc_matrix:new o.UniformMatrix4f(p),u_zoom_transition:new o.Uniform1f(p),u_merc_center:new o.Uniform2f(p),u_image0:new o.Uniform1i(p),u_grid_matrix:new o.UniformMatrix3f(p),u_frustum_tl:new o.Uniform3f(p),u_frustum_tr:new o.Uniform3f(p),u_frustum_br:new o.Uniform3f(p),u_frustum_bl:new o.Uniform3f(p),u_globe_pos:new o.Uniform3f(p),u_globe_radius:new o.Uniform1f(p),u_viewport:new o.Uniform2f(p)}),globeAtmosphere:p=>({u_frustum_tl:new o.Uniform3f(p),u_frustum_tr:new o.Uniform3f(p),u_frustum_br:new o.Uniform3f(p),u_frustum_bl:new o.Uniform3f(p),u_horizon:new o.Uniform1f(p),u_transition:new o.Uniform1f(p),u_fadeout_range:new o.Uniform1f(p),u_color:new o.Uniform4f(p),u_high_color:new o.Uniform4f(p),u_space_color:new o.Uniform4f(p),u_star_intensity:new o.Uniform1f(p),u_star_density:new o.Uniform1f(p),u_star_size:new o.Uniform1f(p),u_temporal_offset:new o.Uniform1f(p),u_horizon_angle:new o.Uniform1f(p),u_rotation_matrix:new o.UniformMatrix4f(p)})};let Ac;function am(p,l,f,g,b,w,M){const k=p.context,L=k.gl,K=p.transform,W=p.useProgram("collisionBox"),ee=[];let le=0,Se=0;for(let Ye=0;Ye<g.length;Ye++){const We=g[Ye],$e=l.getTile(We),Ze=$e.getBucket(f);if(!Ze)continue;const Ge=ji(We,Ze,K);let Qe=Ge;b[0]===0&&b[1]===0||(Qe=p.translatePosMatrix(Ge,$e,b,w));const ct=M?Ze.textCollisionBox:Ze.iconCollisionBox,Zt=Ze.collisionCircleArray;if(Zt.length>0){const at=o.create(),Dt=Qe;o.mul(at,Ze.placementInvProjMatrix,K.glCoordMatrix),o.mul(at,at,Ze.placementViewportMatrix),ee.push({circleArray:Zt,circleOffset:Se,transform:Dt,invTransform:at,projection:Ze.getProjection()}),le+=Zt.length/4,Se=le}ct&&(p.terrain&&p.terrain.setupElevationDraw($e,W),W.draw(k,L.LINES,o.DepthMode.disabled,o.StencilMode.disabled,p.colorModeForRenderPass(),o.CullFaceMode.disabled,Tf(Qe,K,$e,Ze.getProjection()),f.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,null,K.zoom,null,[ct.collisionVertexBuffer,ct.collisionVertexBufferExt]))}if(!M||!ee.length)return;const ye=p.useProgram("collisionCircle"),_e=new o.StructArrayLayout2f1f2i16;_e.resize(4*le),_e._trim();let we=0;for(const Ye of ee)for(let We=0;We<Ye.circleArray.length/4;We++){const $e=4*We,Ze=Ye.circleArray[$e+0],Ge=Ye.circleArray[$e+1],Qe=Ye.circleArray[$e+2],ct=Ye.circleArray[$e+3];_e.emplace(we++,Ze,Ge,Qe,ct,0),_e.emplace(we++,Ze,Ge,Qe,ct,1),_e.emplace(we++,Ze,Ge,Qe,ct,2),_e.emplace(we++,Ze,Ge,Qe,ct,3)}(!Ac||Ac.length<2*le)&&(Ac=function(Ye){const We=2*Ye,$e=new o.StructArrayLayout3ui6;$e.resize(We),$e._trim();for(let Ze=0;Ze<We;Ze++){const Ge=6*Ze;$e.uint16[Ge+0]=4*Ze+0,$e.uint16[Ge+1]=4*Ze+1,$e.uint16[Ge+2]=4*Ze+2,$e.uint16[Ge+3]=4*Ze+2,$e.uint16[Ge+4]=4*Ze+3,$e.uint16[Ge+5]=4*Ze+0}return $e}(le));const pe=k.createIndexBuffer(Ac,!0),Me=k.createVertexBuffer(_e,o.collisionCircleLayout.members,!0);for(const Ye of ee){const We={u_matrix:Ye.transform,u_inv_matrix:Ye.invTransform,u_camera_to_center_distance:(Ee=K).getCameraToCenterDistance(Ye.projection),u_viewport_size:[Ee.width,Ee.height]};ye.draw(k,L.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,p.colorModeForRenderPass(),o.CullFaceMode.disabled,We,f.id,Me,pe,o.SegmentVector.simpleSegment(0,2*Ye.circleOffset,Ye.circleArray.length,Ye.circleArray.length/2),null,K.zoom)}var Ee;Me.destroy(),pe.destroy()}const sm=o.create();function Af(p,l,f,g,b,w){const{horizontalAlign:M,verticalAlign:k}=o.getAnchorAlignment(p),L=-(M-.5)*l,K=-(k-.5)*f,W=o.evaluateVariableOffset(p,g);return new o.pointGeometry((L/b+W[0])*w,(K/b+W[1])*w)}function Mf(p,l,f,g,b,w,M,k,L,K,W){const ee=p.text.placedSymbolArray,le=p.text.dynamicLayoutVertexArray,Se=p.icon.dynamicLayoutVertexArray,ye={},_e=Vi(k,p.getProjection(),w),we=w.elevation,pe=p.getProjection().upVectorScale(k.canonical,w.center.lat,w.worldSize);le.clear();for(let Me=0;Me<ee.length;Me++){const Ee=ee.get(Me),Ye=p.allowVerticalPlacement&&!Ee.placedOrientation,We=Ee.hidden||!Ee.crossTileID||Ye?null:g[Ee.crossTileID];if(We){const $e=new o.pointGeometry(Ee.tileAnchorX,Ee.tileAnchorY),Ze=p.getProjection().upVector(k.canonical,$e.x,$e.y),Ge=we?we.getAtTileOffset(k,$e.x,$e.y):0,Qe=jn([Ee.projectedAnchorX+Ge*Ze[0]*pe.metersToTile,Ee.projectedAnchorY+Ge*Ze[1]*pe.metersToTile,Ee.projectedAnchorZ+Ge*Ze[2]*pe.metersToTile],f?_e:M),ct=jl(w.getCameraToCenterDistance(p.getProjection()),Qe.signedDistanceFromCamera);let Zt=b.evaluateSizeForFeature(p.textSizeData,K,Ee)*ct/o.ONE_EM;f&&(Zt*=p.tilePixelRatio/L);const{width:at,height:Dt,anchor:$t,textOffset:en,textScale:Ct}=We,Yt=Af($t,at,Dt,en,Ct,Zt);let Nt;if(f){const rn=$e.add(Yt),{x:yn,y:En,z:kn}=p.getProjection().projectTilePoint(rn.x,rn.y,k.canonical);Nt=jn([yn+Ge*Ze[0]*pe.metersToTile,En+Ge*Ze[1]*pe.metersToTile,kn+Ge*Ze[2]*pe.metersToTile],M).point}else{const rn=l?Yt.rotate(-w.angle):Yt;Nt=[Qe.point[0]+rn.x,Qe.point[1]+rn.y,0]}const ln=p.allowVerticalPlacement&&Ee.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let rn=0;rn<Ee.numGlyphs;rn++)o.addDynamicAttributes(le,Nt[0],Nt[1],Nt[2],ln);W&&Ee.associatedIconIndex>=0&&(ye[Ee.associatedIconIndex]={shiftedAnchor:Nt,angle:ln})}else Ia(Ee.numGlyphs,le)}if(W){Se.clear();const Me=p.icon.placedSymbolArray;for(let Ee=0;Ee<Me.length;Ee++){const Ye=Me.get(Ee);if(Ye.hidden)Ia(Ye.numGlyphs,Se);else{const We=ye[Ee];if(We)for(let $e=0;$e<Ye.numGlyphs;$e++)o.addDynamicAttributes(Se,We.shiftedAnchor[0],We.shiftedAnchor[1],We.shiftedAnchor[2],We.angle);else Ia(Ye.numGlyphs,Se)}}p.icon.dynamicLayoutVertexBuffer.updateData(Se)}p.text.dynamicLayoutVertexBuffer.updateData(le)}function lm(p,l,f){return f.iconsInText&&l?"symbolTextAndIcon":p?"symbolSDF":"symbolIcon"}function kf(p,l,f,g,b,w,M,k,L,K,W,ee){const le=p.context,Se=le.gl,ye=p.transform,_e=k==="map",we=L==="map",pe=_e&&f.layout.get("symbol-placement")!=="point",Me=_e&&!we&&!pe,Ee=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Ye=!1;const We=p.depthModeForSublayer(0,o.DepthMode.ReadOnly),$e=[o.mercatorXfromLng(ye.center.lng),o.mercatorYfromLat(ye.center.lat)],Ze=f.layout.get("text-variable-anchor"),Ge=ye.projection.name==="globe",Qe=[],ct=[0,-1,0];let Zt=ct;!Ge&&!ye.mercatorFromTransition||_e||(Zt=function(at){const Dt=at._camera.getWorldToCamera(at.worldSize,1),$t=o.multiply([],Dt,at.globeMatrix);o.invert($t,$t);const en=[0,0,0],Ct=[0,1,0,0];return o.transformMat4$1(Ct,Ct,$t),en[0]=Ct[0],en[1]=Ct[1],en[2]=Ct[2],o.normalize(en,en),en}(ye));for(const at of g){const Dt=l.getTile(at),$t=Dt.getBucket(f);if(!$t||$t.projection.name==="mercator"&&Ge)continue;const en=b?$t.text:$t.icon;if(!en||$t.fullyClipped||!en.segments.get().length)continue;const Ct=en.programConfigurations.get(f.id),Yt=b||$t.sdfIcons,Nt=b?$t.textSizeData:$t.iconSizeData,ln=we||ye.pitch!==0,rn=o.evaluateSizeForZoom(Nt,ye.zoom);let yn,En,kn,Jn,_n=[0,0],Bn=null;if(b){if(En=Dt.glyphAtlasTexture,kn=Se.LINEAR,yn=Dt.glyphAtlasTexture.size,$t.iconsInText){_n=Dt.imageAtlasTexture.size,Bn=Dt.imageAtlasTexture;const Li=Nt.kind==="composite"||Nt.kind==="camera";Jn=ln||p.options.rotating||p.options.zooming||Li?Se.LINEAR:Se.NEAREST}}else{const Li=f.layout.get("icon-size").constantOr(0)!==1||$t.iconsNeedLinear;En=Dt.imageAtlasTexture,kn=Yt||p.options.rotating||p.options.zooming||Li||ln?Se.LINEAR:Se.NEAREST,yn=Dt.imageAtlasTexture.size}const cr=$t.projection.name==="globe",jr=cr?Zt:ct,Qr=cr?o.globeToMercatorTransition(ye.zoom):0,Pr=Vi(at,$t.getProjection(),ye),_i=ye.calculatePixelsToTileUnitsMatrix(Dt),Ao=Zn(Pr,Dt.tileID.canonical,we,_e,ye,$t.getProjection(),_i),la=p.terrain&&we&&pe?o.invert(o.create(),Ao):sm,Vr=To(Pr,Dt.tileID.canonical,we,_e,ye,$t.getProjection(),_i),Gr=Ze&&$t.hasTextData(),qn=f.layout.get("icon-text-fit")!=="none"&&Gr&&$t.hasIconData();if(pe){const Li=ye.elevation,ms=Li?Li.getAtTileOffsetFunc(at,ye.center.lat,ye.worldSize,$t.getProjection()):vu=>[0,0,0],Da=Xn(Pr,Dt.tileID.canonical,we,_e,ye,$t.getProjection(),_i);Ul($t,Pr,p,b,Da,Vr,we,K,ms,at)}const ai=pe||b&&Ze||qn,Ei=p.translatePosMatrix(Pr,Dt,w,M),zr=ai?sm:Ao,Ii=p.translatePosMatrix(Vr,Dt,w,M,!0),ds=$t.getProjection().createInversionMatrix(ye,at.canonical),zi=[];p.terrain&&we&&zi.push("PITCH_WITH_MAP_TERRAIN"),cr&&zi.push("PROJECTION_GLOBE_VIEW"),ai&&zi.push("PROJECTED_POS_ON_VIEWPORT");const fs=Yt&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let hs;hs=Yt?$t.iconsInText?Js(Nt.kind,rn,Me,we,p,Ei,zr,Ii,yn,_n,at,Qr,$e,ds,jr,$t.getProjection()):Pf(Nt.kind,rn,Me,we,p,Ei,zr,Ii,b,yn,!0,at,Qr,$e,ds,jr,$t.getProjection()):If(Nt.kind,rn,Me,we,p,Ei,zr,Ii,b,yn,at,Qr,$e,ds,jr,$t.getProjection());const ps={program:p.useProgram(lm(Yt,b,$t),Ct,zi),buffers:en,uniformValues:hs,atlasTexture:En,atlasTextureIcon:Bn,atlasInterpolation:kn,atlasInterpolationIcon:Jn,isSDF:Yt,hasHalo:fs,tile:Dt,labelPlaneMatrixInv:la};if(Ee&&$t.canOverlap){Ye=!0;const Li=en.segments.get();for(const ms of Li)Qe.push({segments:new o.SegmentVector([ms]),sortKey:ms.sortKey,state:ps})}else Qe.push({segments:en.segments,sortKey:0,state:ps})}Ye&&Qe.sort((at,Dt)=>at.sortKey-Dt.sortKey);for(const at of Qe){const Dt=at.state;if(p.terrain&&p.terrain.setupElevationDraw(Dt.tile,Dt.program,{useDepthForOcclusion:!Ge,labelPlaneMatrixInv:Dt.labelPlaneMatrixInv}),le.activeTexture.set(Se.TEXTURE0),Dt.atlasTexture.bind(Dt.atlasInterpolation,Se.CLAMP_TO_EDGE),Dt.atlasTextureIcon&&(le.activeTexture.set(Se.TEXTURE1),Dt.atlasTextureIcon&&Dt.atlasTextureIcon.bind(Dt.atlasInterpolationIcon,Se.CLAMP_TO_EDGE)),Dt.isSDF){const $t=Dt.uniformValues;Dt.hasHalo&&($t.u_is_halo=1,Of(Dt.buffers,at.segments,f,p,Dt.program,We,W,ee,$t)),$t.u_is_halo=0}Of(Dt.buffers,at.segments,f,p,Dt.program,We,W,ee,Dt.uniformValues)}}function Of(p,l,f,g,b,w,M,k,L){const K=g.context,W=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.globeExtVertexBuffer];b.draw(K,K.gl.TRIANGLES,w,M,k,o.CullFaceMode.disabled,L,f.id,p.layoutVertexBuffer,p.indexBuffer,l,f.paint,g.transform.zoom,p.programConfigurations.get(f.id),W)}function Mc(p,l,f,g,b,w,M){const k=p.context.gl,L=f.paint.get("fill-pattern"),K=L&&L.constantOr(1),W=f.getCrossfadeParameters();let ee,le,Se,ye,_e;M?(le=K&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=k.LINES):(le=K?"fillPattern":"fill",ee=k.TRIANGLES);for(const we of g){const pe=l.getTile(we);if(K&&!pe.patternsLoaded())continue;const Me=pe.getBucket(f);if(!Me)continue;p.prepareDrawTile();const Ee=Me.programConfigurations.get(f.id),Ye=p.useProgram(le,Ee);K&&(p.context.activeTexture.set(k.TEXTURE0),pe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Ee.updatePaintBuffers(W));const We=L.constantOr(null);if(We&&pe.imageAtlas){const Ze=pe.imageAtlas,Ge=Ze.patternPositions[We.to.toString()],Qe=Ze.patternPositions[We.from.toString()];Ge&&Qe&&Ee.setConstantPatternPositions(Ge,Qe)}const $e=p.translatePosMatrix(we.projMatrix,pe,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(M){ye=Me.indexBuffer2,_e=Me.segments2;const Ze=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];Se=le==="fillOutlinePattern"&&K?Cf($e,p,W,pe,Ze):Ho($e,Ze)}else ye=Me.indexBuffer,_e=Me.segments,Se=K?Sc($e,p,W,pe):Ql($e);p.prepareDrawProgram(p.context,Ye,we.toUnwrapped()),Ye.draw(p.context,ee,b,p.stencilModeForClipping(we),w,o.CullFaceMode.disabled,Se,f.id,Me.layoutVertexBuffer,ye,_e,f.paint,p.transform.zoom,Ee)}}function oa(p,l,f,g,b,w,M){const k=p.context,L=k.gl,K=p.transform,W=f.paint.get("fill-extrusion-pattern"),ee=W.constantOr(1),le=f.getCrossfadeParameters(),Se=f.paint.get("fill-extrusion-opacity"),ye=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],_e=f.layout.get("fill-extrusion-edge-radius"),we=K.projection.name==="globe"?o.fillExtrusionHeightLift():0,pe=K.projection.name==="globe",Me=pe?o.globeToMercatorTransition(K.zoom):0,Ee=[o.mercatorXfromLng(K.center.lng),o.mercatorYfromLat(K.center.lat)],Ye=[];pe&&(Ye.push("PROJECTION_GLOBE_VIEW"),p.style.terrainSetForDrapingOnly()&&Ye.push("TERRAIN")),ye[0]>0&&Ye.push("FAUX_AO");for(const We of g){const $e=l.getTile(We),Ze=$e.getBucket(f);if(!Ze||Ze.projection.name!==K.projection.name)continue;const Ge=Ze.programConfigurations.get(f.id),Qe=p.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",Ge,Ye);if(p.terrain){const Ct=p.terrain;if(p.style.terrainSetForDrapingOnly())Ct.setupElevationDraw($e,Qe,{useMeterToDem:!0});else{if(!Ze.enableTerrain)continue;if(Ct.setupElevationDraw($e,Qe,{useMeterToDem:!0}),eu(k,l,We,Ze,f,Ct),!Ze.centroidVertexBuffer){const Yt=Qe.attributes.a_centroid_pos;Yt!==void 0&&L.vertexAttrib2f(Yt,0,0)}}}ee&&(p.context.activeTexture.set(L.TEXTURE0),$e.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Ge.updatePaintBuffers(le));const ct=W.constantOr(null);if(ct&&$e.imageAtlas){const Ct=$e.imageAtlas,Yt=Ct.patternPositions[ct.to.toString()],Nt=Ct.patternPositions[ct.from.toString()];Yt&&Nt&&Ge.setConstantPatternPositions(Yt,Nt)}const Zt=p.translatePosMatrix(We.projMatrix,$e,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),at=K.projection.createInversionMatrix(K,We.canonical),Dt=f.paint.get("fill-extrusion-vertical-gradient"),$t=ee?em(Zt,p,Dt,Se,ye,_e,We,le,$e,we,Me,Ee,at):Ys(Zt,p,Dt,Se,ye,_e,We,we,Me,Ee,at);p.prepareDrawProgram(k,Qe,We.toUnwrapped());const en=[];p.terrain&&en.push(Ze.centroidVertexBuffer),pe&&en.push(Ze.layoutVertexExtBuffer),Qe.draw(k,k.gl.TRIANGLES,b,w,M,o.CullFaceMode.backCCW,$t,f.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,f.paint,p.transform.zoom,Ge,en)}}function eu(p,l,f,g,b,w){const M=[pe=>{let Me=pe.canonical.x-1,Ee=pe.wrap;return Me<0&&(Me=(1<<pe.canonical.z)-1,Ee--),new o.OverscaledTileID(pe.overscaledZ,Ee,pe.canonical.z,Me,pe.canonical.y)},pe=>{let Me=pe.canonical.x+1,Ee=pe.wrap;return Me===1<<pe.canonical.z&&(Me=0,Ee++),new o.OverscaledTileID(pe.overscaledZ,Ee,pe.canonical.z,Me,pe.canonical.y)},pe=>new o.OverscaledTileID(pe.overscaledZ,pe.wrap,pe.canonical.z,pe.canonical.x,(pe.canonical.y===0?1<<pe.canonical.z:pe.canonical.y)-1),pe=>new o.OverscaledTileID(pe.overscaledZ,pe.wrap,pe.canonical.z,pe.canonical.x,pe.canonical.y===(1<<pe.canonical.z)-1?0:pe.canonical.y+1)],k=pe=>{const Me=l.getSource().minzoom,Ee=We=>{const $e=l.getTileByID(We);if($e&&$e.hasData())return $e.getBucket(b)},Ye=[0,-1,1];for(const We of Ye){if(pe.overscaledZ+We<Me)continue;const $e=Ee(pe.calculateScaledKey(pe.overscaledZ+We));if($e)return $e}},L=[0,0,0],K=(pe,Me)=>(L[0]=Math.min(pe.min.y,Me.min.y),L[1]=Math.max(pe.max.y,Me.max.y),L[2]=o.EXTENT-Me.min.x>pe.max.x?Me.min.x-o.EXTENT:pe.max.x,L),W=(pe,Me)=>(L[0]=Math.min(pe.min.x,Me.min.x),L[1]=Math.max(pe.max.x,Me.max.x),L[2]=o.EXTENT-Me.min.y>pe.max.y?Me.min.y-o.EXTENT:pe.max.y,L),ee=[(pe,Me)=>K(pe,Me),(pe,Me)=>K(Me,pe),(pe,Me)=>W(pe,Me),(pe,Me)=>W(Me,pe)],le=new o.pointGeometry(0,0);let Se,ye,_e;const we=(pe,Me,Ee,Ye,We)=>{const $e=[[Ye?Ee:pe,Ye?pe:Ee,0],[Ye?Ee:Me,Ye?Me:Ee,0]],Ze=We<0?o.EXTENT+We:We,Ge=[Ye?Ze:(pe+Me)/2,Ye?(pe+Me)/2:Ze,0];return Ee===0&&We<0||Ee!==0&&We>0?w.getForTilePoints(_e,[Ge],!0,ye):$e.push(Ge),w.getForTilePoints(f,$e,!0,Se),Math.max($e[0][2],$e[1][2],Ge[2])/w.exaggeration()};for(let pe=0;pe<4;pe++){const Me=(pe<2?1:5)-pe,Ee=g.borders[pe];if(Ee.length===0)continue;const Ye=_e=M[pe](f),We=k(Ye);if(!(We&&We instanceof o.FillExtrusionBucket&&We.enableTerrain)||g.borderDoneWithNeighborZ[pe]===We.canonical.z&&We.borderDoneWithNeighborZ[Me]===g.canonical.z||(ye=w.findDEMTileFor(Ye),!ye||!ye.dem))continue;if(!Se){const Qe=w.findDEMTileFor(f);if(!Qe||!Qe.dem)return;Se=Qe}const $e=We.borders[Me];let Ze=0;const Ge=We.borderDoneWithNeighborZ[Me]!==g.canonical.z;if(g.canonical.z===We.canonical.z){for(let Qe=0;Qe<Ee.length;Qe++){const ct=g.featuresOnBorder[Ee[Qe]],Zt=ct.borders[pe];let at;for(;Ze<$e.length&&(at=We.featuresOnBorder[$e[Ze]],!(at.borders[Me][1]>Zt[0]+3));)Ge&&We.encodeCentroid(void 0,at,!1),Ze++;if(at&&Ze<$e.length){const Dt=Ze;let $t=0;for(;!(at.borders[Me][0]>Zt[1]-3)&&($t++,++Ze!==$e.length);)at=We.featuresOnBorder[$e[Ze]];if(at=We.featuresOnBorder[$e[Dt]],ct.intersectsCount()>1||at.intersectsCount()>1||$t!==1){$t!==1&&(Ze=Dt),g.encodeCentroid(void 0,ct,!1),Ge&&We.encodeCentroid(void 0,at,!1);continue}const en=ee[pe](ct,at),Ct=pe%2?o.EXTENT-1:0;le.x=we(en[0],Math.min(o.EXTENT-1,en[1]),Ct,pe<2,en[2]),le.y=0,g.encodeCentroid(le,ct,!1),Ge&&We.encodeCentroid(le,at,!1)}else g.encodeCentroid(void 0,ct,!1)}g.borderDoneWithNeighborZ[pe]=We.canonical.z,g.needsCentroidUpdate=!0,Ge&&(We.borderDoneWithNeighborZ[Me]=g.canonical.z,We.needsCentroidUpdate=!0)}else{for(const Qe of Ee)g.encodeCentroid(void 0,g.featuresOnBorder[Qe],!1);if(Ge){for(const Qe of $e)We.encodeCentroid(void 0,We.featuresOnBorder[Qe],!1);We.borderDoneWithNeighborZ[Me]=g.canonical.z,We.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[pe]=We.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(p)}const um=new o.Color(1,0,0,1),Qs=new o.Color(0,1,0,1),el=new o.Color(0,0,1,1),cm=new o.Color(1,0,1,1),Df=new o.Color(0,1,1,1);function _r(p,l,f){const g=p.context,b=p.transform,w=g.gl,M=b.projection.name==="globe",k=M?["PROJECTION_GLOBE_VIEW"]:null;let L=f.projMatrix;if(M&&o.globeToMercatorTransition(b.zoom)>0){const ct=o.transitionTileAABBinECEF(f.canonical,b),Zt=o.globeDenormalizeECEF(ct);L=o.multiply(new Float32Array(16),b.globeMatrix,Zt),o.multiply(L,b.projMatrix,L)}const K=p.useProgram("debug",null,k),W=l.getTileByID(f.key);p.terrain&&p.terrain.setupElevationDraw(W,K);const ee=o.DepthMode.disabled,le=o.StencilMode.disabled,Se=p.colorModeForRenderPass(),ye="$debug";g.activeTexture.set(w.TEXTURE0),p.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),M?W._makeGlobeTileDebugBuffers(p.context,b):W._makeDebugTileBoundsBuffers(p.context,b.projection);const _e=W._tileDebugBuffer||p.debugBuffer,we=W._tileDebugIndexBuffer||p.debugIndexBuffer,pe=W._tileDebugSegments||p.debugSegments;K.draw(g,w.LINE_STRIP,ee,le,Se,o.CullFaceMode.disabled,rm(L,o.Color.red),ye,_e,we,pe,null,null,null,[W._globeTileDebugBorderBuffer]);const Me=W.latestRawTileData,Ee=Math.floor((Me&&Me.byteLength||0)/1024),Ye=l.getTile(f).tileSize,We=512/Math.min(Ye,512)*(f.overscaledZ/b.zoom)*.5;let $e=f.canonical.toString();f.overscaledZ!==f.canonical.z&&($e+=` => ${f.overscaledZ}`),$e+=` ${Ee}kb`,function(ct,Zt){ct.initDebugOverlayCanvas();const at=ct.debugOverlayCanvas,Dt=ct.context.gl,$t=ct.debugOverlayCanvas.getContext("2d");$t.clearRect(0,0,at.width,at.height),$t.shadowColor="white",$t.shadowBlur=2,$t.lineWidth=1.5,$t.strokeStyle="white",$t.textBaseline="top",$t.font="bold 36px Open Sans, sans-serif",$t.fillText(Zt,5,5),$t.strokeText(Zt,5,5),ct.debugOverlayTexture.update(at),ct.debugOverlayTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE)}(p,$e);const Ze=W._tileDebugTextBuffer||p.debugBuffer,Ge=W._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Qe=W._tileDebugTextSegments||p.debugSegments;K.draw(g,w.TRIANGLES,ee,le,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,rm(L,o.Color.transparent,We),ye,Ze,Ge,Qe,null,null,null,[W._globeTileDebugTextBuffer])}function tu(p,l,f,g){nu(p,0,l+f/2,p.transform.width,f,g)}function dm(p,l,f,g){nu(p,l-f/2,0,f,p.transform.height,g)}function nu(p,l,f,g,b,w){const M=p.context,k=M.gl;k.enable(k.SCISSOR_TEST),k.scissor(l*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,g*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio),M.clear({color:w}),k.disable(k.SCISSOR_TEST)}const ru=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:e_}=ru;function Oa(p,l,f,g){p.emplaceBack(l,f,g)}class Rf{constructor(l){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Oa(this.vertexArray,-1,-1,1),Oa(this.vertexArray,1,-1,1),Oa(this.vertexArray,-1,1,1),Oa(this.vertexArray,1,1,1),Oa(this.vertexArray,-1,-1,-1),Oa(this.vertexArray,1,-1,-1),Oa(this.vertexArray,-1,1,-1),Oa(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,e_),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function tl(p,l,f,g,b,w){const M=p.gl,k=l.paint.get("sky-atmosphere-color"),L=l.paint.get("sky-atmosphere-halo-color"),K=l.paint.get("sky-atmosphere-sun-intensity"),W=((ee,le,Se,ye,_e)=>({u_matrix_3f:ee,u_sun_direction:le,u_sun_intensity:Se,u_color_tint_r:[ye.r,ye.g,ye.b,ye.a],u_color_tint_m:[_e.r,_e.g,_e.b,_e.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),g),b,K,k,L);M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),f.draw(p,M.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,W,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const zf=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class kc{constructor(l){const f=new o.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const g=new o.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(f,zf.members),this.indexBuffer=l.createIndexBuffer(g),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const nl={symbol:function(p,l,f,g,b){if(p.renderPass!=="translucent")return;const w=o.StencilMode.disabled,M=p.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(k,L,K,W,ee,le,Se){const ye=L.transform,_e=ee==="map",we=le==="map";for(const pe of k){const Me=W.getTile(pe),Ee=Me.getBucket(K);if(!Ee||!Ee.text||!Ee.text.segments.get().length)continue;const Ye=o.evaluateSizeForZoom(Ee.textSizeData,ye.zoom),We=Vi(pe,Ee.getProjection(),ye),$e=ye.calculatePixelsToTileUnitsMatrix(Me),Ze=Zn(We,Me.tileID.canonical,we,_e,ye,Ee.getProjection(),$e),Ge=K.layout.get("icon-text-fit")!=="none"&&Ee.hasIconData();if(Ye){const Qe=Math.pow(2,ye.zoom-Me.tileID.overscaledZ);Mf(Ee,_e,we,Se,o.symbolSize,ye,Ze,pe,Qe,Ye,Ge)}}}(g,p,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),f.paint.get("icon-opacity").constantOr(1)!==0&&kf(p,l,f,g,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),w,M),f.paint.get("text-opacity").constantOr(1)!==0&&kf(p,l,f,g,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),w,M),l.map.showCollisionBoxes&&(am(p,l,f,g,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),am(p,l,f,g,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(p,l,f,g){if(p.renderPass!=="translucent")return;const b=f.paint.get("circle-opacity"),w=f.paint.get("circle-stroke-width"),M=f.paint.get("circle-stroke-opacity"),k=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)===0&&(w.constantOr(1)===0||M.constantOr(1)===0))return;const L=p.context,K=L.gl,W=p.transform,ee=p.depthModeForSublayer(0,o.DepthMode.ReadOnly),le=o.StencilMode.disabled,Se=p.colorModeForRenderPass(),ye=W.projection.name==="globe",_e=[o.mercatorXfromLng(W.center.lng),o.mercatorYfromLat(W.center.lat)],we=[];for(let Me=0;Me<g.length;Me++){const Ee=g[Me],Ye=l.getTile(Ee),We=Ye.getBucket(f);if(!We||We.projection.name!==W.projection.name)continue;const $e=We.programConfigurations.get(f.id),Ze=nm(f);ye&&Ze.push("PROJECTION_GLOBE_VIEW");const Ge=p.useProgram("circle",$e,Ze),Qe=We.layoutVertexBuffer,ct=We.globeExtVertexBuffer,Zt=We.indexBuffer,at=W.projection.createInversionMatrix(W,Ee.canonical),Dt={programConfiguration:$e,program:Ge,layoutVertexBuffer:Qe,globeExtVertexBuffer:ct,indexBuffer:Zt,uniformValues:Sf(p,Ee,Ye,at,_e,f),tile:Ye};if(k){const $t=We.segments.get();for(const en of $t)we.push({segments:new o.SegmentVector([en]),sortKey:en.sortKey,state:Dt})}else we.push({segments:We.segments,sortKey:0,state:Dt})}k&&we.sort((Me,Ee)=>Me.sortKey-Ee.sortKey);const pe={useDepthForOcclusion:!ye};for(const Me of we){const{programConfiguration:Ee,program:Ye,layoutVertexBuffer:We,globeExtVertexBuffer:$e,indexBuffer:Ze,uniformValues:Ge,tile:Qe}=Me.state,ct=Me.segments;p.terrain&&p.terrain.setupElevationDraw(Qe,Ye,pe),p.prepareDrawProgram(L,Ye,Qe.tileID.toUnwrapped()),Ye.draw(L,K.TRIANGLES,ee,le,Se,o.CullFaceMode.disabled,Ge,f.id,We,Ze,ct,f.paint,W.zoom,Ee,[$e])}},heatmap:function(p,l,f,g){if(f.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const b=p.context,w=b.gl,M=o.StencilMode.disabled,k=new o.ColorMode([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(Se,ye,_e,we){const pe=Se.gl,Me=ye.width*we,Ee=ye.height*we;Se.activeTexture.set(pe.TEXTURE1),Se.viewport.set([0,0,Me,Ee]);let Ye=_e.heatmapFbo;if(!Ye||Ye&&(Ye.width!==Me||Ye.height!==Ee)){Ye&&Ye.destroy();const We=pe.createTexture();pe.bindTexture(pe.TEXTURE_2D,We),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.LINEAR),Ye=_e.heatmapFbo=Se.createFramebuffer(Me,Ee,!1),function($e,Ze,Ge,Qe,ct,Zt){const at=$e.gl;at.texImage2D(at.TEXTURE_2D,0,at.RGBA,ct,Zt,0,at.RGBA,$e.extRenderToTextureHalfFloat?$e.extTextureHalfFloat.HALF_FLOAT_OES:at.UNSIGNED_BYTE,null),Qe.colorAttachment.set(Ge)}(Se,0,We,Ye,Me,Ee)}else pe.bindTexture(pe.TEXTURE_2D,Ye.colorAttachment.get()),Se.bindFramebuffer.set(Ye.framebuffer)})(b,p,f,p.transform.projection.name==="globe"?.5:.25),b.clear({color:o.Color.transparent});const L=p.transform,K=L.projection.name==="globe",W=K?["PROJECTION_GLOBE_VIEW"]:null,ee=K?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,le=[o.mercatorXfromLng(L.center.lng),o.mercatorYfromLat(L.center.lat)];for(let Se=0;Se<g.length;Se++){const ye=g[Se];if(l.hasRenderableParent(ye))continue;const _e=l.getTile(ye),we=_e.getBucket(f);if(!we||we.projection.name!==L.projection.name)continue;const pe=we.programConfigurations.get(f.id),Me=p.useProgram("heatmap",pe,W),{zoom:Ee}=p.transform;p.terrain&&p.terrain.setupElevationDraw(_e,Me),p.prepareDrawProgram(b,Me,ye.toUnwrapped());const Ye=L.projection.createInversionMatrix(L,ye.canonical);Me.draw(b,w.TRIANGLES,o.DepthMode.disabled,M,k,ee,Wy(p,ye,_e,Ye,le,Ee,f.paint.get("heatmap-intensity")),f.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,f.paint,p.transform.zoom,pe,K?[we.globeExtVertexBuffer]:null)}b.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(b,w){const M=b.context,k=M.gl,L=w.heatmapFbo;if(!L)return;M.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,L.colorAttachment.get()),M.activeTexture.set(k.TEXTURE1);let K=w.colorRampTexture;K||(K=w.colorRampTexture=new o.Texture(M,w.colorRamp,k.RGBA)),K.bind(k.LINEAR,k.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(M,k.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,b.colorModeForRenderPass(),o.CullFaceMode.disabled,((W,ee,le,Se)=>({u_image:0,u_color_ramp:1,u_opacity:ee.paint.get("heatmap-opacity")}))(0,w),w.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,w.paint,b.transform.zoom)}(p,f))},line:function(p,l,f,g){if(p.renderPass!=="translucent")return;const b=f.paint.get("line-opacity"),w=f.paint.get("line-width");if(b.constantOr(1)===0||w.constantOr(1)===0)return;const M=p.depthModeForSublayer(0,o.DepthMode.ReadOnly),k=p.colorModeForRenderPass(),L=p.terrain&&p.terrain.renderingToTexture?1:o.exported.devicePixelRatio,K=f.paint.get("line-dasharray"),W=K.constantOr(1),ee=f.layout.get("line-cap"),le=f.paint.get("line-pattern"),Se=le.constantOr(1),ye=f.paint.get("line-gradient"),_e=f.getCrossfadeParameters(),we=Se?"linePattern":"line",pe=p.context,Me=pe.gl,Ee=(We=>{const $e=[];Ic(We)&&$e.push("RENDER_LINE_DASH"),We.paint.get("line-gradient")&&$e.push("RENDER_LINE_GRADIENT");const Ze=We.paint.get("line-trim-offset");Ze[0]===0&&Ze[1]===0||$e.push("RENDER_LINE_TRIM_OFFSET");const Ge=We.paint.get("line-pattern").constantOr(1),Qe=We.paint.get("line-opacity").constantOr(1)!==1;return!Ge&&Qe&&$e.push("RENDER_LINE_ALPHA_DISCARD"),$e})(f);let Ye=Ee.includes("RENDER_LINE_ALPHA_DISCARD");p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(Ye=!1);for(const We of g){const $e=l.getTile(We);if(Se&&!$e.patternsLoaded())continue;const Ze=$e.getBucket(f);if(!Ze)continue;p.prepareDrawTile();const Ge=Ze.programConfigurations.get(f.id),Qe=p.useProgram(we,Ge,Ee),ct=le.constantOr(null);if(ct&&$e.imageAtlas){const Nt=$e.imageAtlas,ln=Nt.patternPositions[ct.to.toString()],rn=Nt.patternPositions[ct.from.toString()];ln&&rn&&Ge.setConstantPatternPositions(ln,rn)}const Zt=K.constantOr(null),at=ee.constantOr(null);if(!Se&&Zt&&at&&$e.lineAtlas){const Nt=$e.lineAtlas,ln=Nt.getDash(Zt.to,at),rn=Nt.getDash(Zt.from,at);ln&&rn&&Ge.setConstantPatternPositions(ln,rn)}let[Dt,$t]=f.paint.get("line-trim-offset");(at==="round"||at==="square")&&Dt!==$t&&(Dt===0&&(Dt-=1),$t===1&&($t+=1));const en=p.terrain?We.projMatrix:null,Ct=Se?Zy(p,$e,f,_e,en,L):Tc(p,$e,f,_e,en,Ze.lineClipsArray.length,L,[Dt,$t]);if(ye){const Nt=Ze.gradients[f.id];let ln=Nt.texture;if(f.gradientVersion!==Nt.version){let rn=256;if(f.stepInterpolant){const yn=l.getSource().maxzoom,En=We.canonical.z===yn?Math.ceil(1<<p.transform.maxZoom-We.canonical.z):1;rn=o.clamp(o.nextPowerOfTwo(Ze.maxLineLength/o.EXTENT*1024*En),256,pe.maxTextureSize)}Nt.gradient=o.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:rn,image:Nt.gradient||void 0,clips:Ze.lineClipsArray}),Nt.texture?Nt.texture.update(Nt.gradient):Nt.texture=new o.Texture(pe,Nt.gradient,Me.RGBA),Nt.version=f.gradientVersion,ln=Nt.texture}pe.activeTexture.set(Me.TEXTURE1),ln.bind(f.stepInterpolant?Me.NEAREST:Me.LINEAR,Me.CLAMP_TO_EDGE)}W&&(pe.activeTexture.set(Me.TEXTURE0),$e.lineAtlasTexture.bind(Me.LINEAR,Me.REPEAT),Ge.updatePaintBuffers(_e)),Se&&(pe.activeTexture.set(Me.TEXTURE0),$e.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),Ge.updatePaintBuffers(_e)),p.prepareDrawProgram(pe,Qe,We.toUnwrapped());const Yt=Nt=>{Qe.draw(pe,Me.TRIANGLES,M,Nt,k,o.CullFaceMode.disabled,Ct,f.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,f.paint,p.transform.zoom,Ge,[Ze.layoutVertexBuffer2])};if(Ye){const Nt=p.stencilModeForClipping(We).ref;Nt===0&&p.terrain&&pe.clear({stencil:0});const ln={func:Me.EQUAL,mask:255};Ct.u_alpha_discard_threshold=.8,Yt(new o.StencilMode(ln,Nt,255,Me.KEEP,Me.KEEP,Me.INVERT)),Ct.u_alpha_discard_threshold=0,Yt(new o.StencilMode(ln,Nt,255,Me.KEEP,Me.KEEP,Me.KEEP))}else Yt(p.stencilModeForClipping(We))}Ye&&(p.resetStencilClippingMasks(),p.terrain&&pe.clear({stencil:0}))},fill:function(p,l,f,g){const b=f.paint.get("fill-color"),w=f.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const M=p.colorModeForRenderPass(),k=f.paint.get("fill-pattern"),L=p.opaquePassEnabledForLayer()&&!k.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===L){const K=p.depthModeForSublayer(1,p.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);Mc(p,l,f,g,K,M,!1)}if(p.renderPass==="translucent"&&f.paint.get("fill-antialias")){const K=p.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);Mc(p,l,f,g,K,M,!0)}},"fill-extrusion":function(p,l,f,g){const b=f.paint.get("fill-extrusion-opacity");if(b!==0&&p.renderPass==="translucent"){const w=new o.DepthMode(p.context.gl.LEQUAL,o.DepthMode.ReadWrite,p.depthRangeFor3D);if(b!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))oa(p,l,f,g,w,o.StencilMode.disabled,o.ColorMode.disabled),oa(p,l,f,g,w,p.stencilModeFor3D(),p.colorModeForRenderPass()),p.resetStencilClippingMasks();else{const M=p.colorModeForRenderPass();oa(p,l,f,g,w,o.StencilMode.disabled,M)}}},hillshade:function(p,l,f,g){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent")return;const b=p.context,w=p.depthModeForSublayer(0,o.DepthMode.ReadOnly),M=p.colorModeForRenderPass(),k=p.terrain&&p.terrain.renderingToTexture,[L,K]=p.renderPass!=="translucent"||k?[{},g]:p.stencilConfigForOverlap(g);for(const W of K){const ee=l.getTile(W);if(ee.needsHillshadePrepare&&p.renderPass==="offscreen")Xs(p,ee,f,w,o.StencilMode.disabled,M);else if(p.renderPass==="translucent"){const le=k&&p.terrain?p.terrain.stencilModeForRTTOverlap(W):L[W.overscaledZ];mf(p,W,ee,f,w,le,M)}}b.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,l,f,g,b,w){if(p.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!g.length)return;const M=p.context,k=M.gl,L=l.getSource(),K=p.useProgram("raster"),W=p.colorModeForRenderPass(),ee=p.terrain&&p.terrain.renderingToTexture,[le,Se]=L instanceof rt||ee?[{},g]:p.stencilConfigForOverlap(g),ye=Se[Se.length-1].overscaledZ,_e=!p.options.moving;for(const we of Se){const pe=ee?o.DepthMode.disabled:p.depthModeForSublayer(we.overscaledZ-ye,f.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,k.LESS),Me=we.toUnwrapped(),Ee=l.getTile(we);if(ee&&(!Ee||!Ee.hasData()))continue;const Ye=ee?we.projMatrix:p.transform.calculateProjMatrix(Me,_e),We=p.terrain&&ee?p.terrain.stencilModeForRTTOverlap(we):le[we.overscaledZ],$e=w?0:f.paint.get("raster-fade-duration");Ee.registerFadeDuration($e);const Ze=l.findLoadedParent(we,0),Ge=wc(Ee,Ze,l,p.transform,$e);let Qe,ct;p.terrain&&p.terrain.prepareDrawTile();const Zt=f.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;M.activeTexture.set(k.TEXTURE0),Ee.texture.bind(Zt,k.CLAMP_TO_EDGE),M.activeTexture.set(k.TEXTURE1),Ze?(Ze.texture.bind(Zt,k.CLAMP_TO_EDGE),Qe=Math.pow(2,Ze.tileID.overscaledZ-Ee.tileID.overscaledZ),ct=[Ee.tileID.canonical.x*Qe%1,Ee.tileID.canonical.y*Qe%1]):Ee.texture.bind(Zt,k.CLAMP_TO_EDGE);const at=Xy(Ye,ct||[0,0],Qe||1,Ge,f,L instanceof rt?L.perspectiveTransform:[0,0]);if(p.prepareDrawProgram(M,K,Me),L instanceof rt)L.boundsBuffer&&L.boundsSegments&&K.draw(M,k.TRIANGLES,pe,o.StencilMode.disabled,W,o.CullFaceMode.disabled,at,f.id,L.boundsBuffer,p.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:Dt,tileBoundsIndexBuffer:$t,tileBoundsSegments:en}=p.getTileBoundsBuffers(Ee);K.draw(M,k.TRIANGLES,pe,We,W,o.CullFaceMode.disabled,at,f.id,Dt,$t,en)}}p.resetStencilClippingMasks()},background:function(p,l,f,g){const b=f.paint.get("background-color"),w=f.paint.get("background-opacity");if(w===0)return;const M=p.context,k=M.gl,L=p.transform,K=L.tileSize,W=f.paint.get("background-pattern");if(p.isPatternMissing(W))return;const ee=!W&&b.a===1&&w===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==ee)return;const le=o.StencilMode.disabled,Se=p.depthModeForSublayer(0,ee==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),ye=p.colorModeForRenderPass(),_e=p.useProgram(W?"backgroundPattern":"background");let we,pe=g;pe||(we=p.getBackgroundTiles(),pe=Object.values(we).map(Ee=>Ee.tileID)),W&&(M.activeTexture.set(k.TEXTURE0),p.imageManager.bind(p.context));const Me=f.getCrossfadeParameters();for(const Ee of pe){const Ye=Ee.toUnwrapped(),We=g?Ee.projMatrix:p.transform.calculateProjMatrix(Ye);p.prepareDrawTile();const $e=l?l.getTile(Ee):we?we[Ee.key]:new o.Tile(Ee,K,L.zoom,p),Ze=W?Jy(We,w,p,W,{tileID:Ee,tileSize:K},Me):Yy(We,w,b);p.prepareDrawProgram(M,_e,Ye);const{tileBoundsBuffer:Ge,tileBoundsIndexBuffer:Qe,tileBoundsSegments:ct}=p.getTileBoundsBuffers($e);_e.draw(M,k.TRIANGLES,Se,le,ye,o.CullFaceMode.disabled,Ze,f.id,Ge,Qe,ct)}},sky:function(p,l,f){const g=p.transform,b=g.projection.name==="mercator"||g.projection.name==="globe"?1:o.smoothstep(7,8,g.zoom),w=f.paint.get("sky-opacity")*b;if(w===0)return;const M=p.context,k=f.paint.get("sky-type"),L=new o.DepthMode(M.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),K=p.frameCounter/1e3%1;k==="atmosphere"?p.renderPass==="offscreen"?f.needsSkyboxCapture(p)&&(function(W,ee,le,Se){const ye=W.context,_e=ye.gl;let we=ee.skyboxFbo;if(!we){we=ee.skyboxFbo=ye.createFramebuffer(32,32,!1),ee.skyboxGeometry=new Rf(ye),ee.skyboxTexture=ye.gl.createTexture(),_e.bindTexture(_e.TEXTURE_CUBE_MAP,ee.skyboxTexture),_e.texParameteri(_e.TEXTURE_CUBE_MAP,_e.TEXTURE_WRAP_S,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_CUBE_MAP,_e.TEXTURE_WRAP_T,_e.CLAMP_TO_EDGE),_e.texParameteri(_e.TEXTURE_CUBE_MAP,_e.TEXTURE_MIN_FILTER,_e.LINEAR),_e.texParameteri(_e.TEXTURE_CUBE_MAP,_e.TEXTURE_MAG_FILTER,_e.LINEAR);for(let Ye=0;Ye<6;++Ye)_e.texImage2D(_e.TEXTURE_CUBE_MAP_POSITIVE_X+Ye,0,_e.RGBA,32,32,0,_e.RGBA,_e.UNSIGNED_BYTE,null)}ye.bindFramebuffer.set(we.framebuffer),ye.viewport.set([0,0,32,32]);const pe=ee.getCenter(W,!0),Me=W.useProgram("skyboxCapture"),Ee=new Float64Array(16);o.identity(Ee),o.rotateY(Ee,Ee,.5*-Math.PI),tl(ye,ee,Me,Ee,pe,0),o.identity(Ee),o.rotateY(Ee,Ee,.5*Math.PI),tl(ye,ee,Me,Ee,pe,1),o.identity(Ee),o.rotateX(Ee,Ee,.5*-Math.PI),tl(ye,ee,Me,Ee,pe,2),o.identity(Ee),o.rotateX(Ee,Ee,.5*Math.PI),tl(ye,ee,Me,Ee,pe,3),o.identity(Ee),tl(ye,ee,Me,Ee,pe,4),o.identity(Ee),o.rotateY(Ee,Ee,Math.PI),tl(ye,ee,Me,Ee,pe,5),ye.viewport.set([0,0,W.width,W.height])}(p,f),f.markSkyboxValid(p)):p.renderPass==="sky"&&function(W,ee,le,Se,ye){const _e=W.context,we=_e.gl,pe=W.transform,Me=W.useProgram("skybox");_e.activeTexture.set(we.TEXTURE0),we.bindTexture(we.TEXTURE_CUBE_MAP,ee.skyboxTexture);const Ee=((Ye,We,$e,Ze,Ge)=>({u_matrix:Ye,u_sun_direction:We,u_cubemap:0,u_opacity:Ze,u_temporal_offset:Ge}))(pe.skyboxMatrix,ee.getCenter(W,!1),0,Se,ye);W.prepareDrawProgram(_e,Me),Me.draw(_e,we.TRIANGLES,le,o.StencilMode.disabled,W.colorModeForRenderPass(),o.CullFaceMode.backCW,Ee,"skybox",ee.skyboxGeometry.vertexBuffer,ee.skyboxGeometry.indexBuffer,ee.skyboxGeometry.segment)}(p,f,L,w,K):k==="gradient"&&p.renderPass==="sky"&&function(W,ee,le,Se,ye){const _e=W.context,we=_e.gl,pe=W.transform,Me=W.useProgram("skyboxGradient");ee.skyboxGeometry||(ee.skyboxGeometry=new Rf(_e)),_e.activeTexture.set(we.TEXTURE0);let Ee=ee.colorRampTexture;Ee||(Ee=ee.colorRampTexture=new o.Texture(_e,ee.colorRamp,we.RGBA)),Ee.bind(we.LINEAR,we.CLAMP_TO_EDGE);const Ye=((We,$e,Ze,Ge,Qe)=>({u_matrix:We,u_color_ramp:0,u_center_direction:$e,u_radius:o.degToRad(Ze),u_opacity:Ge,u_temporal_offset:Qe}))(pe.skyboxMatrix,ee.getCenter(W,!1),ee.paint.get("sky-gradient-radius"),Se,ye);W.prepareDrawProgram(_e,Me),Me.draw(_e,we.TRIANGLES,le,o.StencilMode.disabled,W.colorModeForRenderPass(),o.CullFaceMode.backCW,Ye,"skyboxGradient",ee.skyboxGeometry.vertexBuffer,ee.skyboxGeometry.indexBuffer,ee.skyboxGeometry.segment)}(p,f,L,w,K)},debug:function(p,l,f){for(let g=0;g<f.length;g++)_r(p,l,f[g])},custom:function(p,l,f){const g=p.context,b=f.implementation;if(p.transform.projection.unsupportedLayers&&p.transform.projection.unsupportedLayers.includes("custom"))o.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(p.renderPass==="offscreen"){const w=b.prerender;w&&(p.setCustomLayerDefaults(),g.setColorMode(p.colorModeForRenderPass()),w.call(b,g.gl,p.transform.customLayerMatrix()),g.setDirty(),p.setBaseState())}else if(p.renderPass==="translucent"){p.setCustomLayerDefaults(),g.setColorMode(p.colorModeForRenderPass()),g.setStencilMode(o.StencilMode.disabled);const w=b.renderingMode==="3d"?new o.DepthMode(p.context.gl.LEQUAL,o.DepthMode.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,o.DepthMode.ReadOnly);g.setDepthMode(w),b.render(g.gl,p.transform.customLayerMatrix()),g.setDirty(),p.setBaseState(),g.bindFramebuffer.set(null)}}};class Lf{constructor(l,f){this.context=new be(l),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new mc,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,f){const g=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Jp(this,l));const b=this._terrain;this.transform.elevation=g?b:null,b.update(l,this.transform,f)}_updateFog(l){const f=l.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,b]=f.getFovAdjustedRange(this.transform._fov);if(g>b)return void(this.transform.fogCullDistSq=null);const w=g+.78*(b-g);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,f){if(this.width=l*o.exported.devicePixelRatio,this.height=f*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const l=this.context,f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const g=new o.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(o.EXTENT,0),g.emplaceBack(0,o.EXTENT),g.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(g,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const b=new o.StructArrayLayout2i4;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(b,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const w=new o.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(o.EXTENT,0,o.EXTENT,0),w.emplaceBack(0,o.EXTENT,0,o.EXTENT),w.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const M=new o.StructArrayLayout3ui6;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(M);const k=new o.StructArrayLayout1ui2;for(const K of[0,1,3,2,0])k.emplaceBack(K);this.debugIndexBuffer=l.createIndexBuffer(k),this.emptyTexture=new o.Texture(l,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=o.create();const L=this.context.gl;this.stencilClearMode=new o.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new kc(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,f.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,_f(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,f,g){if(!f||this.currentStencilSource===f.id||!l.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const L of g)if(this._tileClippingMaskIDs[L.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=f.id;const b=this.context,w=b.gl;this.nextStencilID+g.length>256&&this.clearStencil(),b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of g){const L=f.getTile(k),K=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:W,tileBoundsIndexBuffer:ee,tileBoundsSegments:le}=this.getTileBoundsBuffers(L);M.draw(b,w.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:w.ALWAYS,mask:0},K,255,w.KEEP,w.KEEP,w.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,_f(k.projMatrix),"$clipping",W,ee,le)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new o.StencilMode({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const f=this.context.gl;return new o.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,g=l.sort((M,k)=>k.overscaledZ-M.overscaledZ),b=g[g.length-1].overscaledZ,w=g[0].overscaledZ-b+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const M={};for(let k=0;k<w;k++)M[k+b]=new o.StencilMode({func:f.GEQUAL,mask:255},k+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=w,[M,g]}return[{[b]:o.StencilMode.disabled},g]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([l.CONSTANT_COLOR,l.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(l,f,g){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new o.DepthMode(g||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const g=this.style.order,b=this.style._sourceCaches;for(const L in b){const K=b[L];K.used&&K.prepare(this.context)}const w={},M={},k={};for(const L in b){const K=b[L];w[L]=K.getVisibleCoordinates(),M[L]=w[L].slice().reverse(),k[L]=K.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<g.length;L++)if(this.style._layers[g[L]].is3D()){this.opaquePassCutoff=L;break}if(this.terrain&&(this.terrain.updateTileBinding(k),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),o.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const L of g){const K=this.style._layers[L],W=l._getLayerSourceCache(K);if(!K.hasOffscreenPass()||K.isHidden(this.transform.zoom))continue;const ee=W?M[W.id]:void 0;(K.type==="custom"||K.isSky()||ee&&ee.length)&&this.renderLayer(this,W,K,ee)}if(this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[g[this.currentLayer]],K=l._getLayerSourceCache(L);if(L.isSky())continue;const W=K?M[K.id]:void 0;this._renderTileClippingMasks(L,K,W),this.renderLayer(this,K,L,W)}if(this.style.fog&&this.transform.projection.supportsFog&&function(L,K){const W=L.context,ee=W.gl,le=L.transform,Se=new o.DepthMode(ee.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ye=L.useProgram("globeAtmosphere",null,le.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),_e=o.globeToMercatorTransition(le.zoom),we=K.properties.get("color").toArray01(),pe=K.properties.get("high-color").toArray01(),Me=K.properties.get("space-color").toArray01PremultipliedAlpha(),Ee=o.identity$1([]);o.rotateY$1(Ee,Ee,-o.degToRad(le._center.lng)),o.rotateX$1(Ee,Ee,o.degToRad(le._center.lat)),o.rotateZ$1(Ee,Ee,le.angle),o.rotateX$1(Ee,Ee,-le._pitch);const Ye=o.fromQuat(new Float32Array(16),Ee),We=o.mapValue(K.properties.get("star-intensity"),0,1,0,.25),$e=5e-4,Ze=o.mapValue(K.properties.get("horizon-blend"),0,1,$e,.25),Ge=o.globeUseCustomAntiAliasing(L,W,le)&&Ze===$e?le.worldSize/(2*Math.PI*1.025)-1:le.globeRadius,Qe=L.frameCounter/1e3%1,ct=o.length(le.globeCenterInViewSpace),Zt=Math.sqrt(Math.pow(ct,2)-Math.pow(Ge,2)),at=Math.acos(Zt/ct),Dt=((en,Ct,Yt,Nt,ln,rn,yn,En,kn,Jn,_n,Bn,cr,jr)=>({u_frustum_tl:en,u_frustum_tr:Ct,u_frustum_br:Yt,u_frustum_bl:Nt,u_horizon:ln,u_transition:rn,u_fadeout_range:yn,u_color:En,u_high_color:kn,u_space_color:Jn,u_star_intensity:_n,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Bn,u_horizon_angle:cr,u_rotation_matrix:jr}))(le.frustumCorners.TL,le.frustumCorners.TR,le.frustumCorners.BR,le.frustumCorners.BL,le.frustumCorners.horizon,_e,Ze,we,pe,Me,We,Qe,at,Ye);L.prepareDrawProgram(W,ye);const $t=L.atmosphereBuffer;$t&&ye.draw(W,ee.TRIANGLES,Se,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,Dt,"skybox",$t.vertexBuffer,$t.indexBuffer,$t.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const L=this.style._layers[g[this.currentLayer]],K=l._getLayerSourceCache(L);L.isSky()&&this.renderLayer(this,K,L,K?M[K.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const L=this.style._layers[g[this.currentLayer]],K=l._getLayerSourceCache(L);if(L.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(L)){if(L.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const W=K?(L.type==="symbol"?k:M)[K.id]:void 0;this._renderTileClippingMasks(L,K,K?w[K.id]:void 0),this.renderLayer(this,K,L,W),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let L=null;o.values(this.style._layers).forEach(K=>{const W=l._getLayerSourceCache(K);W&&!K.isHidden(this.transform.zoom)&&(!L||L.getSource().maxzoom<W.getSource().maxzoom)&&(L=W)}),L&&this.options.showTileBoundaries&&nl.debug(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const K=L.transform.padding;tu(L,L.transform.height-(K.top||0),3,um),tu(L,K.bottom||0,3,Qs),dm(L,K.left||0,3,el),dm(L,L.transform.width-(K.right||0),3,cm);const W=L.transform.centerPoint;(function(ee,le,Se,ye){nu(ee,le-1,Se-10,2,20,ye),nu(ee,le-10,Se-1,20,2,ye)})(L,W.x,L.transform.height-W.y,Df)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}}renderLayer(l,f,g,b){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||b&&b.length)&&(this.id=g.id,this.gpuTimingStart(g),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(g.type)||nl[g.type](l,f,g,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let g=this.gpuTimers[l.id];g||(g=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),g.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,f=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),l.beginQueryEXT(l.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const f={};for(const g in l){const b=l[g],w=this.context.extTimerQuery,M=w.getQueryObjectEXT(b.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(b.query),f[g]=M}return f}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let g=0;for(const b of l)g+=f.getQueryObjectEXT(b,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(b);return g}translatePosMatrix(l,f,g,b,w){if(!g[0]&&!g[1])return l;const M=w?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(M){const K=Math.sin(M),W=Math.cos(M);g=[g[0]*W-g[1]*K,g[0]*K+g[1]*W]}const k=[w?g[0]:Te(f,g[0],this.transform.zoom),w?g[1]:Te(f,g[1],this.transform.zoom),0],L=new Float32Array(16);return o.translate(L,l,k),L}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const f=this.imageManager.getPattern(l.from.toString()),g=this.imageManager.getPattern(l.to.toString());return!f||!g}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,f=this.style&&this.style.fog,g=[];return this.terrain&&!this.terrain.renderingToTexture&&g.push("TERRAIN"),f&&!l&&f.getOpacity(this.transform.pitch)!==0&&g.push("FOG"),l&&g.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&g.push("OVERDRAW_INSPECTOR"),g}useProgram(l,f,g){this.cache=this.cache||{};const b=g||[],w=this.currentGlobalDefines().concat(b),M=wf.cacheKey(xc[l],l,w,f);return this.cache[M]||(this.cache[M]=new wf(this.context,l,xc[l],f,Qy[l],w)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,f,g){if(this.terrain&&this.terrain.renderingToTexture)return;const b=this.style.fog;if(b){const w=b.getOpacity(this.transform.pitch),M=((k,L,K,W,ee,le,Se,ye,_e,we,pe)=>{const Me=k.transform,Ee=L.properties.get("color").toArray01();Ee[3]=W;const Ye=k.frameCounter/1e3%1;return{u_fog_matrix:K?Me.calculateFogTileMatrix(K):k.identityMat,u_fog_range:L.getFovAdjustedRange(Me._fov),u_fog_color:Ee,u_fog_horizon_blend:L.properties.get("horizon-blend"),u_fog_temporal_offset:Ye,u_frustum_tl:ee,u_frustum_tr:le,u_frustum_br:Se,u_frustum_bl:ye,u_globe_pos:_e,u_globe_radius:we,u_viewport:pe,u_globe_transition:o.globeToMercatorTransition(Me.zoom),u_is_globe:+(Me.projection.name==="globe")}})(this,b,g,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);f.setFogUniformValues(l,M)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const l=this.context.gl,f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,f=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const b of g)f[b.key]=l[b.key]||new o.Tile(b,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class iu{constructor(l=0,f=0,g=0,b=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(g)||g<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=g,this.right=b}interpolate(l,f,g){return f.top!=null&&l.top!=null&&(this.top=o.number(l.top,f.top,g)),f.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,f.bottom,g)),f.left!=null&&l.left!=null&&(this.left=o.number(l.left,f.left,g)),f.right!=null&&l.right!=null&&(this.right=o.number(l.right,f.right,g)),this}getCenter(l,f){const g=o.clamp((this.left+l-this.right)/2,0,l),b=o.clamp((this.top+f-this.bottom)/2,0,f);return new o.pointGeometry(g,b)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new iu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ff(p,l){const f=o.getColumn(p,3);o.fromQuat(p,l),o.setColumn(p,3,f)}function rl(p,l){const f=o.identity$1([]);return o.rotateZ$1(f,f,-l),o.rotateX$1(f,f,-p),f}function il(p,l){const f=[p[0],p[1],0],g=[l[0],l[1],0];if(o.length(f)>=1e-15){const M=o.normalize([],f);o.scale$2(g,M,o.dot(g,M)),l[0]=g[0],l[1]=g[1]}const b=o.cross([],l,p);if(o.len(b)<1e-15)return null;const w=Math.atan2(-b[1],b[0]);return rl(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),w)}class fn{constructor(l,f){this.position=l,this.orientation=f}get position(){return this._position}set position(l){if(l){const f=l instanceof o.MercatorCoordinate?l:new o.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(f.x=o.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(l,f){if(this.orientation=null,!this.position)return;const g=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(l)):0,b=this.position,w=o.MercatorCoordinate.fromLngLat(l,g),M=[w.x-b.x,w.y-b.y,w.z-b.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=il(M,f)}setPitchBearing(l,f){this.orientation=rl(o.degToRad(l),o.degToRad(-f))}}class to{constructor(l,f){this._transform=o.identity([]),this.orientation=f,this.position=l}get mercatorPosition(){const l=this.position;return new o.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=o.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var f;l&&o.setColumn(this._transform,3,[(f=l)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||o.identity$1([]),l&&Ff(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,f){this._orientation=rl(l,f),Ff(this._transform,this._orientation)}forward(){const l=o.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=o.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=o.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,f){const g=new Float64Array(16);return o.invert(g,this.getWorldToCamera(l,f)),g}getWorldToCameraPosition(l,f,g){const b=this.position;o.scale$2(b,b,-l);const w=new Float64Array(16);return o.fromScaling(w,[g,g,g]),o.translate(w,w,b),w[10]*=f,w}getWorldToCamera(l,f){const g=new Float64Array(16),b=new Float64Array(4),w=this.position;return o.conjugate(b,this._orientation),o.scale$2(w,w,-l),o.fromQuat(g,b),o.translate(g,g,w),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=f,g[9]*=f,g[10]*=f,g[11]*=f,g}getCameraToClipPerspective(l,f,g,b){const w=new Float64Array(16);return o.perspective(w,l,f,g,b),w}getDistanceToElevation(l){const f=l===0?0:o.mercatorZfromAltitude(l,this.position[1]),g=this.forward();return(f-this.position[2])/g[2]}clone(){return new to([...this.position],[...this.orientation])}}function Bf(p,l){const f=ou(p.projection,p.zoom,p.width,p.height),g=function(w,M,k,L,K){const W=new o.LngLat(k.lng-180*Po,k.lat),ee=new o.LngLat(k.lng+180*Po,k.lat),le=w.project(W.lng,W.lat),Se=w.project(ee.lng,ee.lat),ye=-Math.atan2(Se.y-le.y,Se.x-le.x),_e=o.MercatorCoordinate.fromLngLat(k);_e.y=o.clamp(_e.y,-.999975,.999975);const we=_e.toLngLat(),pe=w.project(we.lng,we.lat),Me=o.MercatorCoordinate.fromLngLat(we);Me.x+=Po;const Ee=Me.toLngLat(),Ye=w.project(Ee.lng,Ee.lat),We=au(Ye.x-pe.x,Ye.y-pe.y,ye),$e=o.MercatorCoordinate.fromLngLat(we);$e.y+=Po;const Ze=$e.toLngLat(),Ge=w.project(Ze.lng,Ze.lat),Qe=au(Ge.x-pe.x,Ge.y-pe.y,ye),ct=Math.abs(We.x)/Math.abs(Qe.y),Zt=o.identity([]);o.rotateZ(Zt,Zt,-ye*(1-(K?0:L)));const at=o.identity([]);return o.scale(at,at,[1,1-(1-ct)*L,1]),at[4]=-Qe.x/Qe.y*L,o.rotateZ(at,at,ye),o.multiply(at,Zt,at),at}(p.projection,0,p.center,f,l),b=Nf(p);return o.scale(g,g,[b,b,1]),g}function Nf(p){const l=p.projection,f=ou(p.projection,p.zoom,p.width,p.height),g=$f(l,p.center),b=$f(l,o.LngLat.convert(l.center));return Math.pow(2,g*f+(1-f)*b)}function ou(p,l,f,g,b=1/0){const w=p.range;if(!w)return 0;const M=Math.min(b,Math.max(f,g)),k=Math.log(M/1024)/Math.LN2;return o.smoothstep(w[0]+k,w[1]+k,l)}const Po=1/4e4;function $f(p,l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),g=new o.LngLat(l.lng-180*Po,f),b=new o.LngLat(l.lng+180*Po,f),w=p.project(g.lng,f),M=p.project(b.lng,f),k=o.MercatorCoordinate.fromLngLat(g),L=o.MercatorCoordinate.fromLngLat(b),K=M.x-w.x,W=M.y-w.y,ee=L.x-k.x,le=L.y-k.y,Se=Math.sqrt((ee*ee+le*le)/(K*K+W*W));return Math.log(Se)/Math.LN2}function au(p,l,f){const g=Math.cos(f),b=Math.sin(f);return{x:p*g-l*b,y:p*b+l*g}}class su{constructor(l,f,g,b,w,M,k){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=g==null?0:g,this._maxPitch=b==null?60:b,this.setProjection(M),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new iu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new to,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new su(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(l||f)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const g=!_(f,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const f=l!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const f=-l*Math.PI/180;var g;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(g=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(b,w,M){var k=w[0],L=w[1],K=w[2],W=w[3],ee=Math.sin(M),le=Math.cos(M);b[0]=k*le+K*ee,b[1]=L*le+W*ee,b[2]=k*-ee+K*le,b[3]=L*-ee+W*le}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let b=0,w=0;for(let M=0;M<f.length;M++){const k=new o.pointGeometry(f[M][0]*this.width,g+f[M][1]*(this.height-g)),L=l.pointCoordinate(k);if(!L)continue;const K=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);b+=L[3]*K,w+=K}return w===0?NaN:b/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*f,b=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),M=Math.max(b-g,w);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let g;g=l.z<this._camera.position[2]?[f.x,f.y,f.z]:[l.x,l.y,l.z];const b=o.length(o.sub([],this._camera.position,g));return o.clamp(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let f=!1;if(l.orientation&&!o.exactEquals(l.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(l.orientation)),l.position){const g=[l.position.x,l.position.y,l.position.z];o.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,f=new fn;return f.position=new o.MercatorCoordinate(l[0],l[1],l[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(l){if(!o.length$1(l))return!1;o.normalize$1(l,l);const f=o.transformQuat([],[0,0,-1],l),g=o.transformQuat([],[0,-1,0],l);if(g[2]<0)return!1;const b=il(f,g);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(l){const f=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;l[2]=o.clamp(l[2],b/g,b/f),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,g){this._unmodified=!1,this._edgeInsets.interpolate(l,f,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new o.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const g=this.pointCoordinate(new o.pointGeometry(0,0)),b=this.pointCoordinate(new o.pointGeometry(this.width,0)),w=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),M=this.pointCoordinate(new o.pointGeometry(0,this.height)),k=Math.floor(Math.min(g.x,b.x,w.x,M.x)),L=Math.floor(Math.max(g.x,b.x,w.x,M.x)),K=1;for(let W=k-K;W<=L+K;W++)W!==0&&f.push(new o.UnwrappedTileID(W,l))}return f}coveringTiles(l){let f=this.coveringZoomLevel(l);const g=f,b=this.elevation&&!l.isTerrainDEM,w=this.projection.name==="mercator";if(l.minzoom!==void 0&&f<l.minzoom)return[];l.maxzoom!==void 0&&f>l.maxzoom&&(f=l.maxzoom);const M=this.locationCoordinate(this.center),k=this.center.lat,L=1<<f,K=[L*M.x,L*M.y,0],W=this.projection.name==="globe",ee=!W,le=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,ee),Se=W?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ye=L*o.mercatorZfromAltitude(1,this.center.lat),_e=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),we=[L*Se.x,L*Se.y,_e*(ee?1:ye)],pe=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),Me=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,Ee=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Ye=l.isTerrainDEM?-Ee:this._elevation?this._elevation.getMinElevationBelowMSL():0,We=this.projection.isReprojectedInTileSpace?Nf(this):1,$e=Ct=>{const Nt=new o.MercatorCoordinate(Ct.x+25e-6,Ct.y,Ct.z),ln=new o.MercatorCoordinate(Ct.x,Ct.y+25e-6,Ct.z),rn=Ct.toLngLat(),yn=Nt.toLngLat(),En=ln.toLngLat(),kn=this.locationCoordinate(rn),Jn=this.locationCoordinate(yn),_n=this.locationCoordinate(En),Bn=Math.hypot(Jn.x-kn.x,Jn.y-kn.y),cr=Math.hypot(_n.x-kn.x,_n.y-kn.y);return Math.sqrt(Bn*cr)*We/25e-6},Ze=Ct=>{const Yt=Ee,Nt=Ye;return{aabb:o.tileAABB(this,L,0,0,0,Ct,Nt,Yt,this.projection),zoom:0,x:0,y:0,minZ:Nt,maxZ:Yt,wrap:Ct,fullyVisible:!1}},Ge=[];let Qe=[];const ct=f,Zt=l.reparseOverscaled?g:f,at=Ct=>Ct*Ct,Dt=at((_e-this._centerAltitude)*ye),$t=Ct=>{if(!this._elevation||!Ct.tileID||!w)return;const Yt=this._elevation.getMinMaxForTile(Ct.tileID),Nt=Ct.aabb;Yt?(Nt.min[2]=Yt.min,Nt.max[2]=Yt.max,Nt.center[2]=(Nt.min[2]+Nt.max[2])/2):(Ct.shouldSplit=en(Ct),Ct.shouldSplit||(Nt.min[2]=Nt.max[2]=Nt.center[2]=this._centerAltitude))},en=Ct=>{if(Ct.zoom<Me)return!0;if(Ct.zoom===ct)return!1;if(Ct.shouldSplit!=null)return Ct.shouldSplit;const Yt=Ct.aabb.distanceX(we),Nt=Ct.aabb.distanceY(we);let ln=Dt,rn=1;if(W){ln=at(Ct.aabb.distanceZ(we));const En=Math.pow(2,Ct.zoom),kn=o.latFromMercatorY((Ct.y+1)/En),Jn=o.latFromMercatorY(Ct.y/En),_n=Math.min(Math.max(k,kn),Jn),Bn=o.circumferenceAtLatitude(_n)/o.circumferenceAtLatitude(k);if(rn=_n===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Bn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&Ct.zoom===ct-1&&Bn>=.9)return!0}else if(b&&(ln=at(Ct.aabb.distanceZ(we)*ye)),this.projection.isReprojectedInTileSpace&&g<=5){const En=Math.pow(2,Ct.zoom),kn=$e(new o.MercatorCoordinate((Ct.x+.5)/En,(Ct.y+.5)/En));rn=kn>.85?1:kn}const yn=Yt*Yt+Nt*Nt+ln;return yn<at((1<<ct-Ct.zoom)*pe*rn*((En,kn)=>{if(kn*at(.707)<En)return 1;const Jn=Math.sqrt(kn/En);return Jn/(1.4144271570014144+(Math.pow(1.1,Jn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ln,Dt),yn))};if(this.renderWorldCopies)for(let Ct=1;Ct<=3;Ct++)Ge.push(Ze(-Ct)),Ge.push(Ze(Ct));for(Ge.push(Ze(0));Ge.length>0;){const Ct=Ge.pop(),Yt=Ct.x,Nt=Ct.y;let ln=Ct.fullyVisible;if(!ln){const rn=Ct.aabb.intersects(le);if(rn===0)continue;ln=rn===2}if(Ct.zoom!==ct&&en(Ct))for(let rn=0;rn<4;rn++){const yn=(Yt<<1)+rn%2,En=(Nt<<1)+(rn>>1),kn={aabb:w?Ct.aabb.quadrant(rn):o.tileAABB(this,L,Ct.zoom+1,yn,En,Ct.wrap,Ct.minZ,Ct.maxZ,this.projection),zoom:Ct.zoom+1,x:yn,y:En,wrap:Ct.wrap,fullyVisible:ln,tileID:void 0,shouldSplit:void 0,minZ:Ct.minZ,maxZ:Ct.maxZ};b&&!W&&(kn.tileID=new o.OverscaledTileID(Ct.zoom+1===ct?Zt:Ct.zoom+1,Ct.wrap,Ct.zoom+1,yn,En),$t(kn)),Ge.push(kn)}else{const rn=Ct.zoom===ct?Zt:Ct.zoom;if(l.minzoom&&l.minzoom>rn)continue;const yn=K[0]-(.5+Yt+(Ct.wrap<<Ct.zoom))*(1<<f-Ct.zoom),En=K[1]-.5-Nt,kn=Ct.tileID?Ct.tileID:new o.OverscaledTileID(rn,Ct.wrap,Ct.zoom,Yt,Nt);Qe.push({tileID:kn,distanceSq:yn*yn+En*En})}}if(this.fogCullDistSq){const Ct=this.fogCullDistSq,Yt=this.horizonLineFromTop();Qe=Qe.filter(Nt=>{const ln=[0,0,0,1],rn=[o.EXTENT,o.EXTENT,0,1],yn=this.calculateFogTileMatrix(Nt.tileID.toUnwrapped());o.transformMat4$1(ln,ln,yn),o.transformMat4$1(rn,rn,yn);const En=o.getAABBPointSquareDist(ln,rn);if(En===0)return!0;let kn=!1;const Jn=this._elevation;if(Jn&&En>Ct&&Yt!==0){const _n=this.calculateProjMatrix(Nt.tileID.toUnwrapped());let Bn;l.isTerrainDEM||(Bn=Jn.getMinMaxForTile(Nt.tileID)),Bn||(Bn={min:Ye,max:Ee});const cr=o.furthestTileCorner(this.rotation),jr=[cr[0]*o.EXTENT,cr[1]*o.EXTENT,Bn.max];o.transformMat4(jr,jr,_n),kn=(1-jr[1])*this.height*.5<Yt}return En<Ct||kn})}return Qe.sort((Ct,Yt)=>Ct.distanceSq-Yt.distanceSq).map(Ct=>Ct.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),g=this.projection.project(l.lng,f);return new o.pointGeometry(g.x*this.worldSize,g.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(l,f){let g,b;const w=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;g=(f.x-w.x)/k,b=(f.y-w.y)/k}else{const k=this.pointCoordinate(f),L=this.pointCoordinate(w);g=k.x-L.x,b=k.y-L.y}const M=this.locationCoordinate(l);this.setLocation(new o.MercatorCoordinate(M.x-g,M.y-b))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,f){const g=f?o.mercatorZfromAltitude(f,l.lat):void 0,b=this.projection.project(l.lng,l.lat);return new o.MercatorCoordinate(b.x,b.y,g)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,f){const g=f!=null?f:this._centerAltitude,b=[l.x,l.y,0,1],w=[l.x,l.y,1,1];o.transformMat4$1(b,b,this.pixelMatrixInverse),o.transformMat4$1(w,w,this.pixelMatrixInverse);const M=w[3];o.scale$1(b,b,1/b[3]),o.scale$1(w,w,1/M);const k=b[2],L=w[2];return{p0:b,p1:w,t:k===L?0:(g-k)/(L-k)}}screenPointToMercatorRay(l){const f=[l.x,l.y,0,1],g=[l.x,l.y,1,1];return o.transformMat4$1(f,f,this.pixelMatrixInverse),o.transformMat4$1(g,g,this.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),o.scale$1(g,g,1/g[3]),f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,g[2]=o.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,o.scale$1(f,f,1/this.worldSize),o.scale$1(g,g,1/this.worldSize),new o.Ray([f[0],f[1],f[2]],o.normalize([],o.sub([],g,f)))}rayIntersectionCoordinate(l){const{p0:f,p1:g,t:b}=l,w=o.mercatorZfromAltitude(f[2],this._center.lat),M=o.mercatorZfromAltitude(g[2],this._center.lat);return new o.MercatorCoordinate(o.number(f[0],g[0],b)/this.worldSize,o.number(f[1],g[1],b)/this.worldSize,o.number(w,M,b))}pointCoordinate(l,f=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,f)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let f=this.projection.pointCoordinate3D(this,l.x,l.y);if(f)return new o.MercatorCoordinate(f[0],f[1],f[2]);let g=0,b=this.horizonLineFromTop();if(l.y>b)return this.pointCoordinate(l);const w=.02*b,M=l.clone();for(let k=0;k<10&&b-g>w;k++){M.y=o.number(g,b,.66);const L=this.projection.pointCoordinate3D(this,M.x,M.y);L?(b=M.y,f=L):g=M.y}return f?new o.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,f){const g=f&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,b=[l.x*this.worldSize,l.y*this.worldSize,g+l.toAltitude(),1];return o.transformMat4$1(b,b,this.pixelMatrix),b[3]>0?new o.pointGeometry(b[0]/b[3],b[1]/b[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(l,f){const g=new o.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),b=new o.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),w=new o.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),M=new o.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let k=this.pointCoordinate(g,l),L=this.pointCoordinate(b,l);const K=this.pointCoordinate(w,f),W=this.pointCoordinate(M,f),ee=(le,Se)=>(Se.y-le.y)/(Se.x-le.x);return k.y>1&&L.y>=0?k=new o.MercatorCoordinate((1-W.y)/ee(W,k)+W.x,1):k.y<0&&L.y<=1&&(k=new o.MercatorCoordinate(-W.y/ee(W,k)+W.x,0)),L.y>1&&k.y>=0?L=new o.MercatorCoordinate((1-K.y)/ee(K,L)+K.x,1):L.y<0&&k.y<=1&&(L=new o.MercatorCoordinate(-K.y/ee(K,L)+K.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(k)).extend(this.coordinateLocation(L)).extend(this.coordinateLocation(W)).extend(this.coordinateLocation(K))}_getBounds3D(){const l=this.elevation;if(!l.visibleDemTiles.length)return this._getBounds(0,0);const f=l.visibleDemTiles.reduce((g,b)=>{if(b.dem){const w=b.dem.tree;g.min=Math.min(g.min,w.minimums[0]),g.max=Math.max(g.max,w.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBounds(f.min*l.exaggeration(),f.max*l.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(l=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-f*(1-this._horizonShift);return l?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,f){return this.projection.createTileMatrix(this,f,l)}calculateDistanceTileData(l){const f=l.key,g=this._distanceTileDataCache;if(g[f])return g[f];const b=l.canonical,w=1/this.height,M=this.cameraWorldSize/this.zoomScale(b.z),k=(b.x+Math.pow(2,b.z)*l.wrap)*M,L=b.y*M,K=this.point,W=this.angle,ee=Math.sin(-W),le=-Math.cos(-W);return g[f]={bearing:[ee,le],center:[(K.x-k)*w,(K.y-L)*w],scale:M/o.EXTENT*w},g[f]}calculateFogTileMatrix(l){const f=l.key,g=this._fogTileMatrixCache;if(g[f])return g[f];const b=this.projection.createTileMatrix(this,this.cameraWorldSize,l);return o.multiply(b,this.worldToFogMatrix,b),g[f]=new Float32Array(b),g[f]}calculateProjMatrix(l,f=!1){const g=l.key,b=f?this._alignedProjMatrixCache:this._projMatrixCache;if(b[g])return b[g];const w=this.calculatePosMatrix(l,this.worldSize);return o.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,w),b[g]=new Float32Array(w),b[g]}calculatePixelsToTileUnitsMatrix(l){const f=l.tileID.key,g=this._pixelsToTileUnitsCache;if(g[f])return g[f];const b=function(w,M){const{scale:k}=w.tileTransform,L=k*o.EXTENT/(w.tileSize*Math.pow(2,M.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return K=new Float32Array(4),le=(W=M.inverseAdjustmentMatrix)[1],Se=W[2],ye=W[3],we=(ee=[L,L])[1],K[0]=W[0]*(_e=ee[0]),K[1]=le*_e,K[2]=Se*we,K[3]=ye*we,K;var K,W,ee,le,Se,ye,_e,we}(l,this);return g[f]=b,g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(f),b=this._camera.forward(),w=o.mercatorZfromAltitude(1,this._center.lat);g[2]/=w,b[2]/=w,o.normalize(b,b);const M=l.raycast(g,b,l.exaggeration());if(M){const k=o.scaleAndAdd([],g,b,M),L=new o.MercatorCoordinate(k[0],k[1],o.mercatorZfromAltitude(k[2],o.latFromMercatorY(k[1]))),K=(L.z+o.length([L.x-g[0],L.y-g[1],L.z-g[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const l=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(f),b=l.getAtPointOrZero(new o.MercatorCoordinate(...g)),w=this._minimumHeightOverTerrain()*Math.cos(o.degToRad(this._maxPitch)),M=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*b;if(M<w){const k=this.locationCoordinate(this._center,this._centerAltitude),L=[k.x-g[0],k.y-g[1],k.z-g[2]],K=o.length(L);L[2]-=(w-M)/this._pixelsPerMercatorPixel;const W=o.length(L);if(W===0)return;o.scale$2(L,L,K/W*this._pixelsPerMercatorPixel),this._camera.position=[k.x-L[0],k.y-L[1],k.z*this._pixelsPerMercatorPixel-L[2]],this._camera.orientation=il(L,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const le=this.center;return le.lat=o.clamp(le.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(le.lng=o.clamp(le.lng,this.minLng,this.maxLng)),this.center=le,void(this._constraining=!1)}const f=this._unmodified,{x:g,y:b}=this.point;let w=0,M=g,k=b;const L=this.width/2,K=this.height/2,W=this.worldMinY*this.scale,ee=this.worldMaxY*this.scale;if(b-K<W&&(k=W+K),b+K>ee&&(k=ee-K),ee-W<this.height&&(w=Math.max(w,this.height/(ee-W)),k=(ee+W)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const le=this.worldMinX*this.scale,Se=this.worldMaxX*this.scale,ye=this.worldSize/2-(le+Se)/2;M=(g+ye+this.worldSize)%this.worldSize-ye,M-L<le&&(M=le+L),M+L>Se&&(M=Se-L),Se-le<this.width&&(w=Math.max(w,this.width/(Se-le)),M=(Se+le)/2)}M===g&&k===b||(this.center=this.unproject(new o.pointGeometry(M,k))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCameraAltitude(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const g=ou(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?f:1),w=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);w[8]=2*-l.x/this.width,w[9]=2*l.y/this.height;let M=o.mul([],w,b);if(this.projection.isReprojectedInTileSpace){const We=this.locationCoordinate(this.center),$e=o.identity([]);o.translate($e,$e,[We.x*this.worldSize,We.y*this.worldSize,0]),o.multiply($e,$e,Bf(this)),o.translate($e,$e,[-We.x*this.worldSize,-We.y*this.worldSize,0]),o.multiply(M,M,$e),this.inverseAdjustmentMatrix=function(Ze){const Ge=Bf(Ze,!0);return te([],[Ge[0],Ge[1],Ge[4],Ge[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],M,[this.worldSize,this.worldSize,this.worldSize/f,1]),this.projMatrix=M,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const k=o.invert([],w);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(k,this.horizonLineFromTop(),this.height);const L=new Float32Array(16);o.identity(L),o.scale(L,L,[1,-1,1]),o.rotateX(L,L,this._pitch),o.rotateZ(L,L,this.angle);const K=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),W=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;K[8]=2*-l.x/this.width,K[9]=2*(l.y+W)/this.height,this.skyboxMatrix=o.multiply(L,K,L);const ee=this.point,le=ee.x,Se=ee.y,ye=this.width%2/2,_e=this.height%2/2,we=Math.cos(this.angle),pe=Math.sin(this.angle),Me=le-Math.round(le)+we*ye+pe*_e,Ee=Se-Math.round(Se)+we*_e+pe*ye,Ye=new Float64Array(M);if(o.translate(Ye,Ye,[Me>.5?Me-1:Me,Ee>.5?Ee-1:Ee,0]),this.alignedProjMatrix=Ye,M=o.create(),o.scale(M,M,[this.width/2,-this.height/2,1]),o.translate(M,M,[1,-1,0]),this.labelPlaneMatrix=M,M=o.create(),o.scale(M,M,[1,-1,1]),o.translate(M,M,[-1,-1,0]),o.scale(M,M,[2/this.width,2/this.height,1]),this.glCoordMatrix=M,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},M=o.invert(new Float64Array(16),this.pixelMatrix),!M)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=M,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const We=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(We,We,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=M;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSize,f=this.cameraPixelsPerMeter,g=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,f];o.scale$2(w,w,b),o.scale$2(g,g,-1),o.multiply$2(g,g,w);const M=o.create();o.translate(M,M,g),o.scale(M,M,w),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,f,b)}_computeCameraPosition(l){const f=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),b=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-l/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-g[0]*w,b.y/this.worldSize-g[1]*w,l/this.worldSize*this._centerAltitude-g[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=l[2];let b=1;g>0&&(b=Math.min((f-this._camera.position[2])/g,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,l,b),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const l=this._camera.position,f=this._camera.forward(),{pitch:g,bearing:b}=this._camera.getPitchBearing(),w=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),k=Math.max((l[2]-w)/Math.cos(g),M),L=this._zoomFromMercatorZ(k);o.scaleAndAdd(l,l,f,k),this._pitch=o.clamp(g,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(b,-Math.PI,Math.PI),this._setZoom(o.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,f){const g=Math.min(l.x,f.x),b=Math.max(l.x,f.x),w=Math.min(l.y,f.y),M=Math.max(l.y,f.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new o.pointGeometry(g,w),new o.pointGeometry(b,M),new o.pointGeometry(g,M),new o.pointGeometry(b,w)],L=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const W of k){const ee=this.pointRayIntersection(W);if(ee.t<0)return!0;const le=this.rayIntersectionCoordinate(ee);if(le.x<L||le.y<0||le.x>K||le.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,f){const g=o.length(o.sub([],this._camera.position,l)),b=this._zoomFromMercatorZ(g)+f;return g-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const l=function(f,g){const b=[f[0],f[1],f[2],1];o.transformMat4$1(b,b,g);const w=Math.max(b[3],1e-6);return[b[0]/w,b[1]/w,b[2]/w,w]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,l))}}getCameraToCenterDistance(l){const f=ou(l,this.zoom,this.width,this.height,1024),g=l.pixelSpaceConversion(this.center.lat,this.worldSize,f);return .5/Math.tan(.5*this._fov)*this.height*g}}function lu(p,l){let f=!1,g=null;const b=()=>{g=null,f&&(p(),g=setTimeout(b,l),f=!1)};return()=>(f=!0,g||b(),g)}class fm{constructor(l){this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=lu(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const f=jf(l);if(this._hashName){const g=this._hashName;let b=!1;const w=o.window.location.hash.slice(1).split("&").map(M=>{const k=M.split("=")[0];return k===g?(b=!0,`${k}=${f}`):M}).filter(M=>M);return b||w.push(`${g}=${f}`),`#${w.join("&")}`}return`#${f}`}_getCurrentHash(){const l=o.window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(f=g)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(g=>isNaN(g))){const g=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(f[3]||0):l.getBearing();return l.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:g,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,l)}}function jf(p,l){const f=p.getCenter(),g=Math.round(100*p.getZoom())/100,b=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,b),M=Math.round(f.lng*w)/w,k=Math.round(f.lat*w)/w,L=p.getBearing(),K=p.getPitch();let W=l?`/${M}/${k}/${g}`:`${g}/${k}/${M}`;return(L||K)&&(W+="/"+Math.round(10*L)/10),K&&(W+=`/${Math.round(K)}`),W}const aa={linearity:.3,easing:o.bezier(0,0,.3,1)},t_=o.extend({deceleration:2500,maxSpeed:1400},aa),n_=o.extend({deceleration:20,maxSpeed:1400},aa),hm=o.extend({deceleration:1e3,maxSpeed:360},aa),Oc=o.extend({deceleration:1e3,maxSpeed:90},aa);class Vf{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=o.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)f.zoom+=w.zoomDelta||0,f.bearing+=w.bearingDelta||0,f.pitch+=w.pitchDelta||0,w.panDelta&&f.pan._add(w.panDelta),w.around&&(f.around=w.around),w.pinchAround&&(f.pinchAround=w.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const w=cu(f.pan.mag(),g,o.extend({},t_,l||{}));b.offset=f.pan.mult(w.amount/f.pan.mag()),b.center=this._map.transform.center,uu(b,w)}if(f.zoom){const w=cu(f.zoom,g,n_);b.zoom=this._map.transform.zoom+w.amount,uu(b,w)}if(f.bearing){const w=cu(f.bearing,g,hm);b.bearing=this._map.transform.bearing+o.clamp(w.amount,-179,179),uu(b,w)}if(f.pitch){const w=cu(f.pitch,g,Oc);b.pitch=this._map.transform.pitch+w.amount,uu(b,w)}if(b.zoom||b.bearing){const w=f.pinchAround===void 0?f.around:f.pinchAround;b.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function uu(p,l){(!p.duration||p.duration<l.duration)&&(p.duration=l.duration,p.easing=l.easing)}function cu(p,l,f){const{maxSpeed:g,linearity:b,deceleration:w}=f,M=o.clamp(p*b/(l/1e3),-g,g),k=Math.abs(M)/(w*b);return{easing:f.easing,duration:1e3*k,amount:M*(k/2)}}class Ti extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,g,b={}){const w=q(f.getCanvasContainer(),g),M=f.unproject(w);super(l,o.extend({point:w,lngLat:M,originalEvent:g},b)),this._defaultPrevented=!1,this.target=f}}class ol extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,g){const b=l==="touchend"?g.changedTouches:g.touches,w=V(f.getCanvasContainer(),b),M=w.map(L=>f.unproject(L)),k=w.reduce((L,K,W,ee)=>L.add(K.div(ee.length)),new o.pointGeometry(0,0));super(l,{points:w,point:k,lngLats:M,lngLat:f.unproject(k),originalEvent:g}),this._defaultPrevented=!1}}class pm extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,g){super(l,{originalEvent:g}),this._defaultPrevented=!1}}class mm{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new pm(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new Ti(l.type,this._map,l))}mouseup(l){this._map.fire(new Ti(l.type,this._map,l))}preclick(l){const f=o.extend({},l);f.type="preclick",this._map.fire(new Ti(f.type,this._map,f))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(l),this._map.fire(new Ti(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new Ti(l.type,this._map,l))}mouseover(l){this._map.fire(new Ti(l.type,this._map,l))}mouseout(l){this._map.fire(new Ti(l.type,this._map,l))}touchstart(l){return this._firePreventable(new ol(l.type,this._map,l))}touchmove(l){this._map.fire(new ol(l.type,this._map,l))}touchend(l){this._map.fire(new ol(l.type,this._map,l))}touchcancel(l){this._map.fire(new ol(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vm{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new Ti(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Ti(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gm{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&l.button===0&&(F(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const g=f;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=g,this._box||(this._box=P("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const w=Math.min(b.x,g.x),M=Math.max(b.x,g.x),k=Math.min(b.y,g.y),L=Math.max(b.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${w}px,${k}px)`,this._box.style.width=M-w+"px",this._box.style.height=L-k+"px")})}mouseupWindow(l,f){if(!this._active||l.button!==0)return;const g=this._startPos,b=f;if(this.reset(),G(),g.x!==b.x||g.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(g,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),N(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new o.Event(l,{originalEvent:f}))}}function Dc(p,l){const f={};for(let g=0;g<p.length;g++)f[p[g].identifier]=l[g];return f}class al{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,f,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),g.length===this.numTouches&&(this.centroid=function(b){const w=new o.pointGeometry(0,0);for(const M of b)w._add(M);return w.div(b.length)}(f),this.touches=Dc(g,f)))}touchmove(l,f,g){if(this.aborted||!this.centroid)return;const b=Dc(g,f);for(const w in this.touches){const M=this.touches[w],k=b[w];(!k||k.dist(M)>30)&&(this.aborted=!0)}}touchend(l,f,g){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Rc{constructor(l){this.singleTap=new al(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,f,g){this.singleTap.touchstart(l,f,g)}touchmove(l,f,g){this.singleTap.touchmove(l,f,g)}touchend(l,f,g){const b=this.singleTap.touchend(l,f,g);if(b){const w=l.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(b)<30;if(w&&M||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class ym{constructor(){this._zoomIn=new Rc({numTouches:1,numTaps:2}),this._zoomOut=new Rc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,g){this._zoomIn.touchstart(l,f,g),this._zoomOut.touchstart(l,f,g)}touchmove(l,f,g){this._zoomIn.touchmove(l,f,g),this._zoomOut.touchmove(l,f,g)}touchend(l,f,g){const b=this._zoomIn.touchend(l,f,g),w=this._zoomOut.touchend(l,f,g);return b?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(b)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _m={0:1,2:2};class zc{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const g=Z(l);this._correctButton(l,g)&&(this._lastPoint=f,this._eventButton=g)}mousemoveWindow(l,f){const g=this._lastPoint;if(g){if(l.preventDefault(),this._eventButton!=null&&function(b,w){const M=_m[w];return b.buttons===void 0||(b.buttons&M)!==M}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(g,f)}}mouseupWindow(l){this._lastPoint&&Z(l)===this._eventButton&&(this._moved&&G(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xm extends zc{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return f===0&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class Uf extends zc{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const g=.8*(f.x-l.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(l){l.preventDefault()}}class yi extends zc{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const g=-.5*(f.y-l.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(l){l.preventDefault()}}class r_{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(l,f,g){return this._calculateTransform(l,f,g)}touchmove(l,f,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,f,g)}}touchend(l,f,g){this._calculateTransform(l,f,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,g){g.length>0&&(this._active=!0);const b=Dc(g,f),w=new o.pointGeometry(0,0),M=new o.pointGeometry(0,0);let k=0;for(const K in b){const W=b[K],ee=this._touches[K];ee&&(w._add(W),M._add(W.sub(ee)),k++,b[K]=W)}if(this._touches=b,k<this._minTouches||!M.mag())return;const L=M.div(k);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(k),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=P("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Lc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,f,g){return{}}touchstart(l,f,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,g){const b=this._firstTwoTouches;if(!b)return;l.preventDefault();const[w,M]=b,k=Fc(g,f,w),L=Fc(g,f,M);if(!k||!L)return;const K=this._aroundCenter?null:k.add(L).div(2);return this._move([k,L],K,l)}touchend(l,f,g){if(!this._firstTwoTouches)return;const[b,w]=this._firstTwoTouches,M=Fc(g,f,b),k=Fc(g,f,w);M&&k||(this._active&&G(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fc(p,l,f){for(let g=0;g<p.length;g++)if(p[g].identifier===f)return l[g]}function bm(p,l){return Math.log(p/l)/Math.LN2}class sa extends Lc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const g=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(bm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:bm(this._distance,g),pinchAround:f}}}function Kf(p,l){return 180*p.angleWith(l)/Math.PI}class sl extends Lc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const g=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Kf(this._vector,g),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,g=Kf(l,this._startVector);return Math.abs(g)<f}}function mo(p){return Math.abs(p.y)>Math.abs(p.x)}class Bc extends Lc{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,mo(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,g){const b=this._lastPoints;if(!b)return;const w=l[0].sub(b[0]),M=l[1].sub(b[1]);return this._map._cooperativeGestures&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(w,M,g.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+M.y)/2*-.5})}gestureBeginsVertically(l,f,g){if(this._valid!==void 0)return this._valid;const b=l.mag()>=2,w=f.mag()>=2;if(!b&&!w)return;if(!b||!w)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const M=l.y>0==f.y>0;return mo(l)&&mo(f)&&M}}const pn={panStep:100,bearingStep:15,pitchStep:10};class wm{constructor(){const l=pn;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,g=0,b=0,w=0,M=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?g=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?g=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?b=1:(l.preventDefault(),M=-1);break;case 40:l.shiftKey?b=-1:(l.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(g=0,b=0),{cameraAnimation:k=>{const L=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:Cm,zoom:f?Math.round(L)+f*(l.shiftKey?2:1):L,bearing:k.getBearing()+g*this._bearingStep,pitch:k.getPitch()+b*this._pitchStep,offset:[-w*this._panStep,-M*this._panStep],center:k.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Cm(p){return p*(2-p)}const ll=4.000244140625;class du{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const g=o.exported.now(),b=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,f!==0&&f%ll==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=q(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform,f=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>ll?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&K!==0&&(K=1/K);const W=f(),ee=Math.pow(2,W),le=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):ee;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(le*K))),this._type==="wheel"&&(this._startZoom=W,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:f(),b=this._startZoom,w=this._easing;let M,k=!1;if(this._type==="wheel"&&b&&w){const L=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),K=w(L);M=o.number(b,g,K),L<1?this._frameId||(this._frameId=!0):k=!0}else M=g,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:M-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=o.ease;if(this._prevEase){const g=this._prevEase,b=(o.exported.now()-g.start)/g.duration,w=g.easing(b+.01)-g.easing(b),M=.27/Math.sqrt(w*w+1e-4)*.01,k=Math.sqrt(.0729-M*M);f=o.bezier(M,k,.25,1)}return this._prevEase={start:o.exported.now(),duration:l,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=P("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Sm{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Tm{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,f){return l.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(l.shiftKey?-1:1),around:g.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Em{constructor(){this._tap=new Rc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,f,g){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=f[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(l,f,g))}touchmove(l,f,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const b=f[0],w=b.y-this._swipePoint.y;return this._swipePoint=b,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,f,g)}touchend(l,f,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(l,f,g)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Im{constructor(l,f,g){this._el=l,this._mousePan=f,this._touchPan=g}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Pm{constructor(l,f,g){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Am{constructor(l,f,g,b){this._el=l,this._touchZoom=f,this._touchRotate=g,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const fu=p=>p.zoom||p.drag||p.pitch||p.rotate;class Nc extends o.Event{}class Gf{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,f){const g=o.sub([],f,l);this.radius=o.length(g[2]<0?o.div([],g,this.constants):[g[0],g[1],0])}projectRay(l){o.div(l,l,this.constants),o.normalize(l,l),o.mul$1(l,l,this.constants);const f=o.scale$2([],l,this.radius);if(f[2]>0){const g=o.scale$2([],[0,0,1],o.dot(f,[0,0,1])),b=o.scale$2([],o.normalize([],[f[0],f[1],0]),this.radius),w=o.add([],f,o.scale$2([],o.sub([],o.add([],b,g),f),2));f[0]=w[0],f[1]=w[1]}return f}}function cs(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Mm{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Vf(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Gf,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),o.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[b,w,M]of this._listeners)b.addEventListener(w,b===o.window.document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[l,f,g]of this._listeners)l.removeEventListener(f,l===o.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(l){const f=this._map,g=f.getCanvasContainer();this._add("mapEvent",new mm(f,l));const b=f.boxZoom=new gm(f,l);this._add("boxZoom",b);const w=new ym,M=new Tm;f.doubleClickZoom=new Sm(M,w),this._add("tapZoom",w),this._add("clickZoom",M);const k=new Em;this._add("tapDragZoom",k);const L=f.touchPitch=new Bc(f);this._add("touchPitch",L);const K=new Uf(l),W=new yi(l);f.dragRotate=new Pm(l,K,W),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",W,["mouseRotate"]);const ee=new xm(l),le=new r_(f,l);f.dragPan=new Im(g,ee,le),this._add("mousePan",ee),this._add("touchPan",le,["touchZoom","touchRotate"]);const Se=new sl,ye=new sa;f.touchZoomRotate=new Am(g,ye,Se,k),this._add("touchRotate",Se,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),this._add("blockableMapEvent",new vm(f));const _e=f.scrollZoom=new du(f,this);this._add("scrollZoom",_e,["mousePan"]);const we=f.keyboard=new wm;this._add("keyboard",we);for(const pe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[pe]&&f[pe].enable(l[pe])}_add(l,f,g){this._handlers.push({handlerName:l,handler:f,allowed:g}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!fu(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,f,g){for(const b in l)if(b!==g&&(!f||f.indexOf(b)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const g of l)this._el.contains(g.target)&&f.push(g);return f}handleEvent(l,f){this._updatingCamera=!0;const g=l.type==="renderFrame",b=g?void 0:l,w={needsRenderFrame:!1},M={},k={},L=l.touches?this._getMapTouches(l.touches):void 0,K=L?V(this._el,L):g?void 0:q(this._el,l);for(const{handlerName:le,handler:Se,allowed:ye}of this._handlers){if(!Se.isEnabled())continue;let _e;this._blockedByActive(k,ye,le)?Se.reset():Se[f||l.type]&&(_e=Se[f||l.type](l,K,L),this.mergeHandlerResult(w,M,_e,le,b),_e&&_e.needsRenderFrame&&this._triggerRenderFrame()),(_e||Se.isActive())&&(k[le]=Se)}const W={};for(const le in this._previousActiveHandlers)k[le]||(W[le]=b);this._previousActiveHandlers=k,(Object.keys(W).length||cs(w))&&(this._changes.push([w,M,W]),this._triggerRenderFrame()),(Object.keys(k).length||cs(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ee}=w;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))}mergeHandlerResult(l,f,g,b,w){if(!g)return;o.extend(l,g);const M={handlerName:b,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(f.zoom=M),g.panDelta!==void 0&&(f.drag=M),g.pitchDelta!==void 0&&(f.pitch=M),g.bearingDelta!==void 0&&(f.rotate=M)}_applyChanges(){const l={},f={},g={};for(const[b,w,M]of this._changes)b.panDelta&&(l.panDelta=(l.panDelta||new o.pointGeometry(0,0))._add(b.panDelta)),b.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(l.around=b.around),b.aroundCoord!==void 0&&(l.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(l.pinchAround=b.pinchAround),b.noInertia&&(l.noInertia=b.noInertia),o.extend(f,w),o.extend(g,M);this._updateMapTransform(l,f,g),this._changes=[]}_updateMapTransform(l,f,g){const b=this._map,w=b.transform,M=Me=>[Me.x,Me.y,Me.z];if((Me=>{const Ee=this._eventsInProgress.drag;return Ee&&!this._handlersById[Ee.handlerName].isActive()})()&&!cs(l)){const Me=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",Me!==w.zoom&&this._map._update(!0)}if(!cs(l))return void this._fireEvents(f,g,!0);let{panDelta:k,zoomDelta:L,bearingDelta:K,pitchDelta:W,around:ee,aroundCoord:le,pinchAround:Se}=l;Se!==void 0&&(ee=Se),(Me=>f.drag&&!this._eventsInProgress.drag)()&&ee&&(this._dragOrigin=M(w.pointCoordinate3D(ee)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",b._stop(!0),ee=ee||b.transform.centerPoint,K&&(w.bearing+=K),W&&(w.pitch+=W),w._updateCameraState();const ye=[0,0,0];if(k)if(w.projection.name==="mercator"){const Me=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(ee).dir),Ee=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(ee.sub(k)).dir);ye[0]=Ee[0]-Me[0],ye[1]=Ee[1]-Me[1]}else{const Me=w.pointCoordinate(ee);if(w.projection.name==="globe"){k=k.rotate(-w.angle);const Ee=w._pixelsPerMercatorPixel/w.worldSize;ye[0]=-k.x*o.mercatorScale(o.latFromMercatorY(Me.y))*Ee,ye[1]=-k.y*o.mercatorScale(w.center.lat)*Ee}else{const Ee=w.pointCoordinate(ee.sub(k));Me&&Ee&&(ye[0]=Ee.x-Me.x,ye[1]=Ee.y-Me.y)}}const _e=w.zoom,we=[0,0,0];if(L){const Me=M(le||w.pointCoordinate3D(ee)),Ee={dir:o.normalize([],o.sub([],Me,w._camera.position))};if(Ee.dir[2]<0){const Ye=w.zoomDeltaToMovement(Me,L);o.scale$2(we,Ee.dir,Ye)}}const pe=o.add(ye,ye,we);w._translateCameraConstrained(pe),L&&Math.abs(w.zoom-_e)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,g,!0)}_fireEvents(l,f,g){const b=fu(this._eventsInProgress),w=fu(l),M={};for(const W in l){const{originalEvent:ee}=l[W];this._eventsInProgress[W]||(M[`${W}start`]=ee),this._eventsInProgress[W]=l[W]}!b&&w&&this._fireEvent("movestart",w.originalEvent);for(const W in M)this._fireEvent(W,M[W]);w&&this._fireEvent("move",w.originalEvent);for(const W in l){const{originalEvent:ee}=l[W];this._fireEvent(W,ee)}const k={};let L;for(const W in this._eventsInProgress){const{handlerName:ee,originalEvent:le}=this._eventsInProgress[W];this._handlersById[ee].isActive()||(delete this._eventsInProgress[W],L=f[ee]||le,k[`${W}end`]=L)}for(const W in k)this._fireEvent(W,k[W]);const K=fu(this._eventsInProgress);if(g&&(b||w)&&!K){this._updatingCamera=!0;const W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;W?(ee(W.bearing||this._map.getBearing())&&(W.bearing=0),this._map.easeTo(W,{originalEvent:L})):(this._map.fire(new o.Event("moveend",{originalEvent:L})),ee(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new o.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Nc("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Hf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class km extends o.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,g){return l=o.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,o.extend({offset:l},f),g)}panTo(l,f,g){return this.easeTo(o.extend({center:l},f),g)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,g){return this.easeTo(o.extend({zoom:l},f),g)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,g){return this.easeTo(o.extend({bearing:l},f),g)}resetNorth(l,f){return this.rotateTo(0,o.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){this.transform.projection.name==="globe"&&o.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),l=o.LngLatBounds.convert(l);const g=f&&f.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),g,f)}_extendCameraOptions(l){const f={top:0,bottom:0,right:0,left:0};if(typeof(l=o.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const g=l.padding;l.padding={top:g,bottom:g,right:g,left:g}}return l.padding=o.extend(f,l.padding),l}_cameraForBoxAndBearing(l,f,g,b){const w=this._extendCameraOptions(b),M=this.transform,k=M.padding,L=M.project(o.LngLat.convert(l)),K=M.project(o.LngLat.convert(f)),W=new o.pointGeometry(L.x,K.y),ee=new o.pointGeometry(K.x,L.y),le=-o.degToRad(g),Se=L.rotate(le),ye=K.rotate(le),_e=W.rotate(le),we=ee.rotate(le),pe=new o.pointGeometry(Math.max(Se.x,ye.x,_e.x,we.x),Math.max(Se.y,ye.y,_e.y,we.y)),Me=new o.pointGeometry(Math.min(Se.x,ye.x,_e.x,we.x),Math.min(Se.y,ye.y,_e.y,we.y)),Ee=pe.sub(Me),Ye=(M.width-((k.left||0)+(k.right||0)+w.padding.left+w.padding.right))/Ee.x,We=(M.height-((k.top||0)+(k.bottom||0)+w.padding.top+w.padding.bottom))/Ee.y;if(We<0||Ye<0)return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const $e=Math.min(M.scaleZoom(M.scale*Math.min(Ye,We)),w.maxZoom),Ze=typeof w.offset.x=="number"&&typeof w.offset.y=="number"?new o.pointGeometry(w.offset.x,w.offset.y):o.pointGeometry.convert(w.offset),Ge=new o.pointGeometry((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(g*Math.PI/180),Qe=Ze.add(Ge).mult(M.scale/M.zoomScale($e));return{center:M.unproject(L.add(K).div(2).sub(Qe)),zoom:$e,bearing:g}}_cameraForBox(l,f,g,b,w){const M=this._extendCameraOptions(w);g=g||0,b=b||0,l=o.LngLat.convert(l),f=o.LngLat.convert(f);const k=this.transform.clone();k.padding=M.padding;const L=this.getFreeCameraOptions(),K=new o.LngLat(.5*(l.lng+f.lng),.5*(l.lat+f.lat)),W=.5*(g+b);if(k._camera.position[2]<o.mercatorZfromAltitude(W,K.lat))return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");L.lookAtPoint(K),k.setFreeCameraOptions(L);const ee=o.MercatorCoordinate.fromLngLat(l),le=o.MercatorCoordinate.fromLngLat(f),Se=k.pointRayIntersection(k.centerPoint,W),ye=[(_e=k.rayIntersectionCoordinate(Se)).x,_e.y,_e.z];var _e;const we=k.screenPointToMercatorRay(k.centerPoint),pe=k.projection.name!=="globe";let Me,Ee=0;do{const Ye=Math.floor(k.zoom),We=1<<Ye,$e=Math.min(We*ee.x,We*le.x),Ze=Math.min(We*ee.y,We*le.y),Ge=Math.max(We*ee.x,We*le.x),Qe=Math.max(We*ee.y,We*le.y),ct=new o.Aabb([$e,Ze,g],[Ge,Qe,b]),Zt=o.Frustum.fromInvProjectionMatrix(k.invProjMatrix,k.worldSize,Ye,pe);if(ct.intersects(Zt)!==2){Me&&(k._camera.position=o.scaleAndAdd([],k._camera.position,we.dir,-Me),k._updateStateFromCamera());break}const at=o.sub([],k._camera.position,ye);Me=.5*o.length(at),k._camera.position=o.scaleAndAdd([],k._camera.position,we.dir,Me);try{k._updateStateFromCamera()}catch{return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Ee<10);return{center:k.center,zoom:k.zoom,bearing:k.bearing,pitch:k.pitch}}fitBounds(l,f,g){return this.transform.projection.name==="globe"&&o.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(l,f),f,g)}_raycastElevationBox(l,f){const g=this.transform.elevation;if(!g)return;const b=new o.pointGeometry(l.x,f.y),w=new o.pointGeometry(f.x,l.y),M=g.pointCoordinate(l);if(!M)return;const k=g.pointCoordinate(f);if(!k)return;const L=g.pointCoordinate(b);if(!L)return;const K=g.pointCoordinate(w);if(!K)return;const W=new o.MercatorCoordinate(M[0],M[1]).toLngLat(),ee=new o.MercatorCoordinate(k[0],k[1]).toLngLat(),le=new o.MercatorCoordinate(L[0],L[1]).toLngLat(),Se=new o.MercatorCoordinate(K[0],K[1]).toLngLat(),ye=Math.min(W.lng,Math.min(ee.lng,Math.min(le.lng,Se.lng))),_e=Math.min(W.lat,Math.min(ee.lat,Math.min(le.lat,Se.lat))),we=Math.max(W.lng,Math.max(ee.lng,Math.max(le.lng,Se.lng))),pe=Math.max(W.lat,Math.max(ee.lat,Math.max(le.lat,Se.lat))),Me=Math.min(M[3],Math.min(k[3],Math.min(L[3],K[3]))),Ee=Math.max(M[3],Math.max(k[3],Math.max(L[3],K[3])));return{minLngLat:new o.LngLat(ye,_e),maxLngLat:new o.LngLat(we,pe),minAltitude:Me,maxAltitude:Ee}}fitScreenCoordinates(l,f,g,b,w){let M,k,L,K;this.transform.projection.name==="globe"&&o.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const W=o.pointGeometry.convert(l),ee=o.pointGeometry.convert(f),le=this._raycastElevationBox(W,ee);if(le)M=le.minLngLat,k=le.maxLngLat,L=le.minAltitude,K=le.maxAltitude;else{if(this.transform.anyCornerOffEdge(W,ee))return this;M=this.transform.pointLocation(W),k=this.transform.pointLocation(ee)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(o.pointGeometry.convert(l)),this.transform.pointLocation(o.pointGeometry.convert(f)),g,b):this._cameraForBox(M,k,L,K,b),b,w)}_fitInternal(l,f,g){return l?(delete(f=o.extend(l,f)).padding,f.linear?this.easeTo(f,g):this.flyTo(f,g)):this}jumpTo(l,f){this.stop();const g=l.preloadOnly?this.transform.clone():this.transform;let b=!1,w=!1,M=!1;return"zoom"in l&&g.zoom!==+l.zoom&&(b=!0,g.zoom=+l.zoom),l.center!==void 0&&(g.center=o.LngLat.convert(l.center)),"bearing"in l&&g.bearing!==+l.bearing&&(w=!0,g.bearing=+l.bearing),"pitch"in l&&g.pitch!==+l.pitch&&(M=!0,g.pitch=+l.pitch),l.padding==null||g.isPaddingEqual(l.padding)||(g.padding=l.padding),l.preloadOnly?(this._preloadTiles(g),this):(this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),b&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),w&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),M&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Hf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,f){const g=this.transform;if(!g.projection.supportsFreeCamera)return o.warnOnce(Hf),this;this.stop();const b=g.zoom,w=g.pitch,M=g.bearing;g.setFreeCameraOptions(l);const k=b!==g.zoom,L=w!==g.pitch,K=M!==g.bearing;return this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),k&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),K&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),L&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)),this}easeTo(l,f){this._stop(!1,l.easeId),((l=o.extend({offset:[0,0],duration:500,easing:o.ease},l)).animate===!1||!l.essential&&o.exported.prefersReducedMotion)&&(l.duration=0);const g=this.transform,b=this.getZoom(),w=this.getBearing(),M=this.getPitch(),k=this.getPadding(),L="zoom"in l?+l.zoom:b,K="bearing"in l?this._normalizeBearing(l.bearing,w):w,W="pitch"in l?+l.pitch:M,ee="padding"in l?l.padding:g.padding,le=o.pointGeometry.convert(l.offset);let Se,ye,_e;if(g.projection.name==="globe"){const Qe=o.MercatorCoordinate.fromLngLat(g.center),ct=le.rotate(-g.angle);Qe.x+=ct.x/g.worldSize,Qe.y+=ct.y/g.worldSize;const Zt=Qe.toLngLat(),at=o.LngLat.convert(l.center||Zt);this._normalizeCenter(at),Se=g.centerPoint.add(ct),ye=new o.pointGeometry(Qe.x,Qe.y).mult(g.worldSize),_e=new o.pointGeometry(o.mercatorXfromLng(at.lng),o.mercatorYfromLat(at.lat)).mult(g.worldSize).sub(ye)}else{Se=g.centerPoint.add(le);const Qe=g.pointLocation(Se),ct=o.LngLat.convert(l.center||Qe);this._normalizeCenter(ct),ye=g.project(Qe),_e=g.project(ct).sub(ye)}const we=g.zoomScale(L-b);let pe,Me;l.around&&(pe=o.LngLat.convert(l.around),Me=g.locationPoint(pe));const Ee=this._zooming||L!==b,Ye=this._rotating||w!==K,We=this._pitching||W!==M,$e=!g.isPaddingEqual(ee),Ze=Qe=>ct=>{if(Ee&&(Qe.zoom=o.number(b,L,ct)),Ye&&(Qe.bearing=o.number(w,K,ct)),We&&(Qe.pitch=o.number(M,W,ct)),$e&&(Qe.interpolatePadding(k,ee,ct),Se=Qe.centerPoint.add(le)),pe)Qe.setLocationAtPoint(pe,Me);else{const Zt=Qe.zoomScale(Qe.zoom-b),at=L>b?Math.min(2,we):Math.max(.5,we),Dt=Math.pow(at,1-ct),$t=Qe.unproject(ye.add(_e.mult(ct*Dt)).mult(Zt));Qe.setLocationAtPoint(Qe.renderWorldCopies?$t.wrap():$t,Se)}return l.preloadOnly||this._fireMoveEvents(f),Qe};if(l.preloadOnly){const Qe=this._emulate(Ze,l.duration,g);return this._preloadTiles(Qe),this}const Ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ee,this._rotating=Ye,this._pitching=We,this._padding=$e,this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,Ge),this._ease(Ze(g),Qe=>{g.recenterOnTerrain(),this._afterEase(f,Qe)},l),this}_prepareEase(l,f,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||g.moving||this.fire(new o.Event("movestart",l)),this._zooming&&!g.zooming&&this.fire(new o.Event("zoomstart",l)),this._rotating&&!g.rotating&&this.fire(new o.Event("rotatestart",l)),this._pitching&&!g.pitching&&this.fire(new o.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new o.Event("move",l)),this._zooming&&this.fire(new o.Event("zoom",l)),this._rotating&&this.fire(new o.Event("rotate",l)),this._pitching&&this.fire(new o.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,b=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.Event("zoomend",l)),b&&this.fire(new o.Event("rotateend",l)),w&&this.fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l))}flyTo(l,f){if(!l.essential&&o.exported.prefersReducedMotion){const ln=o.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ln,f)}this.stop(),l=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},l);const g=this.transform,b=this.getZoom(),w=this.getBearing(),M=this.getPitch(),k=this.getPadding(),L="zoom"in l?o.clamp(+l.zoom,g.minZoom,g.maxZoom):b,K="bearing"in l?this._normalizeBearing(l.bearing,w):w,W="pitch"in l?+l.pitch:M,ee="padding"in l?l.padding:g.padding,le=g.zoomScale(L-b),Se=o.pointGeometry.convert(l.offset);let ye=g.centerPoint.add(Se);const _e=g.pointLocation(ye),we=o.LngLat.convert(l.center||_e);this._normalizeCenter(we);const pe=g.project(_e),Me=g.project(we).sub(pe);let Ee=l.curve;const Ye=Math.max(g.width,g.height),We=Ye/le,$e=Me.mag();if("minZoom"in l){const ln=o.clamp(Math.min(l.minZoom,b,L),g.minZoom,g.maxZoom),rn=Ye/g.zoomScale(ln-b);Ee=Math.sqrt(rn/$e*2)}const Ze=Ee*Ee;function Ge(ln){const rn=(We*We-Ye*Ye+(ln?-1:1)*Ze*Ze*$e*$e)/(2*(ln?We:Ye)*Ze*$e);return Math.log(Math.sqrt(rn*rn+1)-rn)}function Qe(ln){return(Math.exp(ln)-Math.exp(-ln))/2}function ct(ln){return(Math.exp(ln)+Math.exp(-ln))/2}const Zt=Ge(0);let at=function(ln){return ct(Zt)/ct(Zt+Ee*ln)},Dt=function(ln){return Ye*((ct(Zt)*(Qe(rn=Zt+Ee*ln)/ct(rn))-Qe(Zt))/Ze)/$e;var rn},$t=(Ge(1)-Zt)/Ee;if(Math.abs($e)<1e-6||!isFinite($t)){if(Math.abs(Ye-We)<1e-6)return this.easeTo(l,f);const ln=We<Ye?-1:1;$t=Math.abs(Math.log(We/Ye))/Ee,Dt=function(){return 0},at=function(rn){return Math.exp(ln*Ee*rn)}}l.duration="duration"in l?+l.duration:1e3*$t/("screenSpeed"in l?+l.screenSpeed/Ee:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const en=w!==K,Ct=W!==M,Yt=!g.isPaddingEqual(ee),Nt=ln=>rn=>{const yn=rn*$t,En=1/at(yn);ln.zoom=rn===1?L:b+ln.scaleZoom(En),en&&(ln.bearing=o.number(w,K,rn)),Ct&&(ln.pitch=o.number(M,W,rn)),Yt&&(ln.interpolatePadding(k,ee,rn),ye=ln.centerPoint.add(Se));const kn=rn===1?we:ln.unproject(pe.add(Me.mult(Dt(yn))).mult(En));return ln.setLocationAtPoint(ln.renderWorldCopies?kn.wrap():kn,ye),ln._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(f),ln};if(l.preloadOnly){const ln=this._emulate(Nt,l.duration,g);return this._preloadTiles(ln),this}return this._zooming=!0,this._rotating=en,this._pitching=Ct,this._padding=Yt,this._prepareEase(f,!1),this._ease(Nt(g),()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,f)}if(!l){const g=this.handlers;g&&g.stop(!1)}return this}_ease(l,f,g){g.animate===!1||g.duration===0?(l(1),f()):(this._easeStart=o.exported.now(),this._easeOptions=g,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=o.wrap(l,-180,180);const g=Math.abs(l-f);return Math.abs(l-360-f)<g&&(l-=360),Math.abs(l+360-f)<g&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const g=l.lng-f.center.lng;l.lng+=g>180?-360:g<-180?360:0}_emulate(l,f,g){const b=Math.ceil(15*f/1e3),w=[],M=l(g.clone());for(let k=0;k<=b;k++){const L=M(k/b);w.push(L.clone())}return w}}class qf{constructor(l={}){this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const f=this.options&&this.options.compact;return this._map=l,this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P("button","mapboxgl-ctrl-attrib-button",this._container),P("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const g=this._map._getUIString(`AttributionControl.${f}`);l.setAttribute("aria-label",g),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){const g=f.reduce((b,w,M)=>(w.value&&(b+=`${w.key}=${w.value}${M<f.length-1?"&":""}`),b),"?");l.href=`${o.config.FEEDBACK_URL}/${g}#${jf(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style._sourceCaches;for(const b in f){const w=f[b];if(w.used){const M=w.getSource();M.attribution&&l.indexOf(M.attribution)<0&&l.push(M.attribution)}}l.sort((b,w)=>b.length-w.length),l=l.filter((b,w)=>{for(let M=w+1;M<l.length;M++)if(l[M].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const g=l.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,l.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Wf{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=P("div","mapboxgl-ctrl");const f=P("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const f in l){const g=l[f].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class Zf{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,g=f?this._queue.concat(f):this._queue;for(const b of g)if(b.id===l)return void(b.cancelled=!0)}run(l=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const g of f)if(!g.cancelled&&(g.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Xf(p,l,f){if(p=new o.LngLat(p.lng,p.lat),l){const g=new o.LngLat(p.lng-360,p.lat),b=new o.LngLat(p.lng+360,p.lat),w=360*Math.ceil(Math.abs(p.lng-f.center.lng)/360),M=f.locationPoint(p).distSqr(l),k=l.x<0||l.y<0||l.x>f.width||l.y>f.height;f.locationPoint(g).distSqr(l)<M&&(k||Math.abs(g.lng-f.center.lng)<w)?p=g:f.locationPoint(b).distSqr(l)<M&&(k||Math.abs(b.lng-f.center.lng)<w)&&(p=b)}for(;Math.abs(p.lng-f.center.lng)>180;){const g=f.locationPoint(p);if(g.x>=0&&g.y>=0&&g.x<=f.width&&g.y<=f.height)break;p.lng>f.center.lng?p.lng-=360:p.lng+=360}return p}const hu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class $c extends o.Evented{constructor(l,f){if(super(),(l instanceof o.window.HTMLElement||f)&&(l=o.extend({element:l},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),l&&l.element)this._element=l.element,this._offset=o.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=P("div");const b=41,w=27,M=A("svg",{display:"block",height:b*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${b}`},this._element),k=A("radialGradient",{id:"shadowGradient"},A("defs",{},M));A("stop",{offset:"10%","stop-opacity":.4},k),A("stop",{offset:"100%","stop-opacity":.05},k),A("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},M),A("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},M),A("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},M),A("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},M),this._offset=o.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const g=this._element.classList;for(const b in hu)g.remove(`mapboxgl-marker-anchor-${b}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const f=l.code,g=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map;if(!l)return!1;const f=l.unproject(this._pos),g=l.getFreeCameraOptions();if(!g.position)return!1;const b=g.position.toLngLat();return b.distanceTo(f)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const f=this._pos;if(!f||f.x<0||f.x>l.transform.width||f.y<0||f.y>l.transform.height)return void this._clearFadeTimer();const g=l.unproject(f);let b;l._showingGlobe()&&o.isLngLatBehindGlobe(l.transform,this._lngLat)?b=0:(b=1-l._queryFogOpacity(g),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(b*=.2)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${hu[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const l=this._pos,f=this._map,g=this.getPitchAlignment();if(!f||!l||g!=="map")return"";if(!f._showingGlobe()){const L=f.getPitch();return L?`rotateX(${L}deg)`:""}const b=o.radToDeg(o.globeTiltAtLngLat(f.transform,this._lngLat)),w=l.sub(o.globeCenterToScreenPoint(f.transform)),M=Math.abs(w.x)+Math.abs(w.y);if(M===0)return"";const k=b/M;return`rotateX(${-w.y*k}deg) rotateY(${w.x*k}deg)`}_calculateZTransform(){const l=this._pos,f=this._map;if(!f||!l)return"";let g=0;const b=this.getRotationAlignment();if(b==="map")if(f._showingGlobe()){const w=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),M=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);g=o.radToDeg(Math.atan2(M.y,M.x))-90}else g=-f.getBearing();else if(b==="horizon"){const w=o.smoothstep(4,6,f.getZoom()),M=o.globeCenterToScreenPoint(f.transform);M.y+=w*f.transform.height;const k=l.sub(M),L=o.radToDeg(Math.atan2(k.y,k.x));g=(L>90?L-270:L+90)*(1-w)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(l){o.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=Xf(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),l===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=o.pointGeometry.convert(l),this._update(),this}_onMove(l){const f=this._map;if(f){if(!this._isDragging){const g=this._clickTolerance||f._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(l){const f=this._map;f&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos),this._pointerdownPos=l.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const f=this._map;return f&&(l?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class Om{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const f=o.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,f,g){this._start=this.getValue(f),this._end=l,this._startTime=f,this._endTime=f+g}}const Dm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Rm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function pu(p){p.parentNode&&p.parentNode.removeChild(p)}const zm={showCompass:!0,showZoom:!0,visualizePitch:!1};class Yf{constructor(l,f,g=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new Uf({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,g&&(this.mousePitch=new yi({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),F()}move(l,f){const g=this.map,b=this.mouseRotate.mousemoveWindow(l,f),w=b&&b.bearingDelta;if(w&&g.setBearing(g.getBearing()+w),this.mousePitch){const M=this.mousePitch.mousemoveWindow(l,f),k=M&&M.pitchDelta;k&&g.setPitch(g.getPitch()+k)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){N(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),q(this.element,l)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,q(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=V(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=V(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Lm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Jf={maxWidth:100,unit:"metric"};function Qf(p,l,f){const g=jc(l),b=g/l,w={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=p*b+"px",this._container.innerHTML=`${g}&nbsp;${w}`})}function jc(p){const l=Math.pow(10,`${Math.floor(p)}`.length-1);let f=p/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(g){const b=Math.pow(10,Math.ceil(-Math.log(g)/Math.LN10));return Math.round(g*b)/b}(f),l*f}const i_={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},o_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Vc(p=new o.pointGeometry(0,0),l="bottom"){if(typeof p=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(l){case"top":return new o.pointGeometry(0,p);case"top-left":return new o.pointGeometry(f,f);case"top-right":return new o.pointGeometry(-f,f);case"bottom":return new o.pointGeometry(0,-p);case"bottom-left":return new o.pointGeometry(f,-f);case"bottom-right":return new o.pointGeometry(-f,-f);case"left":return new o.pointGeometry(p,0);case"right":return new o.pointGeometry(-p,0)}return new o.pointGeometry(0,0)}return p instanceof o.pointGeometry||Array.isArray(p)?o.pointGeometry.convert(p):o.pointGeometry.convert(p[l]||[0,0])}const mu={version:o.version,supported:C,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends km{constructor(p){if((p=o.extend({},Rm,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(p.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new su(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=p.collectResourceTiming,this._optimizeForTerrain=p.optimizeForTerrain,this._language=p.language==="auto"?o.window.navigator.language:p.language,this._worldview=p.worldview,this._renderTaskQueue=new Zf,this._domRenderTaskQueue=new Zf,this._controls=[],this._markers=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Dm,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Om(0),this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,typeof p.container=="string"){if(this._container=o.window.document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Mm(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,p.style&&this.setStyle(p.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),this._hash=p.hash&&new fm(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,o.extend({},p.fitBoundsOptions,{duration:0})))),this.resize(),p.attributionControl&&this.addControl(new qf({customAttribution:p.customAttribution})),this._logoControl=new Wf,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new o.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new o.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(p,l){if(l===void 0&&(l=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=p.onAdd(this);this._controls.push(p);const g=this._controlPositions[l];return l.indexOf("bottom")!==-1?g.insertBefore(f,g.firstChild):g.appendChild(f),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(p);return l>-1&&this._controls.splice(l,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),this.fire(new o.Event("resize",p)),l&&this.fire(new o.Event("moveend",p)),this}getBounds(){return this.transform.projection.name==="globe"&&o.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(o.LngLatBounds.convert(p)),this._update()}setMinZoom(p){if((p=p==null?-2:p)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p==null?22:p)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p==null?0:p)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p==null?85:p)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this._update()}getLanguage(){return this._language}setLanguage(p){if(this._language=p==="auto"?o.window.navigator.language:p,this.style)for(const l in this.style._sourceCaches){const f=this.style._sourceCaches[l]._source;f._setLanguage&&f._setLanguage(this._language)}for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){if(this._worldview=p,this.style)for(const l in this.style._sourceCaches){const f=this.style._sourceCaches[l]._source;f._setWorldview&&f._setWorldview(p)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,l=p.projection.name;let f;l==="globe"&&p.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(p.setMercatorFromTransition(),f=!0):l==="mercator"&&p.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(p.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,l){return this._updateProjection(p||l||{name:"mercator"})}_updateProjection(p){let l;if(l=p.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0)}return this}project(p){return this.transform.locationPoint3D(o.LngLat.convert(p))}unproject(p){return this.transform.pointLocation3D(o.pointGeometry.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(p,l,f){if(p==="mouseenter"||p==="mouseover"){let g=!1;const b=M=>{const k=l.filter(K=>this.getLayer(K)),L=k.length?this.queryRenderedFeatures(M.point,{layers:k}):[];L.length?g||(g=!0,f.call(this,new Ti(p,this,M.originalEvent,{features:L}))):g=!1},w=()=>{g=!1};return{layers:new Set(l),listener:f,delegates:{mousemove:b,mouseout:w}}}if(p==="mouseleave"||p==="mouseout"){let g=!1;const b=M=>{const k=l.filter(L=>this.getLayer(L));(k.length?this.queryRenderedFeatures(M.point,{layers:k}):[]).length?g=!0:g&&(g=!1,f.call(this,new Ti(p,this,M.originalEvent)))},w=M=>{g&&(g=!1,f.call(this,new Ti(p,this,M.originalEvent)))};return{layers:new Set(l),listener:f,delegates:{mousemove:b,mouseout:w}}}{const g=b=>{const w=l.filter(k=>this.getLayer(k)),M=w.length?this.queryRenderedFeatures(b.point,{layers:w}):[];M.length&&(b.features=M,f.call(this,b),delete b.features)};return{layers:new Set(l),listener:f,delegates:{[p]:g}}}}on(p,l,f){if(f===void 0)return super.on(p,l);Array.isArray(l)||(l=[l]);const g=this._createDelegatedListener(p,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(g);for(const b in g.delegates)this.on(b,g.delegates[b]);return this}once(p,l,f){if(f===void 0)return super.once(p,l);Array.isArray(l)||(l=[l]);const g=this._createDelegatedListener(p,l,f);for(const b in g.delegates)this.once(b,g.delegates[b]);return this}off(p,l,f){if(f===void 0)return super.off(p,l);l=new Set(Array.isArray(l)?l:[l]);const g=(w,M)=>{if(w.size!==M.size)return!1;for(const k of w)if(!M.has(k))return!1;return!0},b=this._delegatedListeners?this._delegatedListeners[p]:void 0;return b&&(w=>{for(let M=0;M<w.length;M++){const k=w[M];if(k.listener===f&&g(k.layers,l)){for(const L in k.delegates)this.off(L,k.delegates[L]);return w.splice(M,1),this}}})(b),this}queryRenderedFeatures(p,l){return this.style?(l!==void 0||p===void 0||p instanceof o.pointGeometry||Array.isArray(p)||(l=p,p=void 0),this.style.queryRenderedFeatures(p=p||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(p,l){return this.style.querySourceFeatures(p,l)}queryTerrainElevation(p,l){const f=this.transform.elevation;return f?(l=o.extend({},{exaggerated:!0},l),f.getAtPoint(o.MercatorCoordinate.fromLngLat(p),null,l.exaggerated)):null}setStyle(p,l){return(l=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&p?(this._diffStyle(p,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(p,l))}_getUIString(p){const l=this._locale[p];if(l==null)throw new Error(`Missing UI string '${p}'`);return l}_updateStyle(p,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p&&(this.style=new po(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof p=="string"?this.style.loadURL(p):this.style.loadJSON(p)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new po(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(p,l){if(typeof p=="string"){const f=this._requestManager.normalizeStyleURL(p),g=this._requestManager.transformRequest(f,o.ResourceType.Style);o.getJSON(g,(b,w)=>{b?this.fire(new o.ErrorEvent(b)):w&&this._updateDiff(w,l)})}else typeof p=="object"&&this._updateDiff(p,l)}_updateDiff(p,l){try{this.style.setState(p)&&this._update(!0)}catch(f){o.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(p,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(p,l){return this._lazyInitEmptyStyle(),this.style.addSource(p,l),this._update(!0)}isSourceLoaded(p){return!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){const p=this.style&&this.style._sourceCaches;for(const l in p){const f=p[l]._tiles;for(const g in f){const b=f[g];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(p,l,f){this._lazyInitEmptyStyle(),this.style.addSourceType(p,l,f)}removeSource(p){return this.style.removeSource(p),this._updateTerrain(),this._update(!0)}getSource(p){return this.style.getSource(p)}addImage(p,l,{pixelRatio:f=1,sdf:g=!1,stretchX:b,stretchY:w,content:M}={}){if(this._lazyInitEmptyStyle(),l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap){const{width:k,height:L,data:K}=o.exported.getImageData(l);this.style.addImage(p,{data:new o.RGBAImage({width:k,height:L},K),pixelRatio:f,stretchX:b,stretchY:w,content:M,sdf:g,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:L}=l,K=l;this.style.addImage(p,{data:new o.RGBAImage({width:k,height:L},new Uint8Array(K.data)),pixelRatio:f,stretchX:b,stretchY:w,content:M,sdf:g,version:0,userImage:K}),K.onAdd&&K.onAdd(this,p)}}updateImage(p,l){const f=this.style.getImage(p);if(!f)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap?o.exported.getImageData(l):l,{width:b,height:w}=g;b!==void 0&&w!==void 0?b===f.data.width&&w===f.data.height?(f.data.replace(g.data,!(l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap)),this.style.updateImage(p,f)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${b}, ${w})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(p){return p?!!this.style.getImage(p):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,l){o.getImage(this._requestManager.transformRequest(p,o.ResourceType.Image),(f,g)=>{l(f,g instanceof o.window.HTMLImageElement?o.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(p,l){return this._lazyInitEmptyStyle(),this.style.addLayer(p,l),this._update(!0)}moveLayer(p,l){return this.style.moveLayer(p,l),this._update(!0)}removeLayer(p){return this.style.removeLayer(p),this._update(!0)}getLayer(p){return this.style.getLayer(p)}setLayerZoomRange(p,l,f){return this.style.setLayerZoomRange(p,l,f),this._update(!0)}setFilter(p,l,f={}){return this.style.setFilter(p,l,f),this._update(!0)}getFilter(p){return this.style.getFilter(p)}setPaintProperty(p,l,f,g={}){return this.style.setPaintProperty(p,l,f,g),this._update(!0)}getPaintProperty(p,l){return this.style.getPaintProperty(p,l)}setLayoutProperty(p,l,f,g={}){return this.style.setLayoutProperty(p,l,f,g),this._update(!0)}getLayoutProperty(p,l){return this.style.getLayoutProperty(p,l)}setLight(p,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(p,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(p),this.transform):0}setFeatureState(p,l){return this.style.setFeatureState(p,l),this._update()}removeFeatureState(p,l){return this.style.removeFeatureState(p,l),this._update()}getFeatureState(p){return this.style.getFeatureState(p)}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let f,g,b,w=this._container;for(;w&&(!g||!b);){const M=o.window.getComputedStyle(w).transform;M&&M!=="none"&&(f=M.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(g=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(b=f[3])),w=w.parentElement}this._containerWidth=g?Math.abs(p/g):p,this._containerHeight=b?Math.abs(l/b):l}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=P("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=P("div","mapboxgl-canvas-container",p);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=P("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=P("div","mapboxgl-control-container",p),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{g[b]=P("div",`mapboxgl-ctrl-${b}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,l){const f=o.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(p),this._canvas.height=f*Math.ceil(l),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${l}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const l=this._markers.indexOf(p);l!==-1&&this._markers.splice(l,1)}_setupPainter(){const p=o.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",p)||this._canvas.getContext("experimental-webgl",p);l?(o.storeAuthState(l,!0),this.painter=new Lf(l,this.transform),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(l)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let l;const f=this.painter.context.extTimerQuery,g=o.exported.now();if(this.listens("gpu-timing-frame")&&(l=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();let b=!1;const w=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const L=this.transform.zoom,K=this.transform.pitch,W=o.exported.now();this.style.zoomHistory.update(L,W);const ee=new o.EvaluationParameters(L,{now:W,fadeDuration:w,pitch:K,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),le=ee.crossFadingFactor();le===1&&le===this._crossFadingFactor||(b=!0,this._crossFadingFactor=le),this.style.update(ee)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let M=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),M=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerUpdate()):M=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,w,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||b)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const L=o.exported.now()-g;f.endQueryEXT(f.TIME_ELAPSED_EXT,l),setTimeout(()=>{const K=f.getQueryObjectEXT(l,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(l),this.fire(new o.Event("gpu-timing-frame",{cpuTime:L,gpuTime:K})),o.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:K}})},50)}if(this.listens("gpu-timing-layer")){const L=this.painter.collectGpuTimers();setTimeout(()=>{const K=this.painter.queryGpuTimers(L);this.fire(new o.Event("gpu-timing-layer",{layerTimes:K}))},50)}if(this.listens("gpu-timing-deferred-render")){const L=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const K=this.painter.queryGpuTimeDeferredRender(L);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:K}))},50)}const k=this._sourcesDirty||this._styleDirty||this._placementDirty||M;if(k||this._repaint)this.triggerRepaint();else{const L=!this.isMoving()&&this.loaded();if(L&&(M=this._updateAverageElevation(g,!0)),M)this.triggerRepaint();else if(this._triggerFrame(!1),L&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const K=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:K})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const p of this._markers)p._update()}_updateAverageElevation(p,l=!1){const f=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((l||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const g=this.transform.averageElevation;let b=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=p;const M=Math.abs(g-b);if(M>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(b),f(b);this._averageElevation.easeTo(b,p,300)}else if(M>1e-4)return this._averageElevation.jumpTo(b),f(b)}return!!this._averageElevation.isEasing(p)&&f(this._averageElevation.getValue(p))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===o.AUTH_ERR_MSG||p.status===401)){const l=this.painter.context.gl;o.storeAuthState(l,!1),this._logoControl instanceof Wf&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const f=this.painter.context.gl,g=f.createFramebuffer();function b(w){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,w,0);const M=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,M),M}return f.bindFramebuffer(f.FRAMEBUFFER,g),this._canvasPixelComparison(b(p),l.canvasCopies.map(b),l.timeStamps)}_canvasPixelComparison(p,l,f){let g=f[1]-f[0];const b=p.length/4;for(let w=0;w<l.length;w++){const M=l[w];let k=0;for(let L=0;L<M.length;L+=4)M[L]===p[L]&&M[L+1]===p[L+1]&&M[L+2]===p[L+2]&&M[L+3]===p[L+3]&&(k+=1);g+=(f[w+2]-f[w+1])*(1-k/b)}return g}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),pu(this._canvasContainer),pu(this._controlContainer),pu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=o.exported.frame(l=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(l)}))}_preloadTiles(p){const l=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(l,(f,g)=>f._preloadTiles(p,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}_setCacheLimits(p,l){o.setCacheLimits(p,l)}get version(){return o.version}},NavigationControl:class{constructor(p){this.options=o.extend({},zm,p),this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),P("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),P("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:l}):f.resetNorth({},{originalEvent:l}))}),this._compassIcon=P("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const l=p.getZoom(),f=l===p.getMaxZoom(),g=l===p.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yf(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,l){const f=P("button",p,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(p,l){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${l}`);p.setAttribute("aria-label",f),p.firstElementChild&&p.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends o.Evented{constructor(p){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},Lm,p),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=lu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){this._supportsGeolocation!==void 0?p(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(l=>{this._supportsGeolocation=l.state!=="denied",p(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,p(this._supportsGeolocation))}_isOutOfMapMaxBounds(p){const l=this._map.getMaxBounds(),f=p.coords;return!!l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",p)),this._finish()}}_updateCamera(p){const l=new o.LngLat(p.coords.longitude,p.coords.latitude),f=p.coords.accuracy,g=this._map.getBearing(),b=o.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),b,{geolocateSource:!0})}_updateMarker(p){if(p){const l=new o.LngLat(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,l=o.mercatorZfromAltitude(1,p._center.lat)*p.worldSize,f=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=P("button","mapboxgl-ctrl-geolocate",this._container),P("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P("div","mapboxgl-user-location"),this._dotElement.appendChild(P("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(P("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new $c({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=P("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $c({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:qf,ScaleControl:class{constructor(p){this.options=o.extend({},Jf,p),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Qf.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,l=this._map,f=l._containerHeight/2,g=l._containerWidth/2-p/2,b=l.unproject([g,f]),w=l.unproject([g+p,f]),M=b.distanceTo(w);if(this.options.unit==="imperial"){const k=3.2808*M;k>5280?this._setScale(p,k/5280,"mile"):this._setScale(p,k,"foot")}else this.options.unit==="nautical"?this._setScale(p,M/1852,"nautical-mile"):M>=1e3?this._setScale(p,M/1e3,"kilometer"):this._setScale(p,M,"meter")}_setScale(p,l,f){const g=jc(l),b=g/l;this._map._requestDomTask(()=>{this._container.style.width=p*b+"px",this._container.innerHTML=f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(g):`${g}&nbsp;nm`})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p){this._fullscreen=!1,p&&p.container&&(p.container instanceof o.window.HTMLElement?this._container=p.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=P("button","mapboxgl-ctrl-fullscreen",this._controlContainer);P("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(p){super(),this.options=o.extend(Object.create(i_),p),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=o.LngLat.convert(p),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(o.window.document.createTextNode(p))}setHTML(p){const l=o.window.document.createDocumentFragment(),f=o.window.document.createElement("body");let g;for(f.innerHTML=p;g=f.firstChild,g;)l.appendChild(g);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=P("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(p),this.options.closeButton){const f=this._closeButton=P("button","mapboxgl-popup-close-button",l);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let l;return this._classList.delete(p)?l=!1:(this._classList.add(p),l=!0),this._updateClassList(),l}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const l=this._map,f=this._container,g=this._pos;if(!l||!f||!g)return"bottom";const b=f.offsetWidth,w=f.offsetHeight,M=g.x<b/2,k=g.x>l.transform.width-b/2;if(g.y+p<w)return M?"top-left":k?"top-right":"top";if(g.y>l.transform.height-w){if(M)return"bottom-left";if(k)return"bottom-right"}return M?"left":k?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),p.className=l.join(" ")}_update(p){const l=this._map,f=this._content;if(!l||!this._lngLat&&!this._trackPointer||!f)return;let g=this._container;if(g||(g=this._container=P("div","mapboxgl-popup",l.getContainer()),this._tip=P("div","mapboxgl-popup-tip",g),g.appendChild(f)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Xf(this._lngLat,this._pos,l.transform)),!this._trackPointer||p){const b=this._pos=this._trackPointer&&p?p:l.project(this._lngLat),w=Vc(this.options.offset),M=this._anchor=this._getAnchor(w.y),k=Vc(this.options.offset,M),L=b.add(k).round();l._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${hu[M]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&l._showingGlobe()){const b=o.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(o_);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:$c,Style:po,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:fn,Evented:o.Evented,config:o.config,prewarm:function(){nr().acquire(vn)},clearPrewarmedResources:function(){const p=Nn;p&&(p.isPreloaded()&&p.numActive()===1?(p.release(vn),Nn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(p){o.config.ACCESS_TOKEN=p},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(p){o.config.API_URL=p},get workerCount(){return In.workerCount},set workerCount(p){In.workerCount=p},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){o.config.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){o.clearTileCache(p)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return mu});var m=u;return m})})(Lz);const bM=Lz.exports,$re=jt({data(){return{map:null}},mounted(){const t=this;bM.accessToken="pk.eyJ1IjoiYm9sbGF0aWFsZnJlZG8iLCJhIjoiY2xhNzdsaXk0MTdwaDNzcHF6ZWd1MTh3YSJ9.taSKUWamlEA6BuZ3UPEqGA";const e=new bM.Map({container:t.$refs.map,style:"mapbox://styles/mapbox/dark-v10",center:[-105.55443737719791,40.09393206067918],zoom:9,projection:"globe"});e.on("style.load",()=>{e.setFog({})}),this.map=e}}),jre={class:"h-full",ref:"map"};function Vre(t,e,r,i,u,d){return li(),$o("div",jre,null,512)}const Ure=$l($re,[["render",Vre]]),Kre="FeatureCollection",Gre=[{type:"Feature",properties:{name:"Denver area"},geometry:{coordinates:[[[-105.55443737719791,40.09393206067918],[-105.55443737719791,39.456497234557105],[-104.40850539328748,39.456497234557105],[-104.40850539328748,40.09393206067918],[-105.55443737719791,40.09393206067918]]],type:"Polygon"}},{type:"Feature",properties:{name:"BT001"},geometry:{coordinates:[-104.8412349536454,39.83905133150006],type:"Point"}},{type:"Feature",properties:{name:"BT002"},geometry:{coordinates:[-105.11369430646307,39.598659399389334],type:"Point"}},{type:"Feature",properties:{name:"BT003"},geometry:{coordinates:[-104.7771268706293,38.94729276882933],type:"Point"}}],Hre={type:Kre,features:Gre},qre={data(){return{geoJsonElements:Hre}},methods:{addFeatures(){const t=this.$refs.map.map;t.addSource("features",{type:"geojson",data:this.geoJsonElements}),t.addLayer({id:"park-boundary",type:"fill",source:"features",paint:{"fill-color":"#888888","fill-opacity":.4},filter:["==","$type","Polygon"]}),t.addLayer({id:"park-volcanoes",type:"circle",source:"features",paint:{"circle-radius":6,"circle-color":"#B42222"},filter:["==","$type","Point"]})}},mounted(){this.$refs.map.map.on("load",()=>{this.addFeatures()})}},Wre={class:"h-full"};function Zre(t,e,r,i,u,d){const m=Ure;return li(),$o("div",Wre,[j(m,{ref:"map"},null,512)])}const wM=$l(qre,[["render",Zre]]),Xre={props:{title:String},emits:["submitUser"],setup(t,e){const r={labelCol:{span:8},wrapperCol:{span:16}},i={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},u=qe(),d=qe(!1),m=Or({user:{name:"",lastName:"",age:0,email:"",phone:""}}),o=C=>{_(),e.emit("submitUser",C.user)},_=C=>{d.value=!d.value,C&&C.first_name&&C.last_name&&C.email?(m.user.name=C.first_name,m.user.lastName=C.last_name,m.user.email=C.email,C.age&&(m.user.age=Number(C.age)),C.phone&&(m.user.phone=C.phone)):m.user={name:"",lastName:"",age:0,email:"",phone:""}};return e.expose({toggleModal:_}),{onFinish:o,toggleModal:_,visible:d,formState:m,layout:r,formRef:u,validateMessages:i}}};function Yre(t,e,r,i,u,d){const m=vi,o=qw,_=PX,C=Xi,T=zs,S=Vo;return li(),$o("div",null,[j(S,{class:"no-modal-footer",visible:i.visible,"onUpdate:visible":e[5]||(e[5]=P=>i.visible=P),title:r.title},{footer:pr(()=>[]),default:pr(()=>[j(T,wk({class:"user-form",model:i.formState},i.layout,{name:"add-user",ref:"formRef","validate-messages":i.validateMessages,onFinish:i.onFinish}),{default:pr(()=>[j(o,{name:["user","name"],label:"Name",rules:[{required:!0}]},{default:pr(()=>[j(m,{value:i.formState.user.name,"onUpdate:value":e[0]||(e[0]=P=>i.formState.user.name=P)},null,8,["value"])]),_:1}),j(o,{name:["user","lastName"],label:"Last Name",rules:[{required:!0}]},{default:pr(()=>[j(m,{value:i.formState.user.lastName,"onUpdate:value":e[1]||(e[1]=P=>i.formState.user.lastName=P)},null,8,["value"])]),_:1}),j(o,{name:["user","email"],label:"Email",rules:[{required:!0},{type:"email"}]},{default:pr(()=>[j(m,{value:i.formState.user.email,"onUpdate:value":e[2]||(e[2]=P=>i.formState.user.email=P)},null,8,["value"])]),_:1}),j(o,{name:["user","phone"],label:"Phone Number"},{default:pr(()=>[j(m,{value:i.formState.user.phone,"onUpdate:value":e[3]||(e[3]=P=>i.formState.user.phone=P)},null,8,["value"])]),_:1}),j(o,{name:["user","age"],label:"Age",rules:[{type:"number",min:0,max:200}]},{default:pr(()=>[j(_,{value:i.formState.user.age,"onUpdate:value":e[4]||(e[4]=P=>i.formState.user.age=P)},null,8,["value"])]),_:1}),j(o,{"wrapper-col":{...i.layout.wrapperCol,offset:8}},{default:pr(()=>[j(C,{class:"mt-4",type:"primary","html-type":"submit"},{default:pr(()=>[Zi("Submit")]),_:1}),j(C,{class:"ml-2",type:"secondary",onClick:i.toggleModal},{default:pr(()=>[Zi("Cancel")]),_:1},8,["onClick"])]),_:1},8,["wrapper-col"])]),_:1},16,["model","validate-messages","onFinish"])]),_:1},8,["visible","title"])])}const Jre=$l(Xre,[["render",Yre],["__scopeId","data-v-1982c607"]]);class Qre{constructor(){cT(this,"normalize",e=>(e.age&&(e.age=e.age),e))}}const eie=async()=>{let t=await Kg.get(dre);return t=t.data.map(e=>new Qre().normalize(e)),t},tie=IC("users",{state:()=>({users:[]}),getters:{getUsers:t=>t.users},actions:{async fetchUsers(){try{const t=await eie();this.users=t}catch(t){console.error(t)}},async deleteUser(t){this.users=this.users.filter(e=>t.user_id!==e.user_id),console.log(this.users)},async addUser(t){t.first_name=t.name,t.last_name=t.lastName,this.users.push(t)}}}),nie={components:{Icon:TC},setup(){const t=tie(),e=Or({addEditModal:{},deleteModal:{}}),r=[{title:"Name",dataIndex:"first_name"},{title:"Last Name",dataIndex:"last_name"},{title:"Age",dataIndex:"age"},{title:"Email",dataIndex:"email"},{title:"Phone Number",dataIndex:"phone"},{title:"",dataIndex:"action"}],i=o=>{var _;(_=e.addEditModal)==null||_.toggleModal(o)},u=o=>{t.addUser(o)},d=o=>{var _;(_=e.deleteModal)==null||_.toggleModal(o)},m=o=>{t.deleteUser({...o})};return t.fetchUsers(),{...Wu(e),handleAddEditClicked:i,handleSubmit:u,handleDeleteClicked:d,confirmDelete:m,columns:r,store:t}}},rie={key:0,class:"flex"},iie=["onClick"],oie=["onClick"];function aie(t,e,r,i,u,d){const m=qh("Icon"),o=UQ,_=Xi,C=Jre,T=FR;return li(),$o("div",null,[j(o,{class:"ant-table-striped",size:"middle",columns:i.columns,"data-source":i.store.getUsers},{bodyCell:pr(({column:S,record:P})=>[S.dataIndex==="action"?(li(),$o("div",rie,[oo("a",{onClick:A=>i.handleAddEditClicked(P),class:"mr-2"},[j(m,{icon:"icon:pen",height:"20",width:"20"})],8,iie),oo("a",{onClick:A=>i.handleDeleteClicked(P)},[j(m,{icon:"icon:trash",height:"20",width:"20"})],8,oie)])):bk("",!0)]),_:1},8,["columns","data-source"]),j(_,{onClick:i.handleAddEditClicked,class:"floating-btn",size:"large",type:"primary",shape:"circle"},{default:pr(()=>[j(m,{icon:"icon:plus",height:"27",width:"39"})]),_:1},8,["onClick"]),j(C,{onSubmitUser:i.handleSubmit,title:"Add User",ref:"addEditModal"},null,8,["onSubmitUser"]),j(T,{msg:"Are you sure you want to delete this user?",title:"Delete User",onEmitItem:i.confirmDelete,ref:"deleteModal"},null,8,["onEmitItem"])])}const sie=$l(nie,[["render",aie]]),lie=[{path:"/tracker",component:wM},{path:"/tracker/users",component:sie},{path:"/",component:wM}],uie=Kte({history:ate(),routes:lie}),cie=()=>{VR({prefix:"icon",icons:{account:{body:'<path d="M11.5 14c4.142 0 7.5 1.567 7.5 3.5V20H4v-2.5c0-1.933 3.358-3.5 7.5-3.5zm6.5 3.5c0-1.38-2.91-2.5-6.5-2.5S5 16.12 5 17.5V19h13v-1.5zM11.5 5a3.5 3.5 0 1 1 0 7a3.5 3.5 0 0 1 0-7zm0 1a2.5 2.5 0 1 0 0 5a2.5 2.5 0 0 0 0-5z" fill="currentColor"/>'},home:{body:'<path d="M16 8.414l-4.5-4.5L4.414 11H6v8h3v-6h5v6h3v-8h1.586L17 9.414V6h-1v2.414zM2 12l9.5-9.5L15 6V5h3v4l3 3h-3v7.998h-5v-6h-3v6H5V12H2z" fill="currentColor"/>'},globe:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="currentColor" d="M26.58 32h-18a1 1 0 1 0 0 2h18a1 1 0 0 0 0-2Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="currentColor" d="M17.75 2a14 14 0 0 0-14 14c0 .45 0 .89.07 1.33A14 14 0 1 0 17.75 2Zm0 2a12 12 0 0 1 8.44 3.48v1A18.51 18.51 0 0 0 14 8.53a2.33 2.33 0 0 0-1.14-.61h-.25c-.12-.42-.23-.84-.32-1.27s-.14-.81-.19-1.22A11.92 11.92 0 0 1 17.75 4Zm-3 5.87a17 17 0 0 1 11.17.13a16.9 16.9 0 0 1-3.11 7a2.28 2.28 0 0 0-2.58.57c-.35-.2-.7-.4-1-.63a16 16 0 0 1-4.93-5.23a2.25 2.25 0 0 0 .47-1.77Zm-4-3.6c0 .21.06.43.1.64c.09.44.21.87.33 1.3a2.28 2.28 0 0 0-1.1 2.25a18.32 18.32 0 0 0-4.18 3.76a12 12 0 0 1 4.86-7.95Zm0 15.71a2.34 2.34 0 0 0-1.55 1.76h-.64a11.94 11.94 0 0 1-2.76-6.82l.11-.19a16.9 16.9 0 0 1 4.81-4.89a2.31 2.31 0 0 0 2.28.63a17.53 17.53 0 0 0 5.35 5.65c.41.27.83.52 1.25.76a2.32 2.32 0 0 0 .18 1.12a16.94 16.94 0 0 1-6.2 3.11A2.34 2.34 0 0 0 10.76 22Zm7 6a11.92 11.92 0 0 1-5.81-1.51l.28-.06a2.34 2.34 0 0 0 1.57-1.79a18.43 18.43 0 0 0 7-3.5a2.29 2.29 0 0 0 3-.62a17.41 17.41 0 0 0 4.32.56h.53A12 12 0 0 1 17.75 28Zm6.51-8.9a2.33 2.33 0 0 0-.33-1.19a18.4 18.4 0 0 0 3.39-7.37q.75.35 1.48.78a12 12 0 0 1 .42 8.2a16 16 0 0 1-4.95-.39Z" class="clr-i-outline clr-i-outline-path-2"/><path fill="none" d="M0 0h36v36H0z"/></svg>'},sidebaropen:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><g transform="rotate(90 18 18)"><path fill="currentColor" d="M31 31H5a1 1 0 0 0 0 2h26a1 1 0 0 0 0-2ZM8.81 15L17 6.83v20.65a1 1 0 0 0 2 0V6.83L27.19 15a1 1 0 0 0 1.41-1.41L18 3L7.39 13.61A1 1 0 1 0 8.81 15Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="none" d="M0 0h36v36H0z"/></g></svg>'},sidebarclose:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><g transform="rotate(-90 18 18)"><path fill="currentColor" d="M31 31H5a1 1 0 0 0 0 2h26a1 1 0 0 0 0-2ZM8.81 15L17 6.83v20.65a1 1 0 0 0 2 0V6.83L27.19 15a1 1 0 0 0 1.41-1.41L18 3L7.39 13.61A1 1 0 1 0 8.81 15Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="none" d="M0 0h36v36H0z"/></g></svg>'},table:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="currentColor" d="M4 6h18v2H4zm0 6h18v2H4zm0 6h18v2H4zm0 6h18v2H4zM26 6h2v2h-2zm0 6h2v2h-2zm0 6h2v2h-2zm0 6h2v2h-2z"/></svg>'},settings:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="currentColor" d="M18.1 11c-3.9 0-7 3.1-7 7s3.1 7 7 7s7-3.1 7-7s-3.1-7-7-7zm0 12c-2.8 0-5-2.2-5-5s2.2-5 5-5s5 2.2 5 5s-2.2 5-5 5z" class="clr-i-outline clr-i-outline-path-1"/><path fill="currentColor" d="m32.8 14.7l-2.8-.9l-.6-1.5l1.4-2.6c.3-.6.2-1.4-.3-1.9l-2.4-2.4c-.5-.5-1.3-.6-1.9-.3l-2.6 1.4l-1.5-.6l-.9-2.8C21 2.5 20.4 2 19.7 2h-3.4c-.7 0-1.3.5-1.4 1.2L14 6c-.6.1-1.1.3-1.6.6L9.8 5.2c-.6-.3-1.4-.2-1.9.3L5.5 7.9c-.5.5-.6 1.3-.3 1.9l1.3 2.5c-.2.5-.4 1.1-.6 1.6l-2.8.9c-.6.2-1.1.8-1.1 1.5v3.4c0 .7.5 1.3 1.2 1.5l2.8.9l.6 1.5l-1.4 2.6c-.3.6-.2 1.4.3 1.9l2.4 2.4c.5.5 1.3.6 1.9.3l2.6-1.4l1.5.6l.9 2.9c.2.6.8 1.1 1.5 1.1h3.4c.7 0 1.3-.5 1.5-1.1l.9-2.9l1.5-.6l2.6 1.4c.6.3 1.4.2 1.9-.3l2.4-2.4c.5-.5.6-1.3.3-1.9l-1.4-2.6l.6-1.5l2.9-.9c.6-.2 1.1-.8 1.1-1.5v-3.4c0-.7-.5-1.4-1.2-1.6zm-.8 4.7l-3.6 1.1l-.1.5l-.9 2.1l-.3.5l1.8 3.3l-2 2l-3.3-1.8l-.5.3c-.7.4-1.4.7-2.1.9l-.5.1l-1.1 3.6h-2.8l-1.1-3.6l-.5-.1l-2.1-.9l-.5-.3l-3.3 1.8l-2-2l1.8-3.3l-.3-.5c-.4-.7-.7-1.4-.9-2.1l-.1-.5L4 19.4v-2.8l3.4-1l.2-.5c.2-.8.5-1.5.9-2.2l.3-.5l-1.7-3.3l2-2l3.2 1.8l.5-.3c.7-.4 1.4-.7 2.2-.9l.5-.2L16.6 4h2.8l1.1 3.5l.5.2c.7.2 1.4.5 2.1.9l.5.3l3.3-1.8l2 2l-1.8 3.3l.3.5c.4.7.7 1.4.9 2.1l.1.5l3.6 1.1v2.8z" class="clr-i-outline clr-i-outline-path-2"/><path fill="none" d="M0 0h36v36H0z"/></svg>'},notification:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="currentColor" d="M32.51 27.83A14.4 14.4 0 0 1 30 24.9a12.63 12.63 0 0 1-1.35-4.81v-4.94A10.81 10.81 0 0 0 19.21 4.4V3.11a1.33 1.33 0 1 0-2.67 0v1.31a10.81 10.81 0 0 0-9.33 10.73v4.94a12.63 12.63 0 0 1-1.35 4.81a14.4 14.4 0 0 1-2.47 2.93a1 1 0 0 0-.34.75v1.36a1 1 0 0 0 1 1h27.8a1 1 0 0 0 1-1v-1.36a1 1 0 0 0-.34-.75ZM5.13 28.94a16.17 16.17 0 0 0 2.44-3a14.24 14.24 0 0 0 1.65-5.85v-4.94a8.74 8.74 0 1 1 17.47 0v4.94a14.24 14.24 0 0 0 1.65 5.85a16.17 16.17 0 0 0 2.44 3Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="currentColor" d="M18 34.28A2.67 2.67 0 0 0 20.58 32h-5.26A2.67 2.67 0 0 0 18 34.28Z" class="clr-i-outline clr-i-outline-path-2"/><path fill="none" d="M0 0h36v36H0z"/></svg>'},help:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="currentColor" d="M18 2a16 16 0 1 0 16 16A16 16 0 0 0 18 2Zm0 30a14 14 0 1 1 14-14a14 14 0 0 1-14 14Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="currentColor" d="M18.29 8.92a7.38 7.38 0 0 0-5.72 2.57a1 1 0 0 0-.32.71a.92.92 0 0 0 .95.92a1.08 1.08 0 0 0 .71-.29a5.7 5.7 0 0 1 4.33-2c2.36 0 3.83 1.52 3.83 3.41v.05c0 2.21-1.76 3.44-4.54 3.65a.8.8 0 0 0-.76.92s0 2.32 0 2.75a1 1 0 0 0 1 .9h.11a1 1 0 0 0 .9-1v-2.06c3-.42 5.43-2 5.43-5.28v-.05c-.03-3-2.37-5.2-5.92-5.2Z" class="clr-i-outline clr-i-outline-path-2"/><circle cx="17.78" cy="26.2" r="1.25" fill="currentColor" class="clr-i-outline clr-i-outline-path-3"/><path fill="none" d="M0 0h36v36H0z"/></svg>'},logout:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1024 1024"><path fill="currentColor" d="M116.832 543.664H671.28c17.696 0 32-14.336 32-32s-14.304-32-32-32H118.832l115.76-115.76c12.496-12.496 12.496-32.752 0-45.248s-32.752-12.496-45.248 0l-189.008 194l189.008 194c6.256 6.256 14.432 9.376 22.624 9.376s16.368-3.12 22.624-9.376c12.496-12.496 12.496-32.752 0-45.248zM959.664 0H415.663c-35.36 0-64 28.656-64 64v288h64.416V103.024c0-21.376 17.344-38.72 38.72-38.72h464.72c21.391 0 38.72 17.344 38.72 38.72l1.007 818.288c0 21.376-17.328 38.72-38.72 38.72h-465.71c-21.376 0-38.72-17.344-38.72-38.72V670.944l-64.416.08V960c0 35.344 28.64 64 64 64h543.984c35.36 0 64.016-28.656 64.016-64V64c-.015-35.344-28.671-64-64.015-64z"/></svg>'},plus:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="currentColor" d="M30 17H19V6a1 1 0 1 0-2 0v11H6a1 1 0 0 0-1 1a.91.91 0 0 0 1 .94h11V30a1 1 0 1 0 2 0V19h11a1 1 0 0 0 1-1a1 1 0 0 0-1-1Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="none" d="M0 0h36v36H0z"/></svg>'},pen:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="currentColor" d="M33.87 8.32L28 2.42a2.07 2.07 0 0 0-2.92 0L4.27 23.2l-1.9 8.2a2.06 2.06 0 0 0 2 2.5a2.14 2.14 0 0 0 .43 0l8.29-1.9l20.78-20.76a2.07 2.07 0 0 0 0-2.92ZM12.09 30.2l-7.77 1.63l1.77-7.62L21.66 8.7l6 6ZM29 13.25l-6-6l3.48-3.46l5.9 6Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="none" d="M0 0h36v36H0z"/></svg>'},trash:{body:'<svg xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36"><path fill="currentColor" d="M27.14 34H8.86A2.93 2.93 0 0 1 6 31V11.23h2V31a.93.93 0 0 0 .86 1h18.28a.93.93 0 0 0 .86-1V11.23h2V31a2.93 2.93 0 0 1-2.86 3Z" class="clr-i-outline clr-i-outline-path-1"/><path fill="currentColor" d="M30.78 9H5a1 1 0 0 1 0-2h25.78a1 1 0 0 1 0 2Z" class="clr-i-outline clr-i-outline-path-2"/><path fill="currentColor" d="M21 13h2v15h-2z" class="clr-i-outline clr-i-outline-path-3"/><path fill="currentColor" d="M13 13h2v15h-2z" class="clr-i-outline clr-i-outline-path-4"/><path fill="currentColor" d="M23 5.86h-1.9V4h-6.2v1.86H13V4a2 2 0 0 1 1.9-2h6.2A2 2 0 0 1 23 4Z" class="clr-i-outline clr-i-outline-path-5"/><path fill="none" d="M0 0h36v36H0z"/></svg>'}},width:24,height:24})},die=t=>{const e=t.target,r=document.createElement("span");r.style.position="absolute",r.style.top=t.offsetY-5+"px",r.style.left=t.offsetX-5+"px",r.style.height="10px",r.style.width="10px",r.style.borderRadius="100px",r.style.opacity="1",r.style.backgroundColor="#1890ff",r.style.pointerEvents="none",r.style.zIndex="9999",e==null||e.appendChild(r);const i=setInterval(()=>{r.style.opacity=(parseFloat(r.style.opacity)-.033).toString(),r.style.top=parseInt(r.style.top)-4+"px",r.style.left=parseInt(r.style.left)-4+"px",r.style.height=parseInt(r.style.height)+8+"px",r.style.width=parseInt(r.style.width)+8+"px"},10);setTimeout(()=>{clearInterval(i),e==null||e.removeChild(r)},300)},fie=function(){const t=zz();Kg.interceptors.request.use(function(e){const r="a demo token";return e.headers&&!e.headers.Authorization&&(e.headers.Authorization=`Bearer ${r}`,t.startLoading()),e},function(e){return Promise.reject(e)}),Kg.interceptors.response.use(function(e){return t.stopLoading(),e},function(e){return t.stopLoading(),Promise.reject(e)})},hie=Wte();cie();const LC=k5(Nre);LC.use(uie).use(hie);LC.directive("wave-animation",{beforeMount(t){const e=document.createElement("div");e.classList.add("animated-button","select-none"),e.onclick=die,t.insertBefore(e,t.firstChild)}});fie();LC.mount("#app")});export default pie();
